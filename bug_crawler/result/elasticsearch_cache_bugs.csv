,number,title,body,user,state,labels,url,created_at,comments,repository_url,html_url,application_resoure
0,136701,org.elasticsearch.ingest.common.AppendProcessorTests.testCopyFromOtherField very very rare failure,"### CI Link

https://gradle-enterprise.elastic.co/s/ibujerii6cnqu

### Repro line

./gradlew "":modules:ingest-common:test"" -Dtests.iters=10000 -Dtests.failfast=true --tests ""org.elasticsearch.ingest.common.AppendProcessorTests""

### Does it reproduce?

Yes

### Applicable branches

main

### Failure history

_No response_

### Failure excerpt

./gradlew "":modules:ingest-common:test"" -Dtests.iters=10000 -Dtests.failfast=true --tests ""org.elasticsearch.ingest.common.AppendProcessorTests""
[... so much output ...]
  2> REPRODUCE WITH: ./gradlew "":modules:ingest-common:test"" --tests ""org.elasticsearch.ingest.common.AppendProcessorTests.testCopyFromOtherField {seed=[DAFB357964D00301:C2D44A33368AEFE1]}"" -Dtests.seed=DAFB357964D00301 -Dtests.locale=ca-Latn-ES -Dtests.timezone=Australia/Darwin -Druntime.java=25
  2> java.lang.IllegalArgumentException: path [Ó§ºÒìõìÒ™±ìÛÜñÄùáÜÚãÑ¨Û∏ÇçÛãÜòÒÖöõ..ÒÆùàÛçëØ∂•ÜÚÅê¢ëçëÚáçûÛ∞±óÛØèèÚ≠∂Ö.EswfMbbSHE.ZY] is not valid
        at __randomizedtesting.SeedInfo.seed([DAFB357964D00301:C2D44A33368AEFE1]:0)
        at org.elasticsearch.ingest.IngestDocument$FieldPath.validateClassicFields(IngestDocument.java:1391)
        at org.elasticsearch.ingest.IngestDocument$FieldPath.processPathParts(IngestDocument.java:1376)
        at org.elasticsearch.ingest.IngestDocument$FieldPath.<init>(IngestDocument.java:1371)
        at org.elasticsearch.ingest.IngestDocument$FieldPath.of(IngestDocument.java:1345)
        at org.elasticsearch.ingest.IngestDocument.setFieldValue(IngestDocument.java:754)
        at org.elasticsearch.ingest.IngestDocument.setFieldValue(IngestDocument.java:694)
        at org.elasticsearch.ingest.RandomDocumentPicks.addRandomField(RandomDocumentPicks.java:108)
        at org.elasticsearch.ingest.common.AppendProcessorTests.testCopyFromOtherField(AppendProcessorTests.java:335)
  2> NOTE: leaving temporary files on disk at: /Users/joegallo/Code/elastic/elasticsearch/modules/ingest-common/build/testrun/test/temp/org.elasticsearch.ingest.common.AppendProcessorTests_DAFB357964D00301-001
  2> NOTE: test params are: codec=Asserting(Lucene103): {}, docValues:{}, maxPointsInLeafNode=26, maxMBSortInHeap=5.134741186584475, sim=Asserting(RandomSimilarity(queryNorm=true): {}), locale=ca-Latn-ES, timezone=Australia/Darwin
  2> NOTE: Mac OS X 15.7.1 aarch64/Oracle Corporation 25 (64-bit)/cpus=12,threads=1,free=288959000,total=536870912
  2> NOTE: All tests run in this JVM: [AppendProcessorTests]

Tests with failures:
 - org.elasticsearch.ingest.common.AppendProcessorTests.testCopyFromOtherField {seed=[DAFB357964D00301:C2D44A33368AEFE1]}

130000 tests completed, 1 failed, 81705 skipped

> Task :modules:ingest-common:test FAILED

FAILURE: Build failed with an exception.

* What went wrong:
Execution failed for task ':modules:ingest-common:test'.
> There were failing tests. See the report at: file:///Users/joegallo/Code/elastic/elasticsearch/modules/ingest-common/build/reports/tests/test/index.html

BUILD FAILED in 1m 15s
100 actionable tasks: 1 executed, 99 up-to-date

Publishing Build Scan...
https://gradle-enterprise.elastic.co/s/ibujerii6cnqu",joegallo,closed,"['>test-failure', ':Data Management/Ingest Node', 'Team:Data Management', 'needs:risk']",https://github.com/elastic/elasticsearch/issues/136701,2025-10-16T14:52:00Z,3,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/136701,"{
  ""application_resource"": ""unsure""
}"
1,135407,[CI] IndexingIT testIndexing failing,"**Build Scans:**
- [elasticsearch-intake #29026 / 9.2.0_bwc-snapshots](https://gradle-enterprise.elastic.co/s/3eeakildzuq6u)
- [elasticsearch-intake #29018 / 9.0.8_bwc-snapshots](https://gradle-enterprise.elastic.co/s/4twuqshdvjiss)

**Reproduction Line:**
```
./gradlew "":x-pack:qa:rolling-upgrade:v9.2.0#upgradedClusterTest"" -Dtests.class=""org.elasticsearch.upgrades.IndexingIT"" -Dtests.method=""testIndexing"" -Dtests.seed=F70ECBC8A5C1BD21 -Dtests.bwc=true -Dtests.locale=ti -Dtests.timezone=Asia/Oral -Druntime.java=25
```

**Applicable branches:**
main

**Reproduces locally?:**
N/A

**Failure History:**
[See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&_a=(controlGroupState:(initialChildControlState:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:task.keyword,order:0,selectedOptions:!(),title:'GradleTask',type:optionsListControl),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:className.keyword,order:1,selectedOptions:!(org.elasticsearch.upgrades.IndexingIT),title:'Suite',type:optionsListControl),'144933da-5c1b-4257-a969-7f43455a7901':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:name.keyword,order:2,selectedOptions:!('testIndexing'),title:'Test',type:optionsListControl)))))

**Failure Message:**
```
java.lang.AssertionError: timed out waiting for green state for index [test_index,index_with_replicas,empty_index] cluster state [{
  ""cluster_name"" : ""v9.2.0"",
  ""cluster_uuid"" : ""gyhgkq5gTN-_JMIMXgD7Xw"",
  ""version"" : 1778,
  ""state_uuid"" : ""nCxM-IPnSt-lLUVd0Yuvzw"",
  ""master_node"" : ""r5tvncrmRnGnH-KpVpAnbA"",
  ""blocks"" : {
    ""indices"" : {
      ""mounted_index_shared_cache"" : {
        ""8"" : {
          ""description"" : ""index write (api)"",
          ""retryable"" : false,
          ""levels"" : [
            ""write""
          ]
        }
      },
      ""mounted_index_full_copy"" : {
        ""8"" : {
          ""description"" : ""index write (api)"",
          ""retryable"" : false,
          ""levels"" : [
            ""write""
          ]
        }
      },
      ""index_first_reindex_test_data_stream-01"" : {
        ""4"" : {
          ""description"" : ""index closed"",
          ""retryable"" : false,
          ""levels"" : [
            ""read"",
            ""write""
          ]
        }
      },
      "".
[truncated]
```

**Issue Reasons:**
- [main] 2 failures in test testIndexing (0.2% fail rate in 1000 executions)
- [main] 2 failures in pipeline elasticsearch-intake (9.1% fail rate in 22 executions)

**Note:**
This issue was created using new test triage automation. Please report issues or feedback to es-delivery.",elasticsearchmachine,closed,"[':Delivery/Build', '>test-failure', 'Team:Delivery', 'needs:risk']",https://github.com/elastic/elasticsearch/issues/135407,2025-09-25T07:55:07Z,3,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/135407,"{
  ""application_resource"": ""yes""
}"
2,135406,[CI] DataStreamsUpgradeIT testDataStreamValidationDoesNotBreakUpgrade failing,"**Build Scans:**
- [elasticsearch-intake #29026 / 9.2.0_bwc-snapshots](https://gradle-enterprise.elastic.co/s/3eeakildzuq6u)
- [elasticsearch-intake #29018 / 9.0.8_bwc-snapshots](https://gradle-enterprise.elastic.co/s/4twuqshdvjiss)

**Reproduction Line:**
```
./gradlew "":x-pack:qa:rolling-upgrade:v9.2.0#upgradedClusterTest"" -Dtests.class=""org.elasticsearch.upgrades.DataStreamsUpgradeIT"" -Dtests.method=""testDataStreamValidationDoesNotBreakUpgrade"" -Dtests.seed=F70ECBC8A5C1BD21 -Dtests.bwc=true -Dtests.locale=en-US -Dtests.timezone=Etc/GMT+11 -Druntime.java=25
```

**Applicable branches:**
main

**Reproduces locally?:**
N/A

**Failure History:**
[See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&_a=(controlGroupState:(initialChildControlState:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:task.keyword,order:0,selectedOptions:!(),title:'GradleTask',type:optionsListControl),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:className.keyword,order:1,selectedOptions:!(org.elasticsearch.upgrades.DataStreamsUpgradeIT),title:'Suite',type:optionsListControl),'144933da-5c1b-4257-a969-7f43455a7901':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:name.keyword,order:2,selectedOptions:!('testDataStreamValidationDoesNotBreakUpgrade'),title:'Test',type:optionsListControl)))))

**Failure Message:**
```
java.lang.AssertionError: timed out waiting for green state for index [logs-barbaz] cluster state [{
  ""cluster_name"" : ""v9.2.0"",
  ""cluster_uuid"" : ""gyhgkq5gTN-_JMIMXgD7Xw"",
  ""version"" : 1778,
  ""state_uuid"" : ""nCxM-IPnSt-lLUVd0Yuvzw"",
  ""master_node"" : ""r5tvncrmRnGnH-KpVpAnbA"",
  ""blocks"" : {
    ""indices"" : {
      ""mounted_index_shared_cache"" : {
        ""8"" : {
          ""description"" : ""index write (api)"",
          ""retryable"" : false,
          ""levels"" : [
            ""write""
          ]
        }
      },
      ""mounted_index_full_copy"" : {
        ""8"" : {
          ""description"" : ""index write (api)"",
          ""retryable"" : false,
          ""levels"" : [
            ""write""
          ]
        }
      },
      ""index_first_reindex_test_data_stream-01"" : {
        ""4"" : {
          ""description"" : ""index closed"",
          ""retryable"" : false,
          ""levels"" : [
            ""read"",
            ""write""
          ]
        }
      },
      "".ds-reindex_test_data_stream-202
[truncated]
```

**Issue Reasons:**
- [main] 2 failures in test testDataStreamValidationDoesNotBreakUpgrade (0.2% fail rate in 1000 executions)
- [main] 2 failures in pipeline elasticsearch-intake (9.1% fail rate in 22 executions)

**Note:**
This issue was created using new test triage automation. Please report issues or feedback to es-delivery.",elasticsearchmachine,closed,"['>test-failure', ':Distributed Coordination/Allocation', 'medium-risk', 'Team:Distributed Coordination']",https://github.com/elastic/elasticsearch/issues/135406,2025-09-25T07:54:58Z,8,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/135406,"{
  ""application_resource"": ""yes""
}"
3,135249,"[CI] RollingUpgradeSearchableSnapshotIndexCompatibilityIT testSearchableSnapshotUpgrade {p0=[9.2.0, 9.2.0, 8.19.0]} failing","**Build Scans:**
- [elasticsearch-periodic-platform-support #10769 / rocky-8_platform-support-unix](https://gradle-enterprise.elastic.co/s/2u76r6uv3usme)
- [elasticsearch-periodic-platform-support #10697 / oraclelinux-9_platform-support-unix](https://gradle-enterprise.elastic.co/s/nc3g53kja3eg4)

**Reproduction Line:**
```
./gradlew "":qa:lucene-index-compatibility:javaRestTest"" --tests ""org.elasticsearch.lucene.RollingUpgradeSearchableSnapshotIndexCompatibilityIT"" -Dtests.method=""testMountSearchableSnapshot {p0=[9.2.0, 9.2.0, 8.19.0]}"" -Dtests.seed=9EFE5386C68520D5 -Dtests.locale=ff-GN -Dtests.timezone=Etc/GMT+3 -Druntime.java=25
```

**Applicable branches:**
main

**Reproduces locally?:**
N/A

**Failure History:**
[See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&_a=(controlGroupState:(initialChildControlState:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:task.keyword,order:0,selectedOptions:!(),title:'GradleTask',type:optionsListControl),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:className.keyword,order:1,selectedOptions:!(org.elasticsearch.lucene.RollingUpgradeSearchableSnapshotIndexCompatibilityIT),title:'Suite',type:optionsListControl),'144933da-5c1b-4257-a969-7f43455a7901':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:name.keyword,order:2,selectedOptions:!('testSearchableSnapshotUpgrade%20%7Bp0%3D%5B9.2.0%2C%209.2.0%2C%208.19.0%5D%7D'),title:'Test',type:optionsListControl)))))

**Failure Message:**
```
java.lang.RuntimeException: An error occurred while checking cluster 'test-cluster' status.
```

**Issue Reasons:**
- [main] 2 failures in test testSearchableSnapshotUpgrade {p0=[9.2.0, 9.2.0, 8.19.0]} (0.3% fail rate in 703 executions)
- [main] 2 failures in pipeline elasticsearch-periodic-platform-support (15.4% fail rate in 13 executions)

**Note:**
This issue was created using new test triage automation. Please report issues or feedback to es-delivery.",elasticsearchmachine,closed,"['>test-failure', ':Distributed Coordination/Allocation', 'medium-risk', 'Team:Distributed Coordination']",https://github.com/elastic/elasticsearch/issues/135249,2025-09-23T06:07:49Z,4,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/135249,"{
  ""application_resource"": ""unsure""
}"
4,135151,"[CI] RollingUpgradeSearchableSnapshotIndexCompatibilityIT testMountSearchableSnapshot {p0=[9.2.0, 9.2.0, 9.2.0]} failing","**Build Scans:**
- [elasticsearch-periodic-platform-support #10733 / oraclelinux-8_platform-support-unix](https://gradle-enterprise.elastic.co/s/nof5sl46epd46)
- [elasticsearch-pull-request #93593 / part-6](https://gradle-enterprise.elastic.co/s/dnlghtb2xip3i)
- [elasticsearch-periodic-platform-support #10697 / oraclelinux-9_platform-support-unix](https://gradle-enterprise.elastic.co/s/nc3g53kja3eg4)

**Reproduction Line:**
```
./gradlew "":qa:lucene-index-compatibility:javaRestTest"" --tests ""org.elasticsearch.lucene.RollingUpgradeSearchableSnapshotIndexCompatibilityIT"" -Dtests.method=""testSearchableSnapshotUpgrade {p0=[9.2.0, 9.2.0, 9.2.0]}"" -Dtests.seed=C632D9CFC4DB11ED -Dtests.locale=el-POLYTON -Dtests.timezone=US/Hawaii -Druntime.java=25
```

**Applicable branches:**
main

**Reproduces locally?:**
N/A

**Failure History:**
[See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&_a=(controlGroupState:(initialChildControlState:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:task.keyword,order:0,selectedOptions:!(),title:'GradleTask',type:optionsListControl),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:className.keyword,order:1,selectedOptions:!(org.elasticsearch.lucene.RollingUpgradeSearchableSnapshotIndexCompatibilityIT),title:'Suite',type:optionsListControl),'144933da-5c1b-4257-a969-7f43455a7901':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:name.keyword,order:2,selectedOptions:!('testMountSearchableSnapshot%20%7Bp0%3D%5B9.2.0%2C%209.2.0%2C%209.2.0%5D%7D'),title:'Test',type:optionsListControl)))))

**Failure Message:**
```
java.lang.RuntimeException: An error occurred while checking cluster 'test-cluster' status.
```

**Issue Reasons:**
- [main] 3 failures in test testMountSearchableSnapshot {p0=[9.2.0, 9.2.0, 9.2.0]} (0.9% fail rate in 347 executions)
- [main] 2 failures in pipeline elasticsearch-periodic-platform-support (28.6% fail rate in 7 executions)

**Note:**
This issue was created using new test triage automation. Please report issues or feedback to es-delivery.",elasticsearchmachine,closed,"['>test-failure', ':Distributed Coordination/Allocation', 'medium-risk', 'Team:Distributed Coordination']",https://github.com/elastic/elasticsearch/issues/135151,2025-09-21T06:08:58Z,7,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/135151,"{
  ""application_resource"": ""unsure""
}"
5,134809,[ML] ClearInferenceEndpointCacheAction breaks rolling upragde tests,"The `ClearInferenceEndpointCacheAction` added in #133860 is always sent to the master node, even if that node is in a previous version that do not support the action. 

In case of unkown action, the `InboundAggregator` throws an assertion, which causes the node to exit the JVM and the test to fail:
```
[2025-09-16T12:44:09,677][ERROR][o.e.b.ElasticsearchUncaughtExceptionHandler] [test-cluster-1] fatal error in thread [elasticsearch-error-rethrower], exiting
java.lang.AssertionError: cluster:internal/xpack/inference/clear_inference_endpoint_cache
	at org.elasticsearch.transport.InboundAggregator.lambda$new$0(InboundAggregator.java:47) ~[elasticsearch-8.19.0.jar:?]
	at org.elasticsearch.transport.InboundAggregator.initializeRequestState(InboundAggregator.java:198) ~[elasticsearch-8.19.0.jar:?]
	at org.elasticsearch.transport.InboundAggregator.headerReceived(InboundAggregator.java:67) ~[elasticsearch-8.19.0.jar:?]
	at org.elasticsearch.transport.InboundPipeline.headerReceived(InboundPipeline.java:139) ~[elasticsearch-8.19.0.jar:?]
	at org.elasticsearch.transport.InboundPipeline.forwardFragments(InboundPipeline.java:113) ~[elasticsearch-8.19.0.jar:?]
	at org.elasticsearch.transport.InboundPipeline.doHandleBytes(InboundPipeline.java:97) ~[elasticsearch-8.19.0.jar:?]
	at org.elasticsearch.transport.InboundPipeline.handleBytes(InboundPipeline.java:62) ~[elasticsearch-8.19.0.jar:?]
	at org.elasticsearch.transport.netty4.Netty4MessageInboundHandler.channelRead(Netty4MessageInboundHandler.java:55) ~[?:?]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444) ~[?:?]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[?:?]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412) ~[?:?]
	at io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:107) ~[?:?]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444) ~[?:?]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[?:?]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412) ~[?:?]
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1357) ~[?:?]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440) ~[?:?]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[?:?]
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:868) ~[?:?]
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166) ~[?:?]
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:796) ~[?:?]
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysPlain(NioEventLoop.java:697) ~[?:?]
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:660) ~[?:?]
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562) ~[?:?]
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:998) ~[?:?]
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[?:?]
	at java.lang.Thread.run(Thread.java:1447) ~[?:?]
```

This was caught when reenabling BWC tests in #134784 in which a quick workaround was implemented (do not send the action when `xpack.inference.endpoint.cache.enabled` is false)",tlrx,closed,"['>bug', ':ml', 'Team:ML', 'v9.2.0']",https://github.com/elastic/elasticsearch/issues/134809,2025-09-16T13:58:43Z,1,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/134809,"{
  ""application_resource"": ""yes""
}"
6,134690,[CI] LoggedExecFuncTest failed tasks output logged to console when spooling true failing,"**Build Scans:**
- [elasticsearch-periodic-platform-support #10591 / almalinux-8-aarch64_checkpart1_platform-support-arm](https://gradle-enterprise.elastic.co/s/vwh6qsyul4oq6)
- [elasticsearch-pull-request #91729 / part-1](https://gradle-enterprise.elastic.co/s/fewq7sjgeoqvy)
- [elasticsearch-pull-request #90957 / part-1](https://gradle-enterprise.elastic.co/s/ofdmdpzskseqg)

**Reproduction Line:**
```
null
```

**Applicable branches:**
8.18

**Reproduces locally?:**
N/A

**Failure History:**
[See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&_a=(controlGroupState:(initialChildControlState:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:task.keyword,order:0,selectedOptions:!(),title:'GradleTask',type:optionsListControl),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:className.keyword,order:1,selectedOptions:!(org.elasticsearch.gradle.LoggedExecFuncTest),title:'Suite',type:optionsListControl),'144933da-5c1b-4257-a969-7f43455a7901':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:name.keyword,order:2,selectedOptions:!('failed%20tasks%20output%20logged%20to%20console%20when%20spooling%20true'),title:'Test',type:optionsListControl)))))

**Failure Message:**
```
org.spockframework.runtime.ConditionNotSatisfiedError: Condition not satisfied:

normalized(givenOutput).contains(normalized(expected))
|          |            |        |          |
|          |            false    |          No such file or directory
|          |                     No such file or directory
|          Calculating task graph as no cached configuration is available for tasks: loggedExec
|          Could not read error output of command 'ls'.
|          java.io.IOException: Stream Closed
|          	at java.base/java.io.FileOutputStream.writeBytes(Native Method)
|          	at java.base/java.io.FileOutputStream.write(FileOutputStream.java:367)
|          	at org.elasticsearch.gradle.LazyFileOutputStream.write(LazyFileOutputStream.java:50)
|          	at org.gradle.process.internal.streams.ExecOutputHandleRunner.writeBuffer(ExecOutputHandleRunner.java:97)
|          	at org.gradle.process.internal.streams.ExecOutputHandleRunner.lambda$forwardContent$0(ExecOutputHandleRun
[truncated]
```

**Issue Reasons:**
- [8.18] 3 failures in test failed tasks output logged to console when spooling true (37.5% fail rate in 8 executions)
- [8.18] 2 failures in step part-1 (50.0% fail rate in 4 executions)
- [8.18] 2 failures in pipeline elasticsearch-pull-request (66.7% fail rate in 3 executions)

**Note:**
This issue was created using new test triage automation. Please report issues or feedback to es-delivery.",elasticsearchmachine,closed,"[':Delivery/Build', '>test-failure', 'Team:Delivery', 'needs:risk']",https://github.com/elastic/elasticsearch/issues/134690,2025-09-13T13:14:11Z,1,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/134690,"{
  ""application_resource"": ""yes""
}"
7,134246,"Can we add ""prefetch"" to DirectIO?","### Description

One of the benefits of DirectIO is that it bypasses off-heap cache. One of the detractions is that the entire operation with Lucene is effectively synchronous. 

Compute is sitting there waiting for bytes to load. 

It seems like we should be able to support ""prefetch"" for DirectIOIndexInput. It would require adding some threading there and possibly more buffers and keeping track of more than one file position.

But it really seems silly to me that when using the DirectIO input I am stuck waiting around for reads.",benwtrent,closed,"['>enhancement', ':Search/Search', 'Team:Search', ':Search Relevance/Vectors', 'Team:Search Relevance']",https://github.com/elastic/elasticsearch/issues/134246,2025-09-05T20:11:58Z,4,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/134246,"{
  ""application_resource"": ""yes""
}"
8,133871,[CI] KqlParserBooleanQueryTests testParseAndQuery failing,"**Build Scans:**
- [elasticsearch-intake #28174 / part3](https://gradle-enterprise.elastic.co/s/3mltxe67el4g2)
- [elasticsearch-periodic #10525 / openjdk23_checkpart3_java-matrix](https://gradle-enterprise.elastic.co/s/glgq2xwithyta)
- [elasticsearch-periodic #10507 / openjdk21_checkpart3_java-fips-matrix](https://gradle-enterprise.elastic.co/s/iwab2ks6e6gdk)
- [elasticsearch-periodic #10495 / encryption-at-rest](https://gradle-enterprise.elastic.co/s/jtqjdxvuzsmra)
- [elasticsearch-periodic-platform-support #10485 / debian-12_platform-support-unix](https://gradle-enterprise.elastic.co/s/dha3cgubszpvc)
- [elasticsearch-periodic-platform-support #10479 / rocky-9_platform-support-unix](https://gradle-enterprise.elastic.co/s/c5mdginh6tj64)
- [elasticsearch-periodic-platform-support #10479 / windows-2025_checkpart3_platform-support-windows](https://gradle-enterprise.elastic.co/s/366klodvcq7cw)
- [elasticsearch-periodic #10476 / openjdk21_checkpart3_java-fips-matrix](https://gradle-enterprise.elastic.co/s/gytikjrgpobf2)
- [elasticsearch-periodic-platform-support #10467 / ubuntu-2404-aarch64_checkpart3_platform-support-arm](https://gradle-enterprise.elastic.co/s/wxuydsin4ajcg)
- [elasticsearch-periodic #10470 / openjdk21_checkpart3_java-matrix](https://gradle-enterprise.elastic.co/s/bqt37fc4rh4ko)

**Reproduction Line:**
```
./gradlew "":x-pack:plugin:kql:test"" --tests ""org.elasticsearch.xpack.kql.parser.KqlParserBooleanQueryTests.testParseAndQuery"" -Dtests.seed=9D65876AC0826FDE -Dtests.locale=uk-UA -Dtests.timezone=Europe/Luxembourg -Druntime.java=24
```

**Applicable branches:**
9.0

**Reproduces locally?:**
N/A

**Failure History:**
[See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&_a=(controlGroupState:(initialChildControlState:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:task.keyword,order:0,selectedOptions:!(),title:'GradleTask',type:optionsListControl),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:className.keyword,order:1,selectedOptions:!(org.elasticsearch.xpack.kql.parser.KqlParserBooleanQueryTests),title:'Suite',type:optionsListControl),'144933da-5c1b-4257-a969-7f43455a7901':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:name.keyword,order:2,selectedOptions:!('testParseAndQuery'),title:'Test',type:optionsListControl)))))

**Failure Message:**
```
java.lang.AssertionError: 
Expected: an instance of org.elasticsearch.index.query.BoolQueryBuilder
     but: <{
  ""match"" : {
    ""mapped_string"" : {
      ""query"" : ""NOT anD NOT""
    }
  }
}> is a org.elasticsearch.index.query.MatchQueryBuilder
```

**Issue Reasons:**
- [9.0] 24 failures in test testParseAndQuery (4.6% fail rate in 522 executions)
- [9.0] 3 failures in step release-tests (15.0% fail rate in 20 executions)
- [9.0] 2 failures in step sles-15_platform-support-unix (10.0% fail rate in 20 executions)
- [9.0] 2 failures in step debian-12_platform-support-unix (10.5% fail rate in 19 executions)
- [9.0] 2 failures in step rocky-9_platform-support-unix (10.0% fail rate in 20 executions)
- [9.0] 2 failures in step openjdk21_checkpart3_java-fips-matrix (10.5% fail rate in 19 executions)
- [9.0] 2 failures in step openjdk23_checkpart3_java-matrix (10.5% fail rate in 19 executions)
- [9.0] 9 failures in pipeline elasticsearch-periodic (45.0% fail rate in 20 executions)
- [9.0] 8 failures in pipeline elasticsearch-periodic-platform-support (40.0% fail rate in 20 executions)

**Note:**
This issue was created using new test triage automation. Please report issues or feedback to es-delivery.",elasticsearchmachine,closed,"[':Search/Search', '>test-failure', 'Team:Search', 'needs:risk']",https://github.com/elastic/elasticsearch/issues/133871,2025-08-30T06:08:26Z,5,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/133871,"{
  ""application_resource"": ""unsure""
}"
9,133135,[ML] Cache Inference Endpoints,"Inference currently reloads the inference endpoint on every inference request: https://github.com/elastic/elasticsearch/blob/main/x-pack/plugin/inference/src/main/java/org/elasticsearch/xpack/inference/action/BaseTransportInferenceAction.java#L189

We can optimize the search time out of the inference call because:
1. these endpoints tend to be high read and low write
2. there tends to be only a handful of regularly used endpoints

This would have low impact normal operations but potentially reduce load on search nodes when there are periods of high inference traffic.

Requirements:
- Potentially use [CacheBuilder](https://github.com/elastic/elasticsearch/blob/main/server/src/main/java/org/elasticsearch/common/cache/CacheBuilder.java#L28)
- Create a cache with a configurable number of endpoints.
- Create a configurable time-to-live that evicts the endpoints from the cache after the time expires.
- Emit cluster state updates when an inference endpoint is updated or deleted, listen for cluster state updates to evict from the cache.

> ES has a Cache class it's used in the ML [ModelLoadingService](https://github.com/elastic/elasticsearch/blob/c4fa1dcb8fc61f2f823337b9cd7230b576772b07/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/inference/loadingservice/ModelLoadingService.java#L230). This service is for loading the boosted tree models and nothing to do with the nlp models or the inference api or anything like that
There is a ModelLoadingService on every node potentially and sometimes the cache needs to be invalidated. There is actually an action to do that which updates the cluster state. ModelLoadingService watches for a specific change to the cluster state meta data then invalidates the cache. Same as we want for the ModelRegistry
https://github.com/elastic/elasticsearch/blob/d007dae1ada91c20d452bb9046390b62c841cb88/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/action/TransportFlushTrainedModelCacheAction.java#L31",prwhelan,closed,"['>enhancement', ':ml', 'Team:ML']",https://github.com/elastic/elasticsearch/issues/133135,2025-08-19T13:26:27Z,1,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/133135,"{
  ""application_resource"": ""yes""
}"
10,132842,DocumentSubsetBitsetCache eviction increments `misses` statistic,"### Elasticsearch Version

9.2

### Installed Plugins

_No response_

### Java Version

_bundled_

### OS Version

24.6.0 Darwin Kernel Version 24.6.0

### Problem Description

going to attach code once i merge it

### Steps to Reproduce

going to attach code once i merge it

### Logs (if relevant)

_No response_",szybia,closed,"['>bug', ':Security/Authorization', 'Team:Security']",https://github.com/elastic/elasticsearch/issues/132842,2025-08-13T15:18:11Z,6,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/132842,"{
  ""application_resource"": ""yes""
}"
11,131855,Page Tables Memory Leak During S3 Snapshots,"### Elasticsearch Version

8.17.1

### Installed Plugins

_No response_

### Java Version

_bundled_

### OS Version

Linux es-data-2 6.6.87+ #1 SMP PREEMPT_DYNAMIC Tue May 13 09:41:09 UTC 2025 x86_64 x86_64 x86_64 GNU/Linux

### Problem Description

# Elasticsearch Page Tables Memory Leak During S3 Snapshots

### **Summary**
Elasticsearch pods are experiencing excessive page table memory usage (20+ GB) during GCS S3 snapshot operations, consuming 31.7% of total system memory and causing severe memory pressure on Kubernetes nodes. This happens when we use new repostories each week to cycle backups. After 90 days nodes are crashing with page table memory >25GB.

### **Environment**
- **Cluster**: Elasticsearch on Kubernetes
- **Node Memory**: 64 GB total (only one elastic pod per node , no other workloads)
- **Elasticsearch Version**: 8.17.1 (with the same issue on 8.18.4 and 9.0.4)
- **Kubernetes Version**: 1.23
- **Storage**: GCS S3-based snapshots

#### **Current State**
```
Total Memory: 64.3 GB
‚îú‚îÄ‚îÄ Elasticsearch RSS: 33.7 GB (52.4%)
‚îú‚îÄ‚îÄ Page Tables: 20.4 GB (31.7%) ‚Üê ISSUE
‚îú‚îÄ‚îÄ Buffer/Cache: 8.8 GB (13.7%)
‚îî‚îÄ‚îÄ Available: 1.9 GB (3.0%)
```

#### **Symptoms**
1. **Excessive virtual memory allocation**: 11.8 TB VIRT vs 33.7 GB RES
2. **Abnormal page table usage**: 20.4 GB (normal: <1 GB)

#### **Memory Breakdown**
# Kernel memory analysis shows:
PageTables: 20,378 MB (86% of kernel memory)
Slab: 1,617 MB (normal)
KernelStack: 12 MB (normal)
Other: <100 MB (normal)

#### **Virtual Memory Mapping Issue**
- Elasticsearch virtual memory: 11.8 TB
- Required page tables: ~20 GB for 3 billion pages
- **Correlation**: Issue occurs after multiple S3 snapshot operations done to separate repositories

#### **System Memory Stats**
```bash
top - 06:03:21 up 92 days, 16:22,  0 users,  load average: 2.38, 2.43, 2.08
%Cpu(s):  9.8 us,  1.6 sy,  0.0 ni, 82.0 id,  5.4 wa,  0.0 hi,  1.3 si,  0.0 st
MiB Mem :  64309.9 total,   1963.6 free,  53501.5 used,   8844.8 buff/cache

PID 95: java - VIRT: 11.8t, RES: 33.7g, SHR: 2.7g, %CPU: 82.1, %MEM: 53.6
```
Node memory in 30 days, showing 2 full backups taken, leading to node crash. 

<img width=""1652"" height=""655"" alt=""Image"" src=""https://github.com/user-attachments/assets/5468b7e4-b1b7-4604-857d-36745cb2fc23"" />

### Steps to Reproduce

### **Steps to Reproduce**
1. Start S3 snapshot operation on large indices
2. Monitor memory usage during snapshot process
3. Observe page table memory growth in `/proc/meminfo`
4. Page tables remain elevated after snapshot completion, removing repository do not clear page tables memory


### Logs (if relevant)

_No response_",lnowicki10,closed,"['>bug', ':Distributed Coordination/Snapshot/Restore', 'Team:Distributed Coordination']",https://github.com/elastic/elasticsearch/issues/131855,2025-07-24T15:52:51Z,3,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/131855,"{
  ""application_resource"": ""yes""
}"
12,131548,QueryPhaseExecutionException: Query Failed [Failed to execute main query] Caused by: java.util.concurrent.ExecutionException: org.elasticsearch.tasks.TaskCancelledException: task cancelled,"### Elasticsearch Version

main

### Installed Plugins

_No response_

### Java Version

_bundled_

### OS Version

20.04.6 LTS (Focal Fossa)

### Problem Description

```
org.elasticsearch.search.query.QueryPhaseExecutionException: Query Failed [Failed to execute main query]
	at org.elasticsearch.server@9.2.0/org.elasticsearch.search.query.QueryPhase.addCollectorsAndSearch(QueryPhase.java:237)
	at org.elasticsearch.server@9.2.0/org.elasticsearch.search.query.QueryPhase.executeQuery(QueryPhase.java:143)
	at org.elasticsearch.server@9.2.0/org.elasticsearch.search.query.QueryPhase.execute(QueryPhase.java:70)
	at org.elasticsearch.server@9.2.0/org.elasticsearch.search.SearchService.loadOrExecuteQueryPhase(SearchService.java:691)
	at org.elasticsearch.server@9.2.0/org.elasticsearch.search.SearchService.executeQueryPhase(SearchService.java:896)
	at org.elasticsearch.server@9.2.0/org.elasticsearch.search.SearchService.lambda$executeQueryPhase$7(SearchService.java:729)
	at org.elasticsearch.server@9.2.0/org.elasticsearch.action.ActionRunnable$3.accept(ActionRunnable.java:79)
	at org.elasticsearch.server@9.2.0/org.elasticsearch.action.ActionRunnable$3.accept(ActionRunnable.java:76)
	at org.elasticsearch.server@9.2.0/org.elasticsearch.action.ActionRunnable$4.doRun(ActionRunnable.java:101)
	at org.elasticsearch.server@9.2.0/org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:27)
	at org.elasticsearch.server@9.2.0/org.elasticsearch.common.util.concurrent.TimedRunnable.doRun(TimedRunnable.java:35)
	at org.elasticsearch.server@9.2.0/org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:1067)
	at org.elasticsearch.server@9.2.0/org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:27)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1095)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:619)
	at java.base/java.lang.Thread.run(Thread.java:1447)
Caused by: org.elasticsearch.ElasticsearchException: java.util.concurrent.ExecutionException: org.elasticsearch.tasks.TaskCancelledException: task cancelled [http channel [Netty4HttpChannel{localAddress=/100.64.52.76:9200, remoteAddress=/100.64.29.13:53472}] closed]
	at org.elasticsearch.server@9.2.0/org.elasticsearch.ExceptionsHelper.convertToElastic(ExceptionsHelper.java:60)
	at org.elasticsearch.server@9.2.0/org.elasticsearch.index.cache.bitset.BitsetFilterCache$QueryWrapperBitSetProducer.getBitSet(BitsetFilterCache.java:239)
	at org.apache.lucene.join@10.2.2/org.apache.lucene.search.join.ToParentBlockJoinQuery$BlockJoinWeight.scorerSupplier(ToParentBlockJoinQuery.java:152)
	at org.apache.lucene.core@10.2.2/org.apache.lucene.search.BooleanWeight.scorerSupplier(BooleanWeight.java:290)
	at org.apache.lucene.join@10.2.2/org.apache.lucene.search.join.ToParentBlockJoinQuery$BlockJoinWeight.scorerSupplier(ToParentBlockJoinQuery.java:145)
	at org.apache.lucene.core@10.2.2/org.apache.lucene.search.BooleanWeight.scorerSupplier(BooleanWeight.java:290)
	at org.apache.lucene.core@10.2.2/org.apache.lucene.search.Weight.bulkScorer(Weight.java:171)
	at org.elasticsearch.server@9.2.0/org.elasticsearch.search.internal.ContextIndexSearcher.searchLeaf(ContextIndexSearcher.java:454)
	at org.apache.lucene.core@10.2.2/org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:809)
	at org.elasticsearch.server@9.2.0/org.elasticsearch.search.internal.ContextIndexSearcher.search(ContextIndexSearcher.java:387)
	at org.elasticsearch.server@9.2.0/org.elasticsearch.search.internal.ContextIndexSearcher.lambda$search$3(ContextIndexSearcher.java:365)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:328)
	at org.apache.lucene.core@10.2.2/org.apache.lucene.search.TaskExecutor$Task.run(TaskExecutor.java:173)
	at org.apache.lucene.core@10.2.2/org.apache.lucene.search.TaskExecutor.lambda$invokeAll$1(TaskExecutor.java:98)
	... 6 more
	Suppressed: org.elasticsearch.tasks.TaskCancelledException: task cancelled [http channel [Netty4HttpChannel{localAddress=/100.64.52.76:9200, remoteAddress=/100.64.29.13:53472}] closed]
	Suppressed: org.elasticsearch.tasks.TaskCancelledException: task cancelled [http channel [Netty4HttpChannel{localAddress=/100.64.52.76:9200, remoteAddress=/100.64.29.13:53472}] closed]
	Suppressed: org.elasticsearch.tasks.TaskCancelledException: task cancelled [http channel [Netty4HttpChannel{localAddress=/100.64.52.76:9200, remoteAddress=/100.64.29.13:53472}] closed]
	Suppressed: org.elasticsearch.tasks.TaskCancelledException: task cancelled [http channel [Netty4HttpChannel{localAddress=/100.64.52.76:9200, remoteAddress=/100.64.29.13:53472}] closed]
	Suppressed: org.elasticsearch.tasks.TaskCancelledException: task cancelled [http channel [Netty4HttpChannel{localAddress=/100.64.52.76:9200, remoteAddress=/100.64.29.13:53472}] closed]
	Suppressed: org.elasticsearch.tasks.TaskCancelledException: task cancelled [http channel [Netty4HttpChannel{localAddress=/100.64.52.76:9200, remoteAddress=/100.64.29.13:53472}] closed]
	Suppressed: org.elasticsearch.tasks.TaskCancelledException: task cancelled [http channel [Netty4HttpChannel{localAddress=/100.64.52.76:9200, remoteAddress=/100.64.29.13:53472}] closed]
	Suppressed: org.elasticsearch.tasks.TaskCancelledException: task cancelled [http channel [Netty4HttpChannel{localAddress=/100.64.52.76:9200, remoteAddress=/100.64.29.13:53472}] closed]
Caused by: java.util.concurrent.ExecutionException: org.elasticsearch.tasks.TaskCancelledException: task cancelled [http channel [Netty4HttpChannel{localAddress=/100.64.52.76:9200, remoteAddress=/100.64.29.13:53472}] closed]
	at org.elasticsearch.server@9.2.0/org.elasticsearch.common.cache.Cache.computeIfAbsent(Cache.java:443)
	at org.elasticsearch.server@9.2.0/org.elasticsearch.index.cache.bitset.BitsetFilterCache.getAndLoadIfNotPresent(BitsetFilterCache.java:180)
	at org.elasticsearch.server@9.2.0/org.elasticsearch.index.cache.bitset.BitsetFilterCache$QueryWrapperBitSetProducer.getBitSet(BitsetFilterCache.java:237)
	... 18 more
Caused by: org.elasticsearch.tasks.TaskCancelledException: task cancelled [http channel [Netty4HttpChannel{localAddress=/100.64.52.76:9200, remoteAddress=/100.64.29.13:53472}] closed]
```

### Steps to Reproduce

N/A

### Logs (if relevant)

_No response_",fang-xing-esql,closed,"['>bug', ':Search/Search', 'Team:Search', 'low-risk', 'priority:normal', 'Team:Search Relevance', ':Search Relevance/Search']",https://github.com/elastic/elasticsearch/issues/131548,2025-07-18T16:53:17Z,5,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/131548,"{
  ""application_resource"": ""yes""
}"
13,131346,java.nio.file.NoSuchFileException in search: Blob object not found: 404 Not Found,"### Elasticsearch Version

git-fbf9f4fc012a (serverless)

### Installed Plugins

_No response_

### Java Version

_bundled_

### OS Version

Ubuntu 20.04

### Problem Description

Got this suppressed error: 
```
org.elasticsearch.search.query.QueryPhaseExecutionException: Query Failed [Failed to execute main query]
	at org.elasticsearch.server@9.2.0/org.elasticsearch.search.query.QueryPhase.addCollectorsAndSearch(QueryPhase.java:237)
	at org.elasticsearch.server@9.2.0/org.elasticsearch.search.query.QueryPhase.executeQuery(QueryPhase.java:143)
	at org.elasticsearch.server@9.2.0/org.elasticsearch.search.query.QueryPhase.execute(QueryPhase.java:70)
	at org.elasticsearch.server@9.2.0/org.elasticsearch.indices.IndicesService.lambda$loadIntoContext$39(IndicesService.java:1681)
	at org.elasticsearch.server@9.2.0/org.elasticsearch.indices.IndicesService.lambda$cacheShardLevelResult$40(IndicesService.java:1747)
	at org.elasticsearch.server@9.2.0/org.elasticsearch.indices.IndicesRequestCache$Loader.load(IndicesRequestCache.java:165)
	at org.elasticsearch.server@9.2.0/org.elasticsearch.indices.IndicesRequestCache$Loader.load(IndicesRequestCache.java:148)
	at org.elasticsearch.server@9.2.0/org.elasticsearch.common.cache.Cache.computeIfAbsent(Cache.java:440)
	at org.elasticsearch.server@9.2.0/org.elasticsearch.indices.IndicesRequestCache.getOrCompute(IndicesRequestCache.java:111)
	at org.elasticsearch.server@9.2.0/org.elasticsearch.indices.IndicesService.cacheShardLevelResult(IndicesService.java:1753)
	at org.elasticsearch.server@9.2.0/org.elasticsearch.indices.IndicesService.loadIntoContext(IndicesService.java:1675)
	at org.elasticsearch.server@9.2.0/org.elasticsearch.search.SearchService.loadOrExecuteQueryPhase(SearchService.java:670)
	at org.elasticsearch.server@9.2.0/org.elasticsearch.search.SearchService.executeQueryPhase(SearchService.java:877)
	at org.elasticsearch.server@9.2.0/org.elasticsearch.search.SearchService.lambda$executeQueryPhase$7(SearchService.java:710)
	at org.elasticsearch.server@9.2.0/org.elasticsearch.action.ActionRunnable$3.accept(ActionRunnable.java:79)
	at org.elasticsearch.server@9.2.0/org.elasticsearch.action.ActionRunnable$3.accept(ActionRunnable.java:76)
	at org.elasticsearch.server@9.2.0/org.elasticsearch.action.ActionRunnable$4.doRun(ActionRunnable.java:101)
	at org.elasticsearch.server@9.2.0/org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:27)
	at org.elasticsearch.server@9.2.0/org.elasticsearch.common.util.concurrent.TimedRunnable.doRun(TimedRunnable.java:35)
	at org.elasticsearch.server@9.2.0/org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:1044)
	at org.elasticsearch.server@9.2.0/org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:27)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1095)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:619)
	at java.base/java.lang.Thread.run(Thread.java:1447)
Caused by: java.io.IOException: java.util.concurrent.ExecutionException: java.nio.file.NoSuchFileException: Blob object [indices/Or_RZzu8RuGWZGqLpYICpw/0/1/stateless_commit_4415] not found: 404 Not Found
GET https://storage.googleapis.com/download/storage/v1/b/hqc7io7q-production-elastic-k8s/o/indices%2FOr_RZzu8RuGWZGqLpYICpw%2F0%2F1%2Fstateless_commit_4415?alt=media
No such object: hqc7io7q-production-elastic-k8s/indices/Or_RZzu8RuGWZGqLpYICpw/0/1/stateless_commit_4415
	at org.elasticsearch.stateless@9.2.0/co.elastic.elasticsearch.stateless.lucene.BlobCacheIndexInput.readInternal(BlobCacheIndexInput.java:142)
	at org.elasticsearch.blobcache@9.2.0/org.elasticsearch.blobcache.common.BlobCacheBufferedIndexInput.refill(BlobCacheBufferedIndexInput.java:304)
	at org.elasticsearch.blobcache@9.2.0/org.elasticsearch.blobcache.common.BlobCacheBufferedIndexInput.readByte(BlobCacheBufferedIndexInput.java:57)
	at org.apache.lucene.core@10.2.2/org.apache.lucene.store.DataInput.readVInt(DataInput.java:121)
	at org.elasticsearch.blobcache@9.2.0/org.elasticsearch.blobcache.common.BlobCacheBufferedIndexInput.readVInt(BlobCacheBufferedIndexInput.java:172)
	at org.apache.lucene.core@10.2.2/org.apache.lucene.util.bkd.BKDReader$BKDPointTree.readDocIDs(BKDReader.java:662)
	at org.apache.lucene.core@10.2.2/org.apache.lucene.util.bkd.BKDReader$BKDPointTree.visitDocValues(BKDReader.java:634)
	at org.apache.lucene.core@10.2.2/org.apache.lucene.util.bkd.BKDReader$BKDPointTree.visitLeavesOneByOne(BKDReader.java:621)
	at org.apache.lucene.core@10.2.2/org.apache.lucene.util.bkd.BKDReader$BKDPointTree.visitDocValues(BKDReader.java:615)
	at org.elasticsearch.server@9.2.0/org.elasticsearch.search.internal.ExitableDirectoryReader$ExitablePointTree.visitDocValues(ExitableDirectoryReader.java:491)
	at org.apache.lucene.core@10.2.2/org.apache.lucene.search.PointRangeQuery$1.pointCount(PointRangeQuery.java:484)
	at org.apache.lucene.core@10.2.2/org.apache.lucene.search.PointRangeQuery$1.pointCount(PointRangeQuery.java:479)
	at org.apache.lucene.core@10.2.2/org.apache.lucene.search.PointRangeQuery$1.pointCount(PointRangeQuery.java:479)
	at org.apache.lucene.core@10.2.2/org.apache.lucene.search.PointRangeQuery$1.pointCount(PointRangeQuery.java:479)
	at org.apache.lucene.core@10.2.2/org.apache.lucene.search.PointRangeQuery$1.pointCount(PointRangeQuery.java:479)
	at org.apache.lucene.core@10.2.2/org.apache.lucene.search.PointRangeQuery$1.pointCount(PointRangeQuery.java:455)
	at org.apache.lucene.core@10.2.2/org.apache.lucene.search.PointRangeQuery$1.count(PointRangeQuery.java:405)
	at org.apache.lucene.core@10.2.2/org.apache.lucene.search.IndexOrDocValuesQuery$1.count(IndexOrDocValuesQuery.java:153)
	at org.apache.lucene.core@10.2.2/org.apache.lucene.search.LRUQueryCache$CachingWrapperWeight.count(LRUQueryCache.java:851)
	at org.elasticsearch.server@9.2.0/org.elasticsearch.indices.IndicesQueryCache$CachingWeightWrapper.count(IndicesQueryCache.java:171)
	at org.apache.lucene.core@10.2.2/org.apache.lucene.search.TotalHitCountCollector.getLeafCollector(TotalHitCountCollector.java:48)
	at org.elasticsearch.server@9.2.0/org.elasticsearch.search.query.PartialHitCountCollector.getLeafCollector(PartialHitCountCollector.java:47)
	at org.elasticsearch.server@9.2.0/org.elasticsearch.search.query.QueryPhaseCollector.getLeafCollector(QueryPhaseCollector.java:147)
	at org.elasticsearch.server@9.2.0/org.elasticsearch.search.internal.ContextIndexSearcher.searchLeaf(ContextIndexSearcher.java:444)
	at org.apache.lucene.core@10.2.2/org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:809)
	at org.elasticsearch.server@9.2.0/org.elasticsearch.search.internal.ContextIndexSearcher.search(ContextIndexSearcher.java:387)
	at org.elasticsearch.server@9.2.0/org.elasticsearch.search.internal.ContextIndexSearcher.lambda$search$3(ContextIndexSearcher.java:365)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:328)
	at org.apache.lucene.core@10.2.2/org.apache.lucene.search.TaskExecutor$Task.run(TaskExecutor.java:173)
	at org.apache.lucene.core@10.2.2/org.apache.lucene.search.TaskExecutor.invokeAll(TaskExecutor.java:111)
	at org.elasticsearch.server@9.2.0/org.elasticsearch.search.internal.ContextIndexSearcher.search(ContextIndexSearcher.java:369)
	at org.elasticsearch.server@9.2.0/org.elasticsearch.search.internal.ContextIndexSearcher.search(ContextIndexSearcher.java:336)
	at org.elasticsearch.server@9.2.0/org.elasticsearch.search.query.QueryPhase.addCollectorsAndSearch(QueryPhase.java:212)
	... 23 more
Caused by: java.util.concurrent.ExecutionException: java.nio.file.NoSuchFileException: Blob object [indices/Or_RZzu8RuGWZGqLpYICpw/0/1/stateless_commit_4415] not found: 404 Not Found
GET https://storage.googleapis.com/download/storage/v1/b/hqc7io7q-production-elastic-k8s/o/indices%2FOr_RZzu8RuGWZGqLpYICpw%2F0%2F1%2Fstateless_commit_4415?alt=media
No such object: hqc7io7q-production-elastic-k8s/indices/Or_RZzu8RuGWZGqLpYICpw/0/1/stateless_commit_4415
	at org.elasticsearch.server@9.2.0/org.elasticsearch.action.support.PlainActionFuture$Sync.getValue(PlainActionFuture.java:279)
	at org.elasticsearch.server@9.2.0/org.elasticsearch.action.support.PlainActionFuture$Sync.get(PlainActionFuture.java:266)
	at org.elasticsearch.server@9.2.0/org.elasticsearch.action.support.PlainActionFuture.get(PlainActionFuture.java:96)
	at org.elasticsearch.blobcache@9.2.0/org.elasticsearch.blobcache.shared.SharedBlobCacheService$CacheFile.readSingleRegion(SharedBlobCacheService.java:1310)
	at org.elasticsearch.blobcache@9.2.0/org.elasticsearch.blobcache.shared.SharedBlobCacheService$CacheFile.populateAndRead(SharedBlobCacheService.java:1287)
	at org.elasticsearch.stateless@9.2.0/co.elastic.elasticsearch.stateless.cache.reader.CacheFileReader.doRead(CacheFileReader.java:124)
	at org.elasticsearch.stateless@9.2.0/co.elastic.elasticsearch.stateless.cache.reader.CacheFileReader.read(CacheFileReader.java:94)
	at org.elasticsearch.stateless@9.2.0/co.elastic.elasticsearch.stateless.lucene.BlobCacheIndexInput.readInternalSlow(BlobCacheIndexInput.java:175)
	at org.elasticsearch.stateless@9.2.0/co.elastic.elasticsearch.stateless.lucene.BlobCacheIndexInput.doReadInternal(BlobCacheIndexInput.java:167)
	at org.elasticsearch.stateless@9.2.0/co.elastic.elasticsearch.stateless.lucene.BlobCacheIndexInput.readInternal(BlobCacheIndexInput.java:131)
	... 55 more
Caused by: java.nio.file.NoSuchFileException: Blob object [indices/Or_RZzu8RuGWZGqLpYICpw/0/1/stateless_commit_4415] not found: 404 Not Found
GET https://storage.googleapis.com/download/storage/v1/b/hqc7io7q-production-elastic-k8s/o/indices%2FOr_RZzu8RuGWZGqLpYICpw%2F0%2F1%2Fstateless_commit_4415?alt=media
No such object: hqc7io7q-production-elastic-k8s/indices/Or_RZzu8RuGWZGqLpYICpw/0/1/stateless_commit_4415
	at org.elasticsearch.repositories.gcs.GoogleCloudStorageRetryingInputStream.openStream(GoogleCloudStorageRetryingInputStream.java:131)
	at org.elasticsearch.repositories.gcs.GoogleCloudStorageRetryingInputStream.<init>(GoogleCloudStorageRetryingInputStream.java:77)
	at org.elasticsearch.repositories.gcs.GoogleCloudStorageBlobStore.readBlob(GoogleCloudStorageBlobStore.java:253)
	at org.elasticsearch.repositories.gcs.GoogleCloudStorageBlobContainer.readBlob(GoogleCloudStorageBlobContainer.java:73)
	at org.elasticsearch.stateless@9.2.0/co.elastic.elasticsearch.stateless.cache.reader.ObjectStoreCacheBlobReader.getRangeInputStream(ObjectStoreCacheBlobReader.java:58)
	at org.elasticsearch.stateless@9.2.0/co.elastic.elasticsearch.stateless.cache.reader.ObjectStoreCacheBlobReader.lambda$getRangeInputStream$0(ObjectStoreCacheBlobReader.java:67)
	at org.elasticsearch.server@9.2.0/org.elasticsearch.action.ActionRunnable$2.accept(ActionRunnable.java:58)
	at org.elasticsearch.server@9.2.0/org.elasticsearch.action.ActionRunnable$2.accept(ActionRunnable.java:55)
	... 8 more
```

### Steps to Reproduce

Comes from serverless alerts. 

### Logs (if relevant)

_No response_",smalyshev,closed,"['>bug', ':Distributed Indexing/Distributed', 'Team:Search Foundations', ':Search Foundations/Search', 'Team:Distributed Indexing']",https://github.com/elastic/elasticsearch/issues/131346,2025-07-16T05:04:38Z,2,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/131346,"{
  ""application_resource"": ""yes""
}"
14,131187,[CI] Several BWC rolling upgrade tests failing,"### CI Link

https://gradle-enterprise.elastic.co/s/iclmjvuyp355m/tests/overview?outcome=failed

### Repro line

multiple

### Does it reproduce?

Yes

### Applicable branches

9.1

### Failure history

_No response_

### Failure excerpt
```
[2025-07-13T08:33:19,518][INFO ][o.e.c.c.JoinHelper       ] [test-cluster-0] failed to join {test-cluster-1}{cfTkCj-gRRyD_6tZVtv8qw}{tRFwls1dTKOSP48GFAkWng}{test-cluster-1}{127.0.0.1}{127.0.0.1:37979}{cdfhilmrstw}{9.0.4}{8000099-9009000}{testattr=test, ml.allocated_processors_double=32.0, ml.machine_memory=126604173312, ml.config_version=12.0.0, ml.max_jvm_size=805306368, ml.allocated_processors=32, xpack.installed=true, transform.config_version=10.0.0} with JoinRequest{sourceNode={test-cluster-0}{gPc2FVADTC2tzLKbJ9QI-g}{-7RYpxT5QM2KYV-4n5e64Q}{test-cluster-0}{127.0.0.1}{127.0.0.1:35335}{cdfhilmrstw}{9.1.0}{8000099-9033000}{testattr=test, ml.allocated_processors_double=32.0, ml.machine_memory=126604173312, ml.config_version=12.0.0, ml.max_jvm_size=805306368, ml.allocated_processors=32, xpack.installed=true, transform.config_version=10.0.0}, compatibilityVersions=CompatibilityVersions[transportVersion=9112001, systemIndexMappingsVersion={.secrets-inference=MappingsVersion[version=1, hash=-1434574148], .triggered_watches=MappingsVersion[version=1, hash=-502826165], .fleet-agents-7=MappingsVersion[version=2, hash=830653585], .fleet-servers-7=MappingsVersion[version=1, hash=-916922632], .fleet-policies-leader-7=MappingsVersion[version=1, hash=-1108172796], .ml-config=MappingsVersion[version=1, hash=-319778629], .security-tokens-7=MappingsVersion[version=1, hash=576296021], .geoip_databases=MappingsVersion[version=1, hash=-305757839], .snapshot-blob-cache=MappingsVersion[version=1, hash=632712485], .security-profile-8=MappingsVersion[version=2, hash=-909540896], .search-app-1=MappingsVersion[version=1, hash=-501711141], .watches=MappingsVersion[version=1, hash=-1045118511], .fleet-artifacts-7=MappingsVersion[version=1, hash=-1593703898], .query-rules-2=MappingsVersion[version=2, hash=-1272560824], .transform-internal-007=MappingsVersion[version=1, hash=1144737897], .fleet-enrollment-api-keys-7=MappingsVersion[version=3, hash=1223574253], .fleet-actions-7=MappingsVersion[version=2, hash=-2624357], .tasks=MappingsVersion[version=0, hash=-945584329], .fleet-secrets-7=MappingsVersion[version=1, hash=-745394230], .ml-meta=MappingsVersion[version=2, hash=-613742866], .security-7=MappingsVersion[version=3, hash=-832976091], .connector-secrets-1=MappingsVersion[version=1, hash=-745394230], .logstash=MappingsVersion[version=1, hash=-1058806351], .ml-inference-000005=MappingsVersion[version=3, hash=919553140], .async-search=MappingsVersion[version=0, hash=-1403744380], .inference=MappingsVersion[version=2, hash=-1459421596], .fleet-policies-7=MappingsVersion[version=2, hash=-201702522], .synonyms-2=MappingsVersion[version=1, hash=-888080772]}], features=[mapper.nested.sorting_fields_check_fix, mapper.dense_vector.rescore_vector, mapper.tsdb_nested_field_support, index.synonyms_set_lenient_on_non_existing, semantic_text.highlighter, mapper.npe_on_dims_update_fix, query_rules.numeric_validation, sparse_vector.index_options_supported, text_similarity_reranker_minscore_fix, search.vectors.mappers.default_bbq_hnsw, text_similarity_reranker_alias_handling_fix, mapper.ivf_format_cluster_feature, mapper.logsdb_default_ignore_dynamic_beyond_limit, mapper.ivf_nested_support, logs_stream, mapper.source.mode_from_index_setting, search.completion_field.duplicate.support, inference.cohere.v2, pinned_retriever_supported, semantic_text.match_all_highlighter, simulate.ignored.fields, mapper.range.invalid_date_fix, retriever.negative_rank_window_size_fix, mapper.counted_keyword.synthetic_source_native_support, mapper.ignored_source.dont_expand_dots, test_reranking_service.parse_text_as_score, semantic_text.delete_fix, mapper.copy_to.dynamic_handling, mapper.synthetic_recovery_source, mapper.range.date_range_indexing_fix, semantic_text.support_chunking_config, semantic_text.bit_vector_support, mapper.patterned_text, semantic_text.inference_metadata_fields.enabled_by_default, mapper.subobjects_false_mapping_update_fix, search.semantic_sparse_vector_query_rewrite_interception_supported, test_rule_retriever.with_indices_that_dont_return_rank_docs, semantic_text.single_field_update_fix, synonyms_set.get.return_empty_synonym_sets, mapper.unknown_field_mapping_update_error_message, rank_vectors, mapper.ignored_source_as_top_level_metadata_array_field, mapper.dense_vector.default_oversample_value_for_bbq, rrf_retriever.multi_fields_query_format_support, multi_project, linear_retriever_minscore_fix, mapper.fix_parsing_subobjects_false_dynamic_false, data_stream.failure_store, mapper.dense_vector.rescore_zero_vector, linear_retriever.minmax_single_doc_fix, semantic_text.handle_empty_input, semantic_text.skip_inference_fields, routing.logsb_route_on_sort_fields, cluster.stats.source_modes, meta_fetch_fields_error_code_changed, data_stream.downsample.default_aggregate_metric_fix, mapper.doc_values_skipper, mapper.search_load_per_shard, esql.metrics_syntax, semantic_text.exclude_sub_fields_from_field_caps, mapper.ignored_source.always_store_object_arra‚Ä¶	
Caused by: java.lang.IllegalStateException: Node gPc2FVADTC2tzLKbJ9QI-g is missing required features [search.vectors.no_dimensions_bugfix]	
	at org.elasticsearch.cluster.coordination.NodeJoinExecutor.enforceNodeFeatureBarrier(NodeJoinExecutor.java:550)	
	at org.elasticsearch.cluster.coordination.NodeJoinExecutor.execute(NodeJoinExecutor.java:180)	
	at org.elasticsearch.cluster.service.MasterService.innerExecuteTasks(MasterService.java:1069)	
	at org.elasticsearch.cluster.service.MasterService.executeTasks(MasterService.java:1032)	
	at org.elasticsearch.cluster.service.MasterService.executeAndPublishBatch(MasterService.java:244)	
	at org.elasticsearch.cluster.service.MasterService$BatchingTaskQueue$Processor.lambda$run$2(MasterService.java:1685)	
	at org.elasticsearch.action.ActionListener.run(ActionListener.java:454)	
	at org.elasticsearch.cluster.service.MasterService$BatchingTaskQueue$Processor.run(MasterService.java:1682)	
	at org.elasticsearch.cluster.service.MasterService$5.lambda$doRun$0(MasterService.java:1277)	
	at org.elasticsearch.action.ActionListener.run(ActionListener.java:454)	
	at org.elasticsearch.cluster.service.MasterService$5.doRun(MasterService.java:1256)	
	at org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:1044)	
	at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:27)	
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1095)	
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:619)	
	at java.lang.Thread.run(Thread.java:1447)
```",ldematte,closed,"['blocker', '>test-failure', ':Search Relevance/Vectors', 'Team:Search Relevance', 'v9.1.0', 'v9.1.1']",https://github.com/elastic/elasticsearch/issues/131187,2025-07-14T07:34:46Z,3,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/131187,"{
  ""application_resource"": ""yes""
}"
15,130978,[CI] AsyncSearchSecurityIT class failing,"**Build Scans:**
- [elasticsearch-periodic #9320 / release-tests](https://gradle-enterprise.elastic.co/s/x75exla4ye3ku)
- [elasticsearch-periodic #9313 / release-tests](https://gradle-enterprise.elastic.co/s/uqg3snwbuveck)
- [elasticsearch-periodic #9306 / release-tests](https://gradle-enterprise.elastic.co/s/7schuhkjeo6gi)
- [elasticsearch-periodic #9299 / release-tests](https://gradle-enterprise.elastic.co/s/yktjlxlzbz7ss)
- [elasticsearch-periodic #9292 / release-tests](https://gradle-enterprise.elastic.co/s/seilzbb7h7axq)
- [elasticsearch-periodic #9285 / release-tests](https://gradle-enterprise.elastic.co/s/ucmwv44cge7wy)
- [elasticsearch-periodic #9271 / release-tests](https://gradle-enterprise.elastic.co/s/xm5cvnkw4pc4g)
- [elasticsearch-periodic #9264 / release-tests](https://gradle-enterprise.elastic.co/s/ip6d7q67qenzo)
- [elasticsearch-periodic #9257 / release-tests](https://gradle-enterprise.elastic.co/s/gobqcs4h34aum)

**Reproduction Line:**
```
undefined
```

**Applicable branches:**
9.1

**Reproduces locally?:**
N/A

**Failure History:**
[See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&_a=(controlGroupState:(initialChildControlState:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:task.keyword,order:0,selectedOptions:!(),title:'GradleTask',type:optionsListControl),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:className.keyword,order:1,selectedOptions:!(org.elasticsearch.xpack.search.AsyncSearchSecurityIT),title:'Suite',type:optionsListControl),'144933da-5c1b-4257-a969-7f43455a7901':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:name.keyword,order:2,selectedOptions:!('org.elasticsearch.xpack.search.AsyncSearchSecurityIT'),title:'Test',type:optionsListControl)))))

**Failure Message:**
```
undefined
```

**Issue Reasons:**
- [9.1] 9 consecutive failures in step release-tests
- [9.1] 9 failures in class org.elasticsearch.xpack.search.AsyncSearchSecurityIT (3.1% fail rate in 287 executions)
- [9.1] 9 failures in step release-tests (100.0% fail rate in 9 executions)
- [9.1] 9 failures in pipeline elasticsearch-periodic (90.0% fail rate in 10 executions)

**Note:**
This issue was created using new test triage automation. Please report issues or feedback to es-delivery.",elasticsearchmachine,closed,"[':Core/Infra/Scripting', '>test-failure', 'Team:Core/Infra', 'low-risk']",https://github.com/elastic/elasticsearch/issues/130978,2025-07-10T05:32:22Z,9,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/130978,"{
  ""application_resource"": ""unsure""
}"
16,130339,[ML] Get Inference returns inaccurate Trained Models,"Create an inference endpoint:
```
curl -X PUT -u elastic:password -H ""Content-Type: application/json"" -d '{""service"":""elser"",""service_settings"":{""num_allocations"":1,""num_threads"":1}}' ""http://localhost:9200/_inference/sparse_embedding/my-elser-model""
```
shows:
```
{
  ""inference_id"": ""my-elser-model"",
  ""task_type"": ""sparse_embedding"",
  ""service"": ""elasticsearch"",
  ""service_settings"": {
    ""num_allocations"": 1,
    ""num_threads"": 1,
    ""model_id"": "".elser_model_2_linux-x86_64""
  },
  ""chunking_settings"": {
    ""strategy"": ""sentence"",
    ""max_chunk_size"": 250,
    ""sentence_overlap"": 1
  }
}
```

Enable adaptive allocations:
```
curl -X POST -u elastic:password -H ""Content-Type: application/json"" -d '{""adaptive_allocations"": { ""enabled"": ""true"", ""min_number_of_allocations"": 0, ""max_number_of_allocations"": 1} }' ""http://localhost:9200/_ml/trained_models/my-elser-model/deployment/_update""
```
shows:
```
{
  ""assignment"": {
    ""task_parameters"": {
      ""model_id"": "".elser_model_2_linux-x86_64"",
      ""deployment_id"": ""my-elser-model"",
      ""model_bytes"": 274756282,
      ""threads_per_allocation"": 1,
      ""number_of_allocations"": 1,
      ""queue_capacity"": 10000,
      ""cache_size"": ""274756282b"",
      ""priority"": ""normal"",
      ""per_deployment_memory_bytes"": 0,
      ""per_allocation_memory_bytes"": 0
    },
    ""routing_table"": {
      ""VtOsT8emQHaBZzXvZX8g7Q"": {
        ""current_allocations"": 1,
        ""target_allocations"": 1,
        ""routing_state"": ""started"",
        ""reason"": """"
      }
    },
    ""assignment_state"": ""started"",
    ""start_time"": ""2025-06-30T15:01:20.059416449Z"",
    ""max_assigned_allocations"": 1,
    ""adaptive_allocations"": {
      ""enabled"": true,
      ""min_number_of_allocations"": 0,
      ""max_number_of_allocations"": 1
    }
  }
}
```

```
curl -u elastic:password http://localhost:9200/_inference/sparse_embedding/my-elser-model
```

-------------------------------------

Expected (contains adaptive allocations):
```
{
  ""endpoints"": [
    {
      ""inference_id"": ""my-elser-model"",
      ""task_type"": ""sparse_embedding"",
      ""service"": ""elasticsearch"",
      ""service_settings"": {
        ""num_allocations"": 1,
        ""num_threads"": 1,
        ""adaptive_allocations"": {
          ""enabled"": true,
          ""min_number_of_allocations"": 0,
          ""max_number_of_allocations"": 1
        },
        ""model_id"": "".elser_model_2_linux-x86_64""
      },
      ""chunking_settings"": {
        ""strategy"": ""sentence"",
        ""max_chunk_size"": 250,
        ""sentence_overlap"": 1
      }
    }
  ]
}
```
Actual:
```
{
  ""endpoints"": [
    {
      ""inference_id"": ""my-elser-model"",
      ""task_type"": ""sparse_embedding"",
      ""service"": ""elasticsearch"",
      ""service_settings"": {
        ""num_allocations"": 1,
        ""num_threads"": 1,
        ""model_id"": "".elser_model_2_linux-x86_64""
      },
      ""chunking_settings"": {
        ""strategy"": ""sentence"",
        ""max_chunk_size"": 250,
        ""sentence_overlap"": 1
      }
    }
  ]
}
```",prwhelan,closed,"['>bug', ':ml', 'Team:ML']",https://github.com/elastic/elasticsearch/issues/130339,2025-06-30T15:10:44Z,1,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/130339,"{
  ""application_resource"": ""yes""
}"
17,130071,ArrayIndexOutOfBoundsException for timeouts during the fetch phase,"### Elasticsearch Version

8.18.0

### Installed Plugins

_No response_

### Java Version

_bundled_

### OS Version

N/A

### Problem Description

When using the `_search` endpoint, timeouts during the fetch phase with `allow_partial_search_results=true` result in an `java.lang.ArrayIndexOutOfBoundsException: Index 0 out of bounds for length 0`.
If a shard times out during the fetch phase there are two code paths based on the `allow_partial_search_results` value.
If `allow_partial_search_results` is set to false, the shard will throw a `SearchTimeoutException` that is handled by the coordinating node to fail the search.
If instead `allow_partial_search_results` is set to true, the shard will return an empty SearchHits[]. In this case though the coordinating node is expecting a number of SearchHits > 0. This misalignment between data structures is causing  an `ArrayIndexOutOfBoundsException` during the final merge phase, that is when the coordinating node merges all the fetched documents from the different shards to create the final response to the user.

Probably introduced by: https://github.com/elastic/elasticsearch/pull/116676

### Steps to Reproduce

A search query with `allow_partial_search_results=true` with a small `timeout` (ms) _can_ trigger this but is far from deterministic, by adding extra work (eg. Aggs) we have more caches to have this behaviour reproduced. 
Being a timeout it also really depends on how fast the hardware is and other external factors.

```
GET index_name/_search?allow_partial_search_results=true
{
  ""timeout"": ""10ms"", 
  ""query"": {
    ""match_all"": {}
  },
  ""aggs"": {
    ""code"": {
      ""terms"": {
        ""field"": ""code""
      }
    }
  }
}
```



### Logs (if relevant)

```
Failed to execute phase [fetch], 
	at org.elasticsearch.server@8.18.0/org.elasticsearch.action.search.AbstractSearchAsyncAction.onPhaseFailure(AbstractSearchAsyncAction.java:723)
	at org.elasticsearch.server@8.18.0/org.elasticsearch.action.search.FetchSearchPhase$1.onFailure(FetchSearchPhase.java:103)
	at org.elasticsearch.server@8.18.0/org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:29)
	at org.elasticsearch.server@8.18.0/org.elasticsearch.common.util.concurrent.TimedRunnable.doRun(TimedRunnable.java:34)
	at org.elasticsearch.server@8.18.0/org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:1044)
	at org.elasticsearch.server@8.18.0/org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:27)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1095)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:619)
	at java.base/java.lang.Thread.run(Thread.java:1447)
Caused by: java.lang.ArrayIndexOutOfBoundsException: Index 0 out of bounds for length 0
	at org.elasticsearch.server@8.18.0/org.elasticsearch.action.search.SearchPhaseController.getHits(SearchPhaseController.java:463)
	at org.elasticsearch.server@8.18.0/org.elasticsearch.action.search.SearchPhaseController.merge(SearchPhaseController.java:376)
	at org.elasticsearch.server@8.18.0/org.elasticsearch.action.search.FetchSearchPhase.lambda$moveToNextPhase$4(FetchSearchPhase.java:279)
	at org.elasticsearch.server@8.18.0/org.elasticsearch.action.search.AbstractSearchAsyncAction.executeNextPhase(AbstractSearchAsyncAction.java:421)
	at org.elasticsearch.server@8.18.0/org.elasticsearch.action.search.FetchSearchPhase.moveToNextPhase(FetchSearchPhase.java:278)
	at org.elasticsearch.server@8.18.0/org.elasticsearch.action.search.FetchSearchPhase.innerRun(FetchSearchPhase.java:122)
	at org.elasticsearch.server@8.18.0/org.elasticsearch.action.search.FetchSearchPhase$1.doRun(FetchSearchPhase.java:98)
	at org.elasticsearch.server@8.18.0/org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:27)
	... 6 more
```",piergm,closed,"['>bug', 'Team:Search Foundations', ':Search Foundations/Search']",https://github.com/elastic/elasticsearch/issues/130071,2025-06-26T07:53:19Z,2,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/130071,"{
  ""application_resource"": ""yes""
}"
18,129973,"java.lang.IllegalStateException: FieldExistsQuery requires that the field indexes doc values, norms or vectors","### Elasticsearch Version

main

### Installed Plugins

_No response_

### Java Version

_bundled_

### OS Version

serverless

### Problem Description

org.elasticsearch.search.query.QueryPhaseExecutionException: Query Failed [Failed to execute main query]
	at org.elasticsearch.server@9.1.0/org.elasticsearch.search.query.QueryPhase.addCollectorsAndSearch(QueryPhase.java:237)
	at org.elasticsearch.server@9.1.0/org.elasticsearch.search.query.QueryPhase.executeQuery(QueryPhase.java:143)
	at org.elasticsearch.server@9.1.0/org.elasticsearch.search.query.QueryPhase.execute(QueryPhase.java:70)
	at org.elasticsearch.server@9.1.0/org.elasticsearch.indices.IndicesService.lambda$loadIntoContext$39(IndicesService.java:1669)
	at org.elasticsearch.server@9.1.0/org.elasticsearch.indices.IndicesService.lambda$cacheShardLevelResult$40(IndicesService.java:1735)
	at org.elasticsearch.server@9.1.0/org.elasticsearch.indices.IndicesRequestCache$Loader.load(IndicesRequestCache.java:165)
	at org.elasticsearch.server@9.1.0/org.elasticsearch.indices.IndicesRequestCache$Loader.load(IndicesRequestCache.java:148)
	at org.elasticsearch.server@9.1.0/org.elasticsearch.common.cache.Cache.computeIfAbsent(Cache.java:440)
	at org.elasticsearch.server@9.1.0/org.elasticsearch.indices.IndicesRequestCache.getOrCompute(IndicesRequestCache.java:111)
	at org.elasticsearch.server@9.1.0/org.elasticsearch.indices.IndicesService.cacheShardLevelResult(IndicesService.java:1741)
	at org.elasticsearch.server@9.1.0/org.elasticsearch.indices.IndicesService.loadIntoContext(IndicesService.java:1663)
	at org.elasticsearch.server@9.1.0/org.elasticsearch.search.SearchService.loadOrExecuteQueryPhase(SearchService.java:670)
	at org.elasticsearch.server@9.1.0/org.elasticsearch.search.SearchService.executeQueryPhase(SearchService.java:877)
	at org.elasticsearch.server@9.1.0/org.elasticsearch.search.SearchService.lambda$executeQueryPhase$7(SearchService.java:710)
	at org.elasticsearch.server@9.1.0/org.elasticsearch.action.ActionRunnable$3.accept(ActionRunnable.java:79)
	at org.elasticsearch.server@9.1.0/org.elasticsearch.action.ActionRunnable$3.accept(ActionRunnable.java:76)
	at org.elasticsearch.server@9.1.0/org.elasticsearch.action.ActionRunnable$4.doRun(ActionRunnable.java:101)
	at org.elasticsearch.server@9.1.0/org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:27)
	at org.elasticsearch.server@9.1.0/org.elasticsearch.common.util.concurrent.TimedRunnable.doRun(TimedRunnable.java:35)
	at org.elasticsearch.server@9.1.0/org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:1044)
	at org.elasticsearch.server@9.1.0/org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:27)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1095)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:619)
	at java.base/java.lang.Thread.run(Thread.java:1447)
Caused by: java.lang.IllegalStateException: FieldExistsQuery requires that the field indexes doc values, norms or vectors, but field 'falco.output' exists and indexes neither of these data structures
	at org.apache.lucene.core@10.2.1/org.apache.lucene.search.FieldExistsQuery.rewrite(FieldExistsQuery.java:156)
	at org.apache.lucene.core@10.2.1/org.apache.lucene.search.ConstantScoreQuery.rewrite(ConstantScoreQuery.java:44)
	at org.apache.lucene.core@10.2.1/org.apache.lucene.search.BooleanQuery.rewrite(BooleanQuery.java:311)
	at org.apache.lucene.core@10.2.1/org.apache.lucene.search.BooleanQuery.rewrite(BooleanQuery.java:316)
	at org.apache.lucene.core@10.2.1/org.apache.lucene.search.IndexSearcher.rewrite(IndexSearcher.java:876)
	at org.elasticsearch.server@9.1.0/org.elasticsearch.search.internal.ContextIndexSearcher.rewrite(ContextIndexSearcher.java:205)
	at org.elasticsearch.server@9.1.0/org.elasticsearch.search.internal.SearchContext.rewrittenQuery(SearchContext.java:296)
	at org.elasticsearch.server@9.1.0/org.elasticsearch.search.query.QueryPhase.addCollectorsAndSearch(QueryPhase.java:164)

### Steps to Reproduce

Serverless alert - Found 50 data node errors of type: java.lang.IllegalStateException.

### Logs (if relevant)

_No response_",fang-xing-esql,closed,"['>bug', ':Search Relevance/Analysis', 'Team:Search Relevance']",https://github.com/elastic/elasticsearch/issues/129973,2025-06-25T03:10:05Z,11,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/129973,"{
  ""application_resource"": ""yes""
}"
19,129737,NPE in SourceConfirmedTextQuery,"### Elasticsearch Version

main

### Installed Plugins

_No response_

### Java Version

_bundled_

### OS Version

irrelevant

### Problem Description

NPE in SourceConfirmedTextQuery

```
org.elasticsearch.search.query.QueryPhaseExecutionException: Query Failed [Failed to execute main query]
	at org.elasticsearch.server@9.1.0/org.elasticsearch.search.query.QueryPhase.addCollectorsAndSearch(QueryPhase.java:237)
	at org.elasticsearch.server@9.1.0/org.elasticsearch.search.query.QueryPhase.executeQuery(QueryPhase.java:143)
	at org.elasticsearch.server@9.1.0/org.elasticsearch.search.query.QueryPhase.execute(QueryPhase.java:70)
	at org.elasticsearch.server@9.1.0/org.elasticsearch.indices.IndicesService.lambda$loadIntoContext$39(IndicesService.java:1669)
	at org.elasticsearch.server@9.1.0/org.elasticsearch.indices.IndicesService.lambda$cacheShardLevelResult$40(IndicesService.java:1735)
	at org.elasticsearch.server@9.1.0/org.elasticsearch.indices.IndicesRequestCache$Loader.load(IndicesRequestCache.java:165)
	at org.elasticsearch.server@9.1.0/org.elasticsearch.indices.IndicesRequestCache$Loader.load(IndicesRequestCache.java:148)
	at org.elasticsearch.server@9.1.0/org.elasticsearch.common.cache.Cache.computeIfAbsent(Cache.java:440)
	at org.elasticsearch.server@9.1.0/org.elasticsearch.indices.IndicesRequestCache.getOrCompute(IndicesRequestCache.java:111)
	at org.elasticsearch.server@9.1.0/org.elasticsearch.indices.IndicesService.cacheShardLevelResult(IndicesService.java:1741)
	at org.elasticsearch.server@9.1.0/org.elasticsearch.indices.IndicesService.loadIntoContext(IndicesService.java:1663)
	at org.elasticsearch.server@9.1.0/org.elasticsearch.search.SearchService.loadOrExecuteQueryPhase(SearchService.java:670)
	at org.elasticsearch.server@9.1.0/org.elasticsearch.search.SearchService.executeQueryPhase(SearchService.java:877)
	at org.elasticsearch.server@9.1.0/org.elasticsearch.search.SearchService.lambda$executeQueryPhase$7(SearchService.java:710)
	at org.elasticsearch.server@9.1.0/org.elasticsearch.action.ActionRunnable$3.accept(ActionRunnable.java:79)
	at org.elasticsearch.server@9.1.0/org.elasticsearch.action.ActionRunnable$3.accept(ActionRunnable.java:76)
	at org.elasticsearch.server@9.1.0/org.elasticsearch.action.ActionRunnable$4.doRun(ActionRunnable.java:101)
	at org.elasticsearch.server@9.1.0/org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:27)
	at org.elasticsearch.server@9.1.0/org.elasticsearch.common.util.concurrent.TimedRunnable.doRun(TimedRunnable.java:35)
	at org.elasticsearch.server@9.1.0/org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:1044)
	at org.elasticsearch.server@9.1.0/org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:27)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1095)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:619)
	at java.base/java.lang.Thread.run(Thread.java:1447)
Caused by: java.lang.NullPointerException: Cannot invoke ""java.util.List.iterator()"" because ""values"" is null
	at org.elasticsearch.mapper.extras@9.1.0/org.elasticsearch.index.mapper.extras.SourceConfirmedTextQuery$RuntimePhraseScorer.getOrCreateMemoryIndex(SourceConfirmedTextQuery.java:437)
	at org.elasticsearch.mapper.extras@9.1.0/org.elasticsearch.index.mapper.extras.SourceConfirmedTextQuery$RuntimePhraseScorer.computeFreq(SourceConfirmedTextQuery.java:448)
	at org.elasticsearch.mapper.extras@9.1.0/org.elasticsearch.index.mapper.extras.SourceConfirmedTextQuery$RuntimePhraseScorer.freq(SourceConfirmedTextQuery.java:426)
	at org.elasticsearch.mapper.extras@9.1.0/org.elasticsearch.index.mapper.extras.SourceConfirmedTextQuery$RuntimePhraseScorer$1.matches(SourceConfirmedTextQuery.java:386)
	at org.apache.lucene.core@10.2.1/org.apache.lucene.search.DenseConjunctionBulkScorer.scoreWindowUsingLeapFrog(DenseConjunctionBulkScorer.java:353)
	at org.apache.lucene.core@10.2.1/org.apache.lucene.search.DenseConjunctionBulkScorer.scoreWindow(DenseConjunctionBulkScorer.java:214)
	at org.apache.lucene.core@10.2.1/org.apache.lucene.search.DenseConjunctionBulkScorer.score(DenseConjunctionBulkScorer.java:132)
	at org.elasticsearch.server@9.1.0/org.elasticsearch.search.internal.CancellableBulkScorer.score(CancellableBulkScorer.java:46)
	at org.elasticsearch.server@9.1.0/org.elasticsearch.search.internal.ContextIndexSearcher.searchLeaf(ContextIndexSearcher.java:460)
	at org.apache.lucene.core@10.2.1/org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:809)
	at org.elasticsearch.server@9.1.0/org.elasticsearch.search.internal.ContextIndexSearcher.search(ContextIndexSearcher.java:387)
	at org.elasticsearch.server@9.1.0/org.elasticsearch.search.internal.ContextIndexSearcher.lambda$search$3(ContextIndexSearcher.java:365)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:328)
	at org.apache.lucene.core@10.2.1/org.apache.lucene.search.TaskExecutor$Task.run(TaskExecutor.java:173)
	at org.apache.lucene.core@10.2.1/org.apache.lucene.search.TaskExecutor.invokeAll(TaskExecutor.java:111)
	at org.elasticsearch.server@9.1.0/org.elasticsearch.search.internal.ContextIndexSearcher.search(ContextIndexSearcher.java:369)
	at org.elasticsearch.server@9.1.0/org.elasticsearch.search.internal.ContextIndexSearcher.search(ContextIndexSearcher.java:336)
	at org.elasticsearch.server@9.1.0/org.elasticsearch.search.query.QueryPhase.addCollectorsAndSearch(QueryPhase.java:212)
	... 23 more
```

### Steps to Reproduce

Found in serverless log alerts

### Logs (if relevant)

_No response_",ebadyano,closed,"['>bug', 'Team:StorageEngine', ':StorageEngine/Mapping']",https://github.com/elastic/elasticsearch/issues/129737,2025-06-20T00:39:38Z,6,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/129737,"{
  ""application_resource"": ""yes""
}"
20,129635,[CI] GeoIpCacheTests testPurgeCacheEntriesForDatabase failing,"**Build Scans:**
- [elasticsearch-periodic-platform-support #8850 / windows-2025_checkpart1_platform-support-windows](https://gradle-enterprise.elastic.co/s/lhtmg7j274e6y)
- [elasticsearch-periodic-platform-support #8850 / windows-2022_checkpart1_platform-support-windows](https://gradle-enterprise.elastic.co/s/6bgzulh2phvvs)
- [elasticsearch-periodic-platform-support #8844 / windows-2025_checkpart1_platform-support-windows](https://gradle-enterprise.elastic.co/s/4enwfzobxsrbm)
- [elasticsearch-periodic-platform-support #8844 / windows-2022_checkpart1_platform-support-windows](https://gradle-enterprise.elastic.co/s/p2pwkrd5lzcdm)
- [elasticsearch-periodic-platform-support #8838 / windows-2022_checkpart1_platform-support-windows](https://gradle-enterprise.elastic.co/s/sjerhzgmw53qy)
- [elasticsearch-periodic-platform-support #8838 / windows-2025_checkpart1_platform-support-windows](https://gradle-enterprise.elastic.co/s/bi5myvkrmyvwg)

**Reproduction Line:**
```
gradlew "":modules:ingest-geoip:test"" --tests ""org.elasticsearch.ingest.geoip.GeoIpCacheTests.testPurgeCacheEntriesForDatabase"" -Dtests.seed=149993FC2FC4DA5 -Dtests.locale=ff-Latn-MR -Dtests.timezone=Pacific/Port_Moresby -Druntime.java=24
```

**Applicable branches:**
main

**Reproduces locally?:**
N/A

**Failure History:**
[See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&_a=(controlGroupState:(initialChildControlState:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:task.keyword,order:0,selectedOptions:!(),title:'GradleTask',type:optionsListControl),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:className.keyword,order:1,selectedOptions:!(org.elasticsearch.ingest.geoip.GeoIpCacheTests),title:'Suite',type:optionsListControl),'144933da-5c1b-4257-a969-7f43455a7901':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:name.keyword,order:2,selectedOptions:!(testPurgeCacheEntriesForDatabase),title:'Test',type:optionsListControl)))))

**Failure Message:**
```
java.lang.AssertionError: expected null, but was:<Mock for AbstractResponse, hashCode: 1755769235>
```

**Issue Reasons:**
- [main] 2 consecutive failures in test testPurgeCacheEntriesForDatabase
- [main] 3 consecutive failures in step windows-2025_checkpart1_platform-support-windows
- [main] 3 consecutive failures in step windows-2022_checkpart1_platform-support-windows
- [main] 6 failures in test testPurgeCacheEntriesForDatabase (3.1% fail rate in 192 executions)
- [main] 3 failures in step windows-2025_checkpart1_platform-support-windows (100.0% fail rate in 3 executions)
- [main] 3 failures in step windows-2022_checkpart1_platform-support-windows (100.0% fail rate in 3 executions)
- [main] 3 failures in pipeline elasticsearch-periodic-platform-support (100.0% fail rate in 3 executions)

**Note:**
This issue was created using new test triage automation. Please report issues or feedback to es-delivery.",elasticsearchmachine,closed,"['>test-failure', ':Data Management/Ingest Node', 'Team:Data Management', 'needs:risk']",https://github.com/elastic/elasticsearch/issues/129635,2025-06-18T14:16:16Z,4,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/129635,"{
  ""application_resource"": ""unsure""
}"
21,129533,[CI] IndexingIT testIndexing failing,"**Build Scans:**
- [elasticsearch-intake #24127 / 8.19.0_bwc-snapshots](https://gradle-enterprise.elastic.co/s/f2356jsucupo6)
- [elasticsearch-pull-request #75895 / 8.19.0_part_2_bwc-snapshots](https://gradle-enterprise.elastic.co/s/xn2k5hqbobgoi)

**Reproduction Line:**
```
./gradlew "":x-pack:qa:rolling-upgrade:v8.19.0#upgradedClusterTest"" -Dtests.class=""org.elasticsearch.upgrades.IndexingIT"" -Dtests.method=""testIndexing"" -Dtests.seed=727871A2E3E80A61 -Dtests.bwc=true -Dtests.locale=lv -Dtests.timezone=Asia/Colombo -Druntime.java=24
```

**Applicable branches:**
main

**Reproduces locally?:**
N/A

**Failure History:**
[See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&_a=(controlGroupState:(initialChildControlState:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:task.keyword,order:0,selectedOptions:!(),title:'GradleTask',type:optionsListControl),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:className.keyword,order:1,selectedOptions:!(org.elasticsearch.upgrades.IndexingIT),title:'Suite',type:optionsListControl),'144933da-5c1b-4257-a969-7f43455a7901':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:name.keyword,order:2,selectedOptions:!(testIndexing),title:'Test',type:optionsListControl)))))

**Failure Message:**
```
java.lang.AssertionError: timed out waiting for green state for index [test_index,index_with_replicas,empty_index] cluster state [{
  ""cluster_name"" : ""v8.19.0"",
  ""cluster_uuid"" : ""G-anRk73RlCyKG51LVCgAQ"",
  ""version"" : 1903,
  ""state_uuid"" : ""v5hnpHUwQbKNwwFLXADpxg"",
  ""master_node"" : ""5PBptISmTnCoJB5TRVfoVw"",
  ""blocks"" : {
    ""indices"" : {
      ""mounted_index_shared_cache"" : {
        ""8"" : {
          ""description"" : ""index write (api)"",
          ""retryable"" : false,
          ""levels"" : [
            ""write""
          ]
        }
      },
      "".ds-reindex_test_data_stream_ugprade_test-2025.06.17-000004"" : {
        ""4"" : {
          ""description"" : ""index closed"",
          ""retryable"" : false,
          ""levels"" : [
            ""read"",
            ""write""
          ]
        }
      },
      ""mounted_index_full_copy"" : {
        ""8"" : {
          ""description"" : ""index write (api)"",
          ""retryable"" : false,
          ""levels"" : [
            ""write""
          ]
      
[truncated]
```

**Issue Reasons:**
- [main] 2 failures in test testIndexing (0.2% fail rate in 1000 executions)

**Note:**
This issue was created using new test triage automation. Please report issues or feedback to es-delivery.",elasticsearchmachine,closed,"['>test-failure', ':Data Management/Data streams', 'Team:Data Management', 'low-risk']",https://github.com/elastic/elasticsearch/issues/129533,2025-06-17T09:47:32Z,3,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/129533,"{
  ""application_resource"": ""yes""
}"
22,129480,[CI] PermissionsIT testCanViewExplainOnUnmanagedIndex failing,"**Build Scans:**
- [elasticsearch-periodic-platform-support #8802 / rhel-8_platform-support-unix](https://gradle-enterprise.elastic.co/s/7uuifdch2g3sq)
- [elasticsearch-periodic-platform-support #8802 / windows-2022_checkpart4_platform-support-windows](https://gradle-enterprise.elastic.co/s/4jhlxaoawvuj2)
- [elasticsearch-periodic-platform-support #8802 / ubuntu-2004-aarch64_checkpart4_platform-support-arm](https://gradle-enterprise.elastic.co/s/wqbwgsjwgyshi)
- [elasticsearch-pull-request #75669 / part-4](https://gradle-enterprise.elastic.co/s/kilbg72342wuc)

**Reproduction Line:**
```
./gradlew "":x-pack:plugin:ilm:qa:with-security:javaRestTest"" --tests ""org.elasticsearch.xpack.security.PermissionsIT.testCanManageIndexWithNoPermissions"" -Dtests.seed=97F771F3358B3A92 -Dtests.locale=af-ZA -Dtests.timezone=Indian/Chagos -Druntime.java=24
```

**Applicable branches:**
main

**Reproduces locally?:**
N/A

**Failure History:**
[See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&_a=(controlGroupState:(initialChildControlState:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:task.keyword,order:0,selectedOptions:!(),title:'GradleTask',type:optionsListControl),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:className.keyword,order:1,selectedOptions:!(org.elasticsearch.xpack.security.PermissionsIT),title:'Suite',type:optionsListControl),'144933da-5c1b-4257-a969-7f43455a7901':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:name.keyword,order:2,selectedOptions:!(testCanViewExplainOnUnmanagedIndex),title:'Test',type:optionsListControl)))))

**Failure Message:**
```
java.net.ConnectException: Connection refused
```

**Issue Reasons:**
- [main] 4 failures in test testCanViewExplainOnUnmanagedIndex (2.2% fail rate in 186 executions)

**Note:**
This issue was created using new test triage automation. Please report issues or feedback to es-delivery.",elasticsearchmachine,closed,"['>test-failure', ':Data Management/ILM+SLM', ':Security/Security', 'Team:Data Management', 'Team:Security', 'low-risk']",https://github.com/elastic/elasticsearch/issues/129480,2025-06-16T13:38:30Z,5,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/129480,"{
  ""application_resource"": ""unsure""
}"
23,129062,Include index.sort.* index settings defaults for time_series and logsdb index modes.,"Today when index mode is either logsdb and tsdb, then index sorting is used. However when requesting the `index.sort.*` setting, then no of the index sort index settings have a value. Even when asking for default index setting values. However index sorting has been configured.

This makes it difficult to figure out how either of the index mode work and confusing whether index sorting is actually active. Especially if index sorting gets customized while using logs index mode. 

The fix would be to include the default logsdb and time series index modes' default index sort settings in the get index settings api as default values.

```
POST /logs-myapp-prod/_doc
{
    ""@timestamp"": ""1999-12-31T23:59:59.999Z""
}

GET /logs-myapp-prod/_settings?include_defaults
```

The last api call doesn't include any values for `index.sort.*` index settings:

<details><summary>get index api response</summary>
<p>

```json
{
    "".ds-logs-myapp-prod-2025.06.06-000001"": {
        ""settings"": {
            ""index"": {
                ""mapping"": {
                    ""total_fields"": {
                        ""ignore_dynamic_beyond_limit"": ""true""
                    },
                    ""ignore_malformed"": ""true""
                },
                ""hidden"": ""true"",
                ""provided_name"": "".ds-logs-myapp-prod-2025.06.06-000001"",
                ""creation_date"": ""1749220646540"",
                ""number_of_replicas"": ""1"",
                ""uuid"": ""uSWly65PQky-lnmD7rtT7A"",
                ""version"": {
                    ""created"": ""9028000""
                },
                ""lifecycle"": {
                    ""name"": ""logs""
                },
                ""mode"": ""logsdb"",
                ""codec"": ""best_compression"",
                ""routing"": {
                    ""allocation"": {
                        ""include"": {
                            ""_tier_preference"": ""data_hot""
                        }
                    }
                },
                ""number_of_shards"": ""1"",
                ""logsdb"": {
                    ""add_host_name_field"": ""true"",
                    ""sort_on_host_name"": ""true""
                },
                ""default_pipeline"": ""logs@default-pipeline""
            }
        },
        ""defaults"": {
            ""index"": {
                ""flush_after_merge"": ""512mb"",
                ""time_series"": {
                    ""end_time"": ""9999-12-31T23:59:59.999Z"",
                    ""start_time"": ""-9999-01-01T00:00:00Z"",
                    ""es87tsdb_codec"": {
                        ""enabled"": ""true""
                    }
                },
                ""final_pipeline"": ""_none"",
                ""max_inner_result_window"": ""100"",
                ""unassigned"": {
                    ""node_left"": {
                        ""delayed_timeout"": ""1m""
                    }
                },
                ""max_terms_count"": ""65536"",
                ""rollup"": {
                    ""source"": {
                        ""name"": """",
                        ""uuid"": """"
                    }
                },
                ""lifecycle"": {
                    ""prefer_ilm"": ""true"",
                    ""rollover_alias"": """",
                    ""origination_date"": ""-1"",
                    ""parse_origination_date"": ""false"",
                    ""skip"": ""false"",
                    ""step"": {
                        ""wait_time_threshold"": ""12h""
                    },
                    ""indexing_complete"": ""false""
                },
                ""routing_partition_size"": ""1"",
                ""force_memory_term_dictionary"": ""false"",
                ""max_docvalue_fields_search"": ""100"",
                ""merge"": {
                    ""scheduler"": {
                        ""max_thread_count"": ""4"",
                        ""auto_throttle"": ""true"",
                        ""max_merge_count"": ""9""
                    },
                    ""policy"": {
                        ""merge_factor"": ""32"",
                        ""floor_segment"": ""2mb"",
                        ""max_merge_at_once_explicit"": ""30"",
                        ""max_merge_at_once"": ""10"",
                        ""max_merged_segment"": ""0b"",
                        ""expunge_deletes_allowed"": ""10.0"",
                        ""segments_per_tier"": ""10.0"",
                        ""type"": ""UNSET"",
                        ""deletes_pct_allowed"": ""20.0""
                    }
                },
                ""max_refresh_listeners"": ""1000"",
                ""max_regex_length"": ""1000"",
                ""load_fixed_bitset_filters_eagerly"": ""true"",
                ""number_of_routing_shards"": ""1"",
                ""write"": {
                    ""wait_for_active_shards"": ""1""
                },
                ""seq_no"": {
                    ""index_options"": ""DOC_VALUES_ONLY""
                },
                ""verified_before_close"": ""false"",
                ""mapping"": {
                    ""coerce"": ""false"",
                    ""semantic_text"": {
                        ""use_legacy_format"": ""false""
                    },
                    ""field_name_length"": {
                        ""limit"": ""9223372036854775807""
                    },
                    ""total_fields"": {
                        ""limit"": ""1000""
                    },
                    ""ignore_above"": ""8191"",
                    ""nested_objects"": {
                        ""limit"": ""10000""
                    },
                    ""source"": {
                        ""mode"": ""SYNTHETIC""
                    },
                    ""synthetic_source"": {
                        ""skip_ignored_source_read"": ""false"",
                        ""skip_ignored_source_write"": ""false""
                    },
                    ""nested_fields"": {
                        ""limit"": ""50""
                    },
                    ""synthetic_source_keep"": ""arrays"",
                    ""depth"": {
                        ""limit"": ""20""
                    },
                    ""dimension_fields"": {
                        ""limit"": ""32768""
                    },
                    ""use_doc_values_skipper"": ""false""
                },
                ""source_only"": ""false"",
                ""soft_deletes"": {
                    ""enabled"": ""true"",
                    ""retention"": {
                        ""operations"": ""0""
                    },
                    ""retention_lease"": {
                        ""period"": ""12h""
                    }
                },
                ""max_script_fields"": ""32"",
                ""query"": {
                    ""default_field"": [
                        ""*""
                    ],
                    ""parse"": {
                        ""allow_unmapped_fields"": ""true""
                    }
                },
                ""format"": ""0"",
                ""sort"": {
                    ""missing"": [],
                    ""mode"": [],
                    ""field"": [],
                    ""order"": []
                },
                ""priority"": ""1"",
                ""routing_path"": [],
                ""version"": {
                    ""compatibility"": ""9028000""
                },
                ""dense_vector"": {
                    ""hnsw_filter_heuristic"": ""ACORN""
                },
                ""max_rescore_window"": ""10000"",
                ""bloom_filter_for_id_field"": {
                    ""enabled"": ""true""
                },
                ""max_adjacency_matrix_filters"": ""100"",
                ""analyze"": {
                    ""max_token_count"": ""10000""
                },
                ""gc_deletes"": ""60s"",
                ""top_metrics_max_size"": ""10"",
                ""failure_store"": {
                    ""version"": ""0""
                },
                ""optimize_auto_generated_id"": ""true"",
                ""max_ngram_diff"": ""1"",
                ""translog"": {
                    ""flush_threshold_age"": ""1m"",
                    ""generation_threshold_size"": ""64mb"",
                    ""flush_threshold_size"": ""10gb"",
                    ""sync_interval"": ""5s"",
                    ""retention"": {
                        ""size"": ""-1"",
                        ""age"": ""-1""
                    },
                    ""durability"": ""REQUEST""
                },
                ""auto_expand_replicas"": ""false"",
                ""fast_refresh"": ""false"",
                ""mapper"": {
                    ""dynamic"": ""true""
                },
                ""recovery"": {
                    ""type"": """",
                    ""use_synthetic_source"": ""true""
                },
                ""requests"": {
                    ""cache"": {
                        ""enable"": ""true""
                    }
                },
                ""data_path"": """",
                ""highlight"": {
                    ""max_analyzed_offset"": ""1000000"",
                    ""weight_matches_mode"": {
                        ""enabled"": ""true""
                    }
                },
                ""look_back_time"": ""2h"",
                ""routing"": {
                    ""rebalance"": {
                        ""enable"": ""all""
                    },
                    ""allocation"": {
                        ""disk"": {
                            ""watermark"": {
                                ""ignore"": ""false""
                            }
                        },
                        ""enable"": ""all"",
                        ""total_shards_per_node"": ""-1""
                    }
                },
                ""search"": {
                    ""slowlog"": {
                        ""include"": {
                            ""user"": ""false""
                        },
                        ""level"": ""TRACE"",
                        ""threshold"": {
                            ""fetch"": {
                                ""warn"": ""-1"",
                                ""trace"": ""-1"",
                                ""debug"": ""-1"",
                                ""info"": ""-1""
                            },
                            ""query"": {
                                ""warn"": ""-1"",
                                ""trace"": ""-1"",
                                ""debug"": ""-1"",
                                ""info"": ""-1""
                            }
                        }
                    },
                    ""idle"": {
                        ""after"": ""30s""
                    }
                },
                ""fielddata"": {
                    ""cache"": ""node""
                },
                ""look_ahead_time"": ""30m"",
                ""max_slices_per_scroll"": ""1024"",
                ""shard"": {
                    ""check_on_startup"": ""false""
                },
                ""xpack"": {
                    ""watcher"": {
                        ""template"": {
                            ""version"": """"
                        }
                    },
                    ""version"": """",
                    ""ccr"": {
                        ""following_index"": ""false""
                    }
                },
                ""percolator"": {
                    ""map_unmapped_fields_as_text"": ""false""
                },
                ""verified_read_only"": ""false"",
                ""allocation"": {
                    ""max_retries"": ""5"",
                    ""existing_shards_allocator"": ""gateway_allocator""
                },
                ""refresh_interval"": ""1s"",
                ""indexing"": {
                    ""slowlog"": {
                        ""include"": {
                            ""user"": ""false""
                        },
                        ""reformat"": ""true"",
                        ""threshold"": {
                            ""index"": {
                                ""warn"": ""-1"",
                                ""trace"": ""-1"",
                                ""debug"": ""-1"",
                                ""info"": ""-1""
                            }
                        },
                        ""source"": ""1000"",
                        ""level"": ""TRACE""
                    }
                },
                ""compound_format"": ""1gb"",
                ""blocks"": {
                    ""metadata"": ""false"",
                    ""read"": ""false"",
                    ""read_only_allow_delete"": ""false"",
                    ""read_only"": ""false"",
                    ""write"": ""false""
                },
                ""esql"": {
                    ""stored_fields_sequential_proportion"": ""0.2""
                },
                ""max_result_window"": ""10000"",
                ""store"": {
                    ""stats_refresh_interval"": ""10s"",
                    ""type"": """",
                    ""fs"": {
                        ""fs_lock"": ""native""
                    },
                    ""preload"": [],
                    ""snapshot"": {
                        ""snapshot_name"": """",
                        ""index_uuid"": """",
                        ""cache"": {
                            ""prewarm"": {
                                ""enabled"": ""true""
                            },
                            ""enabled"": ""true"",
                            ""excluded_file_types"": []
                        },
                        ""repository_uuid"": """",
                        ""uncached_chunk_size"": ""-1b"",
                        ""delete_searchable_snapshot"": ""false"",
                        ""index_name"": """",
                        ""partial"": ""false"",
                        ""blob_cache"": {
                            ""metadata_files"": {
                                ""max_length"": ""64kb""
                            }
                        },
                        ""repository_name"": """",
                        ""snapshot_uuid"": """"
                    }
                },
                ""queries"": {
                    ""cache"": {
                        ""enabled"": ""true""
                    }
                },
                ""shard_limit"": {
                    ""group"": ""normal""
                },
                ""warmer"": {
                    ""enabled"": ""true""
                },
                ""downsample"": {
                    ""interval"": """",
                    ""source"": {
                        ""name"": """",
                        ""uuid"": """"
                    },
                    ""origin"": {
                        ""name"": """",
                        ""uuid"": """"
                    },
                    ""status"": ""unknown""
                },
                ""logsdb"": {
                    ""route_on_sort_fields"": ""false""
                },
                ""override_write_load_forecast"": ""0.0"",
                ""max_shingle_diff"": ""3"",
                ""query_string"": {
                    ""lenient"": ""false""
                }
            }
        }
    }
}
```

</p>
</details> 

The default section contains empty values for the `index.sort.*` index setting:

```
...
""sort"": {
    ""missing"": [],
    ""mode"": [],
    ""field"": [],
    ""order"": []
},
...
```

The fix should include the default values for both logsdb and tsdb.",martijnvg,closed,"['>bug', 'Team:StorageEngine', ':StorageEngine/Logs']",https://github.com/elastic/elasticsearch/issues/129062,2025-06-06T13:44:08Z,4,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/129062,"{
  ""application_resource"": ""yes""
}"
24,128707,[CI] S3ClientsManagerTests testClientsLifeCycleForSingleProject failing,"**Build Scans:**
- [elasticsearch-periodic-platform-support #8514 / ubuntu-2404-aarch64_checkpart1_platform-support-arm](https://gradle-enterprise.elastic.co/s/wfodx6t7dmdqi)
- [elasticsearch-pull-request #73285 / part-1](https://gradle-enterprise.elastic.co/s/tois4bdei4pbo)
- [elasticsearch-pull-request #73209 / part-1](https://gradle-enterprise.elastic.co/s/b5pjgwh4akq7w)

**Reproduction Line:**
```
./gradlew "":modules:repository-s3:test"" --tests ""org.elasticsearch.repositories.s3.S3ClientsManagerTests.testClientsLifeCycleForSingleProject"" -Dtests.seed=1DA36E369C3C1A0E -Dtests.locale=zh-TW -Dtests.timezone=Africa/Dakar -Druntime.java=24
```

**Applicable branches:**
main

**Reproduces locally?:**
N/A

**Failure History:**
[See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&_a=(controlGroupState:(initialChildControlState:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:task.keyword,order:0,selectedOptions:!(),title:'GradleTask',type:optionsListControl),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:className.keyword,order:1,selectedOptions:!(org.elasticsearch.repositories.s3.S3ClientsManagerTests),title:'Suite',type:optionsListControl),'144933da-5c1b-4257-a969-7f43455a7901':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:name.keyword,order:2,selectedOptions:!(testClientsLifeCycleForSingleProject),title:'Test',type:optionsListControl)))))

**Failure Message:**
```
junit.framework.AssertionFailedError: Expected exception IllegalStateException but no exception was thrown
```

**Issue Reasons:**
- [main] 3 failures in test testClientsLifeCycleForSingleProject (2.7% fail rate in 113 executions)
- [main] 2 failures in step part-1 (4.8% fail rate in 42 executions)
- [main] 2 failures in pipeline elasticsearch-pull-request (4.9% fail rate in 41 executions)

**Note:**
This issue was created using new test triage automation. Please report issues or feedback to es-delivery.",elasticsearchmachine,closed,"[':Distributed Coordination/Snapshot/Restore', '>test-failure', 'low-risk', 'Team:Distributed Coordination']",https://github.com/elastic/elasticsearch/issues/128707,2025-05-31T13:30:05Z,3,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/128707,"{
  ""application_resource"": ""yes""
}"
25,128583,`TransportIndicesStatsAction` causes starvation of tasks on `management` thread pool due to `Engine.getSparseVectorValueCount`,"`Engine.getSparseVectorValueCount` might block 100% of the `management` threads in case we're facing frequent cache misses.
This causes the thread pool to queue and potentially starve important other work that's also depending on the `management` thread pool.
This was discovered on an internal serverless project.

<img width=""1797"" alt=""Image"" src=""https://github.com/user-attachments/assets/6f165d21-a065-41f7-94d3-9e2cd324422c"" />

Here's the corresponding `hot_threads` output:

```
0.3% [cpu=0.3%, other=0.0%] (1.3ms out of 500ms) cpu usage by thread 'elasticsearch[es-es-index-546895bb95-9l8qb][management][T#2]'
     10/10 snapshots sharing following 98 elements
       java.base@24/jdk.internal.misc.Unsafe.park(Native Method)
       java.base@24/java.util.concurrent.locks.LockSupport.park(LockSupport.java:223)
       java.base@24/java.util.concurrent.locks.AbstractQueuedSynchronizer.acquire(AbstractQueuedSynchronizer.java:789)
       java.base@24/java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireSharedInterruptibly(AbstractQueuedSynchronizer.java:1138)
       app/org.elasticsearch.server@9.1.0/org.elasticsearch.action.support.PlainActionFuture$Sync.get(PlainActionFuture.java:265)
       app/org.elasticsearch.server@9.1.0/org.elasticsearch.action.support.PlainActionFuture.get(PlainActionFuture.java:96)
       org.elasticsearch.blobcache@9.1.0/org.elasticsearch.blobcache.shared.SharedBlobCacheService$CacheFile.readSingleRegion(SharedBlobCacheService.java:1252)
       org.elasticsearch.blobcache@9.1.0/org.elasticsearch.blobcache.shared.SharedBlobCacheService$CacheFile.populateAndRead(SharedBlobCacheService.java:1229)
       org.elasticsearch.stateless@9.1.0/co.elastic.elasticsearch.stateless.cache.reader.CacheFileReader.doRead(CacheFileReader.java:124)
       org.elasticsearch.stateless@9.1.0/co.elastic.elasticsearch.stateless.cache.reader.CacheFileReader.read(CacheFileReader.java:94)
       org.elasticsearch.stateless@9.1.0/co.elastic.elasticsearch.stateless.lucene.BlobCacheIndexInput.readInternalSlow(BlobCacheIndexInput.java:175)
       org.elasticsearch.stateless@9.1.0/co.elastic.elasticsearch.stateless.lucene.BlobCacheIndexInput.doReadInternal(BlobCacheIndexInput.java:161)
       org.elasticsearch.stateless@9.1.0/co.elastic.elasticsearch.stateless.lucene.BlobCacheIndexInput.readInternal(BlobCacheIndexInput.java:131)
       org.elasticsearch.blobcache@9.1.0/org.elasticsearch.blobcache.common.BlobCacheBufferedIndexInput.refill(BlobCacheBufferedIndexInput.java:304)
       org.elasticsearch.blobcache@9.1.0/org.elasticsearch.blobcache.common.BlobCacheBufferedIndexInput.readByte(BlobCacheBufferedIndexInput.java:57)
       app/org.apache.lucene.core@10.2.1/org.apache.lucene.store.DataInput.readVInt(DataInput.java:121)
       org.elasticsearch.blobcache@9.1.0/org.elasticsearch.blobcache.common.BlobCacheBufferedIndexInput.readVInt(BlobCacheBufferedIndexInput.java:172)
       app/org.apache.lucene.core@10.2.1/org.apache.lucene.codecs.lucene90.blocktree.SegmentTermsEnumFrame.loadBlock(SegmentTermsEnumFrame.java:174)
       app/org.apache.lucene.core@10.2.1/org.apache.lucene.codecs.lucene90.blocktree.SegmentTermsEnum.lambda$prepareSeekExact$1(SegmentTermsEnum.java:511)
       app/org.apache.lucene.core@10.2.1/org.apache.lucene.codecs.lucene90.blocktree.SegmentTermsEnum$$Lambda/0x0000000030b2a4a8.get(Unknown Source)
       app/org.apache.lucene.core@10.2.1/org.apache.lucene.codecs.lucene90.blocktree.SegmentTermsEnum.seekExact(SegmentTermsEnum.java:599)
       app/org.elasticsearch.server@9.1.0/org.elasticsearch.index.engine.Engine.getSparseVectorValueCount(Engine.java:395)
       app/org.elasticsearch.server@9.1.0/org.elasticsearch.index.engine.Engine.sparseVectorStats(Engine.java:379)
       app/org.elasticsearch.server@9.1.0/org.elasticsearch.index.engine.Engine.sparseVectorStats(Engine.java:369)
       app/org.elasticsearch.server@9.1.0/org.elasticsearch.index.shard.IndexShard.sparseVectorStats(IndexShard.java:1482)
       app/org.elasticsearch.server@9.1.0/org.elasticsearch.action.admin.indices.stats.CommonStats.getShardLevelStats(CommonStats.java:192)
       app/org.elasticsearch.server@9.1.0/org.elasticsearch.indices.IndicesService.indexShardStats(IndicesService.java:564)
       app/org.elasticsearch.server@9.1.0/org.elasticsearch.indices.IndicesService.statsByShard(IndicesService.java:518)
       app/org.elasticsearch.server@9.1.0/org.elasticsearch.indices.IndicesService.stats(IndicesService.java:489)
       app/org.elasticsearch.server@9.1.0/org.elasticsearch.node.NodeService.stats(NodeService.java:188)
       app/org.elasticsearch.server@9.1.0/org.elasticsearch.action.admin.cluster.node.stats.TransportNodesStatsAction.nodeOperation(TransportNodesStatsAction.java:161)
       app/org.elasticsearch.server@9.1.0/org.elasticsearch.action.admin.cluster.node.stats.TransportNodesStatsAction.nodeOperation(TransportNodesStatsAction.java:47)
       app/org.elasticsearch.server@9.1.0/org.elasticsearch.action.support.nodes.TransportNodesAction.nodeOperationAsync(TransportNodesAction.java:245)
       app/org.elasticsearch.server@9.1.0/org.elasticsearch.action.support.nodes.TransportNodesAction$NodeTransportHandler.lambda$messageReceived$0(TransportNodesAction.java:261)
       app/org.elasticsearch.server@9.1.0/org.elasticsearch.action.support.nodes.TransportNodesAction$NodeTransportHandler$$Lambda/0x00000000308c7978.accept(Unknown Source)
       app/org.elasticsearch.server@9.1.0/org.elasticsearch.action.ActionListener.run(ActionListener.java:465)
       app/org.elasticsearch.server@9.1.0/org.elasticsearch.action.support.nodes.TransportNodesAction$NodeTransportHandler.messageReceived(TransportNodesAction.java:259)
       org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.transport.SecurityServerTransportInterceptor$ProfileSecuredRequestHandler$1.doRun(SecurityServerTransportInterceptor.java:579)
       app/org.elasticsearch.server@9.1.0/org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:27)
       org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.transport.SecurityServerTransportInterceptor$ProfileSecuredRequestHandler$3.onResponse(SecurityServerTransportInterceptor.java:632)
       org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.transport.SecurityServerTransportInterceptor$ProfileSecuredRequestHandler$3.onResponse(SecurityServerTransportInterceptor.java:621)
       org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.AuthorizationService.lambda$authorizeAction$8(AuthorizationService.java:470)
       org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.AuthorizationService$$Lambda/0x0000000030802fa8.accept(Unknown Source)
       org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.AuthorizationService$AuthorizationResultListener.onResponse(AuthorizationService.java:1062)
       org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.AuthorizationService$AuthorizationResultListener.onResponse(AuthorizationService.java:1028)
       app/org.elasticsearch.server@9.1.0/org.elasticsearch.action.support.ContextPreservingActionListener.onResponse(ContextPreservingActionListener.java:33)
       org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.AuthorizationService.lambda$authorizeAction$9(AuthorizationService.java:484)
       org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.AuthorizationService$$Lambda/0x0000000030803438.accept(Unknown Source)
       app/org.elasticsearch.server@9.1.0/org.elasticsearch.action.ActionListenerImplementations$ResponseWrappingActionListener.onResponse(ActionListenerImplementations.java:261)
       org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.RBACEngine.authorizeClusterAction(RBACEngine.java:211)
       org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.AuthorizationService.authorizeAction(AuthorizationService.java:474)
       org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.AuthorizationService.maybeAuthorizeRunAs(AuthorizationService.java:450)
       org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.AuthorizationService.lambda$authorize$3(AuthorizationService.java:337)
       org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.AuthorizationService$$Lambda/0x00000000307f4fe8.accept(Unknown Source)
       app/org.elasticsearch.server@9.1.0/org.elasticsearch.action.ActionListener$2.onResponse(ActionListener.java:258)
       app/org.elasticsearch.server@9.1.0/org.elasticsearch.action.support.ContextPreservingActionListener.onResponse(ContextPreservingActionListener.java:33)
       org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.RBACEngine.lambda$resolveAuthorizationInfo$0(RBACEngine.java:176)
       org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.RBACEngine$$Lambda/0x00000000307f5478.accept(Unknown Source)
       app/org.elasticsearch.server@9.1.0/org.elasticsearch.action.ActionListenerImplementations$ResponseWrappingActionListener.onResponse(ActionListenerImplementations.java:261)
       org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.store.CompositeRolesStore.lambda$getRoles$4(CompositeRolesStore.java:213)
       org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.store.CompositeRolesStore$$Lambda/0x00000000307f56a8.accept(Unknown Source)
       app/org.elasticsearch.server@9.1.0/org.elasticsearch.action.ActionListenerImplementations$ResponseWrappingActionListener.onResponse(ActionListenerImplementations.java:261)
       org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.store.CompositeRolesStore.lambda$getRole$6(CompositeRolesStore.java:232)
       org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.store.CompositeRolesStore$$Lambda/0x000000003089b768.accept(Unknown Source)
       app/org.elasticsearch.server@9.1.0/org.elasticsearch.action.ActionListenerImplementations$ResponseWrappingActionListener.onResponse(ActionListenerImplementations.java:261)
       org.elasticsearch.xcore@9.1.0/org.elasticsearch.xpack.core.security.authz.store.RoleReferenceIntersection.lambda$buildRole$0(RoleReferenceIntersection.java:49)
       org.elasticsearch.xcore@9.1.0/org.elasticsearch.xpack.core.security.authz.store.RoleReferenceIntersection$$Lambda/0x000000003087a7e8.accept(Unknown Source)
       app/org.elasticsearch.server@9.1.0/org.elasticsearch.action.ActionListenerImplementations$ResponseWrappingActionListener.onResponse(ActionListenerImplementations.java:261)
       app/org.elasticsearch.server@9.1.0/org.elasticsearch.action.support.GroupedActionListener.onResponse(GroupedActionListener.java:57)
       org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.store.CompositeRolesStore.buildRoleFromRoleReference(CompositeRolesStore.java:330)
       org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.store.CompositeRolesStore.lambda$getRole$5(CompositeRolesStore.java:231)
       org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.store.CompositeRolesStore$$Lambda/0x000000003089b520.accept(Unknown Source)
       org.elasticsearch.xcore@9.1.0/org.elasticsearch.xpack.core.security.authz.store.RoleReferenceIntersection.lambda$buildRole$1(RoleReferenceIntersection.java:53)
       org.elasticsearch.xcore@9.1.0/org.elasticsearch.xpack.core.security.authz.store.RoleReferenceIntersection$$Lambda/0x000000003087aa18.accept(Unknown Source)
       java.base@24/java.lang.Iterable.forEach(Iterable.java:75)
       org.elasticsearch.xcore@9.1.0/org.elasticsearch.xpack.core.security.authz.store.RoleReferenceIntersection.buildRole(RoleReferenceIntersection.java:53)
       org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.store.CompositeRolesStore.getRole(CompositeRolesStore.java:230)
       org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.store.CompositeRolesStore.getRoles(CompositeRolesStore.java:206)
       org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.RBACEngine.resolveAuthorizationInfo(RBACEngine.java:172)
       org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.AuthorizationService.authorize(AuthorizationService.java:353)
       org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.transport.ServerTransportFilter.lambda$inbound$1(ServerTransportFilter.java:114)
       org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.transport.ServerTransportFilter$$Lambda/0x0000000030639ab8.accept(Unknown Source)
       app/org.elasticsearch.server@9.1.0/org.elasticsearch.action.ActionListenerImplementations$ResponseWrappingActionListener.onResponse(ActionListenerImplementations.java:261)
       app/org.elasticsearch.server@9.1.0/org.elasticsearch.action.ActionListenerImplementations$MappedActionListener.onResponse(ActionListenerImplementations.java:111)
       org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authc.AuthenticatorChain.authenticate(AuthenticatorChain.java:93)
       org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authc.AuthenticationService.authenticate(AuthenticationService.java:271)
       org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authc.AuthenticationService.authenticate(AuthenticationService.java:203)
       org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.transport.ServerTransportFilter.authenticate(ServerTransportFilter.java:127)
       org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.transport.ServerTransportFilter.inbound(ServerTransportFilter.java:105)
       org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.transport.SecurityServerTransportInterceptor$ProfileSecuredRequestHandler.messageReceived(SecurityServerTransportInterceptor.java:643)
       app/org.elasticsearch.server@9.1.0/org.elasticsearch.transport.RequestHandlerRegistry.processMessageReceived(RequestHandlerRegistry.java:90)
       app/org.elasticsearch.server@9.1.0/org.elasticsearch.transport.TransportService$6.doRun(TransportService.java:1092)
       app/org.elasticsearch.server@9.1.0/org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:1044)
       app/org.elasticsearch.server@9.1.0/org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:27)
       java.base@24/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1095)
       java.base@24/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:619)
       java.base@24/java.lang.Thread.runWith(Thread.java:1460)
       java.base@24/java.lang.Thread.run(Thread.java:1447)

    0.2% [cpu=0.2%, other=0.0%] (933.6micros out of 500ms) cpu usage by thread 'elasticsearch[es-es-index-546895bb95-9l8qb][management][T#1]'
     10/10 snapshots sharing following 98 elements
       java.base@24/jdk.internal.misc.Unsafe.park(Native Method)
       java.base@24/java.util.concurrent.locks.LockSupport.park(LockSupport.java:223)
       java.base@24/java.util.concurrent.locks.AbstractQueuedSynchronizer.acquire(AbstractQueuedSynchronizer.java:789)
       java.base@24/java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireSharedInterruptibly(AbstractQueuedSynchronizer.java:1138)
       app/org.elasticsearch.server@9.1.0/org.elasticsearch.action.support.PlainActionFuture$Sync.get(PlainActionFuture.java:265)
       app/org.elasticsearch.server@9.1.0/org.elasticsearch.action.support.PlainActionFuture.get(PlainActionFuture.java:96)
       org.elasticsearch.blobcache@9.1.0/org.elasticsearch.blobcache.shared.SharedBlobCacheService$CacheFile.readSingleRegion(SharedBlobCacheService.java:1252)
       org.elasticsearch.blobcache@9.1.0/org.elasticsearch.blobcache.shared.SharedBlobCacheService$CacheFile.populateAndRead(SharedBlobCacheService.java:1229)
       org.elasticsearch.stateless@9.1.0/co.elastic.elasticsearch.stateless.cache.reader.CacheFileReader.doRead(CacheFileReader.java:124)
       org.elasticsearch.stateless@9.1.0/co.elastic.elasticsearch.stateless.cache.reader.CacheFileReader.read(CacheFileReader.java:94)
       org.elasticsearch.stateless@9.1.0/co.elastic.elasticsearch.stateless.lucene.BlobCacheIndexInput.readInternalSlow(BlobCacheIndexInput.java:175)
       org.elasticsearch.stateless@9.1.0/co.elastic.elasticsearch.stateless.lucene.BlobCacheIndexInput.doReadInternal(BlobCacheIndexInput.java:161)
       org.elasticsearch.stateless@9.1.0/co.elastic.elasticsearch.stateless.lucene.BlobCacheIndexInput.readInternal(BlobCacheIndexInput.java:131)
       org.elasticsearch.blobcache@9.1.0/org.elasticsearch.blobcache.common.BlobCacheBufferedIndexInput.refill(BlobCacheBufferedIndexInput.java:304)
       org.elasticsearch.blobcache@9.1.0/org.elasticsearch.blobcache.common.BlobCacheBufferedIndexInput.readByte(BlobCacheBufferedIndexInput.java:57)
       app/org.apache.lucene.core@10.2.1/org.apache.lucene.store.DataInput.readVInt(DataInput.java:121)
       org.elasticsearch.blobcache@9.1.0/org.elasticsearch.blobcache.common.BlobCacheBufferedIndexInput.readVInt(BlobCacheBufferedIndexInput.java:172)
       app/org.apache.lucene.core@10.2.1/org.apache.lucene.codecs.lucene90.blocktree.SegmentTermsEnumFrame.loadBlock(SegmentTermsEnumFrame.java:174)
       app/org.apache.lucene.core@10.2.1/org.apache.lucene.codecs.lucene90.blocktree.SegmentTermsEnum.lambda$prepareSeekExact$1(SegmentTermsEnum.java:511)
       app/org.apache.lucene.core@10.2.1/org.apache.lucene.codecs.lucene90.blocktree.SegmentTermsEnum$$Lambda/0x0000000030b2a4a8.get(Unknown Source)
       app/org.apache.lucene.core@10.2.1/org.apache.lucene.codecs.lucene90.blocktree.SegmentTermsEnum.seekExact(SegmentTermsEnum.java:599)
       app/org.elasticsearch.server@9.1.0/org.elasticsearch.index.engine.Engine.getSparseVectorValueCount(Engine.java:395)
       app/org.elasticsearch.server@9.1.0/org.elasticsearch.index.engine.Engine.sparseVectorStats(Engine.java:379)
       app/org.elasticsearch.server@9.1.0/org.elasticsearch.index.engine.Engine.sparseVectorStats(Engine.java:369)
       app/org.elasticsearch.server@9.1.0/org.elasticsearch.index.shard.IndexShard.sparseVectorStats(IndexShard.java:1482)
       app/org.elasticsearch.server@9.1.0/org.elasticsearch.action.admin.indices.stats.CommonStats.getShardLevelStats(CommonStats.java:192)
       app/org.elasticsearch.server@9.1.0/org.elasticsearch.indices.IndicesService.indexShardStats(IndicesService.java:564)
       app/org.elasticsearch.server@9.1.0/org.elasticsearch.indices.IndicesService.statsByShard(IndicesService.java:518)
       app/org.elasticsearch.server@9.1.0/org.elasticsearch.indices.IndicesService.stats(IndicesService.java:489)
       app/org.elasticsearch.server@9.1.0/org.elasticsearch.node.NodeService.stats(NodeService.java:188)
       app/org.elasticsearch.server@9.1.0/org.elasticsearch.action.admin.cluster.node.stats.TransportNodesStatsAction.nodeOperation(TransportNodesStatsAction.java:161)
       app/org.elasticsearch.server@9.1.0/org.elasticsearch.action.admin.cluster.node.stats.TransportNodesStatsAction.nodeOperation(TransportNodesStatsAction.java:47)
       app/org.elasticsearch.server@9.1.0/org.elasticsearch.action.support.nodes.TransportNodesAction.nodeOperationAsync(TransportNodesAction.java:245)
       app/org.elasticsearch.server@9.1.0/org.elasticsearch.action.support.nodes.TransportNodesAction$NodeTransportHandler.lambda$messageReceived$0(TransportNodesAction.java:261)
       app/org.elasticsearch.server@9.1.0/org.elasticsearch.action.support.nodes.TransportNodesAction$NodeTransportHandler$$Lambda/0x00000000308c7978.accept(Unknown Source)
       app/org.elasticsearch.server@9.1.0/org.elasticsearch.action.ActionListener.run(ActionListener.java:465)
       app/org.elasticsearch.server@9.1.0/org.elasticsearch.action.support.nodes.TransportNodesAction$NodeTransportHandler.messageReceived(TransportNodesAction.java:259)
       org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.transport.SecurityServerTransportInterceptor$ProfileSecuredRequestHandler$1.doRun(SecurityServerTransportInterceptor.java:579)
       app/org.elasticsearch.server@9.1.0/org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:27)
       org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.transport.SecurityServerTransportInterceptor$ProfileSecuredRequestHandler$3.onResponse(SecurityServerTransportInterceptor.java:632)
       org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.transport.SecurityServerTransportInterceptor$ProfileSecuredRequestHandler$3.onResponse(SecurityServerTransportInterceptor.java:621)
       org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.AuthorizationService.lambda$authorizeAction$8(AuthorizationService.java:470)
       org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.AuthorizationService$$Lambda/0x0000000030802fa8.accept(Unknown Source)
       org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.AuthorizationService$AuthorizationResultListener.onResponse(AuthorizationService.java:1062)
       org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.AuthorizationService$AuthorizationResultListener.onResponse(AuthorizationService.java:1028)
       app/org.elasticsearch.server@9.1.0/org.elasticsearch.action.support.ContextPreservingActionListener.onResponse(ContextPreservingActionListener.java:33)
       org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.AuthorizationService.lambda$authorizeAction$9(AuthorizationService.java:484)
       org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.AuthorizationService$$Lambda/0x0000000030803438.accept(Unknown Source)
       app/org.elasticsearch.server@9.1.0/org.elasticsearch.action.ActionListenerImplementations$ResponseWrappingActionListener.onResponse(ActionListenerImplementations.java:261)
       org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.RBACEngine.authorizeClusterAction(RBACEngine.java:211)
       org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.AuthorizationService.authorizeAction(AuthorizationService.java:474)
       org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.AuthorizationService.maybeAuthorizeRunAs(AuthorizationService.java:450)
       org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.AuthorizationService.lambda$authorize$3(AuthorizationService.java:337)
       org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.AuthorizationService$$Lambda/0x00000000307f4fe8.accept(Unknown Source)
       app/org.elasticsearch.server@9.1.0/org.elasticsearch.action.ActionListener$2.onResponse(ActionListener.java:258)
       app/org.elasticsearch.server@9.1.0/org.elasticsearch.action.support.ContextPreservingActionListener.onResponse(ContextPreservingActionListener.java:33)
       org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.RBACEngine.lambda$resolveAuthorizationInfo$0(RBACEngine.java:176)
       org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.RBACEngine$$Lambda/0x00000000307f5478.accept(Unknown Source)
       app/org.elasticsearch.server@9.1.0/org.elasticsearch.action.ActionListenerImplementations$ResponseWrappingActionListener.onResponse(ActionListenerImplementations.java:261)
       org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.store.CompositeRolesStore.lambda$getRoles$4(CompositeRolesStore.java:213)
       org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.store.CompositeRolesStore$$Lambda/0x00000000307f56a8.accept(Unknown Source)
       app/org.elasticsearch.server@9.1.0/org.elasticsearch.action.ActionListenerImplementations$ResponseWrappingActionListener.onResponse(ActionListenerImplementations.java:261)
       org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.store.CompositeRolesStore.lambda$getRole$6(CompositeRolesStore.java:232)
       org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.store.CompositeRolesStore$$Lambda/0x000000003089b768.accept(Unknown Source)
       app/org.elasticsearch.server@9.1.0/org.elasticsearch.action.ActionListenerImplementations$ResponseWrappingActionListener.onResponse(ActionListenerImplementations.java:261)
       org.elasticsearch.xcore@9.1.0/org.elasticsearch.xpack.core.security.authz.store.RoleReferenceIntersection.lambda$buildRole$0(RoleReferenceIntersection.java:49)
       org.elasticsearch.xcore@9.1.0/org.elasticsearch.xpack.core.security.authz.store.RoleReferenceIntersection$$Lambda/0x000000003087a7e8.accept(Unknown Source)
       app/org.elasticsearch.server@9.1.0/org.elasticsearch.action.ActionListenerImplementations$ResponseWrappingActionListener.onResponse(ActionListenerImplementations.java:261)
       app/org.elasticsearch.server@9.1.0/org.elasticsearch.action.support.GroupedActionListener.onResponse(GroupedActionListener.java:57)
       org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.store.CompositeRolesStore.buildRoleFromRoleReference(CompositeRolesStore.java:330)
       org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.store.CompositeRolesStore.lambda$getRole$5(CompositeRolesStore.java:231)
       org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.store.CompositeRolesStore$$Lambda/0x000000003089b520.accept(Unknown Source)
       org.elasticsearch.xcore@9.1.0/org.elasticsearch.xpack.core.security.authz.store.RoleReferenceIntersection.lambda$buildRole$1(RoleReferenceIntersection.java:53)
       org.elasticsearch.xcore@9.1.0/org.elasticsearch.xpack.core.security.authz.store.RoleReferenceIntersection$$Lambda/0x000000003087aa18.accept(Unknown Source)
       java.base@24/java.lang.Iterable.forEach(Iterable.java:75)
       org.elasticsearch.xcore@9.1.0/org.elasticsearch.xpack.core.security.authz.store.RoleReferenceIntersection.buildRole(RoleReferenceIntersection.java:53)
       org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.store.CompositeRolesStore.getRole(CompositeRolesStore.java:230)
       org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.store.CompositeRolesStore.getRoles(CompositeRolesStore.java:206)
       org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.RBACEngine.resolveAuthorizationInfo(RBACEngine.java:172)
       org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.AuthorizationService.authorize(AuthorizationService.java:353)
       org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.transport.ServerTransportFilter.lambda$inbound$1(ServerTransportFilter.java:114)
       org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.transport.ServerTransportFilter$$Lambda/0x0000000030639ab8.accept(Unknown Source)
       app/org.elasticsearch.server@9.1.0/org.elasticsearch.action.ActionListenerImplementations$ResponseWrappingActionListener.onResponse(ActionListenerImplementations.java:261)
       app/org.elasticsearch.server@9.1.0/org.elasticsearch.action.ActionListenerImplementations$MappedActionListener.onResponse(ActionListenerImplementations.java:111)
       org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authc.AuthenticatorChain.authenticate(AuthenticatorChain.java:93)
       org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authc.AuthenticationService.authenticate(AuthenticationService.java:271)
       org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authc.AuthenticationService.authenticate(AuthenticationService.java:203)
       org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.transport.ServerTransportFilter.authenticate(ServerTransportFilter.java:127)
       org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.transport.ServerTransportFilter.inbound(ServerTransportFilter.java:105)
       org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.transport.SecurityServerTransportInterceptor$ProfileSecuredRequestHandler.messageReceived(SecurityServerTransportInterceptor.java:643)
       app/org.elasticsearch.server@9.1.0/org.elasticsearch.transport.RequestHandlerRegistry.processMessageReceived(RequestHandlerRegistry.java:90)
       app/org.elasticsearch.server@9.1.0/org.elasticsearch.transport.TransportService$6.doRun(TransportService.java:1092)
       app/org.elasticsearch.server@9.1.0/org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:1044)
       app/org.elasticsearch.server@9.1.0/org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:27)
       java.base@24/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1095)
       java.base@24/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:619)
       java.base@24/java.lang.Thread.runWith(Thread.java:1460)
       java.base@24/java.lang.Thread.run(Thread.java:1447)
```

Relates to #111715, #111729 and #108793 ",mosche,closed,"['>bug', ':Search Relevance/Vectors', 'Team:SearchOrg', ':SearchOrg/Relevance', 'priority:high', 'Team:Search Relevance', 'Team:Search - Relevance']",https://github.com/elastic/elasticsearch/issues/128583,2025-05-28T15:28:18Z,4,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/128583,"{
  ""application_resource"": ""yes""
}"
26,128097,Losing working secure settings of s3-repository client during runtime,"### Elasticsearch Version

8.17.4

### Installed Plugins

repository-url,rest-root,x-pack-core,x-pack-redact,ingest-user-agent,x-pack-async-search,x-pack-monitoring, repository-s3, x-pack-analytics, x-pack-esql-core, x-pack-ent-search, x-pack-autoscaling, lang-painless, x-pack-ml, lang-mustache, legacy-geo, logsdb, x-pack-ql, rank-rrf, analysis-common, health-shards-availability, transport-netty4, aggregations, ingest-common, frozen-indices, x-pack-identity-provider, x-pack-shutdown, x-pack-text-structure, snapshot-repo-test-kit, ml-package-loader, kibana, constant-keyword, x-pack-logstash, x-pack-ccr, x-pack-graph, x-pack-esql, parent-join, counted-keyword, x-pack-enrich, repositories-metering-api, transform, repository-azure, dot-prefix-validation, repository-gcs, spatial, x-pack-otel-data, apm, mapper-extras, mapper-version, x-pack-rollup, percolator, data-streams, x-pack-stack, rank-eval, reindex, x-pack-security, blob-cache, searchable-snapshots, x-pack-slm, x-pack-geoip-enterprise-downloader, snapshot-based-recoveries, x-pack-watcher, old-lucene-versions, x-pack-ilm, x-pack-inference, x-pack-voting-only-node, x-pack-deprecation, x-pack-fleet, x-pack-aggregate-metric, x-pack-downsample, x-pack-profiling, ingest-geoip, x-pack-write-load-forecaster, search-business-rules, ingest-attachment, wildcard, x-pack-apm-data, unsigned-long, x-pack-sql, runtime-fields-common, x-pack-async, vector-tile, lang-expression, x-pack-eql, prometheus-exporter, mining-es-plugin

### Java Version

21.0.7

### OS Version

Alpine Linux v3.21

### Problem Description

When the elasticsearch cluster is running, after some time it seems to lose the secure client settings although they are still set in the keystore.

The cluster is running on EKS and consists of multiple nodes. The s3-repository plugin of the elasticsearch is used to write/backup/restore indices into s3. For the s3 configuration the secure client settings (s3.client.backup.access_key, s3.client.backup.secret_key, s3.client.restore.access_key, s3.client.restore.secret_key) are saved in the elasticsearch keystore, the others are added with the corresponding api.

The repository verification is acknowleged and backups/restore is working at the beginning. After some time the ""Unknown s3 client name [backup]. Existing client configs: default"" exception is thrown.

### Steps to Reproduce

1. Start elasticsearch
2. Add the secure settings in the Keystore (the files come from Kubernetes Secrets mounted in the pod)
`elasticsearch-keystore add-file -f s3.client.backup.account /objectStoreCredentials/backup.account/backup.account
elasticsearch-keystore add-file -f s3.client.backup.key /objectStoreCredentials/backup.key/backup.key
elasticsearch-keystore add-file -f s3.client.restore.account /objectStoreCredentials/restore.account/restore.account
elasticsearch-keystore add-file -f s3.client.restore.key /objectStoreCredentials/restore.key/restore.key`

3. Validate their existence
`elasticsearch-default-2@/#elasticsearch-keystore list
warning: ignoring JAVA_HOME=/opt/jre; using ES_JAVA_HOME
bootstrap.password
keystore.seed
s3.client.backup.access_key
s3.client.backup.secret_key
s3.client.restore.access_key
s3.client.restore.secret_key
`

4. reload secure settings on all nodes
`curl -s -H ""$AUTH_HEADER"" -X POST ""localhost:14220/_nodes/elasticsearch-default-2/reload_secure_settings""`
Check if the number of failed nodes in the response is 0 
`{
  ""_nodes"": {
    ""total"": 1,
    ""successful"": 1,
    ""failed"": 0
  },
  ""cluster_name"": ""our_cluster"",
  ""nodes"": {
    ""pQHNt5rXTTWNvUgOrdynKg"": {
      ""name"": ""elasticsearch-default-2""
    }
  }
}`
5. Create repository
-------------Request with Body----------------
`curl -s -H ""$AUTH_HEADER"" -X PUT""localhost:14220/__snapshot/tiwi""`
`{
  ""type"": ""s3"",
  ""settings"": {
    ""bucket"": ""backups"",
    ""container"": ""backups"",
    ""compress"": ""true"",
    ""client"": ""backup"",
    ""base_path"": ""backups/test/esrepositories"",
    ""region"": ""eu-north-1""
  }
}
`
-------------Response------------
`{
  ""acknowledged"": true
}`


5. Validate repository 
------ Request ----------
`curl -s -H ""$AUTH_HEADER"" -X POST ""localhost:14220/__snapshot/tiwi/verify""`
--------Response-----------
`{
  ""nodes"": {
    ""3JGGPzTcTqOLE15dD1lHfg"": {
      ""name"": ""elasticsearch-default-3""
    },
    ""_DL2jNuUSReoHWpeWHykAw"": {
      ""name"": ""elasticsearch-default-0""
    },
    ""bHreZzJYRTmJWzC0-M9pyA"": {
      ""name"": ""elasticsearch-default-1""
    },
    ""mAqhqrR2Szq4qkDM0GfisA"": {
      ""name"": ""elasticsearch-default-5""
    },
    ""ZZtB4G0rT0CQEaTj2ZWWzA"": {
      ""name"": ""elasticsearch-default-4""
    },
    ""PsP6zj6gQR-1IKrJ8h3nDQ"": {
      ""name"": ""elasticsearch-default-2""
    }
  }
}`


6. After some time (no restarts), when triggering snapshots:
`{
  ""error"": {
    ""root_cause"": [
      {
        ""type"": ""repository_verification_exception"",
        ""reason"": ""[tiwi] [[ZZtB4G0rT0CQEaTj2ZWWzA, 'org.elasticsearch.transport.RemoteTransportException: [elasticsearch-default-4][10.0.123.232:14230][internal:admin/repository/verify]'], [PsP6zj6gQR-1IKrJ8h3nDQ, 'org.elasticsearch.transport.RemoteTransportException: [elasticsearch-default-2][10.0.225.15:14230][internal:admin/repository/verify]']]"",
        ""suppressed"": [
          {
            ""type"": ""repository_verification_exception"",
            ""reason"": ""[tiwi] store location [backups] is not accessible on the node [{elasticsearch-default-4}{ZZtB4G0rT0CQEaTj2ZWWzA}{XLQFDCB0TC6tV7dOg7y4Rg}{elasticsearch-default-4}{10.0.123.232}{10.0.123.232:14230}{cdfhilmrstw}{8.17.4}{7000099-8521000}{ml.config_version=12.0.0, transform.config_version=10.0.0, xpack.installed=true, zone=eu-north-1a}]""
          },
          {
            ""type"": ""repository_verification_exception"",
            ""reason"": ""[tiwi] store location [backups] is not accessible on the node [{elasticsearch-default-2}{PsP6zj6gQR-1IKrJ8h3nDQ}{3ppI5XomQ76K51DaFNyr5g}{elasticsearch-default-2}{10.0.225.15}{10.0.225.15:14230}{cdfhilmrstw}{8.17.4}{7000099-8521000}{transform.config_version=10.0.0, xpack.installed=true, zone=eu-north-1c, ml.config_version=12.0.0}]""
          }
        ]
      }
    ],
    ""type"": ""repository_verification_exception"",
    ""reason"": ""[tiwi] [[ZZtB4G0rT0CQEaTj2ZWWzA, 'org.elasticsearch.transport.RemoteTransportException: [elasticsearch-default-4][10.0.123.232:14230][internal:admin/repository/verify]'], [PsP6zj6gQR-1IKrJ8h3nDQ, 'org.elasticsearch.transport.RemoteTransportException: [elasticsearch-default-2][10.0.225.15:14230][internal:admin/repository/verify]']]"",
    ""suppressed"": [
      {
        ""type"": ""repository_verification_exception"",
        ""reason"": ""[tiwi] store location [backups] is not accessible on the node [{elasticsearch-default-4}{ZZtB4G0rT0CQEaTj2ZWWzA}{XLQFDCB0TC6tV7dOg7y4Rg}{elasticsearch-default-4}{10.0.123.232}{10.0.123.232:14230}{cdfhilmrstw}{8.17.4}{7000099-8521000}{ml.config_version=12.0.0, transform.config_version=10.0.0, xpack.installed=true, zone=eu-north-1a}]"",
        ""caused_by"": {
          ""type"": ""illegal_argument_exception"",
          ""reason"": ""Unknown s3 client name [backup]. Existing client configs: default""
        }
      },
      {
        ""type"": ""repository_verification_exception"",
        ""reason"": ""[tiwi] store location [backups] is not accessible on the node [{elasticsearch-default-2}{PsP6zj6gQR-1IKrJ8h3nDQ}{3ppI5XomQ76K51DaFNyr5g}{elasticsearch-default-2}{10.0.225.15}{10.0.225.15:14230}{cdfhilmrstw}{8.17.4}{7000099-8521000}{transform.config_version=10.0.0, xpack.installed=true, zone=eu-north-1c, ml.config_version=12.0.0}]"",
        ""caused_by"": {
          ""type"": ""illegal_argument_exception"",
          ""reason"": ""Unknown s3 client name [backup]. Existing client configs: default""
        }
      }
    ]
  },
  ""status"": 500
}`


### Logs (if relevant)

_No response_",tiwisag,closed,"['>bug', ':Distributed Coordination/Snapshot/Restore', 'Team:Distributed Coordination']",https://github.com/elastic/elasticsearch/issues/128097,2025-05-16T09:58:08Z,15,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/128097,"{
  ""application_resource"": ""yes""
}"
27,128096,Losing working secure settings for s3 repository during runtime,"### Elasticsearch Version

8.17.4

### Installed Plugins

repository-url,rest-root,x-pack-core,x-pack-redact,ingest-user-agent,x-pack-async-search,x-pack-monitoring, repository-s3, x-pack-analytics, x-pack-esql-core, x-pack-ent-search, x-pack-autoscaling, lang-painless, x-pack-ml, lang-mustache, legacy-geo, logsdb, x-pack-ql, rank-rrf, analysis-common, health-shards-availability, transport-netty4, aggregations, ingest-common, frozen-indices, x-pack-identity-provider, x-pack-shutdown, x-pack-text-structure, snapshot-repo-test-kit, ml-package-loader, kibana, constant-keyword, x-pack-logstash, x-pack-ccr, x-pack-graph, x-pack-esql, parent-join, counted-keyword, x-pack-enrich, repositories-metering-api, transform, repository-azure, dot-prefix-validation, repository-gcs, spatial, x-pack-otel-data, apm, mapper-extras, mapper-version, x-pack-rollup, percolator, data-streams, x-pack-stack, rank-eval, reindex, x-pack-security, blob-cache, searchable-snapshots, x-pack-slm, x-pack-geoip-enterprise-downloader, snapshot-based-recoveries, x-pack-watcher, old-lucene-versions, x-pack-ilm, x-pack-inference, x-pack-voting-only-node, x-pack-deprecation, x-pack-fleet, x-pack-aggregate-metric, x-pack-downsample, x-pack-profiling, ingest-geoip, x-pack-write-load-forecaster, search-business-rules, ingest-attachment, wildcard, x-pack-apm-data, unsigned-long, x-pack-sql, runtime-fields-common, x-pack-async, vector-tile, lang-expression, x-pack-eql, prometheus-exporter, mining-es-plugin

### Java Version

21.0.7

### OS Version

Alpine Linux v3.21

### Problem Description

When the elasticsearch cluster is running, after some time it seems to lose the secure client settings although they are still set in the keystore.

The cluster is running on EKS and consists of multiple nodes. The s3-repository plugin of the elasticsearch is used to write/backup/restore indices into s3. For the s3 configuration the secure client settings (s3.client.backup.access_key, s3.client.backup.secret_key, s3.client.restore.access_key, s3.client.restore.secret_key) are saved in the elasticsearch keystore, the others are added with the corresponding api.

The repository verification is acknowleged and backups/restore is working at the beginning. After some time the ""Unknown s3 client name [backup]. Existing client configs: default"" exception is thrown.

### Steps to Reproduce

When the elasticsearch cluster is running, after some time it seems to lose the secure client settings although they are still set in the keystore.

The cluster is running on EKS and consists of multiple nodes. The s3-repository plugin of the elasticsearch is used to write/backup/restore indices into s3. For the s3 configuration the secure client settings (s3.client.backup.access_key, s3.client.backup.secret_key, s3.client.restore.access_key, s3.client.restore.secret_key) are saved in the elasticsearch keystore, the others are added with the corresponding api.

The repository verification is acknowleged and backups/restore is working at the beginning. After some time the ""Unknown s3 client name [backup]. Existing client configs: default"" exception is thrown.

### Logs (if relevant)

_No response_",tiwisag,closed,"['>bug', 'needs:triage']",https://github.com/elastic/elasticsearch/issues/128096,2025-05-16T09:56:10Z,0,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/128096,"{
  ""application_resource"": ""yes""
}"
28,128044,[CI] DockerTests test073RunEsAsDifferentUserAndGroupWithoutBindMounting failing,"**Build Scans:**
- [elasticsearch-periodic-packaging #7864 / rhel-9_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/2pwmx5aaj5ohg)
- [elasticsearch-periodic-packaging #7864 / rhel-9_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/2pwmx5aaj5ohg)
- [elasticsearch-periodic-packaging #7864 / almalinux-9_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/f7r4kczz2axf6)
- [elasticsearch-periodic-packaging #7864 / almalinux-9_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/f7r4kczz2axf6)
- [elasticsearch-periodic-packaging #7864 / rhel-8_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/vhficnhowsjti)
- [elasticsearch-periodic-packaging #7864 / rhel-8_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/vhficnhowsjti)
- [elasticsearch-periodic-packaging #7864 / rocky-8_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/q5g6kfnxd3gpe)
- [elasticsearch-periodic-packaging #7864 / rocky-8_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/q5g6kfnxd3gpe)
- [elasticsearch-periodic-packaging #7864 / ubuntu-2004_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/occ5hrb73nb2a)
- [elasticsearch-periodic-packaging #7864 / ubuntu-2004_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/occ5hrb73nb2a)

**Reproduction Line:**
```
null
```

**Applicable branches:**
main

**Reproduces locally?:**
N/A

**Failure History:**
[See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&_a=(controlGroupState:(initialChildControlState:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:task.keyword,order:0,selectedOptions:!(),title:'GradleTask',type:optionsListControl),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:className.keyword,order:1,selectedOptions:!(org.elasticsearch.packaging.test.DockerTests),title:'Suite',type:optionsListControl),'144933da-5c1b-4257-a969-7f43455a7901':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:name.keyword,order:2,selectedOptions:!(test073RunEsAsDifferentUserAndGroupWithoutBindMounting),title:'Test',type:optionsListControl)))))

**Failure Message:**
```
java.lang.AssertionError: Elasticsearch container did not start successfully.

ps output:
PID   USER     TIME  COMMAND
    1 elastics  0:00 /sbin/tini -- /app/elasticsearch.sh
    7 elastics  0:16 /usr/share/elasticsearch/jdk/bin/java -Xms4m -Xmx64m -XX:+UseSerialGC -Djava.security.egd=file:/dev/urandom -Dcli.name=server -Dcli.script=/usr/share/elasticsearch/bin/elasticsearch -Dcli.libs=lib/tools/server-cli -Des.path.home=/usr/share/elasticsearch -Des.path.conf=/usr/share/elasticsearch/config -Des.distribution.type=docker -Des.java.type=bundled JDK -cp /usr/share/elasticsearch/lib/*:/usr/share/elasticsearch/lib/cli-launcher/* org.elasticsearch.launcher.CliToolLauncher
  304 elastics  0:50 /usr/share/elasticsearch/jdk/bin/java -Des.networkaddress.cache.ttl=60 -Des.networkaddress.cache.negative.ttl=10 -XX:+AlwaysPreTouch -Xss1m -Djava.awt.headless=true -Dfile.encoding=UTF-8 -Djna.nosys=true -XX:-OmitStackTraceInFastThrow -Dio.netty.noUnsafe=true -Dio.netty.noKeySetOptimization=true -Dio.
[truncated]
```

**Issue Reasons:**
- [main] 158 failures in test test073RunEsAsDifferentUserAndGroupWithoutBindMounting (48.5% fail rate in 326 executions)
- [main] 5 failures in step rhel-9_packaging-tests-unix (100.0% fail rate in 5 executions)
- [main] 5 failures in step almalinux-9_packaging-tests-unix (100.0% fail rate in 5 executions)
- [main] 5 failures in step rhel-8_packaging-tests-unix (100.0% fail rate in 5 executions)
- [main] 5 failures in step rocky-8_packaging-tests-unix (100.0% fail rate in 5 executions)
- [main] 5 failures in step ubuntu-2004_packaging-tests-unix (100.0% fail rate in 5 executions)
- [main] 5 failures in step debian-12_packaging-tests-unix (100.0% fail rate in 5 executions)
- [main] 5 failures in step rocky-9_packaging-tests-unix (100.0% fail rate in 5 executions)
- [main] 5 failures in step oraclelinux-9_packaging-tests-unix (100.0% fail rate in 5 executions)
- [main] 5 failures in step oraclelinux-8_packaging-tests-unix (100.0% fail rate in 5 executions)
- [main] 5 failures in step ubuntu-2404_packaging-tests-unix (100.0% fail rate in 5 executions)
- [main] 5 failures in step almalinux-8_packaging-tests-unix (100.0% fail rate in 5 executions)
- [main] 5 failures in step opensuse-leap-15_packaging-tests-unix (100.0% fail rate in 5 executions)
- [main] 5 failures in step ubuntu-2204_packaging-tests-unix (100.0% fail rate in 5 executions)
- [main] 5 failures in pipeline elasticsearch-periodic-packaging (100.0% fail rate in 5 executions)

**Note:**
This issue was created using new test triage automation. Please report issues or feedback to es-delivery.",elasticsearchmachine,closed,"[':Delivery/Packaging', '>test-failure', 'Team:Delivery', 'needs:risk']",https://github.com/elastic/elasticsearch/issues/128044,2025-05-12T22:36:03Z,2,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/128044,"{
  ""application_resource"": ""unsure""
}"
29,128021,Desired Balance Allocator Fails to Converge with High Shard Counts (8.x),"**Environment:**  
- Elasticsearch version: 8.6+ (observed in 8.x; 7.x unaffected)  
- Cluster setup: ~10,000 shards across 3 initial nodes + 3 newly added data nodes  

**Problem Description:**  
After introducing the Desired Balance Allocator in 8.6, **master nodes fail to compute shard allocation plans within a reasonable timeframe** when scaling data nodes in clusters with high shard counts. The `DesiredBalanceComputer` enters prolonged iterations (1,700+ cycles over ~1.3 hours) without convergence, saturating a single CPU core and blocking shard relocation. This delays node scaling benefits and impacts cluster elasticity.  

**Steps to Reproduce:**  
1. Deploy a 3-node cluster.  
2. Create empty indices until the cluster reaches ~10,000 shards.  
3. Add 3 new data nodes.  
4. Observe master node logs and allocation behavior.  

**Full Log Excerpt:**  
```  
May 9th 2025, 17:23:18.368	[o.e.c.r.a.a.DesiredBalanceComputer] [1746763603003690432] Desired balance computation for [7] is still not converged after [1.3h] and [1717] iterations  
May 9th 2025, 17:22:16.997	[o.e.c.r.a.a.DesiredBalanceComputer] [1746763603003690432] Desired balance computation for [7] is still not converged after [1.3h] and [1690] iterations  
May 9th 2025, 17:21:15.261	[o.e.c.r.a.a.DesiredBalanceComputer] [1746763603003690432] Desired balance computation for [7] is still not converged after [1.3h] and [1663] iterations  
May 9th 2025, 17:20:13.066	[o.e.c.r.a.a.DesiredBalanceComputer] [1746763603003690432] Desired balance computation for [7] is still not converged after [1.2h] and [1636] iterations  
May 9th 2025, 17:19:12.805	[o.e.c.r.a.a.DesiredBalanceComputer] [1746763603003690432] Desired balance computation for [7] is still not converged after [1.2h] and [1610] iterations  
May 9th 2025, 17:18:12.117	[o.e.c.r.a.a.DesiredBalanceComputer] [1746763603003690432] Desired balance computation for [7] is still not converged after [1.2h] and [1584] iterations  
May 9th 2025, 17:17:11.359	[o.e.c.r.a.a.DesiredBalanceComputer] [1746763603003690432] Desired balance computation for [7] is still not converged after [1.2h] and [1558] iterations  
May 9th 2025, 17:16:09.658	[o.e.c.r.a.a.DesiredBalanceComputer] [1746763603003690432] Desired balance computation for [7] is still not converged after [1.2h] and [1532] iterations  
May 9th 2025, 17:15:08.168	[o.e.c.r.a.a.DesiredBalanceComputer] [1746763603003690432] Desired balance computation for [7] is still not converged after [1.2h] and [1506] iterations  
May 9th 2025, 17:14:05.940	[o.e.c.r.a.a.DesiredBalanceComputer] [1746763603003690432] Desired balance computation for [7] is still not converged after [1.1h] and [1480] iterations  
May 9th 2025, 17:13:03.577	[o.e.c.r.a.a.DesiredBalanceComputer] [1746763603003690432] Desired balance computation for [7] is still not converged after [1.1h] and [1454] iterations  
May 9th 2025, 17:12:03.387	[o.e.c.r.a.a.DesiredBalanceComputer] [1746763603003690432] Desired balance computation for [7] is still not converged after [1.1h] and [1429] iterations  
```  

**Root Cause Analysis (Based on Code Review):**  
The `DesiredBalanceComputer` operates in a single-threaded loop with no adaptive termination conditions. For clusters with high shard counts, the algorithm‚Äôs time complexity leads to impractical iteration counts, preventing timely exit. This diverges from 7.x‚Äôs allocator, which handled similar scenarios efficiently.  

**Linked PRs:**  
- #91343, #95090 (Related changes to allocation logic)  

**Questions for the Community:**  
1. Is this prolonged computation an expected behavior of the Desired Balance Allocator in high-shard-count scenarios?  
2. Are there recommended optimizations or configuration adjustments to improve convergence (e.g., parallelism, iteration limits, or heuristics)?  

We‚Äôd appreciate any insights into the allocator‚Äôs intended behavior and are happy to collaborate on testing or contributing fixes. Thanks in advance for your support!  ",Rassyan,closed,"['>bug', ':Distributed Coordination/Allocation', 'Team:Distributed Coordination']",https://github.com/elastic/elasticsearch/issues/128021,2025-05-12T02:46:25Z,20,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/128021,"{
  ""application_resource"": ""yes""
}"
30,128019,[CI] DockerTests test042KeystorePermissionsAreCorrect failing,"**Build Scans:**
- [elasticsearch-periodic-packaging #7834 / ubuntu-2404_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/5axximst4zh76)
- [elasticsearch-periodic-packaging #7834 / ubuntu-2404_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/5axximst4zh76)
- [elasticsearch-periodic-packaging #7834 / ubuntu-2004_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/dbac47e426ezg)
- [elasticsearch-periodic-packaging #7834 / ubuntu-2004_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/dbac47e426ezg)
- [elasticsearch-periodic-packaging #7834 / rhel-9_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/2newqducvbtha)
- [elasticsearch-periodic-packaging #7834 / rhel-9_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/2newqducvbtha)
- [elasticsearch-periodic-packaging #7834 / rocky-9_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/zbv2r2zm4lk4a)
- [elasticsearch-periodic-packaging #7834 / rocky-9_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/zbv2r2zm4lk4a)
- [elasticsearch-periodic-packaging #7834 / oraclelinux-9_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/tnbwntch7g4eu)
- [elasticsearch-periodic-packaging #7834 / oraclelinux-9_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/tnbwntch7g4eu)

**Reproduction Line:**
```
null
```

**Applicable branches:**
main

**Reproduces locally?:**
N/A

**Failure History:**
[See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&_a=(controlGroupState:(initialChildControlState:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:task.keyword,order:0,selectedOptions:!(),title:'GradleTask',type:optionsListControl),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:className.keyword,order:1,selectedOptions:!(org.elasticsearch.packaging.test.DockerTests),title:'Suite',type:optionsListControl),'144933da-5c1b-4257-a969-7f43455a7901':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:name.keyword,order:2,selectedOptions:!(test042KeystorePermissionsAreCorrect),title:'Test',type:optionsListControl)))))

**Failure Message:**
```
java.lang.AssertionError: Elasticsearch container did not start successfully.

ps output:
PID   USER     TIME  COMMAND
    1 elastics  0:00 /sbin/tini -- /usr/local/bin/docker-entrypoint.sh eswrapper
    7 elastics  0:18 /usr/share/elasticsearch/jdk/bin/java -Xms4m -Xmx64m -XX:+UseSerialGC -Djava.security.egd=file:/dev/urandom -Dcli.name=server -Dcli.script=/usr/share/elasticsearch/bin/elasticsearch -Dcli.libs=lib/tools/server-cli -Des.path.home=/usr/share/elasticsearch -Des.path.conf=/usr/share/elasticsearch/config -Des.distribution.type=docker -Des.java.type=bundled JDK -cp /usr/share/elasticsearch/lib/*:/usr/share/elasticsearch/lib/cli-launcher/* org.elasticsearch.launcher.CliToolLauncher
  308 elastics  0:36 /usr/share/elasticsearch/jdk/bin/java -Des.networkaddress.cache.ttl=60 -Des.networkaddress.cache.negative.ttl=10 -XX:+AlwaysPreTouch -Xss1m -Djava.awt.headless=true -Dfile.encoding=UTF-8 -Djna.nosys=true -XX:-OmitStackTraceInFastThrow -Dio.netty.noUnsafe=true -Dio.netty.noKeySe
[truncated]
```

**Issue Reasons:**
- [main] 108 failures in test test042KeystorePermissionsAreCorrect (41.5% fail rate in 260 executions)
- [main] 4 failures in step ubuntu-2404_packaging-tests-unix (100.0% fail rate in 4 executions)
- [main] 4 failures in step ubuntu-2004_packaging-tests-unix (100.0% fail rate in 4 executions)
- [main] 4 failures in step rhel-9_packaging-tests-unix (100.0% fail rate in 4 executions)
- [main] 4 failures in step rocky-9_packaging-tests-unix (100.0% fail rate in 4 executions)
- [main] 4 failures in step oraclelinux-9_packaging-tests-unix (100.0% fail rate in 4 executions)
- [main] 4 failures in step almalinux-9_packaging-tests-unix (100.0% fail rate in 4 executions)
- [main] 4 failures in step oraclelinux-8_packaging-tests-unix (100.0% fail rate in 4 executions)
- [main] 4 failures in step rocky-8_packaging-tests-unix (100.0% fail rate in 4 executions)
- [main] 4 failures in step almalinux-8_packaging-tests-unix (100.0% fail rate in 4 executions)
- [main] 4 failures in step opensuse-leap-15_packaging-tests-unix (100.0% fail rate in 4 executions)
- [main] 4 failures in step rhel-8_packaging-tests-unix (100.0% fail rate in 4 executions)
- [main] 4 failures in step debian-12_packaging-tests-unix (100.0% fail rate in 4 executions)
- [main] 2 failures in step ubuntu-2004_destructivedistrotest.docker_packaging-tests-unix-sample (15.4% fail rate in 13 executions)
- [main] 2 failures in step rhel-8_destructivedistrotest.docker_packaging-tests-unix-sample (15.4% fail rate in 13 executions)

**Note:**
This issue was created using new test triage automation. Please report issues or feedback to es-delivery.",elasticsearchmachine,closed,"[':Delivery/Packaging', '>test-failure', 'Team:Delivery', 'needs:risk']",https://github.com/elastic/elasticsearch/issues/128019,2025-05-11T14:50:22Z,2,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/128019,"{
  ""application_resource"": ""unsure""
}"
31,128007,[CI] DockerTests test041AmazonCaCertsAreInTheKeystore failing,"**Build Scans:**
- [elasticsearch-periodic-packaging #7810 / ubuntu-2004_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/zz3q3sq72sgh4)
- [elasticsearch-periodic-packaging #7810 / ubuntu-2004_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/zz3q3sq72sgh4)
- [elasticsearch-periodic-packaging #7810 / ubuntu-2204_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/zbhk2qvwo7siy)
- [elasticsearch-periodic-packaging #7810 / ubuntu-2204_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/zbhk2qvwo7siy)
- [elasticsearch-periodic-packaging #7810 / rhel-9_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/43umj2uwwvjw6)
- [elasticsearch-periodic-packaging #7810 / rhel-9_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/43umj2uwwvjw6)
- [elasticsearch-periodic-packaging #7810 / oraclelinux-9_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/6vqbiqph75hdq)
- [elasticsearch-periodic-packaging #7810 / oraclelinux-9_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/6vqbiqph75hdq)
- [elasticsearch-periodic-packaging #7810 / ubuntu-2404_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/foxcyinmjvks2)
- [elasticsearch-periodic-packaging #7810 / ubuntu-2404_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/foxcyinmjvks2)

**Reproduction Line:**
```
null
```

**Applicable branches:**
main

**Reproduces locally?:**
N/A

**Failure History:**
[See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&_a=(controlGroupState:(initialChildControlState:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:task.keyword,order:0,selectedOptions:!(),title:'GradleTask',type:optionsListControl),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:className.keyword,order:1,selectedOptions:!(org.elasticsearch.packaging.test.DockerTests),title:'Suite',type:optionsListControl),'144933da-5c1b-4257-a969-7f43455a7901':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:name.keyword,order:2,selectedOptions:!(test041AmazonCaCertsAreInTheKeystore),title:'Test',type:optionsListControl)))))

**Failure Message:**
```
java.lang.AssertionError: Elasticsearch container did not start successfully.

ps output:
PID   USER     TIME  COMMAND
    1 elastics  0:00 /sbin/tini -- /app/elasticsearch.sh
    7 elastics  0:16 /usr/share/elasticsearch/jdk/bin/java -Xms4m -Xmx64m -XX:+UseSerialGC -Djava.security.egd=file:/dev/urandom -Dcli.name=server -Dcli.script=/usr/share/elasticsearch/bin/elasticsearch -Dcli.libs=lib/tools/server-cli -Des.path.home=/usr/share/elasticsearch -Des.path.conf=/usr/share/elasticsearch/config -Des.distribution.type=docker -Des.java.type=bundled JDK -cp /usr/share/elasticsearch/lib/*:/usr/share/elasticsearch/lib/cli-launcher/* org.elasticsearch.launcher.CliToolLauncher
  296 elastics  0:47 /usr/share/elasticsearch/jdk/bin/java -Des.networkaddress.cache.ttl=60 -Des.networkaddress.cache.negative.ttl=10 -XX:+AlwaysPreTouch -Xss1m -Djava.awt.headless=true -Dfile.encoding=UTF-8 -Djna.nosys=true -XX:-OmitStackTraceInFastThrow -Dio.netty.noUnsafe=true -Dio.netty.noKeySetOptimization=true -Dio.
[truncated]
```

**Issue Reasons:**
- [main] 144 failures in test test041AmazonCaCertsAreInTheKeystore (49.3% fail rate in 292 executions)
- [main] 5 failures in step ubuntu-2004_packaging-tests-unix (100.0% fail rate in 5 executions)
- [main] 5 failures in step ubuntu-2204_packaging-tests-unix (100.0% fail rate in 5 executions)
- [main] 5 failures in step rhel-9_packaging-tests-unix (100.0% fail rate in 5 executions)
- [main] 5 failures in step oraclelinux-9_packaging-tests-unix (100.0% fail rate in 5 executions)
- [main] 5 failures in step ubuntu-2404_packaging-tests-unix (100.0% fail rate in 5 executions)
- [main] 5 failures in step debian-12_packaging-tests-unix (100.0% fail rate in 5 executions)
- [main] 5 failures in step rhel-8_packaging-tests-unix (100.0% fail rate in 5 executions)
- [main] 5 failures in step almalinux-9_packaging-tests-unix (100.0% fail rate in 5 executions)
- [main] 5 failures in step rocky-9_packaging-tests-unix (100.0% fail rate in 5 executions)
- [main] 5 failures in step oraclelinux-8_packaging-tests-unix (100.0% fail rate in 5 executions)
- [main] 5 failures in step rocky-8_packaging-tests-unix (100.0% fail rate in 5 executions)
- [main] 5 failures in step opensuse-leap-15_packaging-tests-unix (100.0% fail rate in 5 executions)
- [main] 5 failures in step almalinux-8_packaging-tests-unix (100.0% fail rate in 5 executions)
- [main] 5 failures in pipeline elasticsearch-periodic-packaging (100.0% fail rate in 5 executions)

**Note:**
This issue was created using new test triage automation. Please report issues or feedback to es-delivery.",elasticsearchmachine,closed,"[':Delivery/Packaging', '>test-failure', 'Team:Delivery', 'low-risk']",https://github.com/elastic/elasticsearch/issues/128007,2025-05-09T22:43:16Z,2,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/128007,"{
  ""application_resource"": ""unsure""
}"
32,127437,[CI] DockerTests test040JavaUsesTheOsProvidedKeystore failing,"**Build Scans:**
- [elasticsearch-periodic-packaging #7780 / oraclelinux-9_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/trlp7dczpqytu)
- [elasticsearch-periodic-packaging #7780 / oraclelinux-9_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/trlp7dczpqytu)
- [elasticsearch-periodic-packaging #7780 / almalinux-9_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/f2zth7vxetq34)
- [elasticsearch-periodic-packaging #7780 / almalinux-9_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/f2zth7vxetq34)
- [elasticsearch-periodic-packaging #7780 / ubuntu-2204_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/oh3w5vghm74fg)
- [elasticsearch-periodic-packaging #7780 / ubuntu-2204_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/oh3w5vghm74fg)
- [elasticsearch-periodic-packaging #7780 / ubuntu-2004_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/qf55xh4mlgroy)
- [elasticsearch-periodic-packaging #7780 / ubuntu-2004_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/qf55xh4mlgroy)
- [elasticsearch-periodic-packaging #7780 / rhel-9_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/c63ktosj2ai44)
- [elasticsearch-periodic-packaging #7780 / rhel-9_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/c63ktosj2ai44)

**Reproduction Line:**
```
null
```

**Applicable branches:**
main

**Reproduces locally?:**
N/A

**Failure History:**
[See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&_a=(controlGroupState:(initialChildControlState:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:task.keyword,order:0,selectedOptions:!(),title:'GradleTask',type:optionsListControl),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:className.keyword,order:1,selectedOptions:!(org.elasticsearch.packaging.test.DockerTests),title:'Suite',type:optionsListControl),'144933da-5c1b-4257-a969-7f43455a7901':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:name.keyword,order:2,selectedOptions:!(test040JavaUsesTheOsProvidedKeystore),title:'Test',type:optionsListControl)))))

**Failure Message:**
```
java.lang.AssertionError: Elasticsearch container did not start successfully.

ps output:
PID   USER     TIME  COMMAND
    1 elastics  0:00 /sbin/tini -- /app/elasticsearch.sh
    7 elastics  0:18 /usr/share/elasticsearch/jdk/bin/java -Xms4m -Xmx64m -XX:+UseSerialGC -Djava.security.egd=file:/dev/urandom -Dcli.name=server -Dcli.script=/usr/share/elasticsearch/bin/elasticsearch -Dcli.libs=lib/tools/server-cli -Des.path.home=/usr/share/elasticsearch -Des.path.conf=/usr/share/elasticsearch/config -Des.distribution.type=docker -Des.java.type=bundled JDK -cp /usr/share/elasticsearch/lib/*:/usr/share/elasticsearch/lib/cli-launcher/* org.elasticsearch.launcher.CliToolLauncher
  305 elastics  0:49 /usr/share/elasticsearch/jdk/bin/java -Des.networkaddress.cache.ttl=60 -Des.networkaddress.cache.negative.ttl=10 -XX:+AlwaysPreTouch -Xss1m -Djava.awt.headless=true -Dfile.encoding=UTF-8 -Djna.nosys=true -XX:-OmitStackTraceInFastThrow -Dio.netty.noUnsafe=true -Dio.netty.noKeySetOptimization=true -Dio.
[truncated]
```

**Issue Reasons:**
- [main] 3 consecutive failures in step rhel-9_docker-cloud-ess_packaging-tests-unix
- [main] 3 consecutive failures in step ubuntu-2404_docker-cloud-ess_packaging-tests-unix
- [main] 3 consecutive failures in step opensuse-leap-15_docker-cloud-ess_packaging-tests-unix
- [main] 3 consecutive failures in step rocky-9_docker-cloud-ess_packaging-tests-unix
- [main] 3 consecutive failures in step ubuntu-2004_docker-cloud-ess_packaging-tests-unix
- [main] 3 consecutive failures in step rhel-8_docker-cloud-ess_packaging-tests-unix
- [main] 3 consecutive failures in step rocky-8_docker-cloud-ess_packaging-tests-unix
- [main] 3 consecutive failures in step oraclelinux-9_docker-cloud-ess_packaging-tests-unix
- [main] 3 consecutive failures in step debian-12_docker-cloud-ess_packaging-tests-unix
- [main] 3 consecutive failures in step almalinux-9_docker-cloud-ess_packaging-tests-unix
- [main] 3 consecutive failures in step almalinux-8_docker-cloud-ess_packaging-tests-unix
- [main] 3 consecutive failures in step oraclelinux-8_docker-cloud-ess_packaging-tests-unix
- [main] 2 consecutive failures in step ubuntu-2204_docker-cloud-ess_packaging-tests-unix
- [main] 168 failures in test test040JavaUsesTheOsProvidedKeystore (30.1% fail rate in 559 executions)
- [main] 5 failures in step oraclelinux-9_packaging-tests-unix (100.0% fail rate in 5 executions)

**Note:**
This issue was created using new test triage automation. Please report issues or feedback to es-delivery.",elasticsearchmachine,closed,"[':Delivery/Packaging', '>test-failure', 'Team:Delivery', 'needs:risk']",https://github.com/elastic/elasticsearch/issues/127437,2025-04-26T22:32:27Z,2,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/127437,"{
  ""application_resource"": ""unsure""
}"
33,127300,Analysis of ES 7.16 Memory Consumption: Multiple Factors Leading to Memory Surge and the Mystery of 9GB Memory Stuck in GC and Optimization Exploration,"The recent memory consumption of JVM is as follows:

![Image](https://github.com/user-attachments/assets/eb235e00-c37b-4c62-8617-826dfddca7dd)

The green area has optimized space for resident memory
The heap memory of ES is basically divided into segment memory Filter Cache„ÄÅField Data Cache„ÄÅBulk Queue„ÄÅIndexing Buffer„ÄÅCluster State Buffer„ÄÅ The result set fetch consumed by various aggregation queries



‰∏Ä„ÄÅSegment Memory
This memory is not used by GC and currently only occupies 500M

2„ÄÅFilter Cache

This memory is also not used by GC, currently occupying less than 500M

3„ÄÅField Data Cache
This memory is also not used by GC and currently only occupies less than 700M. We manually cleaned it up

4„ÄÅBulk Queue Indexing Buffer
Both of these are system default values, 10%, and the usage will not be very large

Cluster State Buffer
My ES version is 7.16, and now it's this state buffer. I can't confirm how much I've used. Currently, the disk usage of my cold node is only 45%. When I increased the utilization of the cold disk, I found that the memory skyrocketed severely,

![Image](https://github.com/user-attachments/assets/15b33bfa-d25b-4559-ad9f-49cfae0d4b5a)

7„ÄÅ Fetch of ultra large search aggregation result set
I use scroll queries for everything, and I have also tried manually deleting all scorels without seeing a decrease in permanent memory

After overall investigation, it is still due to the fact that the larger the amount of data, the higher the memory. Also, where did the 9 GB of memory that has been stuck in GC go? How to optimize the memory usage of this part?",zhang18668,closed,['needs:triage'],https://github.com/elastic/elasticsearch/issues/127300,2025-04-24T03:48:33Z,1,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/127300,"{
  ""application_resource"": ""yes""
}"
34,127138,[CI] DockerTests test025SyncPluginsUsingProxy failing,"**Build Scans:**
- [elasticsearch-periodic-packaging #7750 / oraclelinux-9_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/l472ifm3amwjy)
- [elasticsearch-periodic-packaging #7750 / oraclelinux-9_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/l472ifm3amwjy)
- [elasticsearch-periodic-packaging #7750 / ubuntu-2004_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/u5pjnydcfeqfk)
- [elasticsearch-periodic-packaging #7750 / ubuntu-2004_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/u5pjnydcfeqfk)
- [elasticsearch-periodic-packaging #7750 / ubuntu-2204_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/llhe4lcy6oyna)
- [elasticsearch-periodic-packaging #7750 / ubuntu-2204_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/llhe4lcy6oyna)
- [elasticsearch-periodic-packaging #7750 / almalinux-9_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/hka7ryvtcav7q)
- [elasticsearch-periodic-packaging #7750 / almalinux-9_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/hka7ryvtcav7q)
- [elasticsearch-periodic-packaging #7750 / rocky-9_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/sxfv5qkwxy67u)
- [elasticsearch-periodic-packaging #7750 / rocky-9_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/sxfv5qkwxy67u)

**Reproduction Line:**
```
null
```

**Applicable branches:**
main

**Reproduces locally?:**
N/A

**Failure History:**
[See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&_a=(controlGroupState:(initialChildControlState:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:task.keyword,order:0,selectedOptions:!(),title:'GradleTask',type:optionsListControl),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:className.keyword,order:1,selectedOptions:!(org.elasticsearch.packaging.test.DockerTests),title:'Suite',type:optionsListControl),'144933da-5c1b-4257-a969-7f43455a7901':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:name.keyword,order:2,selectedOptions:!(test025SyncPluginsUsingProxy),title:'Test',type:optionsListControl)))))

**Failure Message:**
```
java.lang.AssertionError: Elasticsearch container did not start successfully.

ps output:
PID   USER     TIME  COMMAND
    1 elastics  0:00 /sbin/tini -- /usr/local/bin/docker-entrypoint.sh eswrapper
    7 elastics  0:19 /usr/share/elasticsearch/jdk/bin/java -Xms4m -Xmx64m -XX:+UseSerialGC -Djava.security.egd=file:/dev/urandom -Dcli.name=server -Dcli.script=/usr/share/elasticsearch/bin/elasticsearch -Dcli.libs=lib/tools/server-cli -Des.path.home=/usr/share/elasticsearch -Des.path.conf=/usr/share/elasticsearch/config -Des.distribution.type=docker -Des.java.type=bundled JDK -cp /usr/share/elasticsearch/lib/*:/usr/share/elasticsearch/lib/cli-launcher/* org.elasticsearch.launcher.CliToolLauncher
  309 elastics  0:46 /usr/share/elasticsearch/jdk/bin/java -Des.networkaddress.cache.ttl=60 -Des.networkaddress.cache.negative.ttl=10 -XX:+AlwaysPreTouch -Xss1m -Djava.awt.headless=true -Dfile.encoding=UTF-8 -Djna.nosys=true -XX:-OmitStackTraceInFastThrow -Dio.netty.noUnsafe=true -Dio.netty.noKeySe
[truncated]
```

**Issue Reasons:**
- [main] 222 failures in test test025SyncPluginsUsingProxy (23.5% fail rate in 945 executions)
- [main] 8 failures in step oraclelinux-9_packaging-tests-unix (100.0% fail rate in 8 executions)
- [main] 8 failures in step ubuntu-2004_packaging-tests-unix (100.0% fail rate in 8 executions)
- [main] 8 failures in step ubuntu-2204_packaging-tests-unix (100.0% fail rate in 8 executions)
- [main] 8 failures in step almalinux-9_packaging-tests-unix (100.0% fail rate in 8 executions)
- [main] 8 failures in step rocky-9_packaging-tests-unix (100.0% fail rate in 8 executions)
- [main] 8 failures in step rhel-9_packaging-tests-unix (100.0% fail rate in 8 executions)
- [main] 8 failures in step ubuntu-2404_packaging-tests-unix (100.0% fail rate in 8 executions)
- [main] 8 failures in step almalinux-8_packaging-tests-unix (100.0% fail rate in 8 executions)
- [main] 8 failures in step oraclelinux-8_packaging-tests-unix (100.0% fail rate in 8 executions)
- [main] 8 failures in step opensuse-leap-15_packaging-tests-unix (100.0% fail rate in 8 executions)
- [main] 8 failures in step debian-12_packaging-tests-unix (100.0% fail rate in 8 executions)
- [main] 8 failures in step rhel-8_packaging-tests-unix (100.0% fail rate in 8 executions)
- [main] 8 failures in step rocky-8_packaging-tests-unix (100.0% fail rate in 8 executions)
- [main] 8 failures in pipeline elasticsearch-periodic-packaging (100.0% fail rate in 8 executions)

**Note:**
This issue was created using new test triage automation. Please report issues or feedback to es-delivery.",elasticsearchmachine,closed,"[':Delivery/Packaging', '>test-failure', 'Team:Delivery', 'low-risk']",https://github.com/elastic/elasticsearch/issues/127138,2025-04-22T07:22:11Z,2,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/127138,"{
  ""application_resource"": ""unsure""
}"
35,126939,ArrayIndexOutOfBoundsException in FixedBitSet.set during query,"Looks like it happens during scoring.

Full stack trace:
```
org.elasticsearch.search.query.QueryPhaseExecutionException: Query Failed [Failed to execute main query]
	at org.elasticsearch.server@9.1.0/org.elasticsearch.search.query.QueryPhase.addCollectorsAndSearch(QueryPhase.java:237)
	at org.elasticsearch.server@9.1.0/org.elasticsearch.search.query.QueryPhase.executeQuery(QueryPhase.java:143)
	at org.elasticsearch.server@9.1.0/org.elasticsearch.search.query.QueryPhase.execute(QueryPhase.java:70)
	at org.elasticsearch.server@9.1.0/org.elasticsearch.search.SearchService.loadOrExecuteQueryPhase(SearchService.java:668)
	at org.elasticsearch.server@9.1.0/org.elasticsearch.search.SearchService.executeQueryPhase(SearchService.java:873)
	at org.elasticsearch.server@9.1.0/org.elasticsearch.search.SearchService.lambda$executeQueryPhase$7(SearchService.java:706)
	at org.elasticsearch.server@9.1.0/org.elasticsearch.action.ActionRunnable$3.accept(ActionRunnable.java:79)
	at org.elasticsearch.server@9.1.0/org.elasticsearch.action.ActionRunnable$3.accept(ActionRunnable.java:76)
	at org.elasticsearch.server@9.1.0/org.elasticsearch.action.ActionRunnable$4.doRun(ActionRunnable.java:101)
	at org.elasticsearch.server@9.1.0/org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:27)
	at org.elasticsearch.server@9.1.0/org.elasticsearch.common.util.concurrent.TimedRunnable.doRun(TimedRunnable.java:34)
	at org.elasticsearch.server@9.1.0/org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:1044)
	at org.elasticsearch.server@9.1.0/org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:27)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1095)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:619)
	at java.base/java.lang.Thread.run(Thread.java:1447)
Caused by: java.lang.ArrayIndexOutOfBoundsException: Index -33 out of bounds for length 64
	at org.apache.lucene.core@10.2.0/org.apache.lucene.util.FixedBitSet.set(FixedBitSet.java:283)
	at org.apache.lucene.core@10.2.0/org.apache.lucene.search.DocIdSetIterator.intoBitSet(DocIdSetIterator.java:268)
	at org.apache.lucene.core@10.2.0/org.apache.lucene.search.comparators.TermOrdValComparator$CompetitiveIterator.intoBitSet(TermOrdValComparator.java:539)
	at org.apache.lucene.core@10.2.0/org.apache.lucene.search.DenseConjunctionBulkScorer.scoreWindowUsingBitSet(DenseConjunctionBulkScorer.java:242)
	at org.apache.lucene.core@10.2.0/org.apache.lucene.search.DenseConjunctionBulkScorer.scoreWindow(DenseConjunctionBulkScorer.java:210)
	at org.apache.lucene.core@10.2.0/org.apache.lucene.search.DenseConjunctionBulkScorer.score(DenseConjunctionBulkScorer.java:132)
	at org.elasticsearch.server@9.1.0/org.elasticsearch.search.internal.CancellableBulkScorer.score(CancellableBulkScorer.java:46)
	at org.elasticsearch.server@9.1.0/org.elasticsearch.search.internal.ContextIndexSearcher.searchLeaf(ContextIndexSearcher.java:460)
	at org.apache.lucene.core@10.2.0/org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:809)
	at org.elasticsearch.server@9.1.0/org.elasticsearch.search.internal.ContextIndexSearcher.search(ContextIndexSearcher.java:387)
	at org.elasticsearch.server@9.1.0/org.elasticsearch.search.internal.ContextIndexSearcher.lambda$search$3(ContextIndexSearcher.java:365)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:328)
	at org.apache.lucene.core@10.2.0/org.apache.lucene.search.TaskExecutor$Task.run(TaskExecutor.java:173)
	at org.apache.lucene.core@10.2.0/org.apache.lucene.search.TaskExecutor.invokeAll(TaskExecutor.java:111)
	at org.elasticsearch.server@9.1.0/org.elasticsearch.search.internal.ContextIndexSearcher.search(ContextIndexSearcher.java:369)
	at org.elasticsearch.server@9.1.0/org.elasticsearch.search.internal.ContextIndexSearcher.search(ContextIndexSearcher.java:336)
	at org.elasticsearch.server@9.1.0/org.elasticsearch.search.query.QueryPhase.addCollectorsAndSearch(QueryPhase.java:212)
	... 15 more
```",jordan-powers,closed,"['>bug', 'blocker', 'Team:Search Relevance', ':Search Relevance/Search']",https://github.com/elastic/elasticsearch/issues/126939,2025-04-16T17:06:55Z,8,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/126939,"{
  ""application_resource"": ""unsure""
}"
36,126809,"When I use KNN search, it will cause ES to fail","### Elasticsearch Version

8.17.4

### Installed Plugins

_No response_

### Java Version

OpenJDK Runtime Environment (23.0+37) (build 23+37-2369)

### OS Version

Ubuntu 20.04.6 LTS

### Problem Description

I deployed ES8.17.4 using Docker on the host (rocky-linux9.2 x86). The operating system version in the Docker container is Ubuntu 20.04.6 LTS, and the Java version is OpenJDK Runtime Environment (23.0+37) (build 23+37-2369). When I use KNN retrieval, it will cause ES to crash.

### Steps to Reproduce

PUT products
{
 ""mappings"": {
   ""dynamic"": ""strict"",
   ""properties"": {
     ""department"": {
       ""type"": ""keyword""
     },
     ""brand"": {
       ""type"": ""text"",
       ""fields"": {
            ""keyword"": {
              ""type"": ""keyword"",
              ""ignore_above"": 2048
            }
          }
     },
     ""description"": {
       ""type"": ""text""
     },
     ""embedding"": {
       ""type"": ""dense_vector"",
       ""index"": true,
       ""similarity"": ""l2_norm""
     },
     ""price"": {
       ""type"": ""float""
     }
   }
 }
}


POST products/_bulk?refresh=true
{""index"":{""_id"":1}}
{""department"":""backend"",""brand"": [""oepnjdk"",""otherjdk""], ""description"":""high-available nice oepnjdk"",""embedding"":[1,1,1,1],""price"":100}
{""index"":{""_id"":2}}
{""department"":""backend"",""brand"": [""oraclejdk""],""description"":""high-available beautiful oraclejdk"",""embedding"":[1,1,1,1],""price"":250}
{""index"":{""_id"":3}}
{""department"":""backend"",""brand"": [""otherjdk""],""description"":""every day otherjdk"",""embedding"":[1,1,1,1],""price"":50}
{""index"":{""_id"":4}}
{""department"":""backend"",""brand"": [""oepnjdk""],""description"":""oepnjdk"",""embedding"":[2,2,2,0],""price"":75}
{""index"":{""_id"":5}}
{""department"":""backend"",""brand"": [""oepnjdk""],""description"":""oepnjdk 2022"",""embedding"":[2,2,2,0],""price"":150}
{""index"":{""_id"":6}}
{""department"":""frontend"",""brand"": [""oepnjdk""], ""description"":""oepnjdk"",""embedding"":[2,2,2,0],""price"":50}


GET products/_search?
{
 ""size"": 10,
 ""knn"": {
           ""field"": ""embedding"",
           ""query_vector"": [2,2,2,2],
           ""k"":3,
           ""num_candidates"": 10,
    ""filter"": {
      ""terms"": {
        ""brand"": [""oepnjdk"",""otherjdk""]
      }
    }
  }
}

### Logs (if relevant)

[hs_err_pid68.log](https://github.com/user-attachments/files/19746589/hs_err_pid68.log)",zhoucheng89,closed,"['>bug', ':Search Relevance/Vectors', 'priority:normal', 'Team:Search Relevance']",https://github.com/elastic/elasticsearch/issues/126809,2025-04-15T02:59:45Z,17,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/126809,"{
  ""application_resource"": ""unsure""
}"
37,126749,[CI] Netty4HttpServerTransportTests testRespondAfterServiceCloseWithClientCancel failing,"**Build Scans:**
- [elasticsearch-periodic-platform-support #7658 / windows-2022_checkpart1_platform-support-windows](https://gradle-enterprise.elastic.co/s/nwcmq4skqobo6)
- [elasticsearch-periodic-platform-support #7644 / windows-2022_checkpart1_platform-support-windows](https://gradle-enterprise.elastic.co/s/bv3h4gozybn7i)
- [elasticsearch-gradle-cache-validation #115 / checkpart1_configuration_caching_validation](https://gradle-enterprise.elastic.co/s/f3upeims5x2ae)

**Reproduction Line:**
```
gradlew "":modules:transport-netty4:test"" --tests ""org.elasticsearch.http.netty4.Netty4HttpServerTransportTests.testRespondAfterServiceCloseWithClientCancel"" -Dtests.seed=778FBDA0BE9F26AB -Dtests.locale=es-CL -Dtests.timezone=Europe/Monaco -Druntime.java=24
```

**Applicable branches:**
main

**Reproduces locally?:**
N/A

**Failure History:**
[See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&_a=(controlGroupState:(initialChildControlState:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:task.keyword,order:0,selectedOptions:!(),title:'GradleTask',type:optionsListControl),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:className.keyword,order:1,selectedOptions:!(org.elasticsearch.http.netty4.Netty4HttpServerTransportTests),title:'Suite',type:optionsListControl),'144933da-5c1b-4257-a969-7f43455a7901':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:name.keyword,order:2,selectedOptions:!(testRespondAfterServiceCloseWithClientCancel),title:'Test',type:optionsListControl)))))

**Failure Message:**
```
java.lang.AssertionError: 
Expected: an empty collection
     but: <[LEAK: ByteBuf.release() was not called before it's garbage-collected. See https://netty.io/wiki/reference-counted-objects.html for more information.
Recent access records: 
#1:
	Hint: Caller of readInbound() will handle the message from this point
	io.netty.buffer.AdvancedLeakAwareCompositeByteBuf.touch(AdvancedLeakAwareCompositeByteBuf.java:36)
	io.netty.handler.codec.http.HttpObjectAggregator$AggregatedFullHttpMessage.touch(HttpObjectAggregator.java:366)
	io.netty.handler.codec.http.HttpObjectAggregator$AggregatedFullHttpRequest.touch(HttpObjectAggregator.java:445)
	io.netty.handler.codec.http.HttpObjectAggregator$AggregatedFullHttpRequest.touch(HttpObjectAggregator.java:396)
	io.netty.channel.embedded.EmbeddedChannel.readInbound(EmbeddedChannel.java:314)
	org.elasticsearch.http.netty4.Netty4HttpHeaderValidatorTests.testWithFlowControlAndAggregator(Netty4HttpHeaderValidatorTests.java:160)
	java.base/jdk.
[truncated]
```

**Issue Reasons:**
- [main] 3 failures in test testRespondAfterServiceCloseWithClientCancel (1.0% fail rate in 286 executions)
- [main] 2 failures in step windows-2022_checkpart1_platform-support-windows (33.3% fail rate in 6 executions)
- [main] 2 failures in pipeline elasticsearch-periodic-platform-support (33.3% fail rate in 6 executions)

**Note:**
This issue was created using new test triage automation. Please report issues or feedback to es-delivery.",elasticsearchmachine,closed,"[':Distributed Coordination/Network', '>test-failure', 'low-risk', 'Team:Distributed Coordination']",https://github.com/elastic/elasticsearch/issues/126749,2025-04-13T14:34:57Z,1,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/126749,"{
  ""application_resource"": ""yes""
}"
38,126535,Re-evaluate the ML node memory availability formula,"Currently, if `ml.use_auto_machine_memory_percent` is set to `true`, the amount of available memory on an ML node is [calculated](https://github.com/elastic/elasticsearch/blob/d82886fc5251ea33adda0aad9b526f969751af22/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/utils/NativeMemoryCalculator.java#L143) as 
`NODE_MEMORY - JVM_HEAP_SIZE  - 200MB OFF-HEAP MEMORY`   

Where `JVM_HEAP_SIZE` is configured on ES start, and the off-heap memory is estimated at 200MB as a fixed value.

Some empirical evidence suggests that the off-heap memory can be significantly larger, which can lead to the Java process being killed by the OOM-killer.

We need to re-evaluate whether the way the ML code is becoming aware of the available memory needs to be adjusted or changed. ",valeriy42,closed,"[':Core/Infra/Core', ':ml', 'Team:Core/Infra', 'Team:ML']",https://github.com/elastic/elasticsearch/issues/126535,2025-04-09T14:13:35Z,6,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/126535,"{
  ""application_resource"": ""yes""
}"
39,125683,[CI] SearchableSnapshotActionIT testSearchableSnapshotsInHotPhasePinnedToHotNodes failing,"**Build Scans:**
- [elasticsearch-periodic-platform-support #7266 / oraclelinux-9_platform-support-unix](https://gradle-enterprise.elastic.co/s/kwbjvfaghg57w)
- [elasticsearch-pull-request #64774 / checkpart5_release-tests](https://gradle-enterprise.elastic.co/s/eyxawwsnb3tyq)
- [elasticsearch-periodic #7223 / single-processor-node-tests](https://gradle-enterprise.elastic.co/s/4nkgp3udfwphe)
- [elasticsearch-periodic-platform-support #7245 / ubuntu-2404_platform-support-unix](https://gradle-enterprise.elastic.co/s/6yievx36cl2j6)

**Reproduction Line:**
```
./gradlew "":x-pack:plugin:ilm:qa:multi-node:javaRestTest"" --tests ""org.elasticsearch.xpack.ilm.actions.SearchableSnapshotActionIT.testSearchableSnapshotsInHotPhasePinnedToHotNodes"" -Dtests.seed=23428F9DB66FBCCC -Dtests.locale=nl-CW -Dtests.timezone=America/Indianapolis -Druntime.java=24
```

**Applicable branches:**
main

**Reproduces locally?:**
N/A

**Failure History:**
[See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&_a=(controlGroupState:(initialChildControlState:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:task.keyword,order:0,selectedOptions:!(),title:'GradleTask',type:optionsListControl),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:className.keyword,order:1,selectedOptions:!(org.elasticsearch.xpack.ilm.actions.SearchableSnapshotActionIT),title:'Suite',type:optionsListControl),'144933da-5c1b-4257-a969-7f43455a7901':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:name.keyword,order:2,selectedOptions:!(testSearchableSnapshotsInHotPhasePinnedToHotNodes),title:'Test',type:optionsListControl)))))

**Failure Message:**
```
java.lang.AssertionError: 
Expected: is <{""phase"":""hot"",""action"":""complete"",""name"":""complete""}>
     but: was <{""phase"":""null"",""action"":""null"",""name"":""null""}>
```

**Issue Reasons:**
- [main] 4 failures in test testSearchableSnapshotsInHotPhasePinnedToHotNodes (2.0% fail rate in 204 executions)
- [main] 2 failures in pipeline elasticsearch-periodic-platform-support (50.0% fail rate in 4 executions)

**Note:**
This issue was created using new test triage automation. Please report issues or feedback to es-delivery.",elasticsearchmachine,closed,"['>test-failure', ':Data Management/ILM+SLM', 'Team:Data Management', 'low-risk']",https://github.com/elastic/elasticsearch/issues/125683,2025-03-26T16:01:50Z,14,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/125683,"{
  ""application_resource"": ""unsure""
}"
40,125577,ESQL: Skip LOOKUP JOIN when join key is missing from index,"[`ReplaceMissingFieldWithNull`](https://github.com/elastic/elasticsearch/blob/main/x-pack/plugin/esql/src/main/java/org/elasticsearch/xpack/esql/optimizer/rules/logical/local/ReplaceMissingFieldWithNull.java) will check if the indices of a data node even have a given field, and if not, will define a literal `NULL` in its place to avoid extracting null blocks.

When the join key for a `LOOKUP JOIN` is missing on the data node, we could optimize away the whole join rather than extracting null blocks and then performing lookups with them.

Or, at least we should check that the current implementation is sufficiently cheap - but I think it's likely not in cases where we fan out to loads of data nodes, many of which just don't have values for the join key; like in `FROM * | LOOKUP JOIN lu_idx ON some_rather_rare_field | SORT whatever_field`.",alex-spies,closed,"['>enhancement', 'Team:Analytics', ':Analytics/ES|QL']",https://github.com/elastic/elasticsearch/issues/125577,2025-03-25T10:51:24Z,3,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/125577,"{
  ""application_resource"": ""no""
}"
41,125533,[CI] LegacyYamlRestTestPluginFuncTest plugin projects are wired into test cluster setup failing,"**Build Scans:**
- [elasticsearch-periodic-platform-support #7373 / almalinux-8-aarch64_checkpart1_platform-support-arm](https://gradle-enterprise.elastic.co/s/fbnkhx4kjbx3q)
- [elasticsearch-periodic-platform-support #7373 / ubuntu-2004-aarch64_checkpart1_platform-support-arm](https://gradle-enterprise.elastic.co/s/b5umvymgurmgg)
- [elasticsearch-periodic-platform-support #7366 / ubuntu-2004-aarch64_checkpart1_platform-support-arm](https://gradle-enterprise.elastic.co/s/6fhp5tay24ewi)
- [elasticsearch-periodic-platform-support #7366 / almalinux-8-aarch64_checkpart1_platform-support-arm](https://gradle-enterprise.elastic.co/s/5gq6trufvae3e)
- [elasticsearch-periodic-platform-support #7359 / almalinux-8-aarch64_checkpart1_platform-support-arm](https://gradle-enterprise.elastic.co/s/f7jgf7iqox5hw)
- [elasticsearch-periodic-platform-support #7359 / ubuntu-2004-aarch64_checkpart1_platform-support-arm](https://gradle-enterprise.elastic.co/s/4zsuwutts6jt6)
- [elasticsearch-periodic-platform-support #7352 / ubuntu-2004-aarch64_checkpart1_platform-support-arm](https://gradle-enterprise.elastic.co/s/ivb3pac5ndpg4)
- [elasticsearch-periodic-platform-support #7352 / almalinux-8-aarch64_checkpart1_platform-support-arm](https://gradle-enterprise.elastic.co/s/vtodeyofnpbfq)
- [elasticsearch-periodic-platform-support #7345 / almalinux-8-aarch64_checkpart1_platform-support-arm](https://gradle-enterprise.elastic.co/s/ajjycbgvne7uo)
- [elasticsearch-periodic-platform-support #7345 / ubuntu-2004-aarch64_checkpart1_platform-support-arm](https://gradle-enterprise.elastic.co/s/glf2n3xeh46pg)

**Reproduction Line:**
```
null
```

**Applicable branches:**
8.16

**Reproduces locally?:**
N/A

**Failure History:**
[See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&_a=(controlGroupState:(initialChildControlState:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:task.keyword,order:0,selectedOptions:!(),title:'GradleTask',type:optionsListControl),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:className.keyword,order:1,selectedOptions:!(org.elasticsearch.gradle.internal.test.rest.LegacyYamlRestTestPluginFuncTest),title:'Suite',type:optionsListControl),'144933da-5c1b-4257-a969-7f43455a7901':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:name.keyword,order:2,selectedOptions:!(plugin%20projects%20are%20wired%20into%20test%20cluster%20setup),title:'Test',type:optionsListControl)))))

**Failure Message:**
```
org.gradle.testkit.runner.UnexpectedBuildFailure: Unexpected build execution failure in /tmp/junit2731184467363460981 with arguments [yamlRestTest, --full-stacktrace, --configuration-cache, -Dorg.elasticsearch.gradle.build-api-restriction.disabled=true, -Dtest.external=true]

Output:
Calculating task graph as no cached configuration is available for tasks: yamlRestTest
=======================================
Elasticsearch Build Hamster says Hello!
  Gradle Version        : 8.13
  OS Info               : Linux 4.18.0-513.18.1.el8_9.aarch64 (aarch64)
  Runtime JDK Version   : 21.0.6+7-LTS (Eclipse Temurin, 21.0.6+7-LTS)
  Runtime java.home     : /opt/buildkite-agent/.gradle/jdks/eclipse_adoptium-21-aarch64-linux.2
  Gradle JDK Version    : 21.0.6+7-LTS (Eclipse Temurin)
  Gradle java.home      : /opt/buildkite-agent/.gradle/jdks/eclipse_adoptium-21-aarch64-linux.2
  Random Testing Seed   : C70DCF99734E0852
  In FIPS 140 mode      : false
=======================================

FAILURE: 
[truncated]
```

**Issue Reasons:**
- [8.16] 20 consecutive failures in step almalinux-8-aarch64_checkpart1_platform-support-arm
- [8.16] 19 consecutive failures in step ubuntu-2004-aarch64_checkpart1_platform-support-arm
- [8.16] 20 consecutive failures in pipeline elasticsearch-periodic-platform-support
- [8.16] 39 failures in test plugin projects are wired into test cluster setup (28.3% fail rate in 138 executions)
- [8.16] 20 failures in step almalinux-8-aarch64_checkpart1_platform-support-arm (100.0% fail rate in 20 executions)
- [8.16] 19 failures in step ubuntu-2004-aarch64_checkpart1_platform-support-arm (100.0% fail rate in 19 executions)
- [8.16] 20 failures in pipeline elasticsearch-periodic-platform-support (100.0% fail rate in 20 executions)

**Note:**
This issue was created using new test triage automation. Please report issues or feedback to es-delivery.",elasticsearchmachine,closed,"[':Delivery/Build', '>test-failure', 'Team:Delivery', 'needs:risk']",https://github.com/elastic/elasticsearch/issues/125533,2025-03-24T21:16:15Z,1,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/125533,"{
  ""application_resource"": ""unsure""
}"
42,125532,[CI] LegacyYamlRestTestPluginFuncTest yamlRestTest executes and copies api and tests to correct source set failing,"**Build Scans:**
- [elasticsearch-periodic-platform-support #7373 / almalinux-8-aarch64_checkpart1_platform-support-arm](https://gradle-enterprise.elastic.co/s/fbnkhx4kjbx3q)
- [elasticsearch-periodic-platform-support #7373 / ubuntu-2004-aarch64_checkpart1_platform-support-arm](https://gradle-enterprise.elastic.co/s/b5umvymgurmgg)
- [elasticsearch-periodic-platform-support #7366 / ubuntu-2004-aarch64_checkpart1_platform-support-arm](https://gradle-enterprise.elastic.co/s/6fhp5tay24ewi)
- [elasticsearch-periodic-platform-support #7366 / almalinux-8-aarch64_checkpart1_platform-support-arm](https://gradle-enterprise.elastic.co/s/5gq6trufvae3e)
- [elasticsearch-periodic-platform-support #7359 / almalinux-8-aarch64_checkpart1_platform-support-arm](https://gradle-enterprise.elastic.co/s/f7jgf7iqox5hw)
- [elasticsearch-periodic-platform-support #7359 / ubuntu-2004-aarch64_checkpart1_platform-support-arm](https://gradle-enterprise.elastic.co/s/4zsuwutts6jt6)
- [elasticsearch-periodic-platform-support #7352 / ubuntu-2004-aarch64_checkpart1_platform-support-arm](https://gradle-enterprise.elastic.co/s/ivb3pac5ndpg4)
- [elasticsearch-periodic-platform-support #7352 / almalinux-8-aarch64_checkpart1_platform-support-arm](https://gradle-enterprise.elastic.co/s/vtodeyofnpbfq)
- [elasticsearch-periodic-platform-support #7345 / almalinux-8-aarch64_checkpart1_platform-support-arm](https://gradle-enterprise.elastic.co/s/ajjycbgvne7uo)
- [elasticsearch-periodic-platform-support #7345 / ubuntu-2004-aarch64_checkpart1_platform-support-arm](https://gradle-enterprise.elastic.co/s/glf2n3xeh46pg)

**Reproduction Line:**
```
null
```

**Applicable branches:**
8.16

**Reproduces locally?:**
N/A

**Failure History:**
[See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&_a=(controlGroupState:(initialChildControlState:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:task.keyword,order:0,selectedOptions:!(),title:'GradleTask',type:optionsListControl),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:className.keyword,order:1,selectedOptions:!(org.elasticsearch.gradle.internal.test.rest.LegacyYamlRestTestPluginFuncTest),title:'Suite',type:optionsListControl),'144933da-5c1b-4257-a969-7f43455a7901':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:name.keyword,order:2,selectedOptions:!(yamlRestTest%20executes%20and%20copies%20api%20and%20tests%20to%20correct%20source%20set),title:'Test',type:optionsListControl)))))

**Failure Message:**
```
org.gradle.testkit.runner.UnexpectedBuildFailure: Unexpected build execution failure in /tmp/junit2731184467363460981 with arguments [yamlRestTest, --full-stacktrace, --configuration-cache, -Dorg.elasticsearch.gradle.build-api-restriction.disabled=true, -Dtest.external=true]

Output:
Calculating task graph as no cached configuration is available for tasks: yamlRestTest
=======================================
Elasticsearch Build Hamster says Hello!
  Gradle Version        : 8.13
  OS Info               : Linux 4.18.0-513.18.1.el8_9.aarch64 (aarch64)
  Runtime JDK Version   : 21.0.6+7-LTS (Eclipse Temurin, 21.0.6+7-LTS)
  Runtime java.home     : /opt/buildkite-agent/.gradle/jdks/eclipse_adoptium-21-aarch64-linux.2
  Gradle JDK Version    : 21.0.6+7-LTS (Eclipse Temurin)
  Gradle java.home      : /opt/buildkite-agent/.gradle/jdks/eclipse_adoptium-21-aarch64-linux.2
  Random Testing Seed   : C70DCF99734E0852
  In FIPS 140 mode      : false
=======================================

FAILURE: 
[truncated]
```

**Issue Reasons:**
- [8.16] 20 consecutive failures in step almalinux-8-aarch64_checkpart1_platform-support-arm
- [8.16] 19 consecutive failures in step ubuntu-2004-aarch64_checkpart1_platform-support-arm
- [8.16] 20 consecutive failures in pipeline elasticsearch-periodic-platform-support
- [8.16] 39 failures in test yamlRestTest executes and copies api and tests to correct source set (28.3% fail rate in 138 executions)
- [8.16] 20 failures in step almalinux-8-aarch64_checkpart1_platform-support-arm (100.0% fail rate in 20 executions)
- [8.16] 19 failures in step ubuntu-2004-aarch64_checkpart1_platform-support-arm (100.0% fail rate in 19 executions)
- [8.16] 20 failures in pipeline elasticsearch-periodic-platform-support (100.0% fail rate in 20 executions)

**Note:**
This issue was created using new test triage automation. Please report issues or feedback to es-delivery.",elasticsearchmachine,closed,"[':Delivery/Build', '>test-failure', 'Team:Delivery', 'needs:risk']",https://github.com/elastic/elasticsearch/issues/125532,2025-03-24T21:16:11Z,1,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/125532,"{
  ""application_resource"": ""unsure""
}"
43,125531,[CI] LegacyYamlRestTestPluginFuncTest yamlRestTest does nothing when there are no tests failing,"**Build Scans:**
- [elasticsearch-periodic-platform-support #7373 / almalinux-8-aarch64_checkpart1_platform-support-arm](https://gradle-enterprise.elastic.co/s/fbnkhx4kjbx3q)
- [elasticsearch-periodic-platform-support #7373 / ubuntu-2004-aarch64_checkpart1_platform-support-arm](https://gradle-enterprise.elastic.co/s/b5umvymgurmgg)
- [elasticsearch-periodic-platform-support #7366 / ubuntu-2004-aarch64_checkpart1_platform-support-arm](https://gradle-enterprise.elastic.co/s/6fhp5tay24ewi)
- [elasticsearch-periodic-platform-support #7366 / almalinux-8-aarch64_checkpart1_platform-support-arm](https://gradle-enterprise.elastic.co/s/5gq6trufvae3e)
- [elasticsearch-periodic-platform-support #7359 / almalinux-8-aarch64_checkpart1_platform-support-arm](https://gradle-enterprise.elastic.co/s/f7jgf7iqox5hw)
- [elasticsearch-periodic-platform-support #7359 / ubuntu-2004-aarch64_checkpart1_platform-support-arm](https://gradle-enterprise.elastic.co/s/4zsuwutts6jt6)
- [elasticsearch-periodic-platform-support #7352 / ubuntu-2004-aarch64_checkpart1_platform-support-arm](https://gradle-enterprise.elastic.co/s/ivb3pac5ndpg4)
- [elasticsearch-periodic-platform-support #7352 / almalinux-8-aarch64_checkpart1_platform-support-arm](https://gradle-enterprise.elastic.co/s/vtodeyofnpbfq)
- [elasticsearch-periodic-platform-support #7345 / almalinux-8-aarch64_checkpart1_platform-support-arm](https://gradle-enterprise.elastic.co/s/ajjycbgvne7uo)
- [elasticsearch-periodic-platform-support #7345 / ubuntu-2004-aarch64_checkpart1_platform-support-arm](https://gradle-enterprise.elastic.co/s/glf2n3xeh46pg)

**Reproduction Line:**
```
null
```

**Applicable branches:**
8.16

**Reproduces locally?:**
N/A

**Failure History:**
[See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&_a=(controlGroupState:(initialChildControlState:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:task.keyword,order:0,selectedOptions:!(),title:'GradleTask',type:optionsListControl),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:className.keyword,order:1,selectedOptions:!(org.elasticsearch.gradle.internal.test.rest.LegacyYamlRestTestPluginFuncTest),title:'Suite',type:optionsListControl),'144933da-5c1b-4257-a969-7f43455a7901':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:name.keyword,order:2,selectedOptions:!(yamlRestTest%20does%20nothing%20when%20there%20are%20no%20tests),title:'Test',type:optionsListControl)))))

**Failure Message:**
```
org.gradle.testkit.runner.UnexpectedBuildFailure: Unexpected build execution failure in /tmp/junit2731184467363460981 with arguments [yamlRestTest, --full-stacktrace, --configuration-cache, -Dorg.elasticsearch.gradle.build-api-restriction.disabled=true, -Dtest.external=true]

Output:
Calculating task graph as no cached configuration is available for tasks: yamlRestTest
=======================================
Elasticsearch Build Hamster says Hello!
  Gradle Version        : 8.13
  OS Info               : Linux 4.18.0-513.18.1.el8_9.aarch64 (aarch64)
  Runtime JDK Version   : 21.0.6+7-LTS (Eclipse Temurin, 21.0.6+7-LTS)
  Runtime java.home     : /opt/buildkite-agent/.gradle/jdks/eclipse_adoptium-21-aarch64-linux.2
  Gradle JDK Version    : 21.0.6+7-LTS (Eclipse Temurin)
  Gradle java.home      : /opt/buildkite-agent/.gradle/jdks/eclipse_adoptium-21-aarch64-linux.2
  Random Testing Seed   : C70DCF99734E0852
  In FIPS 140 mode      : false
=======================================

FAILURE: 
[truncated]
```

**Issue Reasons:**
- [8.16] 20 consecutive failures in step almalinux-8-aarch64_checkpart1_platform-support-arm
- [8.16] 19 consecutive failures in step ubuntu-2004-aarch64_checkpart1_platform-support-arm
- [8.16] 20 consecutive failures in pipeline elasticsearch-periodic-platform-support
- [8.16] 39 failures in test yamlRestTest does nothing when there are no tests (28.3% fail rate in 138 executions)
- [8.16] 20 failures in step almalinux-8-aarch64_checkpart1_platform-support-arm (100.0% fail rate in 20 executions)
- [8.16] 19 failures in step ubuntu-2004-aarch64_checkpart1_platform-support-arm (100.0% fail rate in 19 executions)
- [8.16] 20 failures in pipeline elasticsearch-periodic-platform-support (100.0% fail rate in 20 executions)

**Note:**
This issue was created using new test triage automation. Please report issues or feedback to es-delivery.",elasticsearchmachine,closed,"[':Delivery/Build', '>test-failure', 'Team:Delivery', 'needs:risk']",https://github.com/elastic/elasticsearch/issues/125531,2025-03-24T21:16:07Z,1,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/125531,"{
  ""application_resource"": ""unsure""
}"
44,124497,[CI] MixedClusterDownsampleRestIT class failing,"**Build Scans:**
- [elasticsearch-intake #19773 / 9.0.0_bwc-snapshots](https://gradle-enterprise.elastic.co/s/dtqxbotkjij6u)
- [elasticsearch-pull-request #61065 / 8.19.0_bwc-snapshots](https://gradle-enterprise.elastic.co/s/p2xceqpjaljgc)

**Reproduction Line:**
```
undefined
```

**Applicable branches:**
main

**Reproduces locally?:**
N/A

**Failure History:**
[See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&_a=(controlGroupState:(initialChildControlState:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:task.keyword,order:0,selectedOptions:!(),title:'GradleTask',type:optionsListControl),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:className.keyword,order:1,selectedOptions:!(org.elasticsearch.xpack.downsample.MixedClusterDownsampleRestIT),title:'Suite',type:optionsListControl),'144933da-5c1b-4257-a969-7f43455a7901':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:name.keyword,order:2,selectedOptions:!(org.elasticsearch.xpack.downsample.MixedClusterDownsampleRestIT),title:'Test',type:optionsListControl)))))

**Failure Message:**
```
undefined
```

**Issue Reasons:**
- [main] 2 failures in class org.elasticsearch.xpack.downsample.MixedClusterDownsampleRestIT (0.3% fail rate in 663 executions)

**Note:**
This issue was created using new test triage automation. Please report issues or feedback to es-delivery.",elasticsearchmachine,closed,"['>test-failure', ':StorageEngine/Downsampling', 'low-risk', 'Team:StorageEngine']",https://github.com/elastic/elasticsearch/issues/124497,2025-03-10T14:33:43Z,6,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/124497,"{
  ""application_resource"": ""unsure""
}"
45,123213,[CI] EsqlRestValidationIT class failing,"**Build Scans:**
- [elasticsearch-periodic-platform-support #9010 / windows-2025_checkpart3_platform-support-windows](https://gradle-enterprise.elastic.co/s/p5zzzdvfwok4c)
- [elasticsearch-periodic-platform-support #9003 / windows-2025_checkpart3_platform-support-windows](https://gradle-enterprise.elastic.co/s/yt76trnyyz6oq)
- [elasticsearch-periodic-platform-support #8996 / windows-2025_checkpart3_platform-support-windows](https://gradle-enterprise.elastic.co/s/tweqddtqbchsg)

**Reproduction Line:**
```
undefined
```

**Applicable branches:**
8.17

**Reproduces locally?:**
N/A

**Failure History:**
[See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&_a=(controlGroupState:(initialChildControlState:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:task.keyword,order:0,selectedOptions:!(),title:'GradleTask',type:optionsListControl),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:className.keyword,order:1,selectedOptions:!(org.elasticsearch.xpack.esql.qa.multi_node.EsqlRestValidationIT),title:'Suite',type:optionsListControl),'144933da-5c1b-4257-a969-7f43455a7901':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:name.keyword,order:2,selectedOptions:!(org.elasticsearch.xpack.esql.qa.multi_node.EsqlRestValidationIT),title:'Test',type:optionsListControl)))))

**Failure Message:**
```
undefined
```

**Issue Reasons:**
- [8.17] 3 consecutive failures in step windows-2025_checkpart3_platform-support-windows
- [8.17] 3 failures in class org.elasticsearch.xpack.esql.qa.multi_node.EsqlRestValidationIT (3.1% fail rate in 98 executions)
- [8.17] 3 failures in step windows-2025_checkpart3_platform-support-windows (75.0% fail rate in 4 executions)
- [8.17] 3 failures in pipeline elasticsearch-periodic-platform-support (75.0% fail rate in 4 executions)

**Note:**
This issue was created using new test triage automation. Please report issues or feedback to es-delivery.",elasticsearchmachine,closed,"[':Delivery/Build', '>test-failure', 'Team:Delivery', 'needs:risk']",https://github.com/elastic/elasticsearch/issues/123213,2025-02-22T22:15:59Z,4,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/123213,"{
  ""application_resource"": ""unsure""
}"
46,122940,[CI] AsyncSearchSecurityIT class failing,"**Build Scans:**
- [elasticsearch-periodic-platform-support #6762 / windows-2022_checkpart4_platform-support-windows](https://gradle-enterprise.elastic.co/s/nti2zjpphgq5u)
- [elasticsearch-periodic-platform-support #6762 / windows-2019_checkpart4_platform-support-windows](https://gradle-enterprise.elastic.co/s/tnl73hk2rv5xu)
- [elasticsearch-periodic-platform-support #6755 / windows-2019_checkpart4_platform-support-windows](https://gradle-enterprise.elastic.co/s/t34ie23dirlsg)
- [elasticsearch-periodic-platform-support #6741 / windows-2022_checkpart4_platform-support-windows](https://gradle-enterprise.elastic.co/s/kxshn2yjw3mgi)
- [elasticsearch-periodic-platform-support #6734 / windows-2022_checkpart4_platform-support-windows](https://gradle-enterprise.elastic.co/s/hxiw53nduytay)
- [elasticsearch-periodic-platform-support #6734 / windows-2019_checkpart4_platform-support-windows](https://gradle-enterprise.elastic.co/s/6du54qhr7koze)
- [elasticsearch-periodic-platform-support #6727 / windows-2019_checkpart4_platform-support-windows](https://gradle-enterprise.elastic.co/s/kdv4kvpl4d44i)
- [elasticsearch-periodic-platform-support #6720 / windows-2019_checkpart4_platform-support-windows](https://gradle-enterprise.elastic.co/s/qzda3qe654atc)
- [elasticsearch-periodic-platform-support #6713 / windows-2022_checkpart4_platform-support-windows](https://gradle-enterprise.elastic.co/s/pysyj5u3hkrmc)
- [elasticsearch-periodic-platform-support #6706 / windows-2019_checkpart4_platform-support-windows](https://gradle-enterprise.elastic.co/s/vh426lxbkedds)

**Reproduction Line:**
```
undefined
```

**Applicable branches:**
8.x

**Reproduces locally?:**
N/A

**Failure History:**
[See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&_a=(controlGroupState:(initialChildControlState:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:task.keyword,order:0,selectedOptions:!(),title:'GradleTask',type:optionsListControl),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:className.keyword,order:1,selectedOptions:!(org.elasticsearch.xpack.search.AsyncSearchSecurityIT),title:'Suite',type:optionsListControl),'144933da-5c1b-4257-a969-7f43455a7901':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:name.keyword,order:2,selectedOptions:!(org.elasticsearch.xpack.search.AsyncSearchSecurityIT),title:'Test',type:optionsListControl)))))

**Failure Message:**
```
undefined
```

**Issue Reasons:**
- [8.x] 2 consecutive failures in class org.elasticsearch.xpack.search.AsyncSearchSecurityIT
- [8.x] 11 consecutive failures in step windows-2022_checkpart4_platform-support-windows
- [8.x] 11 consecutive failures in step windows-2019_checkpart4_platform-support-windows
- [8.x] 22 failures in class org.elasticsearch.xpack.search.AsyncSearchSecurityIT (3.3% fail rate in 661 executions)
- [8.x] 11 failures in step windows-2022_checkpart4_platform-support-windows (100.0% fail rate in 11 executions)
- [8.x] 11 failures in step windows-2019_checkpart4_platform-support-windows (100.0% fail rate in 11 executions)
- [8.x] 15 failures in pipeline elasticsearch-periodic-platform-support (83.3% fail rate in 18 executions)

**Note:**
This issue was created using new test triage automation. Please report issues or feedback to es-delivery.",elasticsearchmachine,closed,"[':Core/Infra/Scripting', '>test-failure', 'Team:Core/Infra', 'low-risk', 'stateful']",https://github.com/elastic/elasticsearch/issues/122940,2025-02-19T13:37:04Z,7,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/122940,"{
  ""application_resource"": ""unsure""
}"
47,121717,[CI] DedicatedClusterSnapshotRestoreIT testRestoreShrinkIndex failing,"**Build Scans:**
- [elasticsearch-periodic-platform-support #6588 / windows-2022_checkpart1_platform-support-windows](https://gradle-enterprise.elastic.co/s/mql7om56lxohu)
- [elasticsearch-periodic-platform-support #6567 / windows-2019_checkpart1_platform-support-windows](https://gradle-enterprise.elastic.co/s/vl2zs4cbkrrhm)
- [elasticsearch-periodic-platform-support #6553 / windows-2022_checkpart1_platform-support-windows](https://gradle-enterprise.elastic.co/s/7gcak6qyeutgk)
- [elasticsearch-periodic-platform-support #6532 / windows-2022_checkpart1_platform-support-windows](https://gradle-enterprise.elastic.co/s/ufdejyooobb52)
- [elasticsearch-periodic-platform-support #6518 / windows-2019_checkpart1_platform-support-windows](https://gradle-enterprise.elastic.co/s/44z2tnnrk64e2)
- [elasticsearch-periodic-platform-support #6441 / windows-2022_checkpart1_platform-support-windows](https://gradle-enterprise.elastic.co/s/o2uwgxk7i5tbo)

**Reproduction Line:**
```
gradlew "":server:internalClusterTest"" --tests ""org.elasticsearch.snapshots.DedicatedClusterSnapshotRestoreIT.testRestoreShrinkIndex"" -Dtests.seed=F6FDAA05ED542B2A -Dtests.locale=os -Dtests.timezone=Pacific/Auckland -Druntime.java=23
```

**Applicable branches:**
8.x

**Reproduces locally?:**
N/A

**Failure History:**
[See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&_a=(controlGroupState:(initialChildControlState:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:task.keyword,order:0,selectedOptions:!(),title:'GradleTask',type:optionsListControl),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:className.keyword,order:1,selectedOptions:!(org.elasticsearch.snapshots.DedicatedClusterSnapshotRestoreIT),title:'Suite',type:optionsListControl),'144933da-5c1b-4257-a969-7f43455a7901':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:name.keyword,order:2,selectedOptions:!(testRestoreShrinkIndex),title:'Test',type:optionsListControl)))))

**Failure Message:**
```
java.lang.IllegalStateException: Some shards are still open after the threadpool terminated. Something is leaking index readers or store references.
```

**Issue Reasons:**
- [8.x] 6 failures in test testRestoreShrinkIndex (0.7% fail rate in 862 executions)
- [8.x] 4 failures in step windows-2022_checkpart1_platform-support-windows (22.2% fail rate in 18 executions)
- [8.x] 2 failures in step windows-2019_checkpart1_platform-support-windows (12.5% fail rate in 16 executions)
- [8.x] 6 failures in pipeline elasticsearch-periodic-platform-support (27.3% fail rate in 22 executions)

**Note:**
This issue was created using new test triage automation. Please report issues or feedback to es-delivery.",elasticsearchmachine,closed,"[':Distributed Coordination/Snapshot/Restore', '>test-failure', 'low-risk', 'Team:Distributed Coordination']",https://github.com/elastic/elasticsearch/issues/121717,2025-02-04T22:10:58Z,18,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/121717,"{
  ""application_resource"": ""yes""
}"
48,120518,Clean up of the `.snapshot-blob-cache*` index not working on an upgraded 8.x cluster,"### Elasticsearch Version

8.x

### Installed Plugins

_No response_

### Java Version

_bundled_

### OS Version

all

### Problem Description

If a 7.x cluster has the `.snapshot-blob-cache*` system index (used for caching header/footer values of Lucene files when mounting searchable snapshot indices), and it is upgrade to 8.x, the clean up of the entries of this index doesn't seem to work anymore. These clean ups are done automatically periodically e.g. when the relevant searchable snapshot indices are removed (and after a configurable period). Deletion also doesn't seem to work if one would create new searchable snapshot indices (which write to this system index) and remove them. In other words, after upgrade the `.snapshot-blob-cache*` system index seems to only grow.

As a work-around, you can remove the `.snapshot-blob-cache*` system index (which requires `[delete_index,manage,all]` privileges). Note that this work-around essentially wipes the cache (which is what this system index is).

### Steps to Reproduce

1. Start a 7.x node.
2. create an index, take a snapshot and remove the index.
3. Mount the index as a partially mounted searchable snapshot.
4. Upgrade to 8.x.
5. Remove the searchable snapshot index.
6. The `.snapshot-blob-cache*` index is not cleaned up after the configured retention period and periodic clean up interval.

### Logs (if relevant)

_No response_",pxsalehi,closed,"['>bug', ':Distributed Coordination/Snapshot/Restore', 'Team:Distributed Coordination']",https://github.com/elastic/elasticsearch/issues/120518,2025-01-21T11:00:36Z,1,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/120518,"{
  ""application_resource"": ""yes""
}"
49,120471,[CI] OldRepositoryAccessIT testOldSourceOnlyRepoAccess failing,"**Build Scans:**
- [elasticsearch-periodic #5934 / openjdk21_checkpart2_java-matrix](https://gradle-enterprise.elastic.co/s/3osnnmfn53vrk)
- [elasticsearch-pull-request #51416 / part-2](https://gradle-enterprise.elastic.co/s/fefedsvassx2y)
- [elasticsearch-pull-request #51416 / part-2](https://gradle-enterprise.elastic.co/s/fjd2jexdjhoxu)
- [elasticsearch-pull-request #51416 / part-2](https://gradle-enterprise.elastic.co/s/jxvedgqqhawae)
- [elasticsearch-periodic #5919 / graalvm-ce17_checkpart2_java-matrix](https://gradle-enterprise.elastic.co/s/i3qkbzt7b47no)

**Reproduction Line:**
```
./gradlew "":x-pack:qa:repository-old-versions:javaRestTestAfterRestart#6_8_20"" --tests ""org.elasticsearch.oldrepos.OldRepositoryAccessIT.testOldSourceOnlyRepoAccess"" -Dtests.seed=B88B9400E2197FCC -Dtests.locale=kam-KE -Dtests.timezone=America/Catamarca -Druntime.java=21
```

**Applicable branches:**
8.17

**Reproduces locally?:**
N/A

**Failure History:**
[See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&_a=(controlGroupState:(initialChildControlState:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:task.keyword,order:0,selectedOptions:!(),title:'GradleTask',type:optionsListControl),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:className.keyword,order:1,selectedOptions:!(org.elasticsearch.oldrepos.OldRepositoryAccessIT),title:'Suite',type:optionsListControl),'144933da-5c1b-4257-a969-7f43455a7901':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:name.keyword,order:2,selectedOptions:!(testOldSourceOnlyRepoAccess),title:'Test',type:optionsListControl)))))

**Failure Message:**
```
java.lang.AssertionError: timed out waiting for green state for index [restored_source_only_test_index] cluster state [{
  ""cluster_name"" : ""6-8-20"",
  ""cluster_uuid"" : ""K9H77wKZSuON3IgIeQaoDg"",
  ""version"" : 248,
  ""state_uuid"" : ""n2F5LTlNSgS4Tn64dvlX9w"",
  ""master_node"" : ""IaRfWvaRSXCs-Q50rvf66g"",
  ""blocks"" : {
    ""indices"" : {
      ""nested"" : {
        ""8"" : {
          ""description"" : ""index write (api)"",
          ""retryable"" : false,
          ""levels"" : [
            ""write""
          ]
        }
      },
      ""mounted_shared_cache_source_only_test_index"" : {
        ""8"" : {
          ""description"" : ""index write (api)"",
          ""retryable"" : false,
          ""levels"" : [
            ""write""
          ]
        }
      },
      ""filebeat"" : {
        ""8"" : {
          ""description"" : ""index write (api)"",
          ""retryable"" : false,
          ""levels"" : [
            ""write""
          ]
        }
      },
      ""mounted_full_copy_test_index"" : {
        ""8"" : {
         
[truncated]
```

**Issue Reasons:**
- [8.17] 5 failures in test testOldSourceOnlyRepoAccess (2.8% fail rate in 181 executions)
- [8.17] 3 failures in step part-2 (100.0% fail rate in 3 executions)
- [8.17] 2 failures in pipeline elasticsearch-periodic (50.0% fail rate in 4 executions)

**Note:**
This issue was created using new test triage automation. Please report issues or feedback to es-delivery.",elasticsearchmachine,closed,"['>test-failure', 'needs:risk', 'Team:Search Foundations', ':Search Foundations/Search']",https://github.com/elastic/elasticsearch/issues/120471,2025-01-20T14:14:55Z,3,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/120471,"{
  ""application_resource"": ""yes""
}"
50,120080,[CI] OldRepositoryAccessIT testOldSourceOnlyRepoAccess failing,"**Build Scans:**
- [elasticsearch-periodic #5847 / openjdk21_checkpart2_java-matrix](https://gradle-enterprise.elastic.co/s/bw6kcrvpdfwau)
- [elasticsearch-pull-request #50394 / part-2](https://gradle-enterprise.elastic.co/s/w3w5w76crq5eg)
- [elasticsearch-pull-request #50385 / part-2](https://gradle-enterprise.elastic.co/s/2lxlyvttcdegk)
- [elasticsearch-intake #15675 / part2](https://gradle-enterprise.elastic.co/s/f277l5foqtuac)
- [elasticsearch-pull-request #50218 / part-2](https://gradle-enterprise.elastic.co/s/hlj7yvk4bz7dq)
- [elasticsearch-pull-request #50195 / part-2](https://gradle-enterprise.elastic.co/s/l4hs7klwrkivs)
- [elasticsearch-pull-request #50129 / part-2](https://gradle-enterprise.elastic.co/s/uonpvcn4qjgoo)
- [elasticsearch-pull-request #50130 / part-2](https://gradle-enterprise.elastic.co/s/2qok3773tmuio)

**Reproduction Line:**
```
./gradlew "":x-pack:qa:repository-old-versions:javaRestTestAfterRestart#6_8_20"" --tests ""org.elasticsearch.oldrepos.OldRepositoryAccessIT.testOldRepoAccess"" -Dtests.seed=50286C45472C9D58 -Dtests.locale=sd-PK -Dtests.timezone=Pacific/Wake -Druntime.java=21
```

**Applicable branches:**
main

**Reproduces locally?:**
N/A

**Failure History:**
[See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&_a=(controlGroupState:(initialChildControlState:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:task.keyword,order:0,selectedOptions:!(),title:'GradleTask',type:optionsListControl),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:className.keyword,order:1,selectedOptions:!(org.elasticsearch.oldrepos.OldRepositoryAccessIT),title:'Suite',type:optionsListControl),'144933da-5c1b-4257-a969-7f43455a7901':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:name.keyword,order:2,selectedOptions:!(testOldSourceOnlyRepoAccess),title:'Test',type:optionsListControl)))))

**Failure Message:**
```
java.lang.AssertionError: timed out waiting for green state for index [restored_test_index] cluster state [{
  ""cluster_name"" : ""6-8-20"",
  ""cluster_uuid"" : ""Zn2c4yusQFq8vs6T8Kwt_w"",
  ""version"" : 226,
  ""state_uuid"" : ""b11RVgwLQMu5XOwXhN29Cg"",
  ""master_node"" : ""eCQvWad3QpCXffon67TaZg"",
  ""blocks"" : {
    ""indices"" : {
      ""restored_test_index"" : {
        ""8"" : {
          ""description"" : ""index write (api)"",
          ""retryable"" : false,
          ""levels"" : [
            ""write""
          ]
        }
      },
      ""mounted_full_copy_source_only_test_index"" : {
        ""8"" : {
          ""description"" : ""index write (api)"",
          ""retryable"" : false,
          ""levels"" : [
            ""write""
          ]
        }
      },
      ""mounted_shared_cache_test_index"" : {
        ""8"" : {
          ""description"" : ""index write (api)"",
          ""retryable"" : false,
          ""levels"" : [
            ""write""
          ]
        }
      },
      ""nested"" : {
        ""8"" : {
          
[truncated]
```

**Issue Reasons:**
- [main] 8 failures in test testOldSourceOnlyRepoAccess (1.2% fail rate in 643 executions)
- [main] 6 failures in step part-2 (3.6% fail rate in 166 executions)
- [main] 6 failures in pipeline elasticsearch-pull-request (3.6% fail rate in 166 executions)

**Note:**
This issue was created using new test triage automation. Please report issues or feedback to es-delivery.",elasticsearchmachine,closed,"['>test-failure', 'needs:risk', 'Team:Search Foundations', ':Search Foundations/Search']",https://github.com/elastic/elasticsearch/issues/120080,2025-01-13T21:08:13Z,4,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/120080,"{
  ""application_resource"": ""yes""
}"
51,120021,Enrich cache default can usage a ton of memory,"### Elasticsearch Version

8.16+

### Installed Plugins

_No response_

### Java Version

_bundled_

### OS Version

any

### Problem Description

In 8.16 we changed the default for `enrich.cache_size` from `1000` to `1%` which should allow us to more carefully cache. The trouble is that we don't account for a few things in the cache's weight:

1. The cache key. I'm seeing those in the 600 bytes size.
2. Empty results. 
3. Results use their serialized size but are then stored as `Map<String, Object>` which is usually much larger.
4. It sure *looks* like there isn't any intrinsic cost to a cache entry. Like, for the entry itself.

When you combine the first two, queries pointing to no documents in the enrich index cost 0 bytes. So, no matter the limit you configure, you *can* fill up memory with them.

But, yeah, I *think* we should include the size of the cache key. And Include an estimate of the cost of the List we store in the cache - even if it's empty. And, finally, I think we should uplift the cost of the exploded map. Or we should cache the serialized copy. I'm not entirely sure if it's worth a cost for the cache entry itself. That bit I don't know.

### Steps to Reproduce

See above.

### Logs (if relevant)

@nik9000 has a heap dump of a node the OOMed full of cache entries of empty results lists.",nik9000,closed,"['>bug', ':Data Management/Ingest Node', 'Team:Data Management', 'v8.16.0', 'v8.17.0']",https://github.com/elastic/elasticsearch/issues/120021,2025-01-12T12:17:53Z,1,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/120021,"{
  ""application_resource"": ""yes""
}"
52,119709,[CI] SearchableSnapshotsIntegTests testCreateAndRestoreSearchableSnapshot failing,"**Build Scans:**
- [elasticsearch-periodic #9102 / java8_java-matrix](https://gradle-enterprise.elastic.co/s/weqkm2xqxbmwo)
- [elasticsearch-periodic #8987 / corretto8_java-matrix](https://gradle-enterprise.elastic.co/s/igtw6q6nt32p6)

**Reproduction Line:**
```
./gradlew ':x-pack:plugin:searchable-snapshots:internalClusterTest' --tests ""org.elasticsearch.xpack.searchablesnapshots.SearchableSnapshotsIntegTests.testCreateAndRestoreSearchableSnapshot"" -Dtests.seed=C7A9F97D184F229B -Dtests.locale=es-US -Dtests.timezone=America/Guadeloupe -Druntime.java=8
```

**Applicable branches:**
7.17

**Reproduces locally?:**
N/A

**Failure History:**
[See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&_a=(controlGroupState:(initialChildControlState:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:task.keyword,order:0,selectedOptions:!(),title:'GradleTask',type:optionsListControl),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:className.keyword,order:1,selectedOptions:!(org.elasticsearch.xpack.searchablesnapshots.SearchableSnapshotsIntegTests),title:'Suite',type:optionsListControl),'144933da-5c1b-4257-a969-7f43455a7901':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:name.keyword,order:2,selectedOptions:!(testCreateAndRestoreSearchableSnapshot),title:'Test',type:optionsListControl)))))

**Failure Message:**
```
java.lang.AssertionError: null
```

**Issue Reasons:**
- [7.17] 2 failures in test testCreateAndRestoreSearchableSnapshot (0.3% fail rate in 680 executions)
- [7.17] 2 failures in pipeline elasticsearch-periodic (11.8% fail rate in 17 executions)

**Note:**
This issue was created using new test triage automation. Please report issues or feedback to es-delivery.",elasticsearchmachine,closed,"['>test-failure', 'medium-risk', 'Team:Distributed Indexing', ':Distributed Indexing/Searchable Snapshots']",https://github.com/elastic/elasticsearch/issues/119709,2025-01-07T22:51:28Z,14,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/119709,"{
  ""application_resource"": ""unsure""
}"
53,119509,[CI] LoggedExecFuncTest failed tasks output logged to console when spooling true failing,"**Build Scans:**
- [elasticsearch-intake #27613 / part1](https://gradle-enterprise.elastic.co/s/ydsn2jldcr4ew)
- [elasticsearch-periodic-platform-support #10212 / almalinux-8-aarch64_checkpart1_platform-support-arm](https://gradle-enterprise.elastic.co/s/ihaflse4vny7u)

**Reproduction Line:**
```
null
```

**Applicable branches:**
9.0

**Reproduces locally?:**
N/A

**Failure History:**
[See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&_a=(controlGroupState:(initialChildControlState:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:task.keyword,order:0,selectedOptions:!(),title:'GradleTask',type:optionsListControl),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:className.keyword,order:1,selectedOptions:!(org.elasticsearch.gradle.LoggedExecFuncTest),title:'Suite',type:optionsListControl),'144933da-5c1b-4257-a969-7f43455a7901':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:name.keyword,order:2,selectedOptions:!('failed%20tasks%20output%20logged%20to%20console%20when%20spooling%20true'),title:'Test',type:optionsListControl)))))

**Failure Message:**
```
org.spockframework.runtime.ConditionNotSatisfiedError: Condition not satisfied:

normalized(givenOutput).contains(normalized(expected))
|          |            |        |          |
|          |            false    |          No such file or directory
|          |                     No such file or directory
|          Calculating task graph as no cached configuration is available for tasks: loggedExec
|          Could not read error output of command 'ls'.
|          java.io.IOException: Stream Closed
|          	at java.base/java.io.FileOutputStream.writeBytes(Native Method)
|          	at java.base/java.io.FileOutputStream.write(FileOutputStream.java:367)
|          	at org.elasticsearch.gradle.LazyFileOutputStream.write(LazyFileOutputStream.java:50)
|          	at org.gradle.process.internal.streams.ExecOutputHandleRunner.writeBuffer(ExecOutputHandleRunner.java:97)
|          	at org.gradle.process.internal.streams.ExecOutputHandleRunner.lambda$forwardContent$0(ExecOutputHandleRun
[truncated]
```

**Issue Reasons:**
- [9.0] 2 failures in test failed tasks output logged to console when spooling true (33.3% fail rate in 6 executions)

**Note:**
This issue was created using new test triage automation. Please report issues or feedback to es-delivery.",elasticsearchmachine,closed,"[':Delivery/Build', '>test-failure', 'Team:Delivery', 'needs:risk']",https://github.com/elastic/elasticsearch/issues/119509,2025-01-03T14:02:57Z,6,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/119509,"{
  ""application_resource"": ""yes""
}"
54,119441,[CI] DockerTests test010Install failing,"**Build Scans:**
- [elasticsearch-periodic-packaging #6739 / rhel-9_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/75uganpr63h3m)
- [elasticsearch-periodic-packaging #6739 / rhel-9_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/75uganpr63h3m)
- [elasticsearch-periodic-packaging #6739 / ubuntu-2204_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/bi2vbybbb6xcg)
- [elasticsearch-periodic-packaging #6739 / ubuntu-2204_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/bi2vbybbb6xcg)
- [elasticsearch-periodic-packaging #6739 / rocky-8_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/7flazvibusavw)
- [elasticsearch-periodic-packaging #6739 / rocky-8_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/7flazvibusavw)
- [elasticsearch-periodic-packaging #6739 / rocky-9_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/mwltnps3okb7y)
- [elasticsearch-periodic-packaging #6739 / rocky-9_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/mwltnps3okb7y)
- [elasticsearch-periodic-packaging #6739 / oraclelinux-9_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/oj6tc2kpki4ee)
- [elasticsearch-periodic-packaging #6739 / oraclelinux-9_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/oj6tc2kpki4ee)

**Reproduction Line:**
```
null
```

**Applicable branches:**
main

**Reproduces locally?:**
N/A

**Failure History:**
[See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&_a=(controlGroupState:(initialChildControlState:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:task.keyword,order:0,selectedOptions:!(),title:'GradleTask',type:optionsListControl),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:className.keyword,order:1,selectedOptions:!(org.elasticsearch.packaging.test.DockerTests),title:'Suite',type:optionsListControl),'144933da-5c1b-4257-a969-7f43455a7901':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:name.keyword,order:2,selectedOptions:!(test010Install),title:'Test',type:optionsListControl)))))

**Failure Message:**
```
java.lang.AssertionError: Elasticsearch container did not start successfully.

ps output:
PID   USER     TIME  COMMAND
    1 elastics  0:00 /sbin/tini -- /usr/local/bin/docker-entrypoint.sh eswrapper
    7 elastics  0:15 /usr/share/elasticsearch/jdk/bin/java -Xms4m -Xmx64m -XX:+UseSerialGC -Djava.security.egd=file:/dev/urandom -Dcli.name=server -Dcli.script=/usr/share/elasticsearch/bin/elasticsearch -Dcli.libs=lib/tools/server-cli -Des.path.home=/usr/share/elasticsearch -Des.path.conf=/usr/share/elasticsearch/config -Des.distribution.type=docker -Des.java.type=bundled JDK -cp /usr/share/elasticsearch/lib/*:/usr/share/elasticsearch/lib/cli-launcher/* org.elasticsearch.launcher.CliToolLauncher
  275 elastics  0:52 /usr/share/elasticsearch/jdk/bin/java -Des.networkaddress.cache.ttl=60 -Des.networkaddress.cache.negative.ttl=10 -XX:+AlwaysPreTouch -Xss1m -Djava.awt.headless=true -Dfile.encoding=UTF-8 -Djna.nosys=true -XX:-OmitStackTraceInFastThrow -Dio.netty.noUnsafe=true -Dio.netty.noKeySe
[truncated]
```

**Issue Reasons:**
- [main] 2 consecutive failures in step ubuntu-2204_docker-cloud-ess_packaging-tests-unix
- [main] 2 consecutive failures in step opensuse-leap-15_docker-cloud-ess_packaging-tests-unix
- [main] 2 consecutive failures in step rhel-8_docker-cloud-ess_packaging-tests-unix
- [main] 2 consecutive failures in step oraclelinux-8_docker-cloud-ess_packaging-tests-unix
- [main] 2 consecutive failures in step almalinux-8_docker-cloud-ess_packaging-tests-unix
- [main] 2 consecutive failures in step ubuntu-2404_docker-cloud-ess_packaging-tests-unix
- [main] 2 consecutive failures in step rhel-9_docker-cloud-ess_packaging-tests-unix
- [main] 2 consecutive failures in step ubuntu-2004_docker-cloud-ess_packaging-tests-unix
- [main] 2 consecutive failures in step almalinux-9_docker-cloud-ess_packaging-tests-unix
- [main] 2 consecutive failures in step oraclelinux-9_docker-cloud-ess_packaging-tests-unix
- [main] 2 consecutive failures in step rocky-9_docker-cloud-ess_packaging-tests-unix
- [main] 2 consecutive failures in step rocky-8_docker-cloud-ess_packaging-tests-unix
- [main] 2 consecutive failures in step debian-12_docker-cloud-ess_packaging-tests-unix
- [main] 79 failures in test test010Install (23.3% fail rate in 339 executions)
- [main] 2 failures in step rhel-9_packaging-tests-unix (40.0% fail rate in 5 executions)

**Note:**
This issue was created using new test triage automation. Please report issues or feedback to es-delivery.",elasticsearchmachine,closed,"[':Delivery/Packaging', '>test-failure', 'Team:Delivery', 'needs:risk']",https://github.com/elastic/elasticsearch/issues/119441,2025-01-02T00:00:50Z,6,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/119441,"{
  ""application_resource"": ""unsure""
}"
55,119234,[CI] BuildParameterExtensionSpec getRuntimeJavaDetails is cached anc concurrently accessible failing,"**Build Scans:**
- [elasticsearch-intake #14932 / part1](https://gradle-enterprise.elastic.co/s/lmb5jivtii47w)
- [elasticsearch-pull-request #48105 / part-1](https://gradle-enterprise.elastic.co/s/sasqh5vcky2ts)
- [elasticsearch-intake #14930 / part1](https://gradle-enterprise.elastic.co/s/6wvotpjxdvxfk)
- [elasticsearch-intake #14892 / part1](https://gradle-enterprise.elastic.co/s/7lzfdg6fybyfg)

**Reproduction Line:**
```
null
```

**Applicable branches:**
8.17

**Reproduces locally?:**
N/A

**Failure History:**
[See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&_a=(controlGroupState:(initialChildControlState:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:task.keyword,order:0,selectedOptions:!(),title:'GradleTask',type:optionsListControl),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:className.keyword,order:1,selectedOptions:!(org.elasticsearch.gradle.internal.info.BuildParameterExtensionSpec),title:'Suite',type:optionsListControl),'144933da-5c1b-4257-a969-7f43455a7901':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:name.keyword,order:2,selectedOptions:!(getRuntimeJavaDetails%20is%20cached%20anc%20concurrently%20accessible),title:'Test',type:optionsListControl)))))

**Failure Message:**
```
org.spockframework.runtime.SpockComparisonFailure: Condition not satisfied:

futures.any { it.isCancelled() || it.isDone() == false } == false
|       |                                                |
|       true                                             false
[java.util.concurrent.FutureTask@3661b732[Completed normally], java.util.concurrent.FutureTask@5111f814[Completed normally], java.util.concurrent.FutureTask@71eafb64[Completed normally], java.util.concurrent.FutureTask@491cc0eb[Completed normally], java.util.concurrent.FutureTask@727f36dd[Completed normally], java.util.concurrent.FutureTask@2c70a1de[Completed normally], java.util.concurrent.FutureTask@ae74eef[Completed normally], java.util.concurrent.FutureTask@2553dcc0[Completed normally], java.util.concurrent.FutureTask@2e91cf69[Completed normally], java.util.concurrent.FutureTask@746e534[Completed normally]]

```

**Issue Reasons:**
- [8.17] 3 consecutive failures in test getRuntimeJavaDetails is cached anc concurrently accessible
- [8.17] 2 consecutive failures in step part1
- [8.17] 2 consecutive failures in pipeline elasticsearch-intake
- [8.17] 4 failures in test getRuntimeJavaDetails is cached anc concurrently accessible (14.3% fail rate in 28 executions)
- [8.17] 3 failures in step part1 (60.0% fail rate in 5 executions)
- [8.17] 3 failures in pipeline elasticsearch-intake (75.0% fail rate in 4 executions)

**Note:**
This issue was created using new test triage automation. Please report issues or feedback to es-delivery.",elasticsearchmachine,closed,"[':Delivery/Build', '>test-failure', 'Team:Delivery', 'low-risk']",https://github.com/elastic/elasticsearch/issues/119234,2024-12-23T17:57:55Z,2,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/119234,"{
  ""application_resource"": ""yes""
}"
56,119173,[CI] BuildParameterExtensionSpec getJavaToolChainSpec is cached anc concurrently accessible failing,"**Build Scans:**
- [elasticsearch-intake #14930 / part1](https://gradle-enterprise.elastic.co/s/6wvotpjxdvxfk)
- [elasticsearch-pull-request #48096 / part-1](https://gradle-enterprise.elastic.co/s/7pcxnb74fve2s)
- [elasticsearch-pull-request #48092 / part-1](https://gradle-enterprise.elastic.co/s/crmlxkaxybvlg)
- [elasticsearch-pull-request #48089 / part-1](https://gradle-enterprise.elastic.co/s/sy4vnavx2apqa)
- [elasticsearch-intake #14926 / part1](https://gradle-enterprise.elastic.co/s/tac6rixgmqnni)
- [elasticsearch-intake #14892 / part1](https://gradle-enterprise.elastic.co/s/7lzfdg6fybyfg)

**Reproduction Line:**
```
null
```

**Applicable branches:**
8.17

**Reproduces locally?:**
N/A

**Failure History:**
[See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&_a=(controlGroupState:(initialChildControlState:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:task.keyword,order:0,selectedOptions:!(),title:'GradleTask',type:optionsListControl),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:className.keyword,order:1,selectedOptions:!(org.elasticsearch.gradle.internal.info.BuildParameterExtensionSpec),title:'Suite',type:optionsListControl),'144933da-5c1b-4257-a969-7f43455a7901':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:name.keyword,order:2,selectedOptions:!(getJavaToolChainSpec%20is%20cached%20anc%20concurrently%20accessible),title:'Test',type:optionsListControl)))))

**Failure Message:**
```
org.spockframework.runtime.SpockComparisonFailure: Condition not satisfied:

futures.any { it.isCancelled() || it.isDone() == false } == false
|       |                                                |
|       true                                             false
[java.util.concurrent.FutureTask@48144f1a[Completed normally], java.util.concurrent.FutureTask@6f7b8ae1[Completed normally], java.util.concurrent.FutureTask@6c8d8b60[Completed normally], java.util.concurrent.FutureTask@4fa6fb7f[Completed normally], java.util.concurrent.FutureTask@2520010e[Completed normally], java.util.concurrent.FutureTask@163fbbc9[Completed normally], java.util.concurrent.FutureTask@1669f4e5[Completed normally], java.util.concurrent.FutureTask@6e6c8854[Completed normally], java.util.concurrent.FutureTask@4be1dce6[Completed normally], java.util.concurrent.FutureTask@206bd7a0[Completed normally]]

```

**Issue Reasons:**
- [8.17] 2 consecutive failures in step part1
- [8.17] 2 consecutive failures in pipeline elasticsearch-intake
- [8.17] 6 failures in test getJavaToolChainSpec is cached anc concurrently accessible (23.1% fail rate in 26 executions)
- [8.17] 3 failures in step part1 (75.0% fail rate in 4 executions)
- [8.17] 3 failures in step part-1 (75.0% fail rate in 4 executions)
- [8.17] 3 failures in pipeline elasticsearch-intake (100.0% fail rate in 3 executions)
- [8.17] 3 failures in pipeline elasticsearch-pull-request (100.0% fail rate in 3 executions)

**Note:**
This issue was created using new test triage automation. Please report issues or feedback to es-delivery.",elasticsearchmachine,closed,"[':Delivery/Build', '>test-failure', 'Team:Delivery', 'low-risk']",https://github.com/elastic/elasticsearch/issues/119173,2024-12-20T01:58:47Z,3,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/119173,"{
  ""application_resource"": ""yes""
}"
57,119172,[CI] BuildParameterExtensionSpec getBwcVersionsProvider is cached anc concurrently accessible failing,"**Build Scans:**
- [elasticsearch-intake #14932 / part1](https://gradle-enterprise.elastic.co/s/lmb5jivtii47w)
- [elasticsearch-pull-request #48105 / part-1](https://gradle-enterprise.elastic.co/s/sasqh5vcky2ts)
- [elasticsearch-pull-request #48096 / part-1](https://gradle-enterprise.elastic.co/s/7pcxnb74fve2s)

**Reproduction Line:**
```
null
```

**Applicable branches:**
8.17

**Reproduces locally?:**
N/A

**Failure History:**
[See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&_a=(controlGroupState:(initialChildControlState:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:task.keyword,order:0,selectedOptions:!(),title:'GradleTask',type:optionsListControl),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:className.keyword,order:1,selectedOptions:!(org.elasticsearch.gradle.internal.info.BuildParameterExtensionSpec),title:'Suite',type:optionsListControl),'144933da-5c1b-4257-a969-7f43455a7901':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:name.keyword,order:2,selectedOptions:!(getBwcVersionsProvider%20is%20cached%20anc%20concurrently%20accessible),title:'Test',type:optionsListControl)))))

**Failure Message:**
```
org.spockframework.runtime.SpockComparisonFailure: Condition not satisfied:

futures.any { it.isCancelled() || it.isDone() == false } == false
|       |                                                |
|       true                                             false
[java.util.concurrent.FutureTask@3661b732[Completed normally], java.util.concurrent.FutureTask@5111f814[Completed normally], java.util.concurrent.FutureTask@71eafb64[Completed normally], java.util.concurrent.FutureTask@491cc0eb[Completed normally], java.util.concurrent.FutureTask@727f36dd[Completed normally], java.util.concurrent.FutureTask@2c70a1de[Completed normally], java.util.concurrent.FutureTask@ae74eef[Completed normally], java.util.concurrent.FutureTask@2553dcc0[Completed normally], java.util.concurrent.FutureTask@2e91cf69[Completed normally], java.util.concurrent.FutureTask@746e534[Completed normally]]

```

**Issue Reasons:**
- [8.17] 2 consecutive failures in test getBwcVersionsProvider is cached anc concurrently accessible
- [8.17] 3 failures in test getBwcVersionsProvider is cached anc concurrently accessible (17.6% fail rate in 17 executions)
- [8.17] 2 failures in step part-1 (40.0% fail rate in 5 executions)
- [8.17] 2 failures in pipeline elasticsearch-pull-request (50.0% fail rate in 4 executions)

**Note:**
This issue was created using new test triage automation. Please report issues or feedback to es-delivery.",elasticsearchmachine,closed,"[':Delivery/Build', '>test-failure', 'Team:Delivery', 'low-risk']",https://github.com/elastic/elasticsearch/issues/119172,2024-12-20T01:01:02Z,3,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/119172,"{
  ""application_resource"": ""yes""
}"
58,118623,Performance degradation after upgrading from 8.6.1 to 8.16.1,"### Elasticsearch Version

8.16.1

### Installed Plugins

_No response_

### Java Version

_bundled_

### OS Version

6.1.112-124.190.amzn2023.aarch64

### Problem Description

After starting an upgrade from 8.6.1 to 8.16.1 we noticed that data nodes running new version are performing worse.
Their CPU was significantly higher than on the data nodes with the old version:
<img width=""1594"" alt=""Image"" src=""https://github.com/user-attachments/assets/f5ca3899-ce46-49de-9587-9380e38bbefd"" />

We also noticed that new version nodes have much higher flush rate:
<img width=""1588"" alt=""Image"" src=""https://github.com/user-attachments/assets/d3cc7905-242e-42ae-8078-649831089b4d"" />

It doesn't matter whether an old node is upgraded to 8.16.1 or a brand new node spun up with 8.16.1 - they all show same symptoms of higher CPU and much higher flush rate degrading performance of the cluster as a whole.

We added more data nodes with the new 8.16.1 version and now have a cluster with 35 ""old"" nodes and 36 ""new"" nodes.
New nodes are consuming twice more CPU and have much higher flush rate:
<img width=""1587"" alt=""Image"" src=""https://github.com/user-attachments/assets/bfcc8d4b-eba9-47da-aaa1-7ab7a23253a4"" />
<img width=""1591"" alt=""Image"" src=""https://github.com/user-attachments/assets/b36c9483-028f-40da-a4f8-08ca44e10fe1"" />

Another notable difference is how new nodes have higher cache size:
<img width=""1174"" alt=""Image"" src=""https://github.com/user-attachments/assets/54ea3357-eeea-449f-9c6e-342050cf2ed9"" />

The reason why we were upgrading to 8.16.1 is to mitigate [this issue](https://github.com/elastic/elasticsearch/issues/100755)

We are running Elasticsearch on EC2 with ephemeral instance store on c7gd.16xlarge. Elasticsearch version aside no changes were made to the cluster infrastructure, JVM/Elasticsearch options, etc.

### Steps to Reproduce

Upgrade a 8.6.1 data node to 8.16.1

### Logs (if relevant)

_No response_

## None of the below has changed between the upgrade

### JVM options
```
## JVM configuration
-Xms30500m
-Xmx30500m
8-13:-XX:+UseConcMarkSweepGC
8-13:-XX:CMSInitiatingOccupancyFraction=75
8-13:-XX:+UseCMSInitiatingOccupancyOnly
8:-XX:+AlwaysPreTouch
8:-Xss1m
8:-Djava.awt.headless=true
8:-Dfile.encoding=UTF-8
8:-Djna.nosys=true
8:-XX:-OmitStackTraceInFastThrow
8:-Dio.netty.noUnsafe=true
8:-Dio.netty.noKeySetOptimization=true
8:-Dio.netty.recycler.maxCapacityPerThread=0
8:-Dlog4j.shutdownHookEnabled=false
8:-Dlog4j2.disable.jmx=true
8:-XX:+PrintGCDetails
8:-XX:+PrintGCDateStamps
8:-XX:+PrintTenuringDistribution
8:-XX:+PrintGCApplicationStoppedTime
8:-Xloggc:logs/gc.log
8:-XX:+UseGCLogFileRotation
8:-XX:NumberOfGCLogFiles=32
8:-XX:GCLogFileSize=64m
9-:-Djava.locale.providers=COMPAT
-Des.index.memory.max_index_buffer_size=10240m
14-:-XX:+UseG1GC
14-:-XX:G1ReservePercent=25
14-:-XX:InitiatingHeapOccupancyPercent=30
14-:-Djava.io.tmpdir=${ES_TMPDIR}
14-:-XX:+HeapDumpOnOutOfMemoryError
14-:-XX:HeapDumpPath=data
14-:-XX:ErrorFile=logs/hs_err_pid%p.log
-Dlog4j2.formatMsgNoLookups=true
```

### Elasticsearch static node config
```
cloud.node.auto_attributes: true
cluster.routing.allocation.awareness.attributes: aws_availability_zone
action.auto_create_index: false
indices.memory.index_buffer_size: 25%
network.host: 0.0.0.0
http.compression: true
action.destructive_requires_name: true
bootstrap.memory_lock: true
thread_pool.write.queue_size: 2500
script.max_compilations_rate: 30/1m
xpack.graph.enabled: false
xpack.ml.enabled: false
xpack.watcher.enabled: false
discovery.seed_providers: ec2
indices.breaker.request.limit: 1gb
indices.breaker.fielddata.limit: 1gb
xpack.security.enabled: true
xpack.security.http.ssl.enabled: false
xpack.security.transport.ssl.enabled: true
xpack.security.transport.ssl.verification_mode: certificate
xpack.security.transport.ssl.client_authentication: required
xpack.security.transport.ssl.keystore.path: elastic-certificates.p12
xpack.security.transport.ssl.truststore.path: elastic-certificates.p12
transport.compress: true
transport.compression_scheme: lz4
cluster.name: CLUSTER_NAME
discovery.ec2.tag.elasticsearch_cluster_name: CLUSTER_NAME
node.name: NODE_NAME
path.data: ""/media/ephemeral""
path.logs: ""/var/log/elasticsearch""
reindex.remote.whitelist: 10.0.*.*:9200
node.roles:
- data
```

### Elasticsearch cluster settings
```json
{
  ""persistent"": {
    ""cluster"": {
      ""routing"": {
        ""allocation"": {
          ""cluster_concurrent_rebalance"": ""100"",
          ""node_concurrent_recoveries"": ""100"",
          ""disk"": {
            ""watermark"": {
              ""low"": ""75%"",
              ""high"": ""85%""
            }
          },
          ""node_initial_primaries_recoveries"": ""114""
        }
      }
    },
    ""indices"": {
      ""breaker"": {
        ""fielddata"": {
          ""limit"": ""1gb""
        },
        ""request"": {
          ""limit"": ""1gb""
        }
      },
      ""recovery"": {
        ""max_bytes_per_sec"": ""1000mb""
      }
    },
    ""search"": {
      ""default_search_timeout"": ""120s"",
      ""default_allow_partial_results"": ""false"",
      ""max_open_scroll_context"": ""500000""
    },
    ""ingest"": {
      ""geoip"": {
        ""downloader"": {
          ""enabled"": ""false""
        }
      }
    },
    ""logger"": {
      ""org"": {
        ""elasticsearch"": {
          ""deprecation"": ""ERROR""
        }
      }
    }
  },
  ""transient"": {}
}
```",gregolsen,closed,"['>bug', 'Team:Search Foundations', ':Search Foundations/Search']",https://github.com/elastic/elasticsearch/issues/118623,2024-12-12T21:38:03Z,21,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/118623,"{
  ""application_resource"": ""yes""
}"
59,118406,[CI] SearchableSnapshotActionIT testUpdatePolicyToAddPhasesYieldsInvalidActionsToBeSkipped failing,"**Build Scans:**
- [elasticsearch-periodic-platform-support #5826 / windows-2022_checkpart5_platform-support-windows](https://gradle-enterprise.elastic.co/s/vicv2keggo2fe)
- [elasticsearch-pull-request #49424 / part-5](https://gradle-enterprise.elastic.co/s/zfekaa6tbbbok)

**Reproduction Line:**
```
gradlew "":x-pack:plugin:ilm:qa:multi-node:javaRestTest"" --tests ""org.elasticsearch.xpack.ilm.actions.SearchableSnapshotActionIT.testUpdatePolicyToAddPhasesYieldsInvalidActionsToBeSkipped"" -Dtests.seed=3D05FB81E22D2F83 -Dtests.locale=jgo-CM -Dtests.timezone=Australia/Tasmania -Druntime.java=23
```

**Applicable branches:**
main

**Reproduces locally?:**
N/A

**Failure History:**
[See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&_a=(controlGroupState:(initialChildControlState:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:task.keyword,order:0,selectedOptions:!(),title:'GradleTask',type:optionsListControl),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:className.keyword,order:1,selectedOptions:!(org.elasticsearch.xpack.ilm.actions.SearchableSnapshotActionIT),title:'Suite',type:optionsListControl),'144933da-5c1b-4257-a969-7f43455a7901':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:name.keyword,order:2,selectedOptions:!(testUpdatePolicyToAddPhasesYieldsInvalidActionsToBeSkipped),title:'Test',type:optionsListControl)))))

**Failure Message:**
```
java.lang.AssertionError: 
Expected: is ""cold""
     but: was ""hot""
```

**Issue Reasons:**
- [main] 2 failures in test testUpdatePolicyToAddPhasesYieldsInvalidActionsToBeSkipped (0.2% fail rate in 925 executions)

**Note:**
This issue was created using new test triage automation. Please report issues or feedback to es-delivery.",elasticsearchmachine,closed,"['>test-failure', ':Data Management/ILM+SLM', 'Team:Data Management', 'medium-risk']",https://github.com/elastic/elasticsearch/issues/118406,2024-12-10T23:14:43Z,9,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/118406,"{
  ""application_resource"": ""unsure""
}"
60,118374,[CI] RetrySearchIntegTests testSearcherId failing,"**Build Scans:**
- [elasticsearch-periodic-platform-support #6369 / oraclelinux-7_platform-support-unix](https://gradle-enterprise.elastic.co/s/k7yjdyio5lavq)
- [elasticsearch-pull-request #55708 / part-2](https://gradle-enterprise.elastic.co/s/5istbjb6zoq52)

**Reproduction Line:**
```
./gradlew "":x-pack:plugin:searchable-snapshots:internalClusterTest"" --tests ""org.elasticsearch.xpack.searchablesnapshots.RetrySearchIntegTests.testSearcherId"" -Dtests.seed=82E925F1012D500C -Dtests.locale=mai -Dtests.timezone=Europe/Saratov -Druntime.java=23
```

**Applicable branches:**
8.18

**Reproduces locally?:**
N/A

**Failure History:**
[See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&_a=(controlGroupState:(initialChildControlState:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:task.keyword,order:0,selectedOptions:!(),title:'GradleTask',type:optionsListControl),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:className.keyword,order:1,selectedOptions:!(org.elasticsearch.xpack.searchablesnapshots.RetrySearchIntegTests),title:'Suite',type:optionsListControl),'144933da-5c1b-4257-a969-7f43455a7901':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:name.keyword,order:2,selectedOptions:!(testSearcherId),title:'Test',type:optionsListControl)))))

**Failure Message:**
```
java.lang.AssertionError: Index{id='mvyrsywcul/EBVOiEw_T-qnqtPb2XIt0Q/9ar8771OQkS7mduFisu0Zg/2/_0.cfs/@0', seqNo=3, primaryTerm=2, version=1, autoGeneratedIdTimestamp=-1}
Expected: <4L>
     but: was <2L>
```

**Issue Reasons:**
- [8.18] 2 failures in test testSearcherId (0.3% fail rate in 689 executions)

**Note:**
This issue was created using new test triage automation. Please report issues or feedback to es-delivery.",elasticsearchmachine,closed,"['>test-failure', ':Distributed Indexing/Recovery', 'medium-risk', 'Team:Distributed Indexing']",https://github.com/elastic/elasticsearch/issues/118374,2024-12-10T18:17:34Z,13,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/118374,"{
  ""application_resource"": ""unsure""
}"
61,118265,[CI] ArchiveTests test61EsJavaHomeOverride failing,"**Build Scans:**
- [elasticsearch-periodic-packaging #4985 / rhel-7_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/xogt53dfiflb6)
- [elasticsearch-periodic-packaging #4985 / ubuntu-1804_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/guraffo6kgcyg)
- [elasticsearch-periodic-packaging #4985 / oraclelinux-7_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/vn5y4hztenwzg)
- [elasticsearch-periodic-packaging #4985 / sles-12_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/sqfo2jid6z6x6)
- [elasticsearch-periodic-packaging #4979 / rhel-7_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/j76qz334c4oli)
- [elasticsearch-periodic-packaging #4979 / ubuntu-1804_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/hhfgwojpnnar2)
- [elasticsearch-periodic-packaging #4979 / oraclelinux-7_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/napgtf4yj3srm)
- [elasticsearch-periodic-packaging #4979 / sles-12_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/jnqn5yc6cghdy)
- [elasticsearch-periodic-packaging #4973 / rhel-7_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/rdpt23vzlf4vs)
- [elasticsearch-periodic-packaging #4973 / ubuntu-1804_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/frfxzpsz52i62)

**Reproduction Line:**
```
null
```

**Applicable branches:**
main

**Reproduces locally?:**
N/A

**Failure History:**
[See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&_a=(controlGroupState:(initialChildControlState:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:task.keyword,order:0,selectedOptions:!(),title:'GradleTask',type:optionsListControl),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:className.keyword,order:1,selectedOptions:!(org.elasticsearch.packaging.test.ArchiveTests),title:'Suite',type:optionsListControl),'144933da-5c1b-4257-a969-7f43455a7901':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:name.keyword,order:2,selectedOptions:!(test61EsJavaHomeOverride),title:'Test',type:optionsListControl)))))

**Failure Message:**
```
java.lang.AssertionError: Startup command should succeed. Stderr: [exitCode = [1] stdout = [[2024-12-10T07:33:03,523][WARN ][x-pack-ml-controller-stderr] [bk-agent-prod-gcp-1733807041583686062] /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/controller: /lib64/libc.so.6: version `GLIBC_2.26' not found (required by /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/../lib/libstdc++.so.6)
[2024-12-10T07:33:03,545][WARN ][x-pack-ml-controller-stderr] [bk-agent-prod-gcp-1733807041583686062] /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/controller: /lib64/libc.so.6: version `GLIBC_2.25' not found (required by /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/../lib/libstdc++.so.6)
[2024-12-10T07:33:03,546][WARN ][x-pack-ml-controller-stderr] [bk-agent-prod-gcp-1733807041583686062] /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/controller: /lib64/libc.so.6: version `GLIBC_2.18' not found (required by /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/../lib/libstdc++.so.6)
[2024-12-10T07:33:03,546][WARN ][x-pack-ml-controller-stderr] [bk-agent-prod-gcp-1733807041583686062] /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/controller: /lib64/libc.so.6: version `GLIBC_2.28' not found (required by /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/../lib/libxml2.so.2)
[2024-12-10T07:33:03,546][WARN ][x-pack-ml-controller-stderr] [bk-agent-prod-gcp-1733807041583686062] /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/controller: /lib64/libc.so.6: version `GLIBC_2.28' not found (required by /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/../lib/libboost_filesystem-gcc13-mt-x64-1_83.so.1.83.0)
[2024-12-10T07:33:03,546][WARN ][x-pack-ml-controller-stderr] [bk-agent-prod-gcp-1733807041583686062] /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/controller: /lib64/libc.so.6: version `GLIBC_2.25' not found (required by /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/../lib/libboost_filesystem-gcc13-mt-x64-1_83.so.1.83.0)
[2024-12-10T07:33:03,773][INFO ][o.e.n.NativeAccess       ] [bk-agent-prod-gcp-1733807041583686062] Using native vector library; to disable start with -Dorg.elasticsearch.nativeaccess.enableVectorLibrary=false
[2024-12-10T07:33:03,796][INFO ][o.e.n.NativeAccess       ] [bk-agent-prod-gcp-1733807041583686062] Using [jdk] native provider and native methods for [Linux]
[2024-12-10T07:33:03,908][INFO ][o.a.l.i.v.PanamaVectorizationProvider] [bk-agent-prod-gcp-1733807041583686062] Java vector incubator API enabled; uses preferredBitSize=256; FMA enabled
[2024-12-10T07:33:06,990][INFO ][o.e.b.Elasticsearch      ] [bk-agent-prod-gcp-1733807041583686062] Bootstrapping java SecurityManager
[2024-12-10T07:33:08,199][INFO ][o.e.n.Node               ] [bk-agent-prod-gcp-1733807041583686062] version[9.0.0-SNAPSHOT], pid[401758], build[tar/d614804731fc97c468d911ad6e462206103755f0/2024-12-10T05:06:02.861666365Z], OS[Linux/3.10.0-1160.119.1.el7.x86_64/amd64], JVM[Oracle Corporation/OpenJDK 64-Bit Server VM/21.0.2/21.0.2+13-58]
[2024-12-10T07:33:08,200][INFO ][o.e.n.Node               ] [bk-agent-prod-gcp-1733807041583686062] JVM home [/opt/buildkite-agent/.java/openjdk21], using bundled JDK [false]
[2024-12-10T07:33:08,201][INFO ][o.e.n.Node               ] [bk-agent-prod-gcp-1733807041583686062] JVM arguments [-Des.networkaddress.cache.ttl=60, -Des.networkaddress.cache.negative.ttl=10, -XX:+AlwaysPreTouch, -Xss1m, -Djava.awt.headless=true, -Dfile.encoding=UTF-8, -Djna.nosys=true, -XX:-OmitStackTraceInFastThrow, -Dio.netty.noUnsafe=true, -Dio.netty.noKeySetOptimization=true, -Dio.netty.recycler.maxCapacityPerThread=0, -Dlog4j.shutdownHookEnabled=false, -Dlog4j2.disable.jmx=true, -Dlog4j2.formatMsgNoLookups=true, -Djava.locale.providers=CLDR, -Des.distribution.type=tar, --enable-native-access=org.elasticsearch.nativeaccess,org.apache.lucene.core, -XX:ReplayDataFile=logs/replay_pid%p.log, -Djava.security.manager=allow, -XX:+UseG1GC, -Djava.io.tmpdir=/tmp/elasticsearch-12272511591962018606, --add-modules=jdk.incubator.vector, -Dorg.apache.lucene.store.defaultReadAdvice=normal, -XX:+HeapDumpOnOutOfMemoryError, -XX:+ExitOnOutOfMemoryError, -XX:HeapDumpPath=data, -XX:ErrorFile=logs/hs_err_pid%p.log, -Xlog:gc*,gc+age=trace,safepoint:file=logs/gc.log:utctime,level,pid,tags:filecount=32,filesize=64m, -Xmx1g, -Xms1g, -XX:MaxDirectMemorySize=536870912, -XX:G1HeapRegionSize=4m, -XX:InitiatingHeapOccupancyPercent=30, -XX:G1ReservePercent=15, --module-path=/tmp/elasticsearch/lib, --add-modules=jdk.net, --add-modules=ALL-MODULE-PATH, -Djdk.module.main=org.elasticsearch.server]
[2024-12-10T07:33:08,201][INFO ][o.e.n.Node               ] [bk-agent-prod-gcp-1733807041583686062] Default Locale [en_US]
[2024-12-10T07:33:08,202][WARN ][o.e.n.Node               ] [bk-agent-prod-gcp-1733807041583686062] version [9.0.0-SNAPSHOT] is a pre-release version of Elasticsearch and is not suitable for production
[2024-12-10T07:33:08,943][INFO ][o.e.c.u.FeatureFlag      ] [bk-agent-prod-gcp-1733807041583686062] The current build is a snapshot, feature flag [esql_semantic_text] is enabled
[2024-12-10T07:33:09,165][INFO ][o.e.c.u.FeatureFlag      ] [bk-agent-prod-gcp-1733807041583686062] The current build is a snapshot, feature flag [esql_inlinestats] is enabled
[2024-12-10T07:33:10,020][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [repository-url]
[2024-12-10T07:33:10,021][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [rest-root]
[2024-12-10T07:33:10,022][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [x-pack-core]
[2024-12-10T07:33:10,022][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [x-pack-redact]
[2024-12-10T07:33:10,022][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [ingest-user-agent]
[2024-12-10T07:33:10,022][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [x-pack-async-search]
[2024-12-10T07:33:10,023][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [test-error-query]
[2024-12-10T07:33:10,023][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [x-pack-monitoring]
[2024-12-10T07:33:10,023][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [repository-s3]
[2024-12-10T07:33:10,024][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [x-pack-analytics]
[2024-12-10T07:33:10,024][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [x-pack-esql-core]
[2024-12-10T07:33:10,024][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [x-pack-ent-search]
[2024-12-10T07:33:10,025][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [x-pack-autoscaling]
[2024-12-10T07:33:10,025][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [lang-painless]
[2024-12-10T07:33:10,025][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [x-pack-ml]
[2024-12-10T07:33:10,026][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [test-die-with-dignity]
[2024-12-10T07:33:10,026][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [lang-mustache]
[2024-12-10T07:33:10,026][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [legacy-geo]
[2024-12-10T07:33:10,027][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [logsdb]
[2024-12-10T07:33:10,027][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [x-pack-ql]
[2024-12-10T07:33:10,027][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [rank-rrf]
[2024-12-10T07:33:10,028][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [analysis-common]
[2024-12-10T07:33:10,028][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [health-shards-availability]
[2024-12-10T07:33:10,028][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [transport-netty4]
[2024-12-10T07:33:10,028][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [aggregations]
[2024-12-10T07:33:10,029][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [ingest-common]
[2024-12-10T07:33:10,029][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [frozen-indices]
[2024-12-10T07:33:10,029][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [x-pack-identity-provider]
[2024-12-10T07:33:10,030][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [x-pack-shutdown]
[2024-12-10T07:33:10,030][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [x-pack-text-structure]
[2024-12-10T07:33:10,030][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [snapshot-repo-test-kit]
[2024-12-10T07:33:10,031][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [test-delayed-aggs]
[2024-12-10T07:33:10,031][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [ml-package-loader]
[2024-12-10T07:33:10,031][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [kibana]
[2024-12-10T07:33:10,031][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [test-esql-heap-attack]
[2024-12-10T07:33:10,032][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [constant-keyword]
[2024-12-10T07:33:10,032][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [x-pack-logstash]
[2024-12-10T07:33:10,032][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [x-pack-ccr]
[2024-12-10T07:33:10,033][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [x-pack-graph]
[2024-12-10T07:33:10,033][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [x-pack-esql]
[2024-12-10T07:33:10,033][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [parent-join]
[2024-12-10T07:33:10,033][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [x-pack-enrich]
[2024-12-10T07:33:10,034][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [counted-keyword]
[2024-12-10T07:33:10,034][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [repositories-metering-api]
[2024-12-10T07:33:10,034][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [transform]
[2024-12-10T07:33:10,034][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [repository-azure]
[2024-12-10T07:33:10,035][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [dot-prefix-validation]
[2024-12-10T07:33:10,035][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [repository-gcs]
[2024-12-10T07:33:10,035][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [x-pack-otel-data]
[2024-12-10T07:33:10,036][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [spatial]
[2024-12-10T07:33:10,036][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [apm]
[2024-12-10T07:33:10,036][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [mapper-extras]
[2024-12-10T07:33:10,036][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [mapper-version]
[2024-12-10T07:33:10,037][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [test-jvm-crash]
[2024-12-10T07:33:10,037][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [x-pack-rollup]
[2024-12-10T07:33:10,037][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [percolator]
[2024-12-10T07:33:10,037][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [x-pack-migrate]
[2024-12-10T07:33:10,038][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [data-streams]
[2024-12-10T07:33:10,038][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [x-pack-stack]
[2024-12-10T07:33:10,038][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [rank-eval]
[2024-12-10T07:33:10,038][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [reindex]
[2024-12-10T07:33:10,039][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [test-apm-integration]
[2024-12-10T07:33:10,039][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [x-pack-security]
[2024-12-10T07:33:10,039][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [blob-cache]
[2024-12-10T07:33:10,039][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [searchable-snapshots]
[2024-12-10T07:33:10,039][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [x-pack-slm]
[2024-12-10T07:33:10,040][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [x-pack-geoip-enterprise-downloader]
[2024-12-10T07:33:10,040][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [test-latency-simulating-directory]
[2024-12-10T07:33:10,040][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [snapshot-based-recoveries]
[2024-12-10T07:33:10,040][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [x-pack-watcher]
[2024-12-10T07:33:10,041][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [old-lucene-versions]
[2024-12-10T07:33:10,041][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [x-pack-ilm]
[2024-12-10T07:33:10,041][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [x-pack-inference]
[2024-12-10T07:33:10,041][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [x-pack-voting-only-node]
[2024-12-10T07:33:10,042][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [x-pack-deprecation]
[2024-12-10T07:33:10,042][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [x-pack-fleet]
[2024-12-10T07:33:10,042][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [x-pack-aggregate-metric]
[2024-12-10T07:33:10,043][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [x-pack-downsample]
[2024-12-10T07:33:10,043][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [x-pack-profiling]
[2024-12-10T07:33:10,043][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [ingest-geoip]
[2024-12-10T07:33:10,043][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [x-pack-write-load-forecaster]
[2024-12-10T07:33:10,043][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [search-business-rules]
[2024-12-10T07:33:10,044][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [ingest-attachment]
[2024-12-10T07:33:10,044][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [wildcard]
[2024-12-10T07:33:10,044][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [x-pack-apm-data]
[2024-12-10T07:33:10,044][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [unsigned-long]
[2024-12-10T07:33:10,045][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [x-pack-sql]
[2024-12-10T07:33:10,045][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [runtime-fields-common]
[2024-12-10T07:33:10,045][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [x-pack-async]
[2024-12-10T07:33:10,045][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [x-pack-kql]
[2024-12-10T07:33:10,045][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [vector-tile]
[2024-12-10T07:33:10,045][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [lang-expression]
[2024-12-10T07:33:10,045][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733807041583686062] loaded module [x-pack-eql]
[2024-12-10T07:33:10,312][INFO ][o.e.c.u.FeatureFlag      ] [bk-agent-prod-gcp-1733807041583686062] The current build is a snapshot, feature flag [failure_store] is enabled
[2024-12-10T07:33:11,495][INFO ][o.e.e.NodeEnvironment    ] [bk-agent-prod-gcp-1733807041583686062] using [1] data paths, mounts [[/ (/dev/sda2)]], net usable_space [268.8gb], net total_space [349.7gb], types [xfs]
[2024-12-10T07:33:11,496][INFO ][o.e.e.NodeEnvironment    ] [bk-agent-prod-gcp-1733807041583686062] heap size [1gb], compressed ordinary object pointers [true]
[2024-12-10T07:33:12,122][INFO ][o.e.n.Node               ] [bk-agent-prod-gcp-1733807041583686062] node name [bk-agent-prod-gcp-1733807041583686062], node ID [rTZW88vEQq-l_wgG2dCATQ], cluster name [elasticsearch], roles [ml, data_frozen, ingest, data_cold, data, remote_cluster_client, master, data_warm, data_content, transform, data_hot]
[2024-12-10T07:33:13,356][INFO ][o.e.c.u.FeatureFlag      ] [bk-agent-prod-gcp-1733807041583686062] The current build is a snapshot, feature flag [reindex_data_stream] is enabled
[2024-12-10T07:33:15,701][INFO ][o.e.c.u.FeatureFlag      ] [bk-agent-prod-gcp-1733807041583686062] The current build is a snapshot, feature flag [connector_secrets] is enabled
[2024-12-10T07:33:15,830][INFO ][o.e.i.r.RecoverySettings ] [bk-agent-prod-gcp-1733807041583686062] using rate limit [40mb] with [default=40mb, read=0b, write=0b, max=0b]
[2024-12-10T07:33:15,916][INFO ][o.e.c.u.FeatureFlag      ] [bk-agent-prod-gcp-1733807041583686062] The current build is a snapshot, feature flag [rank_vectors] is enabled
[2024-12-10T07:33:16,019][INFO ][o.e.c.u.FeatureFlag      ] [bk-agent-prod-gcp-1733807041583686062] The current build is a snapshot, feature flag [sub_objects_auto] is enabled
[2024-12-10T07:33:16,049][INFO ][o.e.f.FeatureService     ] [bk-agent-prod-gcp-1733807041583686062] Registered local node features [cluster.reroute.ignores_metric_param, cluster.stats.source_modes, data_stream.auto_sharding, data_stream.lifecycle.global_retention, data_stream.rollover.lazy, desired_node.version_deprecated, esql.agg_values, esql.async_query, esql.base64_decode_encode, esql.casting_operator, esql.counter_types, esql.disable_nullable_opts, esql.from_options, esql.metadata_fields, esql.metrics_counter_fields, esql.metrics_syntax, esql.mv_ordering_sorted_ascending, esql.mv_sort, esql.resolve_fields_api, esql.spatial_points_from_source, esql.spatial_shapes, esql.st_centroid_agg, esql.st_contains_within, esql.st_disjoint, esql.st_intersects, esql.st_x_y, esql.string_literal_auto_casting, esql.string_literal_auto_casting_extended, esql.timespan_abbreviations, features_supported, file_settings, flattened.ignore_above_support, geoip.downloader.database.configuration, get_database_configuration_action.multi_node, health.dsl.info, health.extended_repository_indicator, knn_retriever_supported, license-trial-independent-version, logsdb_telemetry, logsdb_telemetry_stats, lucene_10_upgrade, mapper.boolean_dimension, mapper.bwc_workaround_9_0, mapper.flattened.ignore_above_with_arrays_support, mapper.ignore_above_index_level_setting, mapper.index_sorting_on_nested, mapper.keyword_dimension_ignore_above, mapper.keyword_normalizer_synthetic_source, mapper.pass_through_priority, mapper.query_index_mode, mapper.range.null_values_off_by_one_fix, mapper.segment_level_fields_stats, mapper.source.synthetic_source_copy_to_fix, mapper.source.synthetic_source_copy_to_inside_objects_fix, mapper.source.synthetic_source_fallback, mapper.source.synthetic_source_stored_fields_advance_fix, mapper.source.synthetic_source_with_copy_to_and_doc_values_false, mapper.subobjects_auto, mapper.subobjects_auto_fixes, mapper.synthetic_source_keep, mapper.track_ignored_source, mapper.vectors.bbq, mapper.vectors.bit_vectors, mapper.vectors.int4_quantization, put_database_configuration_action.ipinfo, query_rule_list_types, query_rule_retriever_supported, query_rules.test, random_reranker_retriever_supported, repositories.supports_usage_stats, rest.capabilities_action, rest.local_only_capabilities, retrievers_supported, routing.boolean_routing_path, routing.multi_value_routing_path, rrf_retriever_composition_supported, rrf_retriever_supported, script.hamming, script.term_stats, search.vectors.k_param_supported, security.migration_framework, security.role_mapping_cleanup, security.roles_metadata_flattened, semantic_text.default_elser_2, semantic_text.inner_hits, semantic_text.search_inference_id, simulate.component.template.substitutions, simulate.index.template.substitutions, simulate.mapping.addition, simulate.mapping.validation, simulate.mapping.validation.templates, simulate.support.non.template.mapping, slm.interval_schedule, snapshot.repository_verify_integrity, standard_retriever_supported, stats.include_disk_thresholds, stats.tier_creation_date, text_similarity_reranker_retriever_composition_supported, text_similarity_reranker_retriever_supported, tsdb.ts_routing_hash_doc_value_parse_byte_ref, unified_highlighter_matched_fields, usage.data_tiers.precalculate_stats]
[2024-12-10T07:33:16,090][INFO ][o.e.c.m.DataStreamGlobalRetentionSettings] [bk-agent-prod-gcp-1733807041583686062] Updated default factory retention to [null]
[2024-12-10T07:33:16,091][INFO ][o.e.c.m.DataStreamGlobalRetentionSettings] [bk-agent-prod-gcp-1733807041583686062] Updated max factory retention to [null]
[2024-12-10T07:33:26,975][ERROR][o.e.b.Elasticsearch      ] [bk-agent-prod-gcp-1733807041583686062] fatal exception while booting Elasticsearch org.elasticsearch.ElasticsearchException: Failure running machine learning native code. This could be due to running on an unsupported OS or distribution, missing OS libraries, or a problem with the temp directory. To bypass this problem by running Elasticsearch without machine learning functionality set [xpack.ml.enabled: false].
	at org.elasticsearch.ml@9.0.0-SNAPSHOT/org.elasticsearch.xpack.ml.MachineLearning.createComponents(MachineLearning.java:1047)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.node.NodeConstruction.lambda$construct$16(NodeConstruction.java:892)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.plugins.PluginsService.lambda$flatMap$0(PluginsService.java:186)
	at java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:273)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.AbstractList$RandomAccessSpliterator.forEachRemaining(AbstractList.java:722)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:575)
	at java.base/java.util.stream.AbstractPipeline.evaluateToArrayNode(AbstractPipeline.java:260)
	at java.base/java.util.stream.ReferencePipeline.toArray(ReferencePipeline.java:616)
	at java.base/java.util.stream.ReferencePipeline.toArray(ReferencePipeline.java:622)
	at java.base/java.util.stream.ReferencePipeline.toList(ReferencePipeline.java:627)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.node.NodeConstruction.construct(NodeConstruction.java:914)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.node.NodeConstruction.prepareConstruction(NodeConstruction.java:294)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.node.Node.<init>(Node.java:185)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.bootstrap.Elasticsearch$2.<init>(Elasticsearch.java:260)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.bootstrap.Elasticsearch.initPhase3(Elasticsearch.java:260)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:78)] stderr = [ERROR: Elasticsearch did not exit normally - check the logs at /tmp/elasticsearch/logs/elasticsearch.log

ERROR: Elasticsearch died while starting up, with exit code 1]]
Expected: <0>
     but: was <1>
```

**Issue Reasons:**
- [main] 2 consecutive failures in test test61EsJavaHomeOverride
- [main] 3 consecutive failures in step rhel-7_packaging-tests-unix
- [main] 3 consecutive failures in step ubuntu-1804_packaging-tests-unix
- [main] 3 consecutive failures in step oraclelinux-7_packaging-tests-unix
- [main] 3 consecutive failures in step sles-12_packaging-tests-unix
- [main] 12 failures in test test61EsJavaHomeOverride (3.2% fail rate in 379 executions)
- [main] 3 failures in step rhel-7_packaging-tests-unix (100.0% fail rate in 3 executions)
- [main] 3 failures in step ubuntu-1804_packaging-tests-unix (100.0% fail rate in 3 executions)
- [main] 3 failures in step oraclelinux-7_packaging-tests-unix (100.0% fail rate in 3 executions)
- [main] 3 failures in step sles-12_packaging-tests-unix (100.0% fail rate in 3 executions)
- [main] 3 failures in pipeline elasticsearch-periodic-packaging (75.0% fail rate in 4 executions)

**Note:**
This issue was created using new test triage automation. Please report issues or feedback to es-delivery.",elasticsearchmachine,closed,"[':Delivery/Packaging', '>test-failure', 'Team:Delivery', 'needs:risk']",https://github.com/elastic/elasticsearch/issues/118265,2024-12-09T13:33:13Z,2,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/118265,"{
  ""application_resource"": ""no""
}"
62,118216,[CI] ArchiveTests test60StartAndStop failing,"**Build Scans:**
- [elasticsearch-periodic-packaging #4967 / ubuntu-1804_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/wvy5hhjb2ni5y)
- [elasticsearch-periodic-packaging #4967 / rhel-7_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/mnkkuwpuukq4i)
- [elasticsearch-pull-request #45225 / rhel-8_destructivedistrotest.archives_packaging-tests-unix-sample](https://gradle-enterprise.elastic.co/s/pjtzpq2nzngtw)
- [elasticsearch-periodic-packaging #4967 / oraclelinux-7_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/ckya4p7d6g7vq)
- [elasticsearch-periodic-packaging #4967 / sles-12_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/pmlc4j4phvsjg)
- [elasticsearch-periodic-packaging #4961 / rhel-7_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/fk4rfbui5vl66)
- [elasticsearch-periodic-packaging #4961 / ubuntu-1804_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/45qdlkwmnkgio)
- [elasticsearch-periodic-packaging #4961 / oraclelinux-7_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/3vl7uwkpczsla)
- [elasticsearch-periodic-packaging #4961 / sles-12_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/k3vfwd4oggnrk)
- [elasticsearch-periodic-packaging #4955 / rhel-7_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/hhavad4uoqyru)

**Reproduction Line:**
```
null
```

**Applicable branches:**
main

**Reproduces locally?:**
N/A

**Failure History:**
[See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&_a=(controlGroupState:(initialChildControlState:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:task.keyword,order:0,selectedOptions:!(),title:'GradleTask',type:optionsListControl),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:className.keyword,order:1,selectedOptions:!(org.elasticsearch.packaging.test.ArchiveTests),title:'Suite',type:optionsListControl),'144933da-5c1b-4257-a969-7f43455a7901':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:name.keyword,order:2,selectedOptions:!(test60StartAndStop),title:'Test',type:optionsListControl)))))

**Failure Message:**
```
java.lang.AssertionError: Startup command should succeed. Stderr: [exitCode = [1] stdout = [CompileCommand: dontinline java/lang/invoke/MethodHandle.setAsTypeCache bool dontinline = true
CompileCommand: dontinline java/lang/invoke/MethodHandle.asTypeUncached bool dontinline = true
[2024-12-09T07:31:58,732][WARN ][x-pack-ml-controller-stderr] [bk-agent-prod-gcp-1733720586724528089] /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/controller: /lib/x86_64-linux-gnu/libc.so.6: version `GLIBC_2.28' not found (required by /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/../lib/libxml2.so.2)
[2024-12-09T07:31:58,767][WARN ][x-pack-ml-controller-stderr] [bk-agent-prod-gcp-1733720586724528089] /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/controller: /lib/x86_64-linux-gnu/libc.so.6: version `GLIBC_2.28' not found (required by /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/../lib/libboost_filesystem-gcc13-mt-x64-1_83.so.1.83.0)
[2024-12-09T07:31:58,899][INFO ][o.e.n.NativeAccess       ] [bk-agent-prod-gcp-1733720586724528089] Using native vector library; to disable start with -Dorg.elasticsearch.nativeaccess.enableVectorLibrary=false
[2024-12-09T07:31:58,915][INFO ][o.e.n.NativeAccess       ] [bk-agent-prod-gcp-1733720586724528089] Using [jdk] native provider and native methods for [Linux]
[2024-12-09T07:31:59,008][INFO ][o.a.l.i.v.PanamaVectorizationProvider] [bk-agent-prod-gcp-1733720586724528089] Java vector incubator API enabled; uses preferredBitSize=256; FMA enabled
[2024-12-09T07:32:01,804][INFO ][o.e.b.Elasticsearch      ] [bk-agent-prod-gcp-1733720586724528089] Bootstrapping java SecurityManager
[2024-12-09T07:32:02,665][INFO ][o.e.n.Node               ] [bk-agent-prod-gcp-1733720586724528089] version[9.0.0-SNAPSHOT], pid[351592], build[tar/d411ad82daee10d298c2eb47d3fd900a83091baf/2024-12-09T05:07:30.758749710Z], OS[Linux/5.4.0-1106-gcp/amd64], JVM[Oracle Corporation/OpenJDK 64-Bit Server VM/23/23+37-2369]
[2024-12-09T07:32:02,666][INFO ][o.e.n.Node               ] [bk-agent-prod-gcp-1733720586724528089] JVM home [/tmp/elasticsearch/jdk], using bundled JDK [true]
[2024-12-09T07:32:02,667][INFO ][o.e.n.Node               ] [bk-agent-prod-gcp-1733720586724528089] JVM arguments [-Des.networkaddress.cache.ttl=60, -Des.networkaddress.cache.negative.ttl=10, -XX:+AlwaysPreTouch, -Xss1m, -Djava.awt.headless=true, -Dfile.encoding=UTF-8, -Djna.nosys=true, -XX:-OmitStackTraceInFastThrow, -Dio.netty.noUnsafe=true, -Dio.netty.noKeySetOptimization=true, -Dio.netty.recycler.maxCapacityPerThread=0, -Dlog4j.shutdownHookEnabled=false, -Dlog4j2.disable.jmx=true, -Dlog4j2.formatMsgNoLookups=true, -Djava.locale.providers=CLDR, -Des.distribution.type=tar, --enable-native-access=org.elasticsearch.nativeaccess,org.apache.lucene.core, -XX:ReplayDataFile=logs/replay_pid%p.log, -Djava.security.manager=allow, -XX:+UseG1GC, -Djava.io.tmpdir=/tmp/elasticsearch-7662089611103927015, --add-modules=jdk.incubator.vector, -XX:CompileCommand=dontinline,java/lang/invoke/MethodHandle.setAsTypeCache, -XX:CompileCommand=dontinline,java/lang/invoke/MethodHandle.asTypeUncached, -Dorg.apache.lucene.store.defaultReadAdvice=normal, -XX:+HeapDumpOnOutOfMemoryError, -XX:+ExitOnOutOfMemoryError, -XX:HeapDumpPath=data, -XX:ErrorFile=logs/hs_err_pid%p.log, -Xlog:gc*,gc+age=trace,safepoint:file=logs/gc.log:utctime,level,pid,tags:filecount=32,filesize=64m, -Xmx1g, -Xms1g, -XX:MaxDirectMemorySize=536870912, -XX:G1HeapRegionSize=4m, -XX:InitiatingHeapOccupancyPercent=30, -XX:G1ReservePercent=15, --module-path=/tmp/elasticsearch/lib, --add-modules=jdk.net, --add-modules=ALL-MODULE-PATH, -Djdk.module.main=org.elasticsearch.server]
[2024-12-09T07:32:02,668][INFO ][o.e.n.Node               ] [bk-agent-prod-gcp-1733720586724528089] Default Locale [en]
[2024-12-09T07:32:02,668][WARN ][o.e.n.Node               ] [bk-agent-prod-gcp-1733720586724528089] version [9.0.0-SNAPSHOT] is a pre-release version of Elasticsearch and is not suitable for production
[2024-12-09T07:32:03,377][INFO ][o.e.c.u.FeatureFlag      ] [bk-agent-prod-gcp-1733720586724528089] The current build is a snapshot, feature flag [esql_semantic_text] is enabled
[2024-12-09T07:32:03,619][INFO ][o.e.c.u.FeatureFlag      ] [bk-agent-prod-gcp-1733720586724528089] The current build is a snapshot, feature flag [esql_inlinestats] is enabled
[2024-12-09T07:32:04,458][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [repository-url]
[2024-12-09T07:32:04,459][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [rest-root]
[2024-12-09T07:32:04,459][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [x-pack-core]
[2024-12-09T07:32:04,459][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [x-pack-redact]
[2024-12-09T07:32:04,459][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [ingest-user-agent]
[2024-12-09T07:32:04,459][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [x-pack-async-search]
[2024-12-09T07:32:04,460][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [x-pack-monitoring]
[2024-12-09T07:32:04,460][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [test-error-query]
[2024-12-09T07:32:04,460][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [repository-s3]
[2024-12-09T07:32:04,460][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [x-pack-analytics]
[2024-12-09T07:32:04,461][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [x-pack-esql-core]
[2024-12-09T07:32:04,461][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [x-pack-ent-search]
[2024-12-09T07:32:04,461][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [x-pack-autoscaling]
[2024-12-09T07:32:04,461][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [lang-painless]
[2024-12-09T07:32:04,461][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [x-pack-ml]
[2024-12-09T07:32:04,462][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [test-die-with-dignity]
[2024-12-09T07:32:04,462][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [legacy-geo]
[2024-12-09T07:32:04,462][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [lang-mustache]
[2024-12-09T07:32:04,462][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [x-pack-ql]
[2024-12-09T07:32:04,462][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [logsdb]
[2024-12-09T07:32:04,463][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [rank-rrf]
[2024-12-09T07:32:04,463][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [analysis-common]
[2024-12-09T07:32:04,463][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [health-shards-availability]
[2024-12-09T07:32:04,463][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [transport-netty4]
[2024-12-09T07:32:04,464][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [aggregations]
[2024-12-09T07:32:04,464][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [ingest-common]
[2024-12-09T07:32:04,464][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [x-pack-identity-provider]
[2024-12-09T07:32:04,464][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [frozen-indices]
[2024-12-09T07:32:04,464][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [x-pack-shutdown]
[2024-12-09T07:32:04,465][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [x-pack-text-structure]
[2024-12-09T07:32:04,465][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [snapshot-repo-test-kit]
[2024-12-09T07:32:04,465][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [test-delayed-aggs]
[2024-12-09T07:32:04,465][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [ml-package-loader]
[2024-12-09T07:32:04,466][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [kibana]
[2024-12-09T07:32:04,466][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [test-esql-heap-attack]
[2024-12-09T07:32:04,466][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [constant-keyword]
[2024-12-09T07:32:04,466][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [x-pack-logstash]
[2024-12-09T07:32:04,466][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [x-pack-graph]
[2024-12-09T07:32:04,467][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [x-pack-ccr]
[2024-12-09T07:32:04,467][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [x-pack-esql]
[2024-12-09T07:32:04,467][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [parent-join]
[2024-12-09T07:32:04,467][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [x-pack-enrich]
[2024-12-09T07:32:04,467][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [counted-keyword]
[2024-12-09T07:32:04,467][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [repositories-metering-api]
[2024-12-09T07:32:04,468][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [transform]
[2024-12-09T07:32:04,468][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [repository-azure]
[2024-12-09T07:32:04,468][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [dot-prefix-validation]
[2024-12-09T07:32:04,468][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [repository-gcs]
[2024-12-09T07:32:04,468][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [x-pack-otel-data]
[2024-12-09T07:32:04,468][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [spatial]
[2024-12-09T07:32:04,469][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [mapper-version]
[2024-12-09T07:32:04,469][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [apm]
[2024-12-09T07:32:04,469][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [mapper-extras]
[2024-12-09T07:32:04,469][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [x-pack-rollup]
[2024-12-09T07:32:04,469][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [test-jvm-crash]
[2024-12-09T07:32:04,469][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [percolator]
[2024-12-09T07:32:04,470][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [x-pack-migrate]
[2024-12-09T07:32:04,470][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [x-pack-stack]
[2024-12-09T07:32:04,470][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [data-streams]
[2024-12-09T07:32:04,470][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [reindex]
[2024-12-09T07:32:04,470][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [rank-eval]
[2024-12-09T07:32:04,470][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [test-apm-integration]
[2024-12-09T07:32:04,471][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [x-pack-security]
[2024-12-09T07:32:04,471][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [blob-cache]
[2024-12-09T07:32:04,471][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [searchable-snapshots]
[2024-12-09T07:32:04,471][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [x-pack-slm]
[2024-12-09T07:32:04,471][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [x-pack-geoip-enterprise-downloader]
[2024-12-09T07:32:04,471][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [snapshot-based-recoveries]
[2024-12-09T07:32:04,472][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [test-latency-simulating-directory]
[2024-12-09T07:32:04,472][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [x-pack-watcher]
[2024-12-09T07:32:04,472][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [old-lucene-versions]
[2024-12-09T07:32:04,472][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [x-pack-ilm]
[2024-12-09T07:32:04,472][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [x-pack-voting-only-node]
[2024-12-09T07:32:04,472][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [x-pack-inference]
[2024-12-09T07:32:04,473][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [x-pack-deprecation]
[2024-12-09T07:32:04,473][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [x-pack-fleet]
[2024-12-09T07:32:04,473][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [x-pack-aggregate-metric]
[2024-12-09T07:32:04,473][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [x-pack-downsample]
[2024-12-09T07:32:04,473][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [x-pack-profiling]
[2024-12-09T07:32:04,473][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [ingest-geoip]
[2024-12-09T07:32:04,474][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [x-pack-write-load-forecaster]
[2024-12-09T07:32:04,474][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [search-business-rules]
[2024-12-09T07:32:04,474][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [ingest-attachment]
[2024-12-09T07:32:04,474][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [wildcard]
[2024-12-09T07:32:04,474][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [x-pack-apm-data]
[2024-12-09T07:32:04,474][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [x-pack-sql]
[2024-12-09T07:32:04,475][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [unsigned-long]
[2024-12-09T07:32:04,475][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [x-pack-async]
[2024-12-09T07:32:04,475][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [runtime-fields-common]
[2024-12-09T07:32:04,475][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [x-pack-kql]
[2024-12-09T07:32:04,475][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [vector-tile]
[2024-12-09T07:32:04,475][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [lang-expression]
[2024-12-09T07:32:04,475][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733720586724528089] loaded module [x-pack-eql]
[2024-12-09T07:32:04,705][INFO ][o.e.c.u.FeatureFlag      ] [bk-agent-prod-gcp-1733720586724528089] The current build is a snapshot, feature flag [failure_store] is enabled
[2024-12-09T07:32:05,481][INFO ][o.e.e.NodeEnvironment    ] [bk-agent-prod-gcp-1733720586724528089] using [1] data paths, mounts [[/ (/dev/sda1)]], net usable_space [259.1gb], net total_space [339gb], types [ext4]
[2024-12-09T07:32:05,481][INFO ][o.e.e.NodeEnvironment    ] [bk-agent-prod-gcp-1733720586724528089] heap size [1gb], compressed ordinary object pointers [true]
[2024-12-09T07:32:05,491][INFO ][o.e.n.Node               ] [bk-agent-prod-gcp-1733720586724528089] node name [bk-agent-prod-gcp-1733720586724528089], node ID [xqjkSJCDS5Shfx_3s7PESw], cluster name [elasticsearch], roles [transform, data_content, data_warm, master, remote_cluster_client, data, data_cold, ingest, data_frozen, ml, data_hot]
[2024-12-09T07:32:06,695][INFO ][o.e.c.u.FeatureFlag      ] [bk-agent-prod-gcp-1733720586724528089] The current build is a snapshot, feature flag [reindex_data_stream] is enabled
[2024-12-09T07:32:08,966][INFO ][o.e.c.u.FeatureFlag      ] [bk-agent-prod-gcp-1733720586724528089] The current build is a snapshot, feature flag [connector_secrets] is enabled
[2024-12-09T07:32:09,095][INFO ][o.e.i.r.RecoverySettings ] [bk-agent-prod-gcp-1733720586724528089] using rate limit [40mb] with [default=40mb, read=0b, write=0b, max=0b]
[2024-12-09T07:32:09,174][INFO ][o.e.c.u.FeatureFlag      ] [bk-agent-prod-gcp-1733720586724528089] The current build is a snapshot, feature flag [multi_dense_vector] is enabled
[2024-12-09T07:32:09,275][INFO ][o.e.c.u.FeatureFlag      ] [bk-agent-prod-gcp-1733720586724528089] The current build is a snapshot, feature flag [sub_objects_auto] is enabled
[2024-12-09T07:32:09,307][INFO ][o.e.f.FeatureService     ] [bk-agent-prod-gcp-1733720586724528089] Registered local node features [cluster.reroute.ignores_metric_param, cluster.stats.source_modes, data_stream.auto_sharding, data_stream.lifecycle.global_retention, data_stream.rollover.lazy, desired_node.version_deprecated, esql.agg_values, esql.async_query, esql.base64_decode_encode, esql.casting_operator, esql.counter_types, esql.disable_nullable_opts, esql.from_options, esql.metadata_fields, esql.metrics_counter_fields, esql.metrics_syntax, esql.mv_ordering_sorted_ascending, esql.mv_sort, esql.resolve_fields_api, esql.spatial_points_from_source, esql.spatial_shapes, esql.st_centroid_agg, esql.st_contains_within, esql.st_disjoint, esql.st_intersects, esql.st_x_y, esql.string_literal_auto_casting, esql.string_literal_auto_casting_extended, esql.timespan_abbreviations, features_supported, file_settings, flattened.ignore_above_support, geoip.downloader.database.configuration, get_database_configuration_action.multi_node, health.dsl.info, health.extended_repository_indicator, knn_retriever_supported, license-trial-independent-version, logsdb_telemetry, logsdb_telemetry_stats, lucene_10_upgrade, mapper.boolean_dimension, mapper.bwc_workaround_9_0, mapper.flattened.ignore_above_with_arrays_support, mapper.ignore_above_index_level_setting, mapper.index_sorting_on_nested, mapper.keyword_dimension_ignore_above, mapper.keyword_normalizer_synthetic_source, mapper.pass_through_priority, mapper.query_index_mode, mapper.range.null_values_off_by_one_fix, mapper.segment_level_fields_stats, mapper.source.synthetic_source_copy_to_fix, mapper.source.synthetic_source_copy_to_inside_objects_fix, mapper.source.synthetic_source_fallback, mapper.source.synthetic_source_stored_fields_advance_fix, mapper.source.synthetic_source_with_copy_to_and_doc_values_false, mapper.subobjects_auto, mapper.subobjects_auto_fixes, mapper.synthetic_source_keep, mapper.track_ignored_source, mapper.vectors.bbq, mapper.vectors.bit_vectors, mapper.vectors.int4_quantization, put_database_configuration_action.ipinfo, query_rule_list_types, query_rule_retriever_supported, query_rules.test, random_reranker_retriever_supported, repositories.supports_usage_stats, rest.capabilities_action, rest.local_only_capabilities, retrievers_supported, routing.boolean_routing_path, routing.multi_value_routing_path, rrf_retriever_composition_supported, rrf_retriever_supported, script.hamming, script.term_stats, search.vectors.k_param_supported, security.migration_framework, security.role_mapping_cleanup, security.roles_metadata_flattened, semantic_text.default_elser_2, semantic_text.inner_hits, semantic_text.search_inference_id, simulate.component.template.substitutions, simulate.index.template.substitutions, simulate.mapping.addition, simulate.mapping.validation, simulate.mapping.validation.templates, simulate.support.non.template.mapping, slm.interval_schedule, snapshot.repository_verify_integrity, standard_retriever_supported, stats.include_disk_thresholds, stats.tier_creation_date, text_similarity_reranker_retriever_composition_supported, text_similarity_reranker_retriever_supported, tsdb.ts_routing_hash_doc_value_parse_byte_ref, unified_highlighter_matched_fields, usage.data_tiers.precalculate_stats]
[2024-12-09T07:32:09,347][INFO ][o.e.c.m.DataStreamGlobalRetentionSettings] [bk-agent-prod-gcp-1733720586724528089] Updated default factory retention to [null]
[2024-12-09T07:32:09,348][INFO ][o.e.c.m.DataStreamGlobalRetentionSettings] [bk-agent-prod-gcp-1733720586724528089] Updated max factory retention to [null]
[2024-12-09T07:32:20,258][ERROR][o.e.b.Elasticsearch      ] [bk-agent-prod-gcp-1733720586724528089] fatal exception while booting Elasticsearch org.elasticsearch.ElasticsearchException: Failure running machine learning native code. This could be due to running on an unsupported OS or distribution, missing OS libraries, or a problem with the temp directory. To bypass this problem by running Elasticsearch without machine learning functionality set [xpack.ml.enabled: false].
	at org.elasticsearch.ml@9.0.0-SNAPSHOT/org.elasticsearch.xpack.ml.MachineLearning.createComponents(MachineLearning.java:1047)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.node.NodeConstruction.lambda$construct$16(NodeConstruction.java:892)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.plugins.PluginsService.lambda$flatMap$0(PluginsService.java:186)
	at java.base/java.util.stream.ReferencePipeline$7$1FlatMap.accept(ReferencePipeline.java:289)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:215)
	at java.base/java.util.AbstractList$RandomAccessSpliterator.forEachRemaining(AbstractList.java:722)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:570)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:560)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:636)
	at java.base/java.util.stream.AbstractPipeline.evaluateToArrayNode(AbstractPipeline.java:291)
	at java.base/java.util.stream.ReferencePipeline.toArray(ReferencePipeline.java:656)
	at java.base/java.util.stream.ReferencePipeline.toArray(ReferencePipeline.java:662)
	at java.base/java.util.stream.ReferencePipeline.toList(ReferencePipeline.java:667)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.node.NodeConstruction.construct(NodeConstruction.java:914)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.node.NodeConstruction.prepareConstruction(NodeConstruction.java:294)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.node.Node.<init>(Node.java:185)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.bootstrap.Elasticsearch$2.<init>(Elasticsearch.java:260)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.bootstrap.Elasticsearch.initPhase3(Elasticsearch.java:260)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:78)] stderr = [ERROR: Elasticsearch did not exit normally - check the logs at /tmp/elasticsearch/logs/elasticsearch.log

ERROR: Elasticsearch died while starting up, with exit code 1]]
Expected: <0>
     but: was <1>
```

**Issue Reasons:**
- [main] 4 consecutive failures in step ubuntu-1804_packaging-tests-unix
- [main] 4 consecutive failures in step rhel-7_packaging-tests-unix
- [main] 4 consecutive failures in step oraclelinux-7_packaging-tests-unix
- [main] 4 consecutive failures in step sles-12_packaging-tests-unix
- [main] 17 failures in test test60StartAndStop (21.5% fail rate in 79 executions)
- [main] 4 failures in step ubuntu-1804_packaging-tests-unix (100.0% fail rate in 4 executions)
- [main] 4 failures in step rhel-7_packaging-tests-unix (100.0% fail rate in 4 executions)
- [main] 4 failures in step oraclelinux-7_packaging-tests-unix (100.0% fail rate in 4 executions)
- [main] 4 failures in step sles-12_packaging-tests-unix (100.0% fail rate in 4 executions)
- [main] 4 failures in pipeline elasticsearch-periodic-packaging (100.0% fail rate in 4 executions)

**Note:**
This issue was created using new test triage automation. Please report issues or feedback to es-delivery.",elasticsearchmachine,closed,"[':Delivery/Packaging', '>test-failure', 'Team:Delivery', 'needs:risk']",https://github.com/elastic/elasticsearch/issues/118216,2024-12-08T05:25:48Z,3,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/118216,"{
  ""application_resource"": ""unsure""
}"
63,118202,[CI] ArchiveTests test43AutoconfigurationNotTriggeredWhenTlsAlreadyConfigured failing,"**Build Scans:**
- [elasticsearch-periodic-packaging #4931 / rhel-7_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/dxlhtdaz7map6)
- [elasticsearch-periodic-packaging #4931 / ubuntu-1804_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/pffpt2vbmlrj2)
- [elasticsearch-periodic-packaging #4931 / sles-12_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/5vxmvbmm5kw3s)
- [elasticsearch-periodic-packaging #4931 / oraclelinux-7_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/dryfufflrzj2i)
- [elasticsearch-pull-request #44985 / rhel-8_destructivedistrotest.archives_packaging-tests-unix-sample](https://gradle-enterprise.elastic.co/s/xflcpannqo2qc)
- [elasticsearch-pull-request #44985 / ubuntu-2004_destructivedistrotest.archives_packaging-tests-unix-sample](https://gradle-enterprise.elastic.co/s/zsity44o7d7vq)
- [elasticsearch-pull-request #44958 / ubuntu-2004_destructivedistrotest.archives_packaging-tests-unix-sample](https://gradle-enterprise.elastic.co/s/5etetwovktsxu)
- [elasticsearch-pull-request #44958 / rhel-8_destructivedistrotest.archives_packaging-tests-unix-sample](https://gradle-enterprise.elastic.co/s/zvix5yf33qeyy)

**Reproduction Line:**
```
null
```

**Applicable branches:**
main

**Reproduces locally?:**
N/A

**Failure History:**
[See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&_a=(controlGroupState:(initialChildControlState:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:task.keyword,order:0,selectedOptions:!(),title:'GradleTask',type:optionsListControl),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:className.keyword,order:1,selectedOptions:!(org.elasticsearch.packaging.test.ArchiveTests),title:'Suite',type:optionsListControl),'144933da-5c1b-4257-a969-7f43455a7901':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:name.keyword,order:2,selectedOptions:!(test43AutoconfigurationNotTriggeredWhenTlsAlreadyConfigured),title:'Test',type:optionsListControl)))))

**Failure Message:**
```
java.lang.AssertionError: Startup command should succeed. Stderr: [exitCode = [1] stdout = [Skipping security auto configuration because it appears that TLS is already configured.
CompileCommand: dontinline java/lang/invoke/MethodHandle.setAsTypeCache bool dontinline = true
CompileCommand: dontinline java/lang/invoke/MethodHandle.asTypeUncached bool dontinline = true
[2024-12-07T07:32:06,462][WARN ][x-pack-ml-controller-stderr] [bk-agent-prod-gcp-1733547869421438593] /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/controller: /lib64/libc.so.6: version `GLIBC_2.26' not found (required by /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/../lib/libstdc++.so.6)
[2024-12-07T07:32:06,492][WARN ][x-pack-ml-controller-stderr] [bk-agent-prod-gcp-1733547869421438593] /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/controller: /lib64/libc.so.6: version `GLIBC_2.25' not found (required by /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/../lib/libstdc++.so.6)
[2024-12-07T07:32:06,493][WARN ][x-pack-ml-controller-stderr] [bk-agent-prod-gcp-1733547869421438593] /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/controller: /lib64/libc.so.6: version `GLIBC_2.18' not found (required by /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/../lib/libstdc++.so.6)
[2024-12-07T07:32:06,494][WARN ][x-pack-ml-controller-stderr] [bk-agent-prod-gcp-1733547869421438593] /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/controller: /lib64/libc.so.6: version `GLIBC_2.28' not found (required by /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/../lib/libxml2.so.2)
[2024-12-07T07:32:06,494][WARN ][x-pack-ml-controller-stderr] [bk-agent-prod-gcp-1733547869421438593] /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/controller: /lib64/libc.so.6: version `GLIBC_2.28' not found (required by /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/../lib/libboost_filesystem-gcc13-mt-x64-1_83.so.1.83.0)
[2024-12-07T07:32:06,495][WARN ][x-pack-ml-controller-stderr] [bk-agent-prod-gcp-1733547869421438593] /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/controller: /lib64/libc.so.6: version `GLIBC_2.25' not found (required by /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/../lib/libboost_filesystem-gcc13-mt-x64-1_83.so.1.83.0)
[2024-12-07T07:32:06,665][INFO ][o.e.n.NativeAccess       ] [bk-agent-prod-gcp-1733547869421438593] Using native vector library; to disable start with -Dorg.elasticsearch.nativeaccess.enableVectorLibrary=false
[2024-12-07T07:32:06,684][INFO ][o.e.n.NativeAccess       ] [bk-agent-prod-gcp-1733547869421438593] Using [jdk] native provider and native methods for [Linux]
[2024-12-07T07:32:07,202][INFO ][o.a.l.i.v.PanamaVectorizationProvider] [bk-agent-prod-gcp-1733547869421438593] Java vector incubator API enabled; uses preferredBitSize=256; FMA enabled
[2024-12-07T07:32:09,747][INFO ][o.e.b.Elasticsearch      ] [bk-agent-prod-gcp-1733547869421438593] Bootstrapping java SecurityManager
[2024-12-07T07:32:10,843][INFO ][o.e.n.Node               ] [bk-agent-prod-gcp-1733547869421438593] version[9.0.0-SNAPSHOT], pid[400521], build[tar/39c7e0bc2fa6345cde605257c80182a83c2cc951/2024-12-07T05:07:27.538069906Z], OS[Linux/3.10.0-1160.119.1.el7.x86_64/amd64], JVM[Oracle Corporation/OpenJDK 64-Bit Server VM/23/23+37-2369]
[2024-12-07T07:32:10,844][INFO ][o.e.n.Node               ] [bk-agent-prod-gcp-1733547869421438593] JVM home [/tmp/elasticsearch/jdk], using bundled JDK [true]
[2024-12-07T07:32:10,845][INFO ][o.e.n.Node               ] [bk-agent-prod-gcp-1733547869421438593] JVM arguments [-Des.networkaddress.cache.ttl=60, -Des.networkaddress.cache.negative.ttl=10, -XX:+AlwaysPreTouch, -Xss1m, -Djava.awt.headless=true, -Dfile.encoding=UTF-8, -Djna.nosys=true, -XX:-OmitStackTraceInFastThrow, -Dio.netty.noUnsafe=true, -Dio.netty.noKeySetOptimization=true, -Dio.netty.recycler.maxCapacityPerThread=0, -Dlog4j.shutdownHookEnabled=false, -Dlog4j2.disable.jmx=true, -Dlog4j2.formatMsgNoLookups=true, -Djava.locale.providers=CLDR, -Des.distribution.type=tar, --enable-native-access=org.elasticsearch.nativeaccess,org.apache.lucene.core, -XX:ReplayDataFile=logs/replay_pid%p.log, -Djava.security.manager=allow, -XX:+UseG1GC, -Djava.io.tmpdir=/tmp/elasticsearch-5986498343888030181, --add-modules=jdk.incubator.vector, -XX:CompileCommand=dontinline,java/lang/invoke/MethodHandle.setAsTypeCache, -XX:CompileCommand=dontinline,java/lang/invoke/MethodHandle.asTypeUncached, -Dorg.apache.lucene.store.defaultReadAdvice=normal, -XX:+HeapDumpOnOutOfMemoryError, -XX:+ExitOnOutOfMemoryError, -XX:HeapDumpPath=data, -XX:ErrorFile=logs/hs_err_pid%p.log, -Xlog:gc*,gc+age=trace,safepoint:file=logs/gc.log:utctime,level,pid,tags:filecount=32,filesize=64m, -Xmx1g, -Xms1g, -XX:MaxDirectMemorySize=536870912, -XX:G1HeapRegionSize=4m, -XX:InitiatingHeapOccupancyPercent=30, -XX:G1ReservePercent=15, --module-path=/tmp/elasticsearch/lib, --add-modules=jdk.net, --add-modules=ALL-MODULE-PATH, -Djdk.module.main=org.elasticsearch.server]
[2024-12-07T07:32:10,846][INFO ][o.e.n.Node               ] [bk-agent-prod-gcp-1733547869421438593] Default Locale [en_US]
[2024-12-07T07:32:10,846][WARN ][o.e.n.Node               ] [bk-agent-prod-gcp-1733547869421438593] version [9.0.0-SNAPSHOT] is a pre-release version of Elasticsearch and is not suitable for production
[2024-12-07T07:32:11,613][INFO ][o.e.c.u.FeatureFlag      ] [bk-agent-prod-gcp-1733547869421438593] The current build is a snapshot, feature flag [esql_semantic_text] is enabled
[2024-12-07T07:32:11,836][INFO ][o.e.c.u.FeatureFlag      ] [bk-agent-prod-gcp-1733547869421438593] The current build is a snapshot, feature flag [esql_inlinestats] is enabled
[2024-12-07T07:32:12,610][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [repository-url]
[2024-12-07T07:32:12,611][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [rest-root]
[2024-12-07T07:32:12,611][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [x-pack-core]
[2024-12-07T07:32:12,612][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [x-pack-redact]
[2024-12-07T07:32:12,612][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [ingest-user-agent]
[2024-12-07T07:32:12,612][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [x-pack-async-search]
[2024-12-07T07:32:12,612][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [test-error-query]
[2024-12-07T07:32:12,613][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [x-pack-monitoring]
[2024-12-07T07:32:12,613][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [repository-s3]
[2024-12-07T07:32:12,613][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [x-pack-analytics]
[2024-12-07T07:32:12,613][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [x-pack-esql-core]
[2024-12-07T07:32:12,613][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [x-pack-ent-search]
[2024-12-07T07:32:12,614][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [x-pack-autoscaling]
[2024-12-07T07:32:12,614][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [lang-painless]
[2024-12-07T07:32:12,614][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [x-pack-ml]
[2024-12-07T07:32:12,614][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [test-die-with-dignity]
[2024-12-07T07:32:12,614][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [lang-mustache]
[2024-12-07T07:32:12,615][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [legacy-geo]
[2024-12-07T07:32:12,615][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [logsdb]
[2024-12-07T07:32:12,615][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [x-pack-ql]
[2024-12-07T07:32:12,615][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [rank-rrf]
[2024-12-07T07:32:12,616][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [analysis-common]
[2024-12-07T07:32:12,616][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [health-shards-availability]
[2024-12-07T07:32:12,616][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [transport-netty4]
[2024-12-07T07:32:12,616][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [aggregations]
[2024-12-07T07:32:12,616][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [ingest-common]
[2024-12-07T07:32:12,617][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [frozen-indices]
[2024-12-07T07:32:12,617][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [x-pack-identity-provider]
[2024-12-07T07:32:12,617][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [x-pack-shutdown]
[2024-12-07T07:32:12,617][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [x-pack-text-structure]
[2024-12-07T07:32:12,617][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [snapshot-repo-test-kit]
[2024-12-07T07:32:12,618][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [test-delayed-aggs]
[2024-12-07T07:32:12,618][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [ml-package-loader]
[2024-12-07T07:32:12,618][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [kibana]
[2024-12-07T07:32:12,618][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [test-esql-heap-attack]
[2024-12-07T07:32:12,618][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [constant-keyword]
[2024-12-07T07:32:12,619][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [x-pack-logstash]
[2024-12-07T07:32:12,619][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [x-pack-ccr]
[2024-12-07T07:32:12,619][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [x-pack-graph]
[2024-12-07T07:32:12,619][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [x-pack-esql]
[2024-12-07T07:32:12,619][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [parent-join]
[2024-12-07T07:32:12,619][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [x-pack-enrich]
[2024-12-07T07:32:12,620][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [counted-keyword]
[2024-12-07T07:32:12,620][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [repositories-metering-api]
[2024-12-07T07:32:12,620][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [transform]
[2024-12-07T07:32:12,620][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [repository-azure]
[2024-12-07T07:32:12,620][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [dot-prefix-validation]
[2024-12-07T07:32:12,621][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [repository-gcs]
[2024-12-07T07:32:12,621][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [x-pack-otel-data]
[2024-12-07T07:32:12,621][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [spatial]
[2024-12-07T07:32:12,621][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [apm]
[2024-12-07T07:32:12,621][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [mapper-extras]
[2024-12-07T07:32:12,622][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [mapper-version]
[2024-12-07T07:32:12,622][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [test-jvm-crash]
[2024-12-07T07:32:12,622][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [x-pack-rollup]
[2024-12-07T07:32:12,622][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [percolator]
[2024-12-07T07:32:12,622][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [x-pack-migrate]
[2024-12-07T07:32:12,622][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [data-streams]
[2024-12-07T07:32:12,623][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [x-pack-stack]
[2024-12-07T07:32:12,623][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [rank-eval]
[2024-12-07T07:32:12,623][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [reindex]
[2024-12-07T07:32:12,623][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [test-apm-integration]
[2024-12-07T07:32:12,623][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [x-pack-security]
[2024-12-07T07:32:12,623][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [blob-cache]
[2024-12-07T07:32:12,624][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [searchable-snapshots]
[2024-12-07T07:32:12,624][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [x-pack-slm]
[2024-12-07T07:32:12,624][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [x-pack-geoip-enterprise-downloader]
[2024-12-07T07:32:12,624][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [test-latency-simulating-directory]
[2024-12-07T07:32:12,624][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [snapshot-based-recoveries]
[2024-12-07T07:32:12,625][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [x-pack-watcher]
[2024-12-07T07:32:12,625][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [old-lucene-versions]
[2024-12-07T07:32:12,625][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [x-pack-ilm]
[2024-12-07T07:32:12,625][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [x-pack-inference]
[2024-12-07T07:32:12,625][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [x-pack-voting-only-node]
[2024-12-07T07:32:12,626][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [x-pack-deprecation]
[2024-12-07T07:32:12,626][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [x-pack-fleet]
[2024-12-07T07:32:12,626][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [x-pack-aggregate-metric]
[2024-12-07T07:32:12,626][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [x-pack-downsample]
[2024-12-07T07:32:12,626][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [x-pack-profiling]
[2024-12-07T07:32:12,626][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [ingest-geoip]
[2024-12-07T07:32:12,627][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [x-pack-write-load-forecaster]
[2024-12-07T07:32:12,627][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [search-business-rules]
[2024-12-07T07:32:12,627][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [ingest-attachment]
[2024-12-07T07:32:12,627][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [wildcard]
[2024-12-07T07:32:12,627][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [x-pack-apm-data]
[2024-12-07T07:32:12,627][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [unsigned-long]
[2024-12-07T07:32:12,627][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [x-pack-sql]
[2024-12-07T07:32:12,628][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [runtime-fields-common]
[2024-12-07T07:32:12,628][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [x-pack-async]
[2024-12-07T07:32:12,628][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [x-pack-kql]
[2024-12-07T07:32:12,628][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [vector-tile]
[2024-12-07T07:32:12,628][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [lang-expression]
[2024-12-07T07:32:12,628][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733547869421438593] loaded module [x-pack-eql]
[2024-12-07T07:32:12,878][INFO ][o.e.c.u.FeatureFlag      ] [bk-agent-prod-gcp-1733547869421438593] The current build is a snapshot, feature flag [failure_store] is enabled
[2024-12-07T07:32:13,721][INFO ][o.e.e.NodeEnvironment    ] [bk-agent-prod-gcp-1733547869421438593] using [1] data paths, mounts [[/ (/dev/sda2)]], net usable_space [270.1gb], net total_space [349.7gb], types [xfs]
[2024-12-07T07:32:13,721][INFO ][o.e.e.NodeEnvironment    ] [bk-agent-prod-gcp-1733547869421438593] heap size [1gb], compressed ordinary object pointers [true]
[2024-12-07T07:32:13,734][INFO ][o.e.n.Node               ] [bk-agent-prod-gcp-1733547869421438593] node name [bk-agent-prod-gcp-1733547869421438593], node ID [N6E_kFKRSiWckCpHJCbBKQ], cluster name [elasticsearch], roles [data_hot, ml, data_frozen, ingest, data_cold, data, remote_cluster_client, master, data_warm, data_content, transform]
[2024-12-07T07:32:17,936][INFO ][o.e.c.u.FeatureFlag      ] [bk-agent-prod-gcp-1733547869421438593] The current build is a snapshot, feature flag [connector_secrets] is enabled
[2024-12-07T07:32:18,070][INFO ][o.e.i.r.RecoverySettings ] [bk-agent-prod-gcp-1733547869421438593] using rate limit [40mb] with [default=40mb, read=0b, write=0b, max=0b]
[2024-12-07T07:32:18,150][INFO ][o.e.c.u.FeatureFlag      ] [bk-agent-prod-gcp-1733547869421438593] The current build is a snapshot, feature flag [multi_dense_vector] is enabled
[2024-12-07T07:32:18,249][INFO ][o.e.c.u.FeatureFlag      ] [bk-agent-prod-gcp-1733547869421438593] The current build is a snapshot, feature flag [sub_objects_auto] is enabled
[2024-12-07T07:32:18,279][INFO ][o.e.f.FeatureService     ] [bk-agent-prod-gcp-1733547869421438593] Registered local node features [cluster.reroute.ignores_metric_param, cluster.stats.source_modes, data_stream.auto_sharding, data_stream.lifecycle.global_retention, data_stream.rollover.lazy, desired_node.version_deprecated, esql.agg_values, esql.async_query, esql.base64_decode_encode, esql.casting_operator, esql.counter_types, esql.disable_nullable_opts, esql.from_options, esql.metadata_fields, esql.metrics_counter_fields, esql.metrics_syntax, esql.mv_ordering_sorted_ascending, esql.mv_sort, esql.resolve_fields_api, esql.spatial_points_from_source, esql.spatial_shapes, esql.st_centroid_agg, esql.st_contains_within, esql.st_disjoint, esql.st_intersects, esql.st_x_y, esql.string_literal_auto_casting, esql.string_literal_auto_casting_extended, esql.timespan_abbreviations, features_supported, file_settings, flattened.ignore_above_support, geoip.downloader.database.configuration, get_database_configuration_action.multi_node, health.dsl.info, health.extended_repository_indicator, knn_retriever_supported, license-trial-independent-version, logsdb_telemetry, logsdb_telemetry_stats, lucene_10_upgrade, mapper.boolean_dimension, mapper.bwc_workaround_9_0, mapper.flattened.ignore_above_with_arrays_support, mapper.ignore_above_index_level_setting, mapper.index_sorting_on_nested, mapper.keyword_dimension_ignore_above, mapper.keyword_normalizer_synthetic_source, mapper.pass_through_priority, mapper.query_index_mode, mapper.range.null_values_off_by_one_fix, mapper.segment_level_fields_stats, mapper.source.synthetic_source_copy_to_fix, mapper.source.synthetic_source_copy_to_inside_objects_fix, mapper.source.synthetic_source_fallback, mapper.source.synthetic_source_stored_fields_advance_fix, mapper.source.synthetic_source_with_copy_to_and_doc_values_false, mapper.subobjects_auto, mapper.subobjects_auto_fixes, mapper.synthetic_source_keep, mapper.track_ignored_source, mapper.vectors.bbq, mapper.vectors.bit_vectors, mapper.vectors.int4_quantization, put_database_configuration_action.ipinfo, query_rule_list_types, query_rule_retriever_supported, query_rules.test, random_reranker_retriever_supported, repositories.supports_usage_stats, rest.capabilities_action, rest.local_only_capabilities, retrievers_supported, routing.boolean_routing_path, routing.multi_value_routing_path, rrf_retriever_composition_supported, rrf_retriever_supported, script.hamming, script.term_stats, search.vectors.k_param_supported, security.migration_framework, security.role_mapping_cleanup, security.roles_metadata_flattened, semantic_text.default_elser_2, semantic_text.inner_hits, semantic_text.search_inference_id, simulate.component.template.substitutions, simulate.index.template.substitutions, simulate.mapping.addition, simulate.mapping.validation, simulate.mapping.validation.templates, simulate.support.non.template.mapping, slm.interval_schedule, snapshot.repository_verify_integrity, standard_retriever_supported, stats.include_disk_thresholds, stats.tier_creation_date, text_similarity_reranker_retriever_composition_supported, text_similarity_reranker_retriever_supported, tsdb.ts_routing_hash_doc_value_parse_byte_ref, unified_highlighter_matched_fields, usage.data_tiers.precalculate_stats]
[2024-12-07T07:32:18,318][INFO ][o.e.c.m.DataStreamGlobalRetentionSettings] [bk-agent-prod-gcp-1733547869421438593] Updated default factory retention to [null]
[2024-12-07T07:32:18,318][INFO ][o.e.c.m.DataStreamGlobalRetentionSettings] [bk-agent-prod-gcp-1733547869421438593] Updated max factory retention to [null]
[2024-12-07T07:32:28,811][ERROR][o.e.b.Elasticsearch      ] [bk-agent-prod-gcp-1733547869421438593] fatal exception while booting Elasticsearch org.elasticsearch.ElasticsearchException: Failure running machine learning native code. This could be due to running on an unsupported OS or distribution, missing OS libraries, or a problem with the temp directory. To bypass this problem by running Elasticsearch without machine learning functionality set [xpack.ml.enabled: false].
	at org.elasticsearch.ml@9.0.0-SNAPSHOT/org.elasticsearch.xpack.ml.MachineLearning.createComponents(MachineLearning.java:1047)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.node.NodeConstruction.lambda$construct$16(NodeConstruction.java:892)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.plugins.PluginsService.lambda$flatMap$0(PluginsService.java:186)
	at java.base/java.util.stream.ReferencePipeline$7$1FlatMap.accept(ReferencePipeline.java:289)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:215)
	at java.base/java.util.AbstractList$RandomAccessSpliterator.forEachRemaining(AbstractList.java:722)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:570)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:560)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:636)
	at java.base/java.util.stream.AbstractPipeline.evaluateToArrayNode(AbstractPipeline.java:291)
	at java.base/java.util.stream.ReferencePipeline.toArray(ReferencePipeline.java:656)
	at java.base/java.util.stream.ReferencePipeline.toArray(ReferencePipeline.java:662)
	at java.base/java.util.stream.ReferencePipeline.toList(ReferencePipeline.java:667)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.node.NodeConstruction.construct(NodeConstruction.java:914)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.node.NodeConstruction.prepareConstruction(NodeConstruction.java:294)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.node.Node.<init>(Node.java:185)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.bootstrap.Elasticsearch$2.<init>(Elasticsearch.java:260)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.bootstrap.Elasticsearch.initPhase3(Elasticsearch.java:260)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:78)] stderr = [ERROR: Elasticsearch did not exit normally - check the logs at /tmp/elasticsearch/logs/elasticsearch.log

ERROR: Elasticsearch died while starting up, with exit code 1]]
Expected: <0>
     but: was <1>
```

**Issue Reasons:**
- [main] 8 failures in test test43AutoconfigurationNotTriggeredWhenTlsAlreadyConfigured (1.6% fail rate in 498 executions)
- [main] 2 failures in step ubuntu-2004_destructivedistrotest.archives_packaging-tests-unix-sample (1.4% fail rate in 143 executions)
- [main] 2 failures in step rhel-8_destructivedistrotest.archives_packaging-tests-unix-sample (1.4% fail rate in 141 executions)
- [main] 2 failures in pipeline elasticsearch-pull-request (1.4% fail rate in 146 executions)

**Note:**
This issue was created using new test triage automation. Please report issues or feedback to es-delivery.",elasticsearchmachine,closed,"[':Delivery/Packaging', '>test-failure', 'Team:Delivery', 'needs:risk']",https://github.com/elastic/elasticsearch/issues/118202,2024-12-07T05:17:37Z,3,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/118202,"{
  ""application_resource"": ""no""
}"
64,118196,[CI] ArchiveTests test42AutoconfigurationNotTriggeredWhenNodeCannotBecomeMaster failing,"**Build Scans:**
- [elasticsearch-periodic-packaging #4925 / rhel-7_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/ugf5zfr3izw3s)
- [elasticsearch-periodic-packaging #4925 / ubuntu-1804_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/rxixs3etyfzrm)
- [elasticsearch-periodic-packaging #4925 / oraclelinux-7_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/cgeevbbl6xrbo)
- [elasticsearch-periodic-packaging #4925 / sles-12_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/o5fw7apg4ojki)
- [elasticsearch-pull-request #45144 / windows-2022_default-windows-archive_packaging-tests-windows-sample](https://gradle-enterprise.elastic.co/s/ncivntty6pgjm)
- [elasticsearch-pull-request #45144 / ubuntu-2004_destructivedistrotest.archives_packaging-tests-unix-sample](https://gradle-enterprise.elastic.co/s/lb333nbs6wdeu)
- [elasticsearch-pull-request #45144 / rhel-8_destructivedistrotest.archives_packaging-tests-unix-sample](https://gradle-enterprise.elastic.co/s/cnss6tqpc5lcm)

**Reproduction Line:**
```
null
```

**Applicable branches:**
main

**Reproduces locally?:**
N/A

**Failure History:**
[See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&_a=(controlGroupState:(initialChildControlState:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:task.keyword,order:0,selectedOptions:!(),title:'GradleTask',type:optionsListControl),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:className.keyword,order:1,selectedOptions:!(org.elasticsearch.packaging.test.ArchiveTests),title:'Suite',type:optionsListControl),'144933da-5c1b-4257-a969-7f43455a7901':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:name.keyword,order:2,selectedOptions:!(test42AutoconfigurationNotTriggeredWhenNodeCannotBecomeMaster),title:'Test',type:optionsListControl)))))

**Failure Message:**
```
java.lang.AssertionError: Startup command should succeed. Stderr: [exitCode = [1] stdout = [Skipping security auto configuration because the node is configured such that it cannot become master.
CompileCommand: dontinline java/lang/invoke/MethodHandle.setAsTypeCache bool dontinline = true
CompileCommand: dontinline java/lang/invoke/MethodHandle.asTypeUncached bool dontinline = true
[2024-12-06T23:30:26,879][WARN ][x-pack-ml-controller-stderr] [bk-agent-prod-gcp-1733518983339518013] /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/controller: /lib64/libc.so.6: version `GLIBC_2.26' not found (required by /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/../lib/libstdc++.so.6)
[2024-12-06T23:30:26,910][WARN ][x-pack-ml-controller-stderr] [bk-agent-prod-gcp-1733518983339518013] /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/controller: /lib64/libc.so.6: version `GLIBC_2.25' not found (required by /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/../lib/libstdc++.so.6)
[2024-12-06T23:30:26,911][WARN ][x-pack-ml-controller-stderr] [bk-agent-prod-gcp-1733518983339518013] /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/controller: /lib64/libc.so.6: version `GLIBC_2.18' not found (required by /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/../lib/libstdc++.so.6)
[2024-12-06T23:30:26,911][WARN ][x-pack-ml-controller-stderr] [bk-agent-prod-gcp-1733518983339518013] /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/controller: /lib64/libc.so.6: version `GLIBC_2.28' not found (required by /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/../lib/libxml2.so.2)
[2024-12-06T23:30:26,911][WARN ][x-pack-ml-controller-stderr] [bk-agent-prod-gcp-1733518983339518013] /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/controller: /lib64/libc.so.6: version `GLIBC_2.28' not found (required by /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/../lib/libboost_filesystem-gcc13-mt-x64-1_83.so.1.83.0)
[2024-12-06T23:30:26,912][WARN ][x-pack-ml-controller-stderr] [bk-agent-prod-gcp-1733518983339518013] /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/controller: /lib64/libc.so.6: version `GLIBC_2.25' not found (required by /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/../lib/libboost_filesystem-gcc13-mt-x64-1_83.so.1.83.0)
[2024-12-06T23:30:27,053][INFO ][o.e.n.NativeAccess       ] [bk-agent-prod-gcp-1733518983339518013] Using native vector library; to disable start with -Dorg.elasticsearch.nativeaccess.enableVectorLibrary=false
[2024-12-06T23:30:27,068][INFO ][o.e.n.NativeAccess       ] [bk-agent-prod-gcp-1733518983339518013] Using [jdk] native provider and native methods for [Linux]
[2024-12-06T23:30:27,164][INFO ][o.a.l.i.v.PanamaVectorizationProvider] [bk-agent-prod-gcp-1733518983339518013] Java vector incubator API enabled; uses preferredBitSize=256; FMA enabled
[2024-12-06T23:30:29,861][INFO ][o.e.b.Elasticsearch      ] [bk-agent-prod-gcp-1733518983339518013] Bootstrapping java SecurityManager
[2024-12-06T23:30:30,857][INFO ][o.e.n.Node               ] [bk-agent-prod-gcp-1733518983339518013] version[9.0.0-SNAPSHOT], pid[401437], build[tar/c580024ea92fd561089380eb4078f576c47b72b9/2024-12-06T21:06:25.029180481Z], OS[Linux/3.10.0-1160.119.1.el7.x86_64/amd64], JVM[Oracle Corporation/OpenJDK 64-Bit Server VM/23/23+37-2369]
[2024-12-06T23:30:30,858][INFO ][o.e.n.Node               ] [bk-agent-prod-gcp-1733518983339518013] JVM home [/tmp/elasticsearch/jdk], using bundled JDK [true]
[2024-12-06T23:30:30,858][INFO ][o.e.n.Node               ] [bk-agent-prod-gcp-1733518983339518013] JVM arguments [-Des.networkaddress.cache.ttl=60, -Des.networkaddress.cache.negative.ttl=10, -XX:+AlwaysPreTouch, -Xss1m, -Djava.awt.headless=true, -Dfile.encoding=UTF-8, -Djna.nosys=true, -XX:-OmitStackTraceInFastThrow, -Dio.netty.noUnsafe=true, -Dio.netty.noKeySetOptimization=true, -Dio.netty.recycler.maxCapacityPerThread=0, -Dlog4j.shutdownHookEnabled=false, -Dlog4j2.disable.jmx=true, -Dlog4j2.formatMsgNoLookups=true, -Djava.locale.providers=CLDR, -Des.distribution.type=tar, --enable-native-access=org.elasticsearch.nativeaccess,org.apache.lucene.core, -XX:ReplayDataFile=logs/replay_pid%p.log, -Djava.security.manager=allow, -XX:+UseG1GC, -Djava.io.tmpdir=/tmp/elasticsearch-6240419692830938203, --add-modules=jdk.incubator.vector, -XX:CompileCommand=dontinline,java/lang/invoke/MethodHandle.setAsTypeCache, -XX:CompileCommand=dontinline,java/lang/invoke/MethodHandle.asTypeUncached, -Dorg.apache.lucene.store.defaultReadAdvice=normal, -XX:+HeapDumpOnOutOfMemoryError, -XX:+ExitOnOutOfMemoryError, -XX:HeapDumpPath=data, -XX:ErrorFile=logs/hs_err_pid%p.log, -Xlog:gc*,gc+age=trace,safepoint:file=logs/gc.log:utctime,level,pid,tags:filecount=32,filesize=64m, -Xmx1g, -Xms1g, -XX:MaxDirectMemorySize=536870912, -XX:G1HeapRegionSize=4m, -XX:InitiatingHeapOccupancyPercent=30, -XX:G1ReservePercent=15, --module-path=/tmp/elasticsearch/lib, --add-modules=jdk.net, --add-modules=ALL-MODULE-PATH, -Djdk.module.main=org.elasticsearch.server]
[2024-12-06T23:30:30,860][INFO ][o.e.n.Node               ] [bk-agent-prod-gcp-1733518983339518013] Default Locale [en_US]
[2024-12-06T23:30:30,860][WARN ][o.e.n.Node               ] [bk-agent-prod-gcp-1733518983339518013] version [9.0.0-SNAPSHOT] is a pre-release version of Elasticsearch and is not suitable for production
[2024-12-06T23:30:31,677][INFO ][o.e.c.u.FeatureFlag      ] [bk-agent-prod-gcp-1733518983339518013] The current build is a snapshot, feature flag [esql_semantic_text] is enabled
[2024-12-06T23:30:31,917][INFO ][o.e.c.u.FeatureFlag      ] [bk-agent-prod-gcp-1733518983339518013] The current build is a snapshot, feature flag [esql_inlinestats] is enabled
[2024-12-06T23:30:32,705][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [repository-url]
[2024-12-06T23:30:32,706][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [rest-root]
[2024-12-06T23:30:32,706][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [x-pack-core]
[2024-12-06T23:30:32,707][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [x-pack-redact]
[2024-12-06T23:30:32,707][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [ingest-user-agent]
[2024-12-06T23:30:32,707][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [x-pack-async-search]
[2024-12-06T23:30:32,707][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [test-error-query]
[2024-12-06T23:30:32,708][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [x-pack-monitoring]
[2024-12-06T23:30:32,708][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [repository-s3]
[2024-12-06T23:30:32,708][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [x-pack-analytics]
[2024-12-06T23:30:32,708][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [x-pack-esql-core]
[2024-12-06T23:30:32,708][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [x-pack-ent-search]
[2024-12-06T23:30:32,709][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [x-pack-autoscaling]
[2024-12-06T23:30:32,709][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [lang-painless]
[2024-12-06T23:30:32,709][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [x-pack-ml]
[2024-12-06T23:30:32,709][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [test-die-with-dignity]
[2024-12-06T23:30:32,709][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [lang-mustache]
[2024-12-06T23:30:32,709][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [legacy-geo]
[2024-12-06T23:30:32,710][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [logsdb]
[2024-12-06T23:30:32,710][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [x-pack-ql]
[2024-12-06T23:30:32,710][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [rank-rrf]
[2024-12-06T23:30:32,710][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [analysis-common]
[2024-12-06T23:30:32,711][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [health-shards-availability]
[2024-12-06T23:30:32,711][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [transport-netty4]
[2024-12-06T23:30:32,711][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [aggregations]
[2024-12-06T23:30:32,711][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [ingest-common]
[2024-12-06T23:30:32,712][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [frozen-indices]
[2024-12-06T23:30:32,712][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [x-pack-identity-provider]
[2024-12-06T23:30:32,712][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [x-pack-shutdown]
[2024-12-06T23:30:32,712][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [x-pack-text-structure]
[2024-12-06T23:30:32,713][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [snapshot-repo-test-kit]
[2024-12-06T23:30:32,713][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [test-delayed-aggs]
[2024-12-06T23:30:32,713][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [ml-package-loader]
[2024-12-06T23:30:32,713][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [kibana]
[2024-12-06T23:30:32,713][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [test-esql-heap-attack]
[2024-12-06T23:30:32,714][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [constant-keyword]
[2024-12-06T23:30:32,714][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [x-pack-logstash]
[2024-12-06T23:30:32,714][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [x-pack-ccr]
[2024-12-06T23:30:32,714][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [x-pack-graph]
[2024-12-06T23:30:32,714][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [x-pack-esql]
[2024-12-06T23:30:32,714][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [parent-join]
[2024-12-06T23:30:32,715][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [x-pack-enrich]
[2024-12-06T23:30:32,715][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [counted-keyword]
[2024-12-06T23:30:32,715][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [repositories-metering-api]
[2024-12-06T23:30:32,715][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [transform]
[2024-12-06T23:30:32,715][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [repository-azure]
[2024-12-06T23:30:32,715][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [dot-prefix-validation]
[2024-12-06T23:30:32,716][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [repository-gcs]
[2024-12-06T23:30:32,716][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [x-pack-otel-data]
[2024-12-06T23:30:32,716][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [spatial]
[2024-12-06T23:30:32,716][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [apm]
[2024-12-06T23:30:32,716][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [mapper-extras]
[2024-12-06T23:30:32,716][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [mapper-version]
[2024-12-06T23:30:32,717][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [test-jvm-crash]
[2024-12-06T23:30:32,717][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [x-pack-rollup]
[2024-12-06T23:30:32,717][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [percolator]
[2024-12-06T23:30:32,717][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [x-pack-migrate]
[2024-12-06T23:30:32,717][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [data-streams]
[2024-12-06T23:30:32,717][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [x-pack-stack]
[2024-12-06T23:30:32,717][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [rank-eval]
[2024-12-06T23:30:32,718][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [reindex]
[2024-12-06T23:30:32,718][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [test-apm-integration]
[2024-12-06T23:30:32,718][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [x-pack-security]
[2024-12-06T23:30:32,718][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [blob-cache]
[2024-12-06T23:30:32,718][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [searchable-snapshots]
[2024-12-06T23:30:32,718][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [x-pack-slm]
[2024-12-06T23:30:32,719][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [x-pack-geoip-enterprise-downloader]
[2024-12-06T23:30:32,719][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [test-latency-simulating-directory]
[2024-12-06T23:30:32,719][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [snapshot-based-recoveries]
[2024-12-06T23:30:32,719][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [x-pack-watcher]
[2024-12-06T23:30:32,719][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [old-lucene-versions]
[2024-12-06T23:30:32,719][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [x-pack-ilm]
[2024-12-06T23:30:32,720][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [x-pack-inference]
[2024-12-06T23:30:32,720][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [x-pack-voting-only-node]
[2024-12-06T23:30:32,720][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [x-pack-deprecation]
[2024-12-06T23:30:32,720][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [x-pack-fleet]
[2024-12-06T23:30:32,720][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [x-pack-aggregate-metric]
[2024-12-06T23:30:32,720][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [x-pack-downsample]
[2024-12-06T23:30:32,720][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [x-pack-profiling]
[2024-12-06T23:30:32,721][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [ingest-geoip]
[2024-12-06T23:30:32,721][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [x-pack-write-load-forecaster]
[2024-12-06T23:30:32,721][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [search-business-rules]
[2024-12-06T23:30:32,721][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [ingest-attachment]
[2024-12-06T23:30:32,721][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [wildcard]
[2024-12-06T23:30:32,721][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [x-pack-apm-data]
[2024-12-06T23:30:32,722][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [unsigned-long]
[2024-12-06T23:30:32,722][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [x-pack-sql]
[2024-12-06T23:30:32,722][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [runtime-fields-common]
[2024-12-06T23:30:32,722][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [x-pack-async]
[2024-12-06T23:30:32,722][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [x-pack-kql]
[2024-12-06T23:30:32,722][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [vector-tile]
[2024-12-06T23:30:32,722][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [lang-expression]
[2024-12-06T23:30:32,723][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733518983339518013] loaded module [x-pack-eql]
[2024-12-06T23:30:32,952][INFO ][o.e.c.u.FeatureFlag      ] [bk-agent-prod-gcp-1733518983339518013] The current build is a snapshot, feature flag [failure_store] is enabled
[2024-12-06T23:30:33,760][INFO ][o.e.e.NodeEnvironment    ] [bk-agent-prod-gcp-1733518983339518013] using [1] data paths, mounts [[/ (/dev/sda2)]], net usable_space [270gb], net total_space [349.7gb], types [xfs]
[2024-12-06T23:30:33,760][INFO ][o.e.e.NodeEnvironment    ] [bk-agent-prod-gcp-1733518983339518013] heap size [1gb], compressed ordinary object pointers [true]
[2024-12-06T23:30:33,776][INFO ][o.e.n.Node               ] [bk-agent-prod-gcp-1733518983339518013] node name [bk-agent-prod-gcp-1733518983339518013], node ID [og31mQPcQEePLdP7lgQxUA], cluster name [elasticsearch], roles [ingest]
[2024-12-06T23:30:37,306][INFO ][o.e.c.u.FeatureFlag      ] [bk-agent-prod-gcp-1733518983339518013] The current build is a snapshot, feature flag [connector_secrets] is enabled
[2024-12-06T23:30:37,439][INFO ][o.e.i.r.RecoverySettings ] [bk-agent-prod-gcp-1733518983339518013] using rate limit [40mb] with [default=40mb, read=0b, write=0b, max=0b]
[2024-12-06T23:30:37,521][INFO ][o.e.c.u.FeatureFlag      ] [bk-agent-prod-gcp-1733518983339518013] The current build is a snapshot, feature flag [multi_dense_vector] is enabled
[2024-12-06T23:30:37,621][INFO ][o.e.c.u.FeatureFlag      ] [bk-agent-prod-gcp-1733518983339518013] The current build is a snapshot, feature flag [sub_objects_auto] is enabled
[2024-12-06T23:30:37,653][INFO ][o.e.f.FeatureService     ] [bk-agent-prod-gcp-1733518983339518013] Registered local node features [cluster.reroute.ignores_metric_param, cluster.stats.source_modes, data_stream.auto_sharding, data_stream.lifecycle.global_retention, data_stream.rollover.lazy, desired_node.version_deprecated, esql.agg_values, esql.async_query, esql.base64_decode_encode, esql.casting_operator, esql.counter_types, esql.disable_nullable_opts, esql.from_options, esql.metadata_fields, esql.metrics_counter_fields, esql.metrics_syntax, esql.mv_ordering_sorted_ascending, esql.mv_sort, esql.resolve_fields_api, esql.spatial_points_from_source, esql.spatial_shapes, esql.st_centroid_agg, esql.st_contains_within, esql.st_disjoint, esql.st_intersects, esql.st_x_y, esql.string_literal_auto_casting, esql.string_literal_auto_casting_extended, esql.timespan_abbreviations, features_supported, file_settings, flattened.ignore_above_support, geoip.downloader.database.configuration, get_database_configuration_action.multi_node, health.dsl.info, health.extended_repository_indicator, knn_retriever_supported, license-trial-independent-version, logsdb_telemetry, logsdb_telemetry_stats, lucene_10_upgrade, mapper.boolean_dimension, mapper.bwc_workaround_9_0, mapper.flattened.ignore_above_with_arrays_support, mapper.ignore_above_index_level_setting, mapper.index_sorting_on_nested, mapper.keyword_dimension_ignore_above, mapper.keyword_normalizer_synthetic_source, mapper.pass_through_priority, mapper.query_index_mode, mapper.range.null_values_off_by_one_fix, mapper.segment_level_fields_stats, mapper.source.synthetic_source_copy_to_fix, mapper.source.synthetic_source_copy_to_inside_objects_fix, mapper.source.synthetic_source_fallback, mapper.source.synthetic_source_stored_fields_advance_fix, mapper.source.synthetic_source_with_copy_to_and_doc_values_false, mapper.subobjects_auto, mapper.subobjects_auto_fixes, mapper.synthetic_source_keep, mapper.track_ignored_source, mapper.vectors.bbq, mapper.vectors.bit_vectors, mapper.vectors.int4_quantization, put_database_configuration_action.ipinfo, query_rule_list_types, query_rule_retriever_supported, query_rules.test, random_reranker_retriever_supported, repositories.supports_usage_stats, rest.capabilities_action, rest.local_only_capabilities, retrievers_supported, routing.boolean_routing_path, routing.multi_value_routing_path, rrf_retriever_composition_supported, rrf_retriever_supported, script.hamming, script.term_stats, search.vectors.k_param_supported, security.migration_framework, security.role_mapping_cleanup, security.roles_metadata_flattened, semantic_text.default_elser_2, semantic_text.inner_hits, semantic_text.search_inference_id, simulate.component.template.substitutions, simulate.index.template.substitutions, simulate.mapping.addition, simulate.mapping.validation, simulate.mapping.validation.templates, simulate.support.non.template.mapping, slm.interval_schedule, snapshot.repository_verify_integrity, standard_retriever_supported, stats.include_disk_thresholds, stats.tier_creation_date, text_similarity_reranker_retriever_composition_supported, text_similarity_reranker_retriever_supported, tsdb.ts_routing_hash_doc_value_parse_byte_ref, unified_highlighter_matched_fields, usage.data_tiers.precalculate_stats]
[2024-12-06T23:30:37,692][INFO ][o.e.c.m.DataStreamGlobalRetentionSettings] [bk-agent-prod-gcp-1733518983339518013] Updated default factory retention to [null]
[2024-12-06T23:30:37,692][INFO ][o.e.c.m.DataStreamGlobalRetentionSettings] [bk-agent-prod-gcp-1733518983339518013] Updated max factory retention to [null]
[2024-12-06T23:30:48,194][ERROR][o.e.b.Elasticsearch      ] [bk-agent-prod-gcp-1733518983339518013] fatal exception while booting Elasticsearch org.elasticsearch.ElasticsearchException: Failure running machine learning native code. This could be due to running on an unsupported OS or distribution, missing OS libraries, or a problem with the temp directory. To bypass this problem by running Elasticsearch without machine learning functionality set [xpack.ml.enabled: false].
	at org.elasticsearch.ml@9.0.0-SNAPSHOT/org.elasticsearch.xpack.ml.MachineLearning.createComponents(MachineLearning.java:1047)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.node.NodeConstruction.lambda$construct$16(NodeConstruction.java:892)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.plugins.PluginsService.lambda$flatMap$0(PluginsService.java:186)
	at java.base/java.util.stream.ReferencePipeline$7$1FlatMap.accept(ReferencePipeline.java:289)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:215)
	at java.base/java.util.AbstractList$RandomAccessSpliterator.forEachRemaining(AbstractList.java:722)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:570)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:560)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:636)
	at java.base/java.util.stream.AbstractPipeline.evaluateToArrayNode(AbstractPipeline.java:291)
	at java.base/java.util.stream.ReferencePipeline.toArray(ReferencePipeline.java:656)
	at java.base/java.util.stream.ReferencePipeline.toArray(ReferencePipeline.java:662)
	at java.base/java.util.stream.ReferencePipeline.toList(ReferencePipeline.java:667)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.node.NodeConstruction.construct(NodeConstruction.java:914)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.node.NodeConstruction.prepareConstruction(NodeConstruction.java:294)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.node.Node.<init>(Node.java:185)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.bootstrap.Elasticsearch$2.<init>(Elasticsearch.java:260)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.bootstrap.Elasticsearch.initPhase3(Elasticsearch.java:260)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:78)] stderr = [ERROR: Elasticsearch did not exit normally - check the logs at /tmp/elasticsearch/logs/elasticsearch.log

ERROR: Elasticsearch died while starting up, with exit code 1]]
Expected: <0>
     but: was <1>
```

**Issue Reasons:**
- [main] 7 failures in test test42AutoconfigurationNotTriggeredWhenNodeCannotBecomeMaster (1.6% fail rate in 426 executions)

**Note:**
This issue was created using new test triage automation. Please report issues or feedback to es-delivery.",elasticsearchmachine,closed,"[':Delivery/Packaging', '>test-failure', 'Team:Delivery', 'needs:risk']",https://github.com/elastic/elasticsearch/issues/118196,2024-12-06T21:17:25Z,3,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/118196,"{
  ""application_resource"": ""unsure""
}"
65,118110,[CI] ArchiveTests test41AutoconfigurationNotTriggeredWhenNodeCannotContainData failing,"**Build Scans:**
- [elasticsearch-periodic-packaging #4919 / rhel-7_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/recdodil5bcf6)
- [elasticsearch-periodic-packaging #4919 / ubuntu-1804_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/rn2zksv2gv4i6)
- [elasticsearch-periodic-packaging #4919 / sles-12_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/fqqbyku5tlwhe)
- [elasticsearch-periodic-packaging #4919 / oraclelinux-7_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/omey5foxvc3bq)
- [elasticsearch-pull-request #45013 / oraclelinux-7_archives_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/ardjbdszhf4om)
- [elasticsearch-pull-request #45013 / rhel-7_archives_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/bxodhn36l3hfm)
- [elasticsearch-pull-request #45013 / sles-12_archives_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/cp6mm6yq3y3rq)
- [elasticsearch-pull-request #45013 / ubuntu-1804_archives_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/kobepzls652ws)
- [elasticsearch-periodic-packaging #4913 / ubuntu-1804_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/ljpftjup6yfp2)
- [elasticsearch-periodic-packaging #4913 / rhel-7_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/gndcnzfqryevs)

**Reproduction Line:**
```
null
```

**Applicable branches:**
main

**Reproduces locally?:**
N/A

**Failure History:**
[See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&_a=(controlGroupState:(initialChildControlState:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:task.keyword,order:0,selectedOptions:!(),title:'GradleTask',type:optionsListControl),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:className.keyword,order:1,selectedOptions:!(org.elasticsearch.packaging.test.ArchiveTests),title:'Suite',type:optionsListControl),'144933da-5c1b-4257-a969-7f43455a7901':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:name.keyword,order:2,selectedOptions:!(test41AutoconfigurationNotTriggeredWhenNodeCannotContainData),title:'Test',type:optionsListControl)))))

**Failure Message:**
```
java.lang.AssertionError: Startup command should succeed. Stderr: [exitCode = [1] stdout = [Skipping security auto configuration because the node is configured such that it cannot become master.
CompileCommand: dontinline java/lang/invoke/MethodHandle.setAsTypeCache bool dontinline = true
CompileCommand: dontinline java/lang/invoke/MethodHandle.asTypeUncached bool dontinline = true
[2024-12-06T15:32:17,208][WARN ][x-pack-ml-controller-stderr] [bk-agent-prod-gcp-1733490206923469488] /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/controller: /lib64/libc.so.6: version `GLIBC_2.26' not found (required by /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/../lib/libstdc++.so.6)
[2024-12-06T15:32:17,232][WARN ][x-pack-ml-controller-stderr] [bk-agent-prod-gcp-1733490206923469488] /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/controller: /lib64/libc.so.6: version `GLIBC_2.25' not found (required by /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/../lib/libstdc++.so.6)
[2024-12-06T15:32:17,232][WARN ][x-pack-ml-controller-stderr] [bk-agent-prod-gcp-1733490206923469488] /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/controller: /lib64/libc.so.6: version `GLIBC_2.18' not found (required by /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/../lib/libstdc++.so.6)
[2024-12-06T15:32:17,233][WARN ][x-pack-ml-controller-stderr] [bk-agent-prod-gcp-1733490206923469488] /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/controller: /lib64/libc.so.6: version `GLIBC_2.28' not found (required by /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/../lib/libxml2.so.2)
[2024-12-06T15:32:17,233][WARN ][x-pack-ml-controller-stderr] [bk-agent-prod-gcp-1733490206923469488] /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/controller: /lib64/libc.so.6: version `GLIBC_2.28' not found (required by /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/../lib/libboost_filesystem-gcc13-mt-x64-1_83.so.1.83.0)
[2024-12-06T15:32:17,233][WARN ][x-pack-ml-controller-stderr] [bk-agent-prod-gcp-1733490206923469488] /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/controller: /lib64/libc.so.6: version `GLIBC_2.25' not found (required by /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/../lib/libboost_filesystem-gcc13-mt-x64-1_83.so.1.83.0)
[2024-12-06T15:32:17,413][INFO ][o.e.n.NativeAccess       ] [bk-agent-prod-gcp-1733490206923469488] Using native vector library; to disable start with -Dorg.elasticsearch.nativeaccess.enableVectorLibrary=false
[2024-12-06T15:32:17,432][INFO ][o.e.n.NativeAccess       ] [bk-agent-prod-gcp-1733490206923469488] Using [jdk] native provider and native methods for [Linux]
[2024-12-06T15:32:18,167][INFO ][o.a.l.i.v.PanamaVectorizationProvider] [bk-agent-prod-gcp-1733490206923469488] Java vector incubator API enabled; uses preferredBitSize=256; FMA enabled
[2024-12-06T15:32:20,833][INFO ][o.e.b.Elasticsearch      ] [bk-agent-prod-gcp-1733490206923469488] Bootstrapping java SecurityManager
[2024-12-06T15:32:21,879][INFO ][o.e.n.Node               ] [bk-agent-prod-gcp-1733490206923469488] version[9.0.0-SNAPSHOT], pid[402674], build[tar/a0ac839189431e016ea810ac1e48b6932b6daa0b/2024-12-06T13:06:50.887027954Z], OS[Linux/3.10.0-1160.119.1.el7.x86_64/amd64], JVM[Oracle Corporation/OpenJDK 64-Bit Server VM/23/23+37-2369]
[2024-12-06T15:32:21,880][INFO ][o.e.n.Node               ] [bk-agent-prod-gcp-1733490206923469488] JVM home [/tmp/elasticsearch/jdk], using bundled JDK [true]
[2024-12-06T15:32:21,880][INFO ][o.e.n.Node               ] [bk-agent-prod-gcp-1733490206923469488] JVM arguments [-Des.networkaddress.cache.ttl=60, -Des.networkaddress.cache.negative.ttl=10, -XX:+AlwaysPreTouch, -Xss1m, -Djava.awt.headless=true, -Dfile.encoding=UTF-8, -Djna.nosys=true, -XX:-OmitStackTraceInFastThrow, -Dio.netty.noUnsafe=true, -Dio.netty.noKeySetOptimization=true, -Dio.netty.recycler.maxCapacityPerThread=0, -Dlog4j.shutdownHookEnabled=false, -Dlog4j2.disable.jmx=true, -Dlog4j2.formatMsgNoLookups=true, -Djava.locale.providers=CLDR, -Des.distribution.type=tar, --enable-native-access=org.elasticsearch.nativeaccess,org.apache.lucene.core, -XX:ReplayDataFile=logs/replay_pid%p.log, -Djava.security.manager=allow, -XX:+UseG1GC, -Djava.io.tmpdir=/tmp/elasticsearch-176149181107187757, --add-modules=jdk.incubator.vector, -XX:CompileCommand=dontinline,java/lang/invoke/MethodHandle.setAsTypeCache, -XX:CompileCommand=dontinline,java/lang/invoke/MethodHandle.asTypeUncached, -Dorg.apache.lucene.store.defaultReadAdvice=normal, -XX:+HeapDumpOnOutOfMemoryError, -XX:+ExitOnOutOfMemoryError, -XX:HeapDumpPath=data, -XX:ErrorFile=logs/hs_err_pid%p.log, -Xlog:gc*,gc+age=trace,safepoint:file=logs/gc.log:utctime,level,pid,tags:filecount=32,filesize=64m, -Xmx1g, -Xms1g, -XX:MaxDirectMemorySize=536870912, -XX:G1HeapRegionSize=4m, -XX:InitiatingHeapOccupancyPercent=30, -XX:G1ReservePercent=15, --module-path=/tmp/elasticsearch/lib, --add-modules=jdk.net, --add-modules=ALL-MODULE-PATH, -Djdk.module.main=org.elasticsearch.server]
[2024-12-06T15:32:21,881][INFO ][o.e.n.Node               ] [bk-agent-prod-gcp-1733490206923469488] Default Locale [en_US]
[2024-12-06T15:32:21,882][WARN ][o.e.n.Node               ] [bk-agent-prod-gcp-1733490206923469488] version [9.0.0-SNAPSHOT] is a pre-release version of Elasticsearch and is not suitable for production
[2024-12-06T15:32:22,702][INFO ][o.e.c.u.FeatureFlag      ] [bk-agent-prod-gcp-1733490206923469488] The current build is a snapshot, feature flag [esql_semantic_text] is enabled
[2024-12-06T15:32:22,942][INFO ][o.e.c.u.FeatureFlag      ] [bk-agent-prod-gcp-1733490206923469488] The current build is a snapshot, feature flag [esql_inlinestats] is enabled
[2024-12-06T15:32:23,739][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [repository-url]
[2024-12-06T15:32:23,739][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [rest-root]
[2024-12-06T15:32:23,740][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [x-pack-core]
[2024-12-06T15:32:23,740][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [x-pack-redact]
[2024-12-06T15:32:23,740][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [ingest-user-agent]
[2024-12-06T15:32:23,740][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [x-pack-async-search]
[2024-12-06T15:32:23,741][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [test-error-query]
[2024-12-06T15:32:23,741][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [x-pack-monitoring]
[2024-12-06T15:32:23,741][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [repository-s3]
[2024-12-06T15:32:23,741][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [x-pack-analytics]
[2024-12-06T15:32:23,741][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [x-pack-esql-core]
[2024-12-06T15:32:23,741][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [x-pack-ent-search]
[2024-12-06T15:32:23,742][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [x-pack-autoscaling]
[2024-12-06T15:32:23,742][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [lang-painless]
[2024-12-06T15:32:23,742][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [x-pack-ml]
[2024-12-06T15:32:23,742][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [test-die-with-dignity]
[2024-12-06T15:32:23,742][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [lang-mustache]
[2024-12-06T15:32:23,743][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [legacy-geo]
[2024-12-06T15:32:23,743][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [logsdb]
[2024-12-06T15:32:23,743][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [x-pack-ql]
[2024-12-06T15:32:23,744][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [rank-rrf]
[2024-12-06T15:32:23,744][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [analysis-common]
[2024-12-06T15:32:23,744][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [health-shards-availability]
[2024-12-06T15:32:23,745][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [transport-netty4]
[2024-12-06T15:32:23,745][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [aggregations]
[2024-12-06T15:32:23,745][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [ingest-common]
[2024-12-06T15:32:23,746][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [frozen-indices]
[2024-12-06T15:32:23,746][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [x-pack-identity-provider]
[2024-12-06T15:32:23,746][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [x-pack-shutdown]
[2024-12-06T15:32:23,746][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [x-pack-text-structure]
[2024-12-06T15:32:23,746][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [snapshot-repo-test-kit]
[2024-12-06T15:32:23,746][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [test-delayed-aggs]
[2024-12-06T15:32:23,747][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [ml-package-loader]
[2024-12-06T15:32:23,747][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [kibana]
[2024-12-06T15:32:23,747][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [test-esql-heap-attack]
[2024-12-06T15:32:23,747][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [constant-keyword]
[2024-12-06T15:32:23,747][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [x-pack-logstash]
[2024-12-06T15:32:23,747][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [x-pack-ccr]
[2024-12-06T15:32:23,748][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [x-pack-graph]
[2024-12-06T15:32:23,748][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [x-pack-esql]
[2024-12-06T15:32:23,748][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [parent-join]
[2024-12-06T15:32:23,748][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [x-pack-enrich]
[2024-12-06T15:32:23,748][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [counted-keyword]
[2024-12-06T15:32:23,748][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [repositories-metering-api]
[2024-12-06T15:32:23,749][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [transform]
[2024-12-06T15:32:23,749][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [repository-azure]
[2024-12-06T15:32:23,749][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [dot-prefix-validation]
[2024-12-06T15:32:23,749][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [repository-gcs]
[2024-12-06T15:32:23,749][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [x-pack-otel-data]
[2024-12-06T15:32:23,749][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [spatial]
[2024-12-06T15:32:23,749][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [apm]
[2024-12-06T15:32:23,750][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [mapper-extras]
[2024-12-06T15:32:23,750][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [mapper-version]
[2024-12-06T15:32:23,750][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [test-jvm-crash]
[2024-12-06T15:32:23,750][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [x-pack-rollup]
[2024-12-06T15:32:23,750][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [percolator]
[2024-12-06T15:32:23,750][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [x-pack-migrate]
[2024-12-06T15:32:23,751][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [data-streams]
[2024-12-06T15:32:23,751][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [x-pack-stack]
[2024-12-06T15:32:23,751][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [rank-eval]
[2024-12-06T15:32:23,751][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [reindex]
[2024-12-06T15:32:23,751][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [test-apm-integration]
[2024-12-06T15:32:23,751][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [x-pack-security]
[2024-12-06T15:32:23,752][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [blob-cache]
[2024-12-06T15:32:23,752][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [searchable-snapshots]
[2024-12-06T15:32:23,752][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [x-pack-slm]
[2024-12-06T15:32:23,752][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [x-pack-geoip-enterprise-downloader]
[2024-12-06T15:32:23,752][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [test-latency-simulating-directory]
[2024-12-06T15:32:23,752][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [snapshot-based-recoveries]
[2024-12-06T15:32:23,752][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [x-pack-watcher]
[2024-12-06T15:32:23,753][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [old-lucene-versions]
[2024-12-06T15:32:23,753][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [x-pack-ilm]
[2024-12-06T15:32:23,753][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [x-pack-inference]
[2024-12-06T15:32:23,753][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [x-pack-voting-only-node]
[2024-12-06T15:32:23,753][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [x-pack-deprecation]
[2024-12-06T15:32:23,753][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [x-pack-fleet]
[2024-12-06T15:32:23,754][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [x-pack-aggregate-metric]
[2024-12-06T15:32:23,754][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [x-pack-downsample]
[2024-12-06T15:32:23,754][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [x-pack-profiling]
[2024-12-06T15:32:23,754][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [ingest-geoip]
[2024-12-06T15:32:23,754][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [x-pack-write-load-forecaster]
[2024-12-06T15:32:23,754][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [search-business-rules]
[2024-12-06T15:32:23,754][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [ingest-attachment]
[2024-12-06T15:32:23,755][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [wildcard]
[2024-12-06T15:32:23,755][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [x-pack-apm-data]
[2024-12-06T15:32:23,755][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [unsigned-long]
[2024-12-06T15:32:23,755][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [x-pack-sql]
[2024-12-06T15:32:23,755][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [runtime-fields-common]
[2024-12-06T15:32:23,755][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [x-pack-async]
[2024-12-06T15:32:23,756][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [x-pack-kql]
[2024-12-06T15:32:23,756][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [vector-tile]
[2024-12-06T15:32:23,756][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [lang-expression]
[2024-12-06T15:32:23,756][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733490206923469488] loaded module [x-pack-eql]
[2024-12-06T15:32:23,999][INFO ][o.e.c.u.FeatureFlag      ] [bk-agent-prod-gcp-1733490206923469488] The current build is a snapshot, feature flag [failure_store] is enabled
[2024-12-06T15:32:24,881][INFO ][o.e.e.NodeEnvironment    ] [bk-agent-prod-gcp-1733490206923469488] using [1] data paths, mounts [[/ (/dev/sda2)]], net usable_space [270.9gb], net total_space [349.7gb], types [xfs]
[2024-12-06T15:32:24,881][INFO ][o.e.e.NodeEnvironment    ] [bk-agent-prod-gcp-1733490206923469488] heap size [1gb], compressed ordinary object pointers [true]
[2024-12-06T15:32:24,894][INFO ][o.e.n.Node               ] [bk-agent-prod-gcp-1733490206923469488] node name [bk-agent-prod-gcp-1733490206923469488], node ID [bvzUJr_oRq61FCGRdWZr2Q], cluster name [elasticsearch], roles [voting_only, master]
[2024-12-06T15:32:28,627][INFO ][o.e.c.u.FeatureFlag      ] [bk-agent-prod-gcp-1733490206923469488] The current build is a snapshot, feature flag [connector_secrets] is enabled
[2024-12-06T15:32:28,764][INFO ][o.e.i.r.RecoverySettings ] [bk-agent-prod-gcp-1733490206923469488] using rate limit [40mb] with [default=40mb, read=0b, write=0b, max=0b]
[2024-12-06T15:32:28,848][INFO ][o.e.c.u.FeatureFlag      ] [bk-agent-prod-gcp-1733490206923469488] The current build is a snapshot, feature flag [multi_dense_vector] is enabled
[2024-12-06T15:32:28,947][INFO ][o.e.c.u.FeatureFlag      ] [bk-agent-prod-gcp-1733490206923469488] The current build is a snapshot, feature flag [sub_objects_auto] is enabled
[2024-12-06T15:32:28,992][INFO ][o.e.f.FeatureService     ] [bk-agent-prod-gcp-1733490206923469488] Registered local node features [cluster.reroute.ignores_metric_param, cluster.stats.source_modes, data_stream.auto_sharding, data_stream.lifecycle.global_retention, data_stream.rollover.lazy, desired_node.version_deprecated, esql.agg_values, esql.async_query, esql.base64_decode_encode, esql.casting_operator, esql.counter_types, esql.disable_nullable_opts, esql.from_options, esql.metadata_fields, esql.metrics_counter_fields, esql.metrics_syntax, esql.mv_ordering_sorted_ascending, esql.mv_sort, esql.resolve_fields_api, esql.spatial_points_from_source, esql.spatial_shapes, esql.st_centroid_agg, esql.st_contains_within, esql.st_disjoint, esql.st_intersects, esql.st_x_y, esql.string_literal_auto_casting, esql.string_literal_auto_casting_extended, esql.timespan_abbreviations, features_supported, file_settings, flattened.ignore_above_support, geoip.downloader.database.configuration, get_database_configuration_action.multi_node, health.dsl.info, health.extended_repository_indicator, knn_retriever_supported, license-trial-independent-version, logsdb_telemetry, logsdb_telemetry_stats, lucene_10_upgrade, mapper.boolean_dimension, mapper.bwc_workaround_9_0, mapper.flattened.ignore_above_with_arrays_support, mapper.ignore_above_index_level_setting, mapper.index_sorting_on_nested, mapper.keyword_dimension_ignore_above, mapper.keyword_normalizer_synthetic_source, mapper.pass_through_priority, mapper.query_index_mode, mapper.range.null_values_off_by_one_fix, mapper.segment_level_fields_stats, mapper.source.synthetic_source_copy_to_fix, mapper.source.synthetic_source_copy_to_inside_objects_fix, mapper.source.synthetic_source_fallback, mapper.source.synthetic_source_stored_fields_advance_fix, mapper.source.synthetic_source_with_copy_to_and_doc_values_false, mapper.subobjects_auto, mapper.subobjects_auto_fixes, mapper.synthetic_source_keep, mapper.track_ignored_source, mapper.vectors.bbq, mapper.vectors.bit_vectors, mapper.vectors.int4_quantization, put_database_configuration_action.ipinfo, query_rule_list_types, query_rule_retriever_supported, query_rules.test, random_reranker_retriever_supported, repositories.supports_usage_stats, rest.capabilities_action, rest.local_only_capabilities, retrievers_supported, routing.boolean_routing_path, routing.multi_value_routing_path, rrf_retriever_composition_supported, rrf_retriever_supported, script.hamming, script.term_stats, search.vectors.k_param_supported, security.migration_framework, security.role_mapping_cleanup, security.roles_metadata_flattened, semantic_text.default_elser_2, semantic_text.inner_hits, semantic_text.search_inference_id, simulate.component.template.substitutions, simulate.index.template.substitutions, simulate.mapping.addition, simulate.mapping.validation, simulate.mapping.validation.templates, simulate.support.non.template.mapping, slm.interval_schedule, snapshot.repository_verify_integrity, standard_retriever_supported, stats.include_disk_thresholds, stats.tier_creation_date, text_similarity_reranker_retriever_composition_supported, text_similarity_reranker_retriever_supported, tsdb.ts_routing_hash_doc_value_parse_byte_ref, unified_highlighter_matched_fields, usage.data_tiers.precalculate_stats]
[2024-12-06T15:32:29,038][INFO ][o.e.c.m.DataStreamGlobalRetentionSettings] [bk-agent-prod-gcp-1733490206923469488] Updated default factory retention to [null]
[2024-12-06T15:32:29,038][INFO ][o.e.c.m.DataStreamGlobalRetentionSettings] [bk-agent-prod-gcp-1733490206923469488] Updated max factory retention to [null]
[2024-12-06T15:32:39,620][ERROR][o.e.b.Elasticsearch      ] [bk-agent-prod-gcp-1733490206923469488] fatal exception while booting Elasticsearch org.elasticsearch.ElasticsearchException: Failure running machine learning native code. This could be due to running on an unsupported OS or distribution, missing OS libraries, or a problem with the temp directory. To bypass this problem by running Elasticsearch without machine learning functionality set [xpack.ml.enabled: false].
	at org.elasticsearch.ml@9.0.0-SNAPSHOT/org.elasticsearch.xpack.ml.MachineLearning.createComponents(MachineLearning.java:1047)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.node.NodeConstruction.lambda$construct$16(NodeConstruction.java:892)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.plugins.PluginsService.lambda$flatMap$0(PluginsService.java:186)
	at java.base/java.util.stream.ReferencePipeline$7$1FlatMap.accept(ReferencePipeline.java:289)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:215)
	at java.base/java.util.AbstractList$RandomAccessSpliterator.forEachRemaining(AbstractList.java:722)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:570)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:560)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:636)
	at java.base/java.util.stream.AbstractPipeline.evaluateToArrayNode(AbstractPipeline.java:291)
	at java.base/java.util.stream.ReferencePipeline.toArray(ReferencePipeline.java:656)
	at java.base/java.util.stream.ReferencePipeline.toArray(ReferencePipeline.java:662)
	at java.base/java.util.stream.ReferencePipeline.toList(ReferencePipeline.java:667)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.node.NodeConstruction.construct(NodeConstruction.java:914)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.node.NodeConstruction.prepareConstruction(NodeConstruction.java:294)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.node.Node.<init>(Node.java:185)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.bootstrap.Elasticsearch$2.<init>(Elasticsearch.java:260)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.bootstrap.Elasticsearch.initPhase3(Elasticsearch.java:260)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:78)] stderr = [ERROR: Elasticsearch did not exit normally - check the logs at /tmp/elasticsearch/logs/elasticsearch.log

ERROR: Elasticsearch died while starting up, with exit code 1]]
Expected: <0>
     but: was <1>
```

**Issue Reasons:**
- [main] 3 consecutive failures in step rhel-7_packaging-tests-unix
- [main] 3 consecutive failures in step ubuntu-1804_packaging-tests-unix
- [main] 3 consecutive failures in step sles-12_packaging-tests-unix
- [main] 3 consecutive failures in step oraclelinux-7_packaging-tests-unix
- [main] 16 failures in test test41AutoconfigurationNotTriggeredWhenNodeCannotContainData (4.3% fail rate in 371 executions)
- [main] 3 failures in step rhel-7_packaging-tests-unix (100.0% fail rate in 3 executions)
- [main] 3 failures in step ubuntu-1804_packaging-tests-unix (100.0% fail rate in 3 executions)
- [main] 3 failures in step sles-12_packaging-tests-unix (100.0% fail rate in 3 executions)
- [main] 3 failures in step oraclelinux-7_packaging-tests-unix (100.0% fail rate in 3 executions)
- [main] 3 failures in pipeline elasticsearch-periodic-packaging (75.0% fail rate in 4 executions)

**Note:**
This issue was created using new test triage automation. Please report issues or feedback to es-delivery.",elasticsearchmachine,closed,"[':Delivery/Packaging', '>test-failure', 'Team:Delivery', 'needs:risk']",https://github.com/elastic/elasticsearch/issues/118110,2024-12-05T21:15:38Z,3,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/118110,"{
  ""application_resource"": ""unsure""
}"
66,118030,[CI] ArchiveTests test40AutoconfigurationNotTriggeredWhenNodeIsMeantToJoinExistingCluster failing,"**Build Scans:**
- [elasticsearch-periodic-packaging #4888 / oraclelinux-7_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/v3fferzopuvyk)
- [elasticsearch-periodic-packaging #4888 / sles-12_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/4ogghs363cqxm)

**Reproduction Line:**
```
null
```

**Applicable branches:**
main

**Reproduces locally?:**
N/A

**Failure History:**
[See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&_a=(controlGroupState:(initialChildControlState:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:task.keyword,order:0,selectedOptions:!(),title:'GradleTask',type:optionsListControl),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:className.keyword,order:1,selectedOptions:!(org.elasticsearch.packaging.test.ArchiveTests),title:'Suite',type:optionsListControl),'144933da-5c1b-4257-a969-7f43455a7901':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:name.keyword,order:2,selectedOptions:!(test40AutoconfigurationNotTriggeredWhenNodeIsMeantToJoinExistingCluster),title:'Test',type:optionsListControl)))))

**Failure Message:**
```
java.lang.AssertionError: Startup command should succeed. Stderr: [exitCode = [1] stdout = [Skipping security auto configuration because this node is configured to bootstrap or to join a multi-node cluster, which is not supported.
CompileCommand: dontinline java/lang/invoke/MethodHandle.setAsTypeCache bool dontinline = true
CompileCommand: dontinline java/lang/invoke/MethodHandle.asTypeUncached bool dontinline = true
[2024-12-04T21:09:57,024][WARN ][x-pack-ml-controller-stderr] [bk-agent-prod-gcp-1733346191105316712] /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/controller: /lib64/libc.so.6: version `GLIBC_2.26' not found (required by /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/../lib/libstdc++.so.6)
[2024-12-04T21:09:57,055][WARN ][x-pack-ml-controller-stderr] [bk-agent-prod-gcp-1733346191105316712] /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/controller: /lib64/libc.so.6: version `GLIBC_2.25' not found (required by /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/../lib/libstdc++.so.6)
[2024-12-04T21:09:57,055][WARN ][x-pack-ml-controller-stderr] [bk-agent-prod-gcp-1733346191105316712] /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/controller: /lib64/libc.so.6: version `GLIBC_2.28' not found (required by /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/../lib/libxml2.so.2)
[2024-12-04T21:09:57,056][WARN ][x-pack-ml-controller-stderr] [bk-agent-prod-gcp-1733346191105316712] /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/controller: /lib64/libc.so.6: version `GLIBC_2.28' not found (required by /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/../lib/libboost_filesystem-gcc13-mt-x64-1_83.so.1.83.0)
[2024-12-04T21:09:57,056][WARN ][x-pack-ml-controller-stderr] [bk-agent-prod-gcp-1733346191105316712] /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/controller: /lib64/libc.so.6: version `GLIBC_2.25' not found (required by /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/../lib/libboost_filesystem-gcc13-mt-x64-1_83.so.1.83.0)
[2024-12-04T21:09:57,244][INFO ][o.e.n.NativeAccess       ] [bk-agent-prod-gcp-1733346191105316712] Using native vector library; to disable start with -Dorg.elasticsearch.nativeaccess.enableVectorLibrary=false
[2024-12-04T21:09:57,260][INFO ][o.e.n.NativeAccess       ] [bk-agent-prod-gcp-1733346191105316712] Using [jdk] native provider and native methods for [Linux]
[2024-12-04T21:09:57,371][INFO ][o.a.l.i.v.PanamaVectorizationProvider] [bk-agent-prod-gcp-1733346191105316712] Java vector incubator API enabled; uses preferredBitSize=256; FMA enabled
[2024-12-04T21:10:00,302][INFO ][o.e.b.Elasticsearch      ] [bk-agent-prod-gcp-1733346191105316712] Bootstrapping java SecurityManager
[2024-12-04T21:10:01,482][INFO ][o.e.n.Node               ] [bk-agent-prod-gcp-1733346191105316712] version[9.0.0-SNAPSHOT], pid[3914], build[tar/9a81eb2dbe17c3d8ce2920aec33a1d7a89a93c38/2024-12-04T21:06:51.699518752Z], OS[Linux/4.12.14-122.222-default/amd64], JVM[Oracle Corporation/OpenJDK 64-Bit Server VM/23/23+37-2369]
[2024-12-04T21:10:01,483][INFO ][o.e.n.Node               ] [bk-agent-prod-gcp-1733346191105316712] JVM home [/tmp/elasticsearch/jdk], using bundled JDK [true]
[2024-12-04T21:10:01,484][INFO ][o.e.n.Node               ] [bk-agent-prod-gcp-1733346191105316712] JVM arguments [-Des.networkaddress.cache.ttl=60, -Des.networkaddress.cache.negative.ttl=10, -XX:+AlwaysPreTouch, -Xss1m, -Djava.awt.headless=true, -Dfile.encoding=UTF-8, -Djna.nosys=true, -XX:-OmitStackTraceInFastThrow, -Dio.netty.noUnsafe=true, -Dio.netty.noKeySetOptimization=true, -Dio.netty.recycler.maxCapacityPerThread=0, -Dlog4j.shutdownHookEnabled=false, -Dlog4j2.disable.jmx=true, -Dlog4j2.formatMsgNoLookups=true, -Djava.locale.providers=CLDR, -Des.distribution.type=tar, --enable-native-access=org.elasticsearch.nativeaccess,org.apache.lucene.core, -XX:ReplayDataFile=logs/replay_pid%p.log, -Djava.security.manager=allow, -XX:+UseG1GC, -Djava.io.tmpdir=/tmp/elasticsearch-8317793502616822496, --add-modules=jdk.incubator.vector, -XX:CompileCommand=dontinline,java/lang/invoke/MethodHandle.setAsTypeCache, -XX:CompileCommand=dontinline,java/lang/invoke/MethodHandle.asTypeUncached, -Dorg.apache.lucene.store.defaultReadAdvice=normal, -XX:+HeapDumpOnOutOfMemoryError, -XX:+ExitOnOutOfMemoryError, -XX:HeapDumpPath=data, -XX:ErrorFile=logs/hs_err_pid%p.log, -Xlog:gc*,gc+age=trace,safepoint:file=logs/gc.log:utctime,level,pid,tags:filecount=32,filesize=64m, -Xmx1g, -Xms1g, -XX:MaxDirectMemorySize=536870912, -XX:G1HeapRegionSize=4m, -XX:InitiatingHeapOccupancyPercent=30, -XX:G1ReservePercent=15, --module-path=/tmp/elasticsearch/lib, --add-modules=jdk.net, --add-modules=ALL-MODULE-PATH, -Djdk.module.main=org.elasticsearch.server]
[2024-12-04T21:10:01,486][INFO ][o.e.n.Node               ] [bk-agent-prod-gcp-1733346191105316712] Default Locale [en_US]
[2024-12-04T21:10:01,486][WARN ][o.e.n.Node               ] [bk-agent-prod-gcp-1733346191105316712] version [9.0.0-SNAPSHOT] is a pre-release version of Elasticsearch and is not suitable for production
[2024-12-04T21:10:02,260][INFO ][o.e.c.u.FeatureFlag      ] [bk-agent-prod-gcp-1733346191105316712] The current build is a snapshot, feature flag [esql_semantic_text] is enabled
[2024-12-04T21:10:02,522][INFO ][o.e.c.u.FeatureFlag      ] [bk-agent-prod-gcp-1733346191105316712] The current build is a snapshot, feature flag [esql_inlinestats] is enabled
[2024-12-04T21:10:03,473][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [repository-url]
[2024-12-04T21:10:03,474][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [rest-root]
[2024-12-04T21:10:03,474][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [x-pack-core]
[2024-12-04T21:10:03,475][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [x-pack-redact]
[2024-12-04T21:10:03,475][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [ingest-user-agent]
[2024-12-04T21:10:03,475][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [x-pack-async-search]
[2024-12-04T21:10:03,476][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [test-error-query]
[2024-12-04T21:10:03,476][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [x-pack-monitoring]
[2024-12-04T21:10:03,477][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [repository-s3]
[2024-12-04T21:10:03,477][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [x-pack-analytics]
[2024-12-04T21:10:03,477][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [x-pack-esql-core]
[2024-12-04T21:10:03,478][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [x-pack-ent-search]
[2024-12-04T21:10:03,478][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [x-pack-autoscaling]
[2024-12-04T21:10:03,478][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [lang-painless]
[2024-12-04T21:10:03,479][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [x-pack-ml]
[2024-12-04T21:10:03,479][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [test-die-with-dignity]
[2024-12-04T21:10:03,479][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [lang-mustache]
[2024-12-04T21:10:03,480][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [legacy-geo]
[2024-12-04T21:10:03,480][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [logsdb]
[2024-12-04T21:10:03,480][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [x-pack-ql]
[2024-12-04T21:10:03,481][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [rank-rrf]
[2024-12-04T21:10:03,481][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [analysis-common]
[2024-12-04T21:10:03,481][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [health-shards-availability]
[2024-12-04T21:10:03,482][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [transport-netty4]
[2024-12-04T21:10:03,482][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [aggregations]
[2024-12-04T21:10:03,482][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [ingest-common]
[2024-12-04T21:10:03,482][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [frozen-indices]
[2024-12-04T21:10:03,482][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [x-pack-identity-provider]
[2024-12-04T21:10:03,483][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [x-pack-shutdown]
[2024-12-04T21:10:03,483][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [x-pack-text-structure]
[2024-12-04T21:10:03,483][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [snapshot-repo-test-kit]
[2024-12-04T21:10:03,483][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [test-delayed-aggs]
[2024-12-04T21:10:03,484][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [ml-package-loader]
[2024-12-04T21:10:03,484][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [kibana]
[2024-12-04T21:10:03,484][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [test-esql-heap-attack]
[2024-12-04T21:10:03,484][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [constant-keyword]
[2024-12-04T21:10:03,485][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [x-pack-logstash]
[2024-12-04T21:10:03,485][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [x-pack-ccr]
[2024-12-04T21:10:03,485][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [x-pack-graph]
[2024-12-04T21:10:03,485][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [x-pack-esql]
[2024-12-04T21:10:03,485][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [parent-join]
[2024-12-04T21:10:03,486][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [x-pack-enrich]
[2024-12-04T21:10:03,486][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [counted-keyword]
[2024-12-04T21:10:03,486][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [repositories-metering-api]
[2024-12-04T21:10:03,486][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [transform]
[2024-12-04T21:10:03,487][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [repository-azure]
[2024-12-04T21:10:03,487][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [dot-prefix-validation]
[2024-12-04T21:10:03,487][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [repository-gcs]
[2024-12-04T21:10:03,487][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [x-pack-otel-data]
[2024-12-04T21:10:03,487][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [spatial]
[2024-12-04T21:10:03,488][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [apm]
[2024-12-04T21:10:03,488][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [mapper-extras]
[2024-12-04T21:10:03,488][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [mapper-version]
[2024-12-04T21:10:03,488][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [test-jvm-crash]
[2024-12-04T21:10:03,488][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [x-pack-rollup]
[2024-12-04T21:10:03,488][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [percolator]
[2024-12-04T21:10:03,489][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [x-pack-migrate]
[2024-12-04T21:10:03,489][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [data-streams]
[2024-12-04T21:10:03,489][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [x-pack-stack]
[2024-12-04T21:10:03,489][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [rank-eval]
[2024-12-04T21:10:03,489][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [reindex]
[2024-12-04T21:10:03,489][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [test-apm-integration]
[2024-12-04T21:10:03,489][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [x-pack-security]
[2024-12-04T21:10:03,490][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [blob-cache]
[2024-12-04T21:10:03,490][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [searchable-snapshots]
[2024-12-04T21:10:03,490][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [x-pack-slm]
[2024-12-04T21:10:03,490][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [x-pack-geoip-enterprise-downloader]
[2024-12-04T21:10:03,491][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [test-latency-simulating-directory]
[2024-12-04T21:10:03,491][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [snapshot-based-recoveries]
[2024-12-04T21:10:03,491][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [x-pack-watcher]
[2024-12-04T21:10:03,491][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [old-lucene-versions]
[2024-12-04T21:10:03,492][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [x-pack-ilm]
[2024-12-04T21:10:03,492][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [x-pack-inference]
[2024-12-04T21:10:03,492][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [x-pack-voting-only-node]
[2024-12-04T21:10:03,492][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [x-pack-deprecation]
[2024-12-04T21:10:03,493][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [x-pack-fleet]
[2024-12-04T21:10:03,493][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [x-pack-aggregate-metric]
[2024-12-04T21:10:03,493][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [x-pack-downsample]
[2024-12-04T21:10:03,493][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [x-pack-profiling]
[2024-12-04T21:10:03,493][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [ingest-geoip]
[2024-12-04T21:10:03,494][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [x-pack-write-load-forecaster]
[2024-12-04T21:10:03,494][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [search-business-rules]
[2024-12-04T21:10:03,494][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [ingest-attachment]
[2024-12-04T21:10:03,495][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [wildcard]
[2024-12-04T21:10:03,495][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [x-pack-apm-data]
[2024-12-04T21:10:03,495][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [unsigned-long]
[2024-12-04T21:10:03,495][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [x-pack-sql]
[2024-12-04T21:10:03,496][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [runtime-fields-common]
[2024-12-04T21:10:03,496][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [x-pack-async]
[2024-12-04T21:10:03,496][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [x-pack-kql]
[2024-12-04T21:10:03,496][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [vector-tile]
[2024-12-04T21:10:03,497][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [lang-expression]
[2024-12-04T21:10:03,497][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733346191105316712] loaded module [x-pack-eql]
[2024-12-04T21:10:03,877][INFO ][o.e.c.u.FeatureFlag      ] [bk-agent-prod-gcp-1733346191105316712] The current build is a snapshot, feature flag [failure_store] is enabled
[2024-12-04T21:10:04,856][INFO ][o.e.e.NodeEnvironment    ] [bk-agent-prod-gcp-1733346191105316712] using [1] data paths, mounts [[/ (/dev/sda3)]], net usable_space [299.5gb], net total_space [349.9gb], types [xfs]
[2024-12-04T21:10:04,857][INFO ][o.e.e.NodeEnvironment    ] [bk-agent-prod-gcp-1733346191105316712] heap size [1gb], compressed ordinary object pointers [true]
[2024-12-04T21:10:04,868][INFO ][o.e.n.Node               ] [bk-agent-prod-gcp-1733346191105316712] node name [bk-agent-prod-gcp-1733346191105316712], node ID [uE_-OlxDQ_aDVj4lxZBH1Q], cluster name [elasticsearch], roles [data_frozen, ingest, data_cold, data, remote_cluster_client, master, data_warm, data_content, transform, data_hot, ml]
[2024-12-04T21:10:08,623][INFO ][o.e.c.u.FeatureFlag      ] [bk-agent-prod-gcp-1733346191105316712] The current build is a snapshot, feature flag [connector_secrets] is enabled
[2024-12-04T21:10:08,788][INFO ][o.e.i.r.RecoverySettings ] [bk-agent-prod-gcp-1733346191105316712] using rate limit [40mb] with [default=40mb, read=0b, write=0b, max=0b]
[2024-12-04T21:10:08,877][INFO ][o.e.c.u.FeatureFlag      ] [bk-agent-prod-gcp-1733346191105316712] The current build is a snapshot, feature flag [multi_dense_vector] is enabled
[2024-12-04T21:10:09,003][INFO ][o.e.c.u.FeatureFlag      ] [bk-agent-prod-gcp-1733346191105316712] The current build is a snapshot, feature flag [sub_objects_auto] is enabled
[2024-12-04T21:10:09,048][INFO ][o.e.f.FeatureService     ] [bk-agent-prod-gcp-1733346191105316712] Registered local node features [cluster.reroute.ignores_metric_param, cluster.stats.source_modes, data_stream.auto_sharding, data_stream.lifecycle.global_retention, data_stream.rollover.lazy, desired_node.version_deprecated, esql.agg_values, esql.async_query, esql.base64_decode_encode, esql.casting_operator, esql.counter_types, esql.disable_nullable_opts, esql.from_options, esql.metadata_fields, esql.metrics_counter_fields, esql.metrics_syntax, esql.mv_ordering_sorted_ascending, esql.mv_sort, esql.resolve_fields_api, esql.spatial_points_from_source, esql.spatial_shapes, esql.st_centroid_agg, esql.st_contains_within, esql.st_disjoint, esql.st_intersects, esql.st_x_y, esql.string_literal_auto_casting, esql.string_literal_auto_casting_extended, esql.timespan_abbreviations, features_supported, file_settings, flattened.ignore_above_support, geoip.downloader.database.configuration, get_database_configuration_action.multi_node, health.dsl.info, health.extended_repository_indicator, knn_retriever_supported, license-trial-independent-version, logsdb_telemetry, logsdb_telemetry_stats, lucene_10_upgrade, mapper.boolean_dimension, mapper.bwc_workaround_9_0, mapper.flattened.ignore_above_with_arrays_support, mapper.ignore_above_index_level_setting, mapper.index_sorting_on_nested, mapper.keyword_dimension_ignore_above, mapper.keyword_normalizer_synthetic_source, mapper.pass_through_priority, mapper.query_index_mode, mapper.range.null_values_off_by_one_fix, mapper.segment_level_fields_stats, mapper.source.synthetic_source_copy_to_fix, mapper.source.synthetic_source_copy_to_inside_objects_fix, mapper.source.synthetic_source_fallback, mapper.source.synthetic_source_stored_fields_advance_fix, mapper.source.synthetic_source_with_copy_to_and_doc_values_false, mapper.subobjects_auto, mapper.subobjects_auto_fixes, mapper.synthetic_source_keep, mapper.track_ignored_source, mapper.vectors.bbq, mapper.vectors.bit_vectors, mapper.vectors.int4_quantization, put_database_configuration_action.ipinfo, query_rule_list_types, query_rule_retriever_supported, query_rules.test, random_reranker_retriever_supported, repositories.supports_usage_stats, rest.capabilities_action, rest.local_only_capabilities, retrievers_supported, routing.boolean_routing_path, routing.multi_value_routing_path, rrf_retriever_composition_supported, rrf_retriever_supported, script.hamming, script.term_stats, search.vectors.k_param_supported, security.migration_framework, security.role_mapping_cleanup, security.roles_metadata_flattened, semantic_text.default_elser_2, semantic_text.inner_hits, semantic_text.search_inference_id, simulate.component.template.substitutions, simulate.index.template.substitutions, simulate.mapping.addition, simulate.mapping.validation, simulate.mapping.validation.templates, simulate.support.non.template.mapping, slm.interval_schedule, snapshot.repository_verify_integrity, standard_retriever_supported, stats.include_disk_thresholds, stats.tier_creation_date, text_similarity_reranker_retriever_composition_supported, text_similarity_reranker_retriever_supported, tsdb.ts_routing_hash_doc_value_parse_byte_ref, unified_highlighter_matched_fields, usage.data_tiers.precalculate_stats]
[2024-12-04T21:10:09,086][INFO ][o.e.c.m.DataStreamGlobalRetentionSettings] [bk-agent-prod-gcp-1733346191105316712] Updated default factory retention to [null]
[2024-12-04T21:10:09,087][INFO ][o.e.c.m.DataStreamGlobalRetentionSettings] [bk-agent-prod-gcp-1733346191105316712] Updated max factory retention to [null]
[2024-12-04T21:10:19,665][ERROR][o.e.b.Elasticsearch      ] [bk-agent-prod-gcp-1733346191105316712] fatal exception while booting Elasticsearch org.elasticsearch.ElasticsearchException: Failure running machine learning native code. This could be due to running on an unsupported OS or distribution, missing OS libraries, or a problem with the temp directory. To bypass this problem by running Elasticsearch without machine learning functionality set [xpack.ml.enabled: false].
	at org.elasticsearch.ml@9.0.0-SNAPSHOT/org.elasticsearch.xpack.ml.MachineLearning.createComponents(MachineLearning.java:1047)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.node.NodeConstruction.lambda$construct$16(NodeConstruction.java:892)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.plugins.PluginsService.lambda$flatMap$0(PluginsService.java:186)
	at java.base/java.util.stream.ReferencePipeline$7$1FlatMap.accept(ReferencePipeline.java:289)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:215)
	at java.base/java.util.AbstractList$RandomAccessSpliterator.forEachRemaining(AbstractList.java:722)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:570)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:560)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:636)
	at java.base/java.util.stream.AbstractPipeline.evaluateToArrayNode(AbstractPipeline.java:291)
	at java.base/java.util.stream.ReferencePipeline.toArray(ReferencePipeline.java:656)
	at java.base/java.util.stream.ReferencePipeline.toArray(ReferencePipeline.java:662)
	at java.base/java.util.stream.ReferencePipeline.toList(ReferencePipeline.java:667)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.node.NodeConstruction.construct(NodeConstruction.java:914)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.node.NodeConstruction.prepareConstruction(NodeConstruction.java:294)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.node.Node.<init>(Node.java:185)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.bootstrap.Elasticsearch$2.<init>(Elasticsearch.java:268)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.bootstrap.Elasticsearch.initPhase3(Elasticsearch.java:268)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:82)] stderr = [ERROR: Elasticsearch did not exit normally - check the logs at /tmp/elasticsearch/logs/elasticsearch.log

ERROR: Elasticsearch died while starting up, with exit code 1]]
Expected: <0>
     but: was <1>
```

**Issue Reasons:**
- [main] 2 consecutive failures in test test40AutoconfigurationNotTriggeredWhenNodeIsMeantToJoinExistingCluster
- [main] 2 failures in test test40AutoconfigurationNotTriggeredWhenNodeIsMeantToJoinExistingCluster (0.5% fail rate in 411 executions)

**Note:**
This issue was created using new test triage automation. Please report issues or feedback to es-delivery.",elasticsearchmachine,closed,"[':Delivery/Packaging', '>test-failure', 'Team:Delivery', 'needs:risk']",https://github.com/elastic/elasticsearch/issues/118030,2024-12-04T21:16:04Z,2,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/118030,"{
  ""application_resource"": ""unsure""
}"
67,118029,[CI] ArchiveTests test40AutoconfigurationNotTriggeredWhenNodeIsMeantToJoinExistingCluster failing,"**Build Scans:**
- [elasticsearch-periodic-packaging #4901 / rhel-7_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/kwl6dh34sxbxk)
- [elasticsearch-periodic-packaging #4901 / ubuntu-1804_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/wot5qmdbtp6wu)
- [elasticsearch-pull-request #44854 / sles-12_archives_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/n3zgcaybs7txq)
- [elasticsearch-pull-request #44854 / oraclelinux-7_archives_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/abf2rzp2wcxak)
- [elasticsearch-pull-request #44854 / rhel-7_archives_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/cxi77orgsydyc)
- [elasticsearch-pull-request #44854 / ubuntu-1804_archives_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/hwth6vqw26n6m)
- [elasticsearch-periodic-packaging #4901 / sles-12_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/t7fzdm4dnwue2)
- [elasticsearch-periodic-packaging #4901 / oraclelinux-7_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/shq4ufxfkcojs)
- [elasticsearch-pull-request #44813 / oraclelinux-7_archives_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/hcibdrqwzxdie)
- [elasticsearch-pull-request #44813 / sles-12_archives_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/bat2vldntstqq)

**Reproduction Line:**
```
null
```

**Applicable branches:**
main

**Reproduces locally?:**
N/A

**Failure History:**
[See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&_a=(controlGroupState:(initialChildControlState:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:task.keyword,order:0,selectedOptions:!(),title:'GradleTask',type:optionsListControl),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:className.keyword,order:1,selectedOptions:!(org.elasticsearch.packaging.test.ArchiveTests),title:'Suite',type:optionsListControl),'144933da-5c1b-4257-a969-7f43455a7901':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:name.keyword,order:2,selectedOptions:!(test40AutoconfigurationNotTriggeredWhenNodeIsMeantToJoinExistingCluster),title:'Test',type:optionsListControl)))))

**Failure Message:**
```
java.lang.AssertionError: Startup command should succeed. Stderr: [exitCode = [1] stdout = [Skipping security auto configuration because this node is configured to bootstrap or to join a multi-node cluster, which is not supported.
CompileCommand: dontinline java/lang/invoke/MethodHandle.setAsTypeCache bool dontinline = true
CompileCommand: dontinline java/lang/invoke/MethodHandle.asTypeUncached bool dontinline = true
[2024-12-05T15:29:24,632][WARN ][x-pack-ml-controller-stderr] [bk-agent-prod-gcp-1733403774216489129] /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/controller: /lib/x86_64-linux-gnu/libc.so.6: version `GLIBC_2.28' not found (required by /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/../lib/libxml2.so.2)
[2024-12-05T15:29:24,669][WARN ][x-pack-ml-controller-stderr] [bk-agent-prod-gcp-1733403774216489129] /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/controller: /lib/x86_64-linux-gnu/libc.so.6: version `GLIBC_2.28' not found (required by /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/../lib/libboost_filesystem-gcc13-mt-x64-1_83.so.1.83.0)
[2024-12-05T15:29:24,855][INFO ][o.e.n.NativeAccess       ] [bk-agent-prod-gcp-1733403774216489129] Using native vector library; to disable start with -Dorg.elasticsearch.nativeaccess.enableVectorLibrary=false
[2024-12-05T15:29:24,871][INFO ][o.e.n.NativeAccess       ] [bk-agent-prod-gcp-1733403774216489129] Using [jdk] native provider and native methods for [Linux]
[2024-12-05T15:29:24,972][INFO ][o.a.l.i.v.PanamaVectorizationProvider] [bk-agent-prod-gcp-1733403774216489129] Java vector incubator API enabled; uses preferredBitSize=256; FMA enabled
[2024-12-05T15:29:27,707][INFO ][o.e.b.Elasticsearch      ] [bk-agent-prod-gcp-1733403774216489129] Bootstrapping java SecurityManager
[2024-12-05T15:29:28,692][INFO ][o.e.n.Node               ] [bk-agent-prod-gcp-1733403774216489129] version[9.0.0-SNAPSHOT], pid[353146], build[tar/e4defcaec3f2433fda2d0187543417e679570b37/2024-12-05T13:06:49.546427785Z], OS[Linux/5.4.0-1106-gcp/amd64], JVM[Oracle Corporation/OpenJDK 64-Bit Server VM/23/23+37-2369]
[2024-12-05T15:29:28,693][INFO ][o.e.n.Node               ] [bk-agent-prod-gcp-1733403774216489129] JVM home [/tmp/elasticsearch/jdk], using bundled JDK [true]
[2024-12-05T15:29:28,694][INFO ][o.e.n.Node               ] [bk-agent-prod-gcp-1733403774216489129] JVM arguments [-Des.networkaddress.cache.ttl=60, -Des.networkaddress.cache.negative.ttl=10, -XX:+AlwaysPreTouch, -Xss1m, -Djava.awt.headless=true, -Dfile.encoding=UTF-8, -Djna.nosys=true, -XX:-OmitStackTraceInFastThrow, -Dio.netty.noUnsafe=true, -Dio.netty.noKeySetOptimization=true, -Dio.netty.recycler.maxCapacityPerThread=0, -Dlog4j.shutdownHookEnabled=false, -Dlog4j2.disable.jmx=true, -Dlog4j2.formatMsgNoLookups=true, -Djava.locale.providers=CLDR, -Des.distribution.type=tar, --enable-native-access=org.elasticsearch.nativeaccess,org.apache.lucene.core, -XX:ReplayDataFile=logs/replay_pid%p.log, -Djava.security.manager=allow, -XX:+UseG1GC, -Djava.io.tmpdir=/tmp/elasticsearch-10672929781692726508, --add-modules=jdk.incubator.vector, -XX:CompileCommand=dontinline,java/lang/invoke/MethodHandle.setAsTypeCache, -XX:CompileCommand=dontinline,java/lang/invoke/MethodHandle.asTypeUncached, -Dorg.apache.lucene.store.defaultReadAdvice=normal, -XX:+HeapDumpOnOutOfMemoryError, -XX:+ExitOnOutOfMemoryError, -XX:HeapDumpPath=data, -XX:ErrorFile=logs/hs_err_pid%p.log, -Xlog:gc*,gc+age=trace,safepoint:file=logs/gc.log:utctime,level,pid,tags:filecount=32,filesize=64m, -Xmx1g, -Xms1g, -XX:MaxDirectMemorySize=536870912, -XX:G1HeapRegionSize=4m, -XX:InitiatingHeapOccupancyPercent=30, -XX:G1ReservePercent=15, --module-path=/tmp/elasticsearch/lib, --add-modules=jdk.net, --add-modules=ALL-MODULE-PATH, -Djdk.module.main=org.elasticsearch.server]
[2024-12-05T15:29:28,695][INFO ][o.e.n.Node               ] [bk-agent-prod-gcp-1733403774216489129] Default Locale [en]
[2024-12-05T15:29:28,695][WARN ][o.e.n.Node               ] [bk-agent-prod-gcp-1733403774216489129] version [9.0.0-SNAPSHOT] is a pre-release version of Elasticsearch and is not suitable for production
[2024-12-05T15:29:29,481][INFO ][o.e.c.u.FeatureFlag      ] [bk-agent-prod-gcp-1733403774216489129] The current build is a snapshot, feature flag [esql_semantic_text] is enabled
[2024-12-05T15:29:29,716][INFO ][o.e.c.u.FeatureFlag      ] [bk-agent-prod-gcp-1733403774216489129] The current build is a snapshot, feature flag [esql_inlinestats] is enabled
[2024-12-05T15:29:30,545][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [repository-url]
[2024-12-05T15:29:30,545][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [rest-root]
[2024-12-05T15:29:30,546][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [x-pack-core]
[2024-12-05T15:29:30,546][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [x-pack-redact]
[2024-12-05T15:29:30,546][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [ingest-user-agent]
[2024-12-05T15:29:30,546][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [x-pack-async-search]
[2024-12-05T15:29:30,547][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [x-pack-monitoring]
[2024-12-05T15:29:30,547][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [test-error-query]
[2024-12-05T15:29:30,547][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [repository-s3]
[2024-12-05T15:29:30,547][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [x-pack-analytics]
[2024-12-05T15:29:30,547][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [x-pack-esql-core]
[2024-12-05T15:29:30,548][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [x-pack-ent-search]
[2024-12-05T15:29:30,548][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [x-pack-autoscaling]
[2024-12-05T15:29:30,548][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [lang-painless]
[2024-12-05T15:29:30,548][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [x-pack-ml]
[2024-12-05T15:29:30,549][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [test-die-with-dignity]
[2024-12-05T15:29:30,549][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [legacy-geo]
[2024-12-05T15:29:30,549][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [lang-mustache]
[2024-12-05T15:29:30,549][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [x-pack-ql]
[2024-12-05T15:29:30,549][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [logsdb]
[2024-12-05T15:29:30,550][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [rank-rrf]
[2024-12-05T15:29:30,550][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [analysis-common]
[2024-12-05T15:29:30,550][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [health-shards-availability]
[2024-12-05T15:29:30,550][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [transport-netty4]
[2024-12-05T15:29:30,550][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [aggregations]
[2024-12-05T15:29:30,551][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [ingest-common]
[2024-12-05T15:29:30,551][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [x-pack-identity-provider]
[2024-12-05T15:29:30,551][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [frozen-indices]
[2024-12-05T15:29:30,551][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [x-pack-shutdown]
[2024-12-05T15:29:30,551][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [x-pack-text-structure]
[2024-12-05T15:29:30,552][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [snapshot-repo-test-kit]
[2024-12-05T15:29:30,552][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [test-delayed-aggs]
[2024-12-05T15:29:30,552][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [ml-package-loader]
[2024-12-05T15:29:30,552][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [kibana]
[2024-12-05T15:29:30,552][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [test-esql-heap-attack]
[2024-12-05T15:29:30,553][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [constant-keyword]
[2024-12-05T15:29:30,553][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [x-pack-logstash]
[2024-12-05T15:29:30,553][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [x-pack-graph]
[2024-12-05T15:29:30,553][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [x-pack-ccr]
[2024-12-05T15:29:30,553][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [x-pack-esql]
[2024-12-05T15:29:30,553][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [parent-join]
[2024-12-05T15:29:30,554][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [x-pack-enrich]
[2024-12-05T15:29:30,554][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [counted-keyword]
[2024-12-05T15:29:30,554][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [repositories-metering-api]
[2024-12-05T15:29:30,554][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [transform]
[2024-12-05T15:29:30,554][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [repository-azure]
[2024-12-05T15:29:30,554][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [dot-prefix-validation]
[2024-12-05T15:29:30,555][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [repository-gcs]
[2024-12-05T15:29:30,555][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [x-pack-otel-data]
[2024-12-05T15:29:30,555][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [spatial]
[2024-12-05T15:29:30,555][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [mapper-version]
[2024-12-05T15:29:30,555][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [apm]
[2024-12-05T15:29:30,556][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [mapper-extras]
[2024-12-05T15:29:30,556][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [x-pack-rollup]
[2024-12-05T15:29:30,556][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [test-jvm-crash]
[2024-12-05T15:29:30,556][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [percolator]
[2024-12-05T15:29:30,556][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [x-pack-migrate]
[2024-12-05T15:29:30,556][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [x-pack-stack]
[2024-12-05T15:29:30,556][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [data-streams]
[2024-12-05T15:29:30,557][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [reindex]
[2024-12-05T15:29:30,557][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [rank-eval]
[2024-12-05T15:29:30,557][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [test-apm-integration]
[2024-12-05T15:29:30,557][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [x-pack-security]
[2024-12-05T15:29:30,557][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [blob-cache]
[2024-12-05T15:29:30,557][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [searchable-snapshots]
[2024-12-05T15:29:30,558][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [x-pack-slm]
[2024-12-05T15:29:30,558][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [x-pack-geoip-enterprise-downloader]
[2024-12-05T15:29:30,558][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [snapshot-based-recoveries]
[2024-12-05T15:29:30,558][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [test-latency-simulating-directory]
[2024-12-05T15:29:30,558][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [x-pack-watcher]
[2024-12-05T15:29:30,558][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [old-lucene-versions]
[2024-12-05T15:29:30,559][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [x-pack-ilm]
[2024-12-05T15:29:30,559][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [x-pack-voting-only-node]
[2024-12-05T15:29:30,559][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [x-pack-inference]
[2024-12-05T15:29:30,559][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [x-pack-deprecation]
[2024-12-05T15:29:30,559][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [x-pack-fleet]
[2024-12-05T15:29:30,559][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [x-pack-aggregate-metric]
[2024-12-05T15:29:30,560][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [x-pack-downsample]
[2024-12-05T15:29:30,560][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [x-pack-profiling]
[2024-12-05T15:29:30,560][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [ingest-geoip]
[2024-12-05T15:29:30,560][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [x-pack-write-load-forecaster]
[2024-12-05T15:29:30,560][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [search-business-rules]
[2024-12-05T15:29:30,560][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [ingest-attachment]
[2024-12-05T15:29:30,560][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [wildcard]
[2024-12-05T15:29:30,561][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [x-pack-apm-data]
[2024-12-05T15:29:30,561][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [x-pack-sql]
[2024-12-05T15:29:30,561][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [unsigned-long]
[2024-12-05T15:29:30,561][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [x-pack-async]
[2024-12-05T15:29:30,561][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [runtime-fields-common]
[2024-12-05T15:29:30,561][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [x-pack-kql]
[2024-12-05T15:29:30,561][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [vector-tile]
[2024-12-05T15:29:30,562][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [lang-expression]
[2024-12-05T15:29:30,562][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733403774216489129] loaded module [x-pack-eql]
[2024-12-05T15:29:30,796][INFO ][o.e.c.u.FeatureFlag      ] [bk-agent-prod-gcp-1733403774216489129] The current build is a snapshot, feature flag [failure_store] is enabled
[2024-12-05T15:29:31,570][INFO ][o.e.e.NodeEnvironment    ] [bk-agent-prod-gcp-1733403774216489129] using [1] data paths, mounts [[/ (/dev/sda1)]], net usable_space [259.1gb], net total_space [339gb], types [ext4]
[2024-12-05T15:29:31,571][INFO ][o.e.e.NodeEnvironment    ] [bk-agent-prod-gcp-1733403774216489129] heap size [1gb], compressed ordinary object pointers [true]
[2024-12-05T15:29:31,581][INFO ][o.e.n.Node               ] [bk-agent-prod-gcp-1733403774216489129] node name [bk-agent-prod-gcp-1733403774216489129], node ID [Z7MGDrKuQ42D9bgqspVJEA], cluster name [elasticsearch], roles [remote_cluster_client, master, data_warm, data_content, transform, data_hot, ml, data_frozen, ingest, data_cold, data]
[2024-12-05T15:29:35,006][INFO ][o.e.c.u.FeatureFlag      ] [bk-agent-prod-gcp-1733403774216489129] The current build is a snapshot, feature flag [connector_secrets] is enabled
[2024-12-05T15:29:35,133][INFO ][o.e.i.r.RecoverySettings ] [bk-agent-prod-gcp-1733403774216489129] using rate limit [40mb] with [default=40mb, read=0b, write=0b, max=0b]
[2024-12-05T15:29:35,214][INFO ][o.e.c.u.FeatureFlag      ] [bk-agent-prod-gcp-1733403774216489129] The current build is a snapshot, feature flag [multi_dense_vector] is enabled
[2024-12-05T15:29:35,313][INFO ][o.e.c.u.FeatureFlag      ] [bk-agent-prod-gcp-1733403774216489129] The current build is a snapshot, feature flag [sub_objects_auto] is enabled
[2024-12-05T15:29:35,343][INFO ][o.e.f.FeatureService     ] [bk-agent-prod-gcp-1733403774216489129] Registered local node features [cluster.reroute.ignores_metric_param, cluster.stats.source_modes, data_stream.auto_sharding, data_stream.lifecycle.global_retention, data_stream.rollover.lazy, desired_node.version_deprecated, esql.agg_values, esql.async_query, esql.base64_decode_encode, esql.casting_operator, esql.counter_types, esql.disable_nullable_opts, esql.from_options, esql.metadata_fields, esql.metrics_counter_fields, esql.metrics_syntax, esql.mv_ordering_sorted_ascending, esql.mv_sort, esql.resolve_fields_api, esql.spatial_points_from_source, esql.spatial_shapes, esql.st_centroid_agg, esql.st_contains_within, esql.st_disjoint, esql.st_intersects, esql.st_x_y, esql.string_literal_auto_casting, esql.string_literal_auto_casting_extended, esql.timespan_abbreviations, features_supported, file_settings, flattened.ignore_above_support, geoip.downloader.database.configuration, get_database_configuration_action.multi_node, health.dsl.info, health.extended_repository_indicator, knn_retriever_supported, license-trial-independent-version, logsdb_telemetry, logsdb_telemetry_stats, lucene_10_upgrade, mapper.boolean_dimension, mapper.bwc_workaround_9_0, mapper.flattened.ignore_above_with_arrays_support, mapper.ignore_above_index_level_setting, mapper.index_sorting_on_nested, mapper.keyword_dimension_ignore_above, mapper.keyword_normalizer_synthetic_source, mapper.pass_through_priority, mapper.query_index_mode, mapper.range.null_values_off_by_one_fix, mapper.segment_level_fields_stats, mapper.source.synthetic_source_copy_to_fix, mapper.source.synthetic_source_copy_to_inside_objects_fix, mapper.source.synthetic_source_fallback, mapper.source.synthetic_source_stored_fields_advance_fix, mapper.source.synthetic_source_with_copy_to_and_doc_values_false, mapper.subobjects_auto, mapper.subobjects_auto_fixes, mapper.synthetic_source_keep, mapper.track_ignored_source, mapper.vectors.bbq, mapper.vectors.bit_vectors, mapper.vectors.int4_quantization, put_database_configuration_action.ipinfo, query_rule_list_types, query_rule_retriever_supported, query_rules.test, random_reranker_retriever_supported, repositories.supports_usage_stats, rest.capabilities_action, rest.local_only_capabilities, retrievers_supported, routing.boolean_routing_path, routing.multi_value_routing_path, rrf_retriever_composition_supported, rrf_retriever_supported, script.hamming, script.term_stats, search.vectors.k_param_supported, security.migration_framework, security.role_mapping_cleanup, security.roles_metadata_flattened, semantic_text.default_elser_2, semantic_text.inner_hits, semantic_text.search_inference_id, simulate.component.template.substitutions, simulate.index.template.substitutions, simulate.mapping.addition, simulate.mapping.validation, simulate.mapping.validation.templates, simulate.support.non.template.mapping, slm.interval_schedule, snapshot.repository_verify_integrity, standard_retriever_supported, stats.include_disk_thresholds, stats.tier_creation_date, text_similarity_reranker_retriever_composition_supported, text_similarity_reranker_retriever_supported, tsdb.ts_routing_hash_doc_value_parse_byte_ref, unified_highlighter_matched_fields, usage.data_tiers.precalculate_stats]
[2024-12-05T15:29:35,382][INFO ][o.e.c.m.DataStreamGlobalRetentionSettings] [bk-agent-prod-gcp-1733403774216489129] Updated default factory retention to [null]
[2024-12-05T15:29:35,383][INFO ][o.e.c.m.DataStreamGlobalRetentionSettings] [bk-agent-prod-gcp-1733403774216489129] Updated max factory retention to [null]
[2024-12-05T15:29:45,895][ERROR][o.e.b.Elasticsearch      ] [bk-agent-prod-gcp-1733403774216489129] fatal exception while booting Elasticsearch org.elasticsearch.ElasticsearchException: Failure running machine learning native code. This could be due to running on an unsupported OS or distribution, missing OS libraries, or a problem with the temp directory. To bypass this problem by running Elasticsearch without machine learning functionality set [xpack.ml.enabled: false].
	at org.elasticsearch.ml@9.0.0-SNAPSHOT/org.elasticsearch.xpack.ml.MachineLearning.createComponents(MachineLearning.java:1047)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.node.NodeConstruction.lambda$construct$16(NodeConstruction.java:892)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.plugins.PluginsService.lambda$flatMap$0(PluginsService.java:186)
	at java.base/java.util.stream.ReferencePipeline$7$1FlatMap.accept(ReferencePipeline.java:289)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:215)
	at java.base/java.util.AbstractList$RandomAccessSpliterator.forEachRemaining(AbstractList.java:722)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:570)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:560)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:636)
	at java.base/java.util.stream.AbstractPipeline.evaluateToArrayNode(AbstractPipeline.java:291)
	at java.base/java.util.stream.ReferencePipeline.toArray(ReferencePipeline.java:656)
	at java.base/java.util.stream.ReferencePipeline.toArray(ReferencePipeline.java:662)
	at java.base/java.util.stream.ReferencePipeline.toList(ReferencePipeline.java:667)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.node.NodeConstruction.construct(NodeConstruction.java:914)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.node.NodeConstruction.prepareConstruction(NodeConstruction.java:294)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.node.Node.<init>(Node.java:185)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.bootstrap.Elasticsearch$2.<init>(Elasticsearch.java:260)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.bootstrap.Elasticsearch.initPhase3(Elasticsearch.java:260)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:78)] stderr = [ERROR: Elasticsearch did not exit normally - check the logs at /tmp/elasticsearch/logs/elasticsearch.log

ERROR: Elasticsearch died while starting up, with exit code 1]]
Expected: <0>
     but: was <1>
```

**Issue Reasons:**
- [main] 2 consecutive failures in test test40AutoconfigurationNotTriggeredWhenNodeIsMeantToJoinExistingCluster
- [main] 3 consecutive failures in step rhel-7_packaging-tests-unix
- [main] 3 consecutive failures in step ubuntu-1804_packaging-tests-unix
- [main] 2 consecutive failures in step sles-12_archives_packaging-tests-unix
- [main] 2 consecutive failures in step oraclelinux-7_archives_packaging-tests-unix
- [main] 2 consecutive failures in step rhel-7_archives_packaging-tests-unix
- [main] 2 consecutive failures in step ubuntu-1804_archives_packaging-tests-unix
- [main] 3 consecutive failures in step sles-12_packaging-tests-unix
- [main] 3 consecutive failures in step oraclelinux-7_packaging-tests-unix
- [main] 20 failures in test test40AutoconfigurationNotTriggeredWhenNodeIsMeantToJoinExistingCluster (5.2% fail rate in 388 executions)
- [main] 3 failures in step rhel-7_packaging-tests-unix (100.0% fail rate in 3 executions)
- [main] 3 failures in step ubuntu-1804_packaging-tests-unix (100.0% fail rate in 3 executions)
- [main] 2 failures in step sles-12_archives_packaging-tests-unix (100.0% fail rate in 2 executions)
- [main] 2 failures in step oraclelinux-7_archives_packaging-tests-unix (100.0% fail rate in 2 executions)
- [main] 2 failures in step rhel-7_archives_packaging-tests-unix (100.0% fail rate in 2 executions)

**Note:**
This issue was created using new test triage automation. Please report issues or feedback to es-delivery.",elasticsearchmachine,closed,"[':Delivery/Packaging', '>test-failure', 'Team:Delivery', 'needs:risk']",https://github.com/elastic/elasticsearch/issues/118029,2024-12-04T21:16:04Z,3,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/118029,"{
  ""application_resource"": ""unsure""
}"
68,117891,[CI] ArchiveGenerateInitialCredentialsTests test20NoAutoGenerationWhenAutoConfigurationDisabled failing,"**Build Scans:**
- [elasticsearch-periodic-packaging #4870 / ubuntu-1804_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/r5kryd4qqzqto)
- [elasticsearch-periodic-packaging #4870 / rhel-7_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/3az2y2bxpcg2m)
- [elasticsearch-periodic-packaging #4870 / oraclelinux-7_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/swzuvyahuq6su)
- [elasticsearch-periodic-packaging #4870 / sles-12_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/5inclaqnyzpwc)
- [elasticsearch-pull-request #44434 / ubuntu-1804_archives_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/cmpwbm6pua4lo)
- [elasticsearch-pull-request #44434 / rhel-7_archives_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/4ug7exz66bdck)
- [elasticsearch-pull-request #44434 / sles-12_archives_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/klp5fougsizvw)
- [elasticsearch-pull-request #44434 / oraclelinux-7_archives_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/3xozrpjuzfttc)
- [elasticsearch-pull-request #44382 / ubuntu-1804_archives_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/f6vletwxd63os)
- [elasticsearch-pull-request #44382 / sles-12_archives_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/dmlzfr4ctfcka)

**Reproduction Line:**
```
null
```

**Applicable branches:**
main

**Reproduces locally?:**
N/A

**Failure History:**
[See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&_a=(controlGroupState:(initialChildControlState:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:task.keyword,order:0,selectedOptions:!(),title:'GradleTask',type:optionsListControl),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:className.keyword,order:1,selectedOptions:!(org.elasticsearch.packaging.test.ArchiveGenerateInitialCredentialsTests),title:'Suite',type:optionsListControl),'144933da-5c1b-4257-a969-7f43455a7901':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:name.keyword,order:2,selectedOptions:!(test20NoAutoGenerationWhenAutoConfigurationDisabled),title:'Test',type:optionsListControl)))))

**Failure Message:**
```
java.lang.AssertionError: Startup command should succeed. Stderr: [exitCode = [1] stdout = [spawn -ignore HUP sudo -E -u elasticsearch /tmp/elasticsearch/bin/elasticsearch -p /tmp/elasticsearch/elasticsearch.pid -v
Skipping security auto configuration because [xpack.security.autoconfiguration.enabled] is false
CompileCommand: dontinline java/lang/invoke/MethodHandle.setAsTypeCache bool dontinline = true
CompileCommand: dontinline java/lang/invoke/MethodHandle.asTypeUncached bool dontinline = true
[2024-12-03T23:28:33,444][WARN ][x-pack-ml-controller-stderr] [bk-agent-prod-gcp-1733259822423207503] /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/controller: /lib64/libc.so.6: version `GLIBC_2.26' not found (required by /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/../lib/libstdc++.so.6)
[2024-12-03T23:28:33,475][WARN ][x-pack-ml-controller-stderr] [bk-agent-prod-gcp-1733259822423207503] /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/controller: /lib64/libc.so.6: version `GLIBC_2.25' not found (required by /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/../lib/libstdc++.so.6)
[2024-12-03T23:28:33,475][WARN ][x-pack-ml-controller-stderr] [bk-agent-prod-gcp-1733259822423207503] /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/controller: /lib64/libc.so.6: version `GLIBC_2.18' not found (required by /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/../lib/libstdc++.so.6)
[2024-12-03T23:28:33,476][WARN ][x-pack-ml-controller-stderr] [bk-agent-prod-gcp-1733259822423207503] /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/controller: /lib64/libc.so.6: version `GLIBC_2.28' not found (required by /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/../lib/libxml2.so.2)
[2024-12-03T23:28:33,476][WARN ][x-pack-ml-controller-stderr] [bk-agent-prod-gcp-1733259822423207503] /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/controller: /lib64/libc.so.6: version `GLIBC_2.28' not found (required by /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/../lib/libboost_filesystem-gcc13-mt-x64-1_83.so.1.83.0)
[2024-12-03T23:28:33,477][WARN ][x-pack-ml-controller-stderr] [bk-agent-prod-gcp-1733259822423207503] /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/controller: /lib64/libc.so.6: version `GLIBC_2.25' not found (required by /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/../lib/libboost_filesystem-gcc13-mt-x64-1_83.so.1.83.0)
[2024-12-03T23:28:33,597][INFO ][o.e.n.NativeAccess       ] [bk-agent-prod-gcp-1733259822423207503] Using native vector library; to disable start with -Dorg.elasticsearch.nativeaccess.enableVectorLibrary=false
[2024-12-03T23:28:33,611][INFO ][o.e.n.NativeAccess       ] [bk-agent-prod-gcp-1733259822423207503] Using [jdk] native provider and native methods for [Linux]
[2024-12-03T23:28:33,701][INFO ][o.a.l.i.v.PanamaVectorizationProvider] [bk-agent-prod-gcp-1733259822423207503] Java vector incubator API enabled; uses preferredBitSize=256; FMA enabled
[2024-12-03T23:28:36,368][INFO ][o.e.b.Elasticsearch      ] [bk-agent-prod-gcp-1733259822423207503] Bootstrapping java SecurityManager
[2024-12-03T23:28:37,321][INFO ][o.e.n.Node               ] [bk-agent-prod-gcp-1733259822423207503] version[9.0.0-SNAPSHOT], pid[400308], build[tar/f5ff9c6bbb84805647c03a280343a531610f2138/2024-12-03T21:06:32.797605007Z], OS[Linux/3.10.0-1160.119.1.el7.x86_64/amd64], JVM[Oracle Corporation/OpenJDK 64-Bit Server VM/23/23+37-2369]
[2024-12-03T23:28:37,322][INFO ][o.e.n.Node               ] [bk-agent-prod-gcp-1733259822423207503] JVM home [/tmp/elasticsearch/jdk], using bundled JDK [true]
[2024-12-03T23:28:37,322][INFO ][o.e.n.Node               ] [bk-agent-prod-gcp-1733259822423207503] JVM arguments [-Des.networkaddress.cache.ttl=60, -Des.networkaddress.cache.negative.ttl=10, -XX:+AlwaysPreTouch, -Xss1m, -Djava.awt.headless=true, -Dfile.encoding=UTF-8, -Djna.nosys=true, -XX:-OmitStackTraceInFastThrow, -Dio.netty.noUnsafe=true, -Dio.netty.noKeySetOptimization=true, -Dio.netty.recycler.maxCapacityPerThread=0, -Dlog4j.shutdownHookEnabled=false, -Dlog4j2.disable.jmx=true, -Dlog4j2.formatMsgNoLookups=true, -Djava.locale.providers=CLDR, -Des.distribution.type=tar, --enable-native-access=org.elasticsearch.nativeaccess,org.apache.lucene.core, -XX:ReplayDataFile=logs/replay_pid%p.log, -Djava.security.manager=allow, -XX:+UseG1GC, -Djava.io.tmpdir=/tmp/elasticsearch-8729416366226452093, --add-modules=jdk.incubator.vector, -XX:CompileCommand=dontinline,java/lang/invoke/MethodHandle.setAsTypeCache, -XX:CompileCommand=dontinline,java/lang/invoke/MethodHandle.asTypeUncached, -Dorg.apache.lucene.store.defaultReadAdvice=normal, -XX:+HeapDumpOnOutOfMemoryError, -XX:+ExitOnOutOfMemoryError, -XX:HeapDumpPath=data, -XX:ErrorFile=logs/hs_err_pid%p.log, -Xlog:gc*,gc+age=trace,safepoint:file=logs/gc.log:utctime,level,pid,tags:filecount=32,filesize=64m, -Xmx1g, -Xms1g, -XX:MaxDirectMemorySize=536870912, -XX:G1HeapRegionSize=4m, -XX:InitiatingHeapOccupancyPercent=30, -XX:G1ReservePercent=15, --module-path=/tmp/elasticsearch/lib, --add-modules=jdk.net, --add-modules=ALL-MODULE-PATH, -Djdk.module.main=org.elasticsearch.server]
[2024-12-03T23:28:37,323][INFO ][o.e.n.Node               ] [bk-agent-prod-gcp-1733259822423207503] Default Locale [en_US]
[2024-12-03T23:28:37,323][WARN ][o.e.n.Node               ] [bk-agent-prod-gcp-1733259822423207503] version [9.0.0-SNAPSHOT] is a pre-release version of Elasticsearch and is not suitable for production
[2024-12-03T23:28:37,971][INFO ][o.e.c.u.FeatureFlag      ] [bk-agent-prod-gcp-1733259822423207503] The current build is a snapshot, feature flag [esql_semantic_text] is enabled
[2024-12-03T23:28:38,193][INFO ][o.e.c.u.FeatureFlag      ] [bk-agent-prod-gcp-1733259822423207503] The current build is a snapshot, feature flag [esql_inlinestats] is enabled
[2024-12-03T23:28:38,969][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [repository-url]
[2024-12-03T23:28:38,970][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [rest-root]
[2024-12-03T23:28:38,970][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [x-pack-core]
[2024-12-03T23:28:38,970][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [x-pack-redact]
[2024-12-03T23:28:38,971][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [ingest-user-agent]
[2024-12-03T23:28:38,971][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [x-pack-async-search]
[2024-12-03T23:28:38,971][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [test-error-query]
[2024-12-03T23:28:38,971][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [x-pack-monitoring]
[2024-12-03T23:28:38,971][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [repository-s3]
[2024-12-03T23:28:38,972][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [x-pack-analytics]
[2024-12-03T23:28:38,972][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [x-pack-esql-core]
[2024-12-03T23:28:38,972][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [x-pack-ent-search]
[2024-12-03T23:28:38,972][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [x-pack-autoscaling]
[2024-12-03T23:28:38,972][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [lang-painless]
[2024-12-03T23:28:38,973][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [x-pack-ml]
[2024-12-03T23:28:38,973][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [test-die-with-dignity]
[2024-12-03T23:28:38,973][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [lang-mustache]
[2024-12-03T23:28:38,973][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [legacy-geo]
[2024-12-03T23:28:38,973][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [logsdb]
[2024-12-03T23:28:38,974][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [x-pack-ql]
[2024-12-03T23:28:38,974][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [rank-rrf]
[2024-12-03T23:28:38,974][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [analysis-common]
[2024-12-03T23:28:38,974][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [health-shards-availability]
[2024-12-03T23:28:38,975][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [transport-netty4]
[2024-12-03T23:28:38,975][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [aggregations]
[2024-12-03T23:28:38,975][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [ingest-common]
[2024-12-03T23:28:38,975][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [frozen-indices]
[2024-12-03T23:28:38,975][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [x-pack-identity-provider]
[2024-12-03T23:28:38,976][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [x-pack-shutdown]
[2024-12-03T23:28:38,976][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [x-pack-text-structure]
[2024-12-03T23:28:38,976][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [snapshot-repo-test-kit]
[2024-12-03T23:28:38,976][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [test-delayed-aggs]
[2024-12-03T23:28:38,976][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [ml-package-loader]
[2024-12-03T23:28:38,977][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [kibana]
[2024-12-03T23:28:38,977][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [test-esql-heap-attack]
[2024-12-03T23:28:38,977][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [constant-keyword]
[2024-12-03T23:28:38,977][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [x-pack-logstash]
[2024-12-03T23:28:38,977][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [x-pack-ccr]
[2024-12-03T23:28:38,978][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [x-pack-graph]
[2024-12-03T23:28:38,978][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [x-pack-esql]
[2024-12-03T23:28:38,978][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [parent-join]
[2024-12-03T23:28:38,978][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [x-pack-enrich]
[2024-12-03T23:28:38,978][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [counted-keyword]
[2024-12-03T23:28:38,979][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [repositories-metering-api]
[2024-12-03T23:28:38,979][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [transform]
[2024-12-03T23:28:38,979][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [repository-azure]
[2024-12-03T23:28:38,979][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [dot-prefix-validation]
[2024-12-03T23:28:38,980][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [repository-gcs]
[2024-12-03T23:28:38,980][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [x-pack-otel-data]
[2024-12-03T23:28:38,980][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [spatial]
[2024-12-03T23:28:38,980][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [apm]
[2024-12-03T23:28:38,980][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [mapper-extras]
[2024-12-03T23:28:38,981][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [mapper-version]
[2024-12-03T23:28:38,981][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [test-jvm-crash]
[2024-12-03T23:28:38,981][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [x-pack-rollup]
[2024-12-03T23:28:38,981][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [percolator]
[2024-12-03T23:28:38,981][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [data-streams]
[2024-12-03T23:28:38,981][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [x-pack-stack]
[2024-12-03T23:28:38,982][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [rank-eval]
[2024-12-03T23:28:38,982][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [reindex]
[2024-12-03T23:28:38,982][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [test-apm-integration]
[2024-12-03T23:28:38,982][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [x-pack-security]
[2024-12-03T23:28:38,982][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [blob-cache]
[2024-12-03T23:28:38,982][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [searchable-snapshots]
[2024-12-03T23:28:38,983][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [x-pack-slm]
[2024-12-03T23:28:38,983][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [x-pack-geoip-enterprise-downloader]
[2024-12-03T23:28:38,983][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [test-latency-simulating-directory]
[2024-12-03T23:28:38,983][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [snapshot-based-recoveries]
[2024-12-03T23:28:38,984][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [x-pack-watcher]
[2024-12-03T23:28:38,984][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [old-lucene-versions]
[2024-12-03T23:28:38,984][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [x-pack-ilm]
[2024-12-03T23:28:38,985][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [x-pack-inference]
[2024-12-03T23:28:38,985][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [x-pack-voting-only-node]
[2024-12-03T23:28:38,985][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [x-pack-deprecation]
[2024-12-03T23:28:38,985][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [x-pack-fleet]
[2024-12-03T23:28:38,986][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [x-pack-aggregate-metric]
[2024-12-03T23:28:38,986][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [x-pack-downsample]
[2024-12-03T23:28:38,986][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [x-pack-profiling]
[2024-12-03T23:28:38,986][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [ingest-geoip]
[2024-12-03T23:28:38,987][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [x-pack-write-load-forecaster]
[2024-12-03T23:28:38,987][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [search-business-rules]
[2024-12-03T23:28:38,987][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [ingest-attachment]
[2024-12-03T23:28:38,987][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [wildcard]
[2024-12-03T23:28:38,987][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [x-pack-apm-data]
[2024-12-03T23:28:38,987][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [unsigned-long]
[2024-12-03T23:28:38,987][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [x-pack-sql]
[2024-12-03T23:28:38,988][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [runtime-fields-common]
[2024-12-03T23:28:38,988][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [x-pack-async]
[2024-12-03T23:28:38,988][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [x-pack-kql]
[2024-12-03T23:28:38,988][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [vector-tile]
[2024-12-03T23:28:38,988][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [lang-expression]
[2024-12-03T23:28:38,988][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1733259822423207503] loaded module [x-pack-eql]
[2024-12-03T23:28:39,225][INFO ][o.e.c.u.FeatureFlag      ] [bk-agent-prod-gcp-1733259822423207503] The current build is a snapshot, feature flag [failure_store] is enabled
[2024-12-03T23:28:40,070][INFO ][o.e.e.NodeEnvironment    ] [bk-agent-prod-gcp-1733259822423207503] using [1] data paths, mounts [[/ (/dev/sda2)]], net usable_space [273.2gb], net total_space [349.7gb], types [xfs]
[2024-12-03T23:28:40,071][INFO ][o.e.e.NodeEnvironment    ] [bk-agent-prod-gcp-1733259822423207503] heap size [1gb], compressed ordinary object pointers [true]
[2024-12-03T23:28:40,088][INFO ][o.e.n.Node               ] [bk-agent-prod-gcp-1733259822423207503] node name [bk-agent-prod-gcp-1733259822423207503], node ID [ct4qtXm6Q5aC5csXTQ59NA], cluster name [elasticsearch], roles [data_warm, master, remote_cluster_client, data, data_cold, ingest, data_frozen, ml, data_hot, transform, data_content]
[2024-12-03T23:28:44,254][INFO ][o.e.c.u.FeatureFlag      ] [bk-agent-prod-gcp-1733259822423207503] The current build is a snapshot, feature flag [connector_secrets] is enabled
[2024-12-03T23:28:44,436][INFO ][o.e.i.r.RecoverySettings ] [bk-agent-prod-gcp-1733259822423207503] using rate limit [40mb] with [default=40mb, read=0b, write=0b, max=0b]
[2024-12-03T23:28:44,514][INFO ][o.e.c.u.FeatureFlag      ] [bk-agent-prod-gcp-1733259822423207503] The current build is a snapshot, feature flag [multi_dense_vector] is enabled
[2024-12-03T23:28:44,619][INFO ][o.e.c.u.FeatureFlag      ] [bk-agent-prod-gcp-1733259822423207503] The current build is a snapshot, feature flag [sub_objects_auto] is enabled
[2024-12-03T23:28:44,656][INFO ][o.e.f.FeatureService     ] [bk-agent-prod-gcp-1733259822423207503] Registered local node features [cluster.reroute.ignores_metric_param, cluster.stats.source_modes, data_stream.auto_sharding, data_stream.lifecycle.global_retention, data_stream.rollover.lazy, desired_node.version_deprecated, esql.agg_values, esql.async_query, esql.base64_decode_encode, esql.casting_operator, esql.counter_types, esql.disable_nullable_opts, esql.from_options, esql.metadata_fields, esql.metrics_counter_fields, esql.metrics_syntax, esql.mv_ordering_sorted_ascending, esql.mv_sort, esql.resolve_fields_api, esql.spatial_points_from_source, esql.spatial_shapes, esql.st_centroid_agg, esql.st_contains_within, esql.st_disjoint, esql.st_intersects, esql.st_x_y, esql.string_literal_auto_casting, esql.string_literal_auto_casting_extended, esql.timespan_abbreviations, features_supported, file_settings, flattened.ignore_above_support, geoip.downloader.database.configuration, get_database_configuration_action.multi_node, health.dsl.info, health.extended_repository_indicator, knn_retriever_supported, license-trial-independent-version, logsdb_telemetry, logsdb_telemetry_stats, lucene_10_upgrade, mapper.boolean_dimension, mapper.bwc_workaround_9_0, mapper.flattened.ignore_above_with_arrays_support, mapper.ignore_above_index_level_setting, mapper.index_sorting_on_nested, mapper.keyword_dimension_ignore_above, mapper.keyword_normalizer_synthetic_source, mapper.pass_through_priority, mapper.query_index_mode, mapper.range.null_values_off_by_one_fix, mapper.segment_level_fields_stats, mapper.source.synthetic_source_copy_to_fix, mapper.source.synthetic_source_copy_to_inside_objects_fix, mapper.source.synthetic_source_fallback, mapper.source.synthetic_source_stored_fields_advance_fix, mapper.source.synthetic_source_with_copy_to_and_doc_values_false, mapper.subobjects_auto, mapper.subobjects_auto_fixes, mapper.synthetic_source_keep, mapper.track_ignored_source, mapper.vectors.bbq, mapper.vectors.bit_vectors, mapper.vectors.int4_quantization, put_database_configuration_action.ipinfo, query_rule_list_types, query_rule_retriever_supported, query_rules.test, random_reranker_retriever_supported, repositories.supports_usage_stats, rest.capabilities_action, rest.local_only_capabilities, retrievers_supported, routing.boolean_routing_path, routing.multi_value_routing_path, rrf_retriever_composition_supported, rrf_retriever_supported, script.hamming, script.term_stats, search.vectors.k_param_supported, security.migration_framework, security.role_mapping_cleanup, security.roles_metadata_flattened, semantic_text.default_elser_2, semantic_text.inner_hits, semantic_text.search_inference_id, simulate.component.template.substitutions, simulate.index.template.substitutions, simulate.mapping.addition, simulate.mapping.validation, simulate.mapping.validation.templates, simulate.support.non.template.mapping, slm.interval_schedule, snapshot.repository_verify_integrity, standard_retriever_supported, stats.include_disk_thresholds, stats.tier_creation_date, text_similarity_reranker_retriever_composition_supported, text_similarity_reranker_retriever_supported, tsdb.ts_routing_hash_doc_value_parse_byte_ref, unified_highlighter_matched_fields, usage.data_tiers.precalculate_stats]
[2024-12-03T23:28:44,695][INFO ][o.e.c.m.DataStreamGlobalRetentionSettings] [bk-agent-prod-gcp-1733259822423207503] Updated default factory retention to [null]
[2024-12-03T23:28:44,696][INFO ][o.e.c.m.DataStreamGlobalRetentionSettings] [bk-agent-prod-gcp-1733259822423207503] Updated max factory retention to [null]
[2024-12-03T23:28:55,194][ERROR][o.e.b.Elasticsearch      ] [bk-agent-prod-gcp-1733259822423207503] fatal exception while booting Elasticsearch org.elasticsearch.ElasticsearchException: Failure running machine learning native code. This could be due to running on an unsupported OS or distribution, missing OS libraries, or a problem with the temp directory. To bypass this problem by running Elasticsearch without machine learning functionality set [xpack.ml.enabled: false].
	at org.elasticsearch.ml@9.0.0-SNAPSHOT/org.elasticsearch.xpack.ml.MachineLearning.createComponents(MachineLearning.java:1047)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.node.NodeConstruction.lambda$construct$16(NodeConstruction.java:892)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.plugins.PluginsService.lambda$flatMap$0(PluginsService.java:186)
	at java.base/java.util.stream.ReferencePipeline$7$1FlatMap.accept(ReferencePipeline.java:289)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:215)
	at java.base/java.util.AbstractList$RandomAccessSpliterator.forEachRemaining(AbstractList.java:722)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:570)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:560)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:636)
	at java.base/java.util.stream.AbstractPipeline.evaluateToArrayNode(AbstractPipeline.java:291)
	at java.base/java.util.stream.ReferencePipeline.toArray(ReferencePipeline.java:656)
	at java.base/java.util.stream.ReferencePipeline.toArray(ReferencePipeline.java:662)
	at java.base/java.util.stream.ReferencePipeline.toList(ReferencePipeline.java:667)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.node.NodeConstruction.construct(NodeConstruction.java:914)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.node.NodeConstruction.prepareConstruction(NodeConstruction.java:294)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.node.Node.<init>(Node.java:185)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.bootstrap.Elasticsearch$2.<init>(Elasticsearch.java:268)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.bootstrap.Elasticsearch.initPhase3(Elasticsearch.java:268)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:82)

ERROR: Elasticsearch did not exit normally - check the logs at /tmp/elasticsearch/logs/elasticsearch.log

ERROR: Elasticsearch died while starting up, with exit code 1

Failed to determine if startup succeeded] stderr = []]
Expected: <0>
     but: was <1>
```

**Issue Reasons:**
- [main] 2 consecutive failures in test test20NoAutoGenerationWhenAutoConfigurationDisabled
- [main] 2 consecutive failures in step ubuntu-1804_packaging-tests-unix
- [main] 2 consecutive failures in step rhel-7_packaging-tests-unix
- [main] 2 consecutive failures in step oraclelinux-7_packaging-tests-unix
- [main] 2 consecutive failures in step sles-12_packaging-tests-unix
- [main] 2 consecutive failures in step ubuntu-1804_archives_packaging-tests-unix
- [main] 2 consecutive failures in step rhel-7_archives_packaging-tests-unix
- [main] 2 consecutive failures in step sles-12_archives_packaging-tests-unix
- [main] 2 consecutive failures in step oraclelinux-7_archives_packaging-tests-unix
- [main] 16 failures in test test20NoAutoGenerationWhenAutoConfigurationDisabled (5.5% fail rate in 293 executions)
- [main] 2 failures in step ubuntu-1804_packaging-tests-unix (50.0% fail rate in 4 executions)
- [main] 2 failures in step rhel-7_packaging-tests-unix (50.0% fail rate in 4 executions)
- [main] 2 failures in step oraclelinux-7_packaging-tests-unix (66.7% fail rate in 3 executions)
- [main] 2 failures in step sles-12_packaging-tests-unix (66.7% fail rate in 3 executions)
- [main] 2 failures in step ubuntu-1804_archives_packaging-tests-unix (100.0% fail rate in 2 executions)

**Note:**
This issue was created using new test triage automation. Please report issues or feedback to es-delivery.",elasticsearchmachine,closed,"[':Delivery/Build', '>test-failure', 'Team:Delivery', 'needs:risk']",https://github.com/elastic/elasticsearch/issues/117891,2024-12-03T13:13:50Z,3,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/117891,"{
  ""application_resource"": ""unsure""
}"
69,117810,elasticsearch 7.5.1 Problematic frame: # C  0x0000000000000000,"### Elasticsearch Version

7.5.1

### Installed Plugins

analysis-ik , basic auth

### Java Version

OpenJDK Runtime Environment (13.0.1+9)

### OS Version

CentOS Linux release 7.8 64bit

### Problem Description

1ÔºåOperating environment: CentOS 7.8 with Elasticsearch 7.5.1 (OpenJDK Runtime Environment 13.0.1+9)
2ÔºåJVM crash occurred, with no indication of process termination in the system log. The cluster query load and server resources were normal before the exception.
3ÔºåBelow is the crash log.

### Steps to Reproduce

no

### Logs (if relevant)

#
# A fatal error has been detected by the Java Runtime Environment:
#
#  SIGSEGV (0xb) at pc=0x0000000000000000, pid=292920, tid=293688
#
# JRE version: OpenJDK Runtime Environment (13.0.1+9) (build 13.0.1+9)
# Java VM: OpenJDK 64-Bit Server VM (13.0.1+9, mixed mode, sharing, tiered, compressed oops, g1 gc, linux-amd64)
# Problematic frame:
# C  0x0000000000000000
#
# No core dump will be written. Core dumps have been disabled. To enable core dumping, try ""ulimit -c unlimited"" before starting Java again
#
# If you would like to submit a bug report, please visit:
#   https://github.com/AdoptOpenJDK/openjdk-build/issues
#

---------------  S U M M A R Y ------------

Command Line: -Des.networkaddress.cache.ttl=60 -Des.networkaddress.cache.negative.ttl=10 -XX:+AlwaysPreTouch -Xss1m -Djava.awt.headless=true -Dfile.encoding=UTF-8 -Djna.nosys=true -XX:-OmitStackTraceInFastThrow -Dio.netty.noUnsafe=true -Dio.netty.noKeySetOptimization=true -Dio.netty.recycler.maxCapacityPerThread=0 -Dio.netty.allocator.numDirectArenas=0 -Dlog4j.shutdownHookEnabled=false -Dlog4j2.disable.jmx=true -Djava.locale.providers=COMPAT -Xms24g -Xmx24g -XX:+UseG1GC -XX:G1ReservePercent=25 -XX:InitiatingHeapOccupancyPercent=30 -Djava.io.tmpdir=/tmp/elasticsearch-13805822619825575947 -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=data -XX:ErrorFile=logs/hs_err_pid%p.log -Xlog:gc*,gc+age=trace,safepoint:file=logs/gc.log:utctime,pid,tags:filecount=32,filesize=64m -XX:MaxDirectMemorySize=12884901888 -Des.path.home=/data/service/elasticsearch/crm-data-node1 -Des.path.conf=/data/service/elasticsearch/crm-data-node1/config -Des.distribution.flavor=default -Des.distribution.type=tar -Des.bundled_jdk=true org.elasticsearch.bootstrap.Elasticsearch -d

Host: Intel(R) Xeon(R) Gold 5220R CPU @ 2.20GHz, 96 cores, 125G, CentOS Linux release 7.8.2003 (Core)
Time: Fri Nov 29 22:01:52 2024 CST elapsed time: 9231912 seconds (106d 20h 25m 12s)

---------------  T H R E A D  ---------------

Current thread (0x00007f39cc056800):  GCTaskThread ""GC Thread#54"" [stack: 0x00007f39025ce000,0x00007f39026ce000] [id=293688]

Stack: [0x00007f39025ce000,0x00007f39026ce000],  sp=0x00007f39026cc928,  free space=1018k

siginfo: si_signo: 11 (SIGSEGV), si_code: 1 (SEGV_MAPERR), si_addr: 0x0000000000000000

Register to memory mapping:

RAX=0x00007f3a452978c0: <offset 0x00000000016758c0> in /data/service/elasticsearch/crm-data-node1/jdk/lib/server/libjvm.so at 0x00007f3a43c22000
RBX=0x0000000497d0afb8 points into unknown readable memory: 00 00 00 20 00 00 00 01
RCX=0x00000000000000e2 is an unknown value
RDX=0x0000000800000100 is pointing into metadata
RSP=0x00007f39026cc928 points into unknown readable memory: 04 fc 3e 44 3a 7f 00 00
RBP=0x00007f39026cc9b0 points into unknown readable memory: e0 c9 6c 02 39 7f 00 00
RSI=0x0000000497d0afb8 points into unknown readable memory: 00 00 00 20 00 00 00 01
RDI=0x00007f388c04f108 points into unknown readable memory: 08 08 17 45 3a 7f 00 00
R8 =0x0000000800000000 is pointing into metadata
R9 =0x0000000000000101 is an unknown value
R10=0x0000000000000009 is an unknown value
R11=0x0 is NULL
R12=0x0000000000000009 is an unknown value
R13=0x00007f388c04efa0 points into unknown readable memory: 48 08 17 45 3a 7f 00 00
R14=0x00000004590c6f00 is pointing into object: [J 
{0x0000000459000000} - klass: {type array long}
 - length: 191328
R15=0x0100000020000000 is an unknown value


Registers:
RAX=0x00007f3a452978c0, RBX=0x0000000497d0afb8, RCX=0x00000000000000e2, RDX=0x0000000800000100
RSP=0x00007f39026cc928, RBP=0x00007f39026cc9b0, RSI=0x0000000497d0afb8, RDI=0x00007f388c04f108
R8 =0x0000000800000000, R9 =0x0000000000000101, R10=0x0000000000000009, R11=0x0000000000000000
R12=0x0000000000000009, R13=0x00007f388c04efa0, R14=0x00000004590c6f00, R15=0x0100000020000000
RIP=0x0000000000000000, EFLAGS=0x0000000000010206, CSGSFS=0x0000000000000033, ERR=0x0000000000000014
  TRAPNO=0x000000000000000e

Top of Stack: (sp=0x00007f39026cc928)
0x00007f39026cc928:   00007f3a443efc04 0000000000000000
0x00007f39026cc938:   0000000000000218 00007f39026cc960
0x00007f39026cc948:   00007f3a44b4cf01 00007f3a00000000
0x00007f39026cc958:   0000000000000009 ffffffff026cc9d0 

Instructions: (pc=0x0000000000000000)
0xffffffffffffff00:   


Stack slot to memory mapping:
stack at sp + 0 slots: 0x00007f3a443efc04: <offset 0x00000000007cdc04> in /data/service/elasticsearch/crm-data-node1/jdk/lib/server/libjvm.so at 0x00007f3a43c22000
stack at sp + 1 slots: 0x0 is NULL
stack at sp + 2 slots: 0x0000000000000218 is an unknown value
stack at sp + 3 slots: 0x00007f39026cc960 points into unknown readable memory: d0 c9 6c 02 ff ff ff ff
stack at sp + 4 slots: 0x00007f3a44b4cf01: <offset 0x0000000000f2af01> in /data/service/elasticsearch/crm-data-node1/jdk/lib/server/libjvm.so at 0x00007f3a43c22000
stack at sp + 5 slots: 0x00007f3a00000000 points into unknown readable memory: 00 00 00 00 00 00 00 00
stack at sp + 6 slots: 0x0000000000000009 is an unknown value
stack at sp + 7 slots: 0xffffffff026cc9d0 is an unknown value

 
}

Java Threads: ( => current thread )
  0x00007f3a3dfd9800 JavaThread ""Reference Handler"" daemon [_thread_blocked, id=293123, stack(0x00007f39d6df8000,0x00007f39d6ef9000)]
  0x00007f3a3dfdb800 JavaThread ""Finalizer"" daemon [_thread_blocked, id=293124, stack(0x00007f39d6cf7000,0x00007f39d6df8000)]
  0x00007f3a3dfe1000 JavaThread ""Signal Dispatcher"" daemon [_thread_blocked, id=293125, stack(0x00007f39d6bf6000,0x00007f39d6cf7000)]
  0x00007f3a3dfe3000 JavaThread ""C2 CompilerThread0"" daemon [_thread_blocked, id=293126, stack(0x00007f39d6af5000,0x00007f39d6bf6000)]
  0x00007f3a3dfe5000 JavaThread ""C1 CompilerThread0"" daemon [_thread_blocked, id=293127, stack(0x00007f39d69f4000,0x00007f39d6af5000)]
  0x00007f3a3dfe7000 JavaThread ""Sweeper thread"" daemon [_thread_blocked, id=293128, stack(0x00007f39d68f3000,0x00007f39d69f4000)]
  0x00007f3a3e017000 JavaThread ""Service Thread"" daemon [_thread_blocked, id=293136, stack(0x00007f39d64ef000,0x00007f39d65f0000)]
  0x00007f3a3e01c800 JavaThread ""Common-Cleaner"" daemon [_thread_blocked, id=293140, stack(0x00007f39d62ec000,0x00007f39d63ed000)]
  0x00007f3a3e60c000 JavaThread ""process reaper"" daemon [_thread_in_native, id=293350, stack(0x00007f39e8001000,0x00007f39e8023000)]
  0x00007f3a3ee10000 JavaThread ""elasticsearch[bj-ucloud-0-52-crm-data-node1][[timer]]"" daemon [_thread_blocked, id=293725, stack(0x00007f39d5545000,0x00007f39d5646000)]
  0x00007f3a3fd56800 JavaThread ""elasticsearch[bj-ucloud-0-52-crm-data-node1][scheduler][T#1]"" daemon [_thread_blocked, id=293752, stack(0x00007f382faff000,0x00007f382fc00000)]
  0x00007f3a3febe000 JavaThread ""Connection evictor"" daemon [_thread_blocked, id=293779, stack(0x00007f3900099000,0x00007f390019a000)]
  0x00007f3a3ff26800 JavaThread ""elasticsearch[scheduler][T#1]"" daemon [_thread_blocked, id=293780, stack(0x00007f382edfe000,0x00007f382eeff000)]
  0x00007f3a3ff2e000 JavaThread ""ticker-schedule-trigger-engine"" daemon [_thread_blocked, id=293781, stack(0x00007f382ecfd000,0x00007f382edfe000)]
  0x00007f3a3ff6e000 JavaThread ""ml-cpp-log-tail-thread"" daemon [_thread_in_native, id=293783, stack(0x00007f39d5848000,0x00007f39d5949000)]
  0x00007f381cc09800 JavaThread ""elasticsearch[bj-ucloud-0-52-crm-data-node1][transport_worker][T#1]"" daemon [_thread_in_native, id=294112, stack(0x00007f39d5949000,0x00007f39d5a4a000)]
  0x00007f381cdc0800 JavaThread ""elasticsearch[bj-ucloud-0-52-crm-data-node1][clusterApplierService#updateTask][T#1]"" daemon [_thread_blocked, id=294177, stack(0x00007f382d1f4000,0x00007f382d2f5000)]
  0x00007f37ec003000 JavaThread ""elasticsearch[bj-ucloud-0-52-crm-data-node1][transport_worker][T#2]"" daemon [_thread_in_native, id=294181, stack(0x00007f382c9cf000,0x00007f382cad0000)]
  0x00007f37e8005000 JavaThread ""elasticsearch[bj-ucloud-0-52-crm-data-node1][transport_worker][T#3]"" daemon [_thread_blocked, 

.................

Card table byte_map: [0x00007f3a1d28a000,0x00007f3a2028a000] _byte_map_base: 0x00007f3a1c28a000

Marking Bits (Prev, Next): (CMBitMap*) 0x00007f3a3c07bdb8, (CMBitMap*) 0x00007f3a3c07bdf8
 Prev Bits: [0x00007f3a0228a000, 0x00007f3a1a28a000)
 Next Bits: [0x00007f39ea28a000, 0x00007f3a0228a000)

Polling page: 0x00007f3a4611e000

Metaspace:

Usage:
  Non-class:    103.94 MB capacity,    96.11 MB ( 92%) used,     7.03 MB (  7%) free+waste,   825.75 KB ( <1%) overhead. 
      Class:     16.75 MB capacity,    13.03 MB ( 78%) used,     3.29 MB ( 20%) free+waste,   438.75 KB (  3%) overhead. 
       Both:    120.70 MB capacity,   109.14 MB ( 90%) used,    10.32 MB (  9%) free+waste,     1.23 MB (  1%) overhead. 

Virtual space:
  Non-class space:      106.00 MB reserved,     104.20 MB ( 98%) committed 
      Class space:        1.00 GB reserved,      16.82 MB (  2%) committed 
             Both:        1.10 GB reserved,     121.03 MB ( 11%) committed 

Chunk freelists:
   Non-Class:  120.00 KB
       Class:  23.00 KB
        Both:  143.00 KB

MaxMetaspaceSize: unlimited
CompressedClassSpaceSize: 1.00 GB

CodeHeap 'non-profiled nmethods': size=118596Kb used=39966Kb max_used=41574Kb free=78629Kb
 bounds [0x00007f3a2c3ce000, 0x00007f3a2ec9e000, 0x00007f3a3379f000]
CodeHeap 'profiled nmethods': size=118596Kb used=4409Kb max_used=36865Kb free=114186Kb
 bounds [0x00007f3a24ffd000, 0x00007f3a274ad000, 0x00007f3a2c3ce000]
CodeHeap 'non-nmethods': size=8568Kb used=1708Kb max_used=4684Kb free=6859Kb
 bounds [0x00007f3a2479f000, 0x00007f3a24d1f000, 0x00007f3a24ffd000]
 total_blobs=2454648 nmethods=10855 adapters=993
 compilation: enabled
              stopped_count=0, restarted_count=0
 full_count=0

Compilation events (20 events):
Event: 9230640.900 Thread 0x00007f3a3dfe3000 963633       4       org.apache.lucene.index.IndexFileNames::segmentFileName (110 bytes)
Event: 9230640.946 Thread 0x00007f3a3dfe3000 nmethod 963633 0x00007f3a2c466910 code [0x00007f3a2c466b80, 0x00007f3a2c469230]
Event: 9230655.696 Thread 0x00007f3a3dfe3000 963634       4       org.apache.lucene.search.MatchAllDocsQuery::visit (6 bytes)
Event: 9230655.698 Thread 0x00007f3a3dfe3000 nmethod 963634 0x00007f3a2d52cf10 code [0x00007f3a2d52d0a0, 0x00007f3a2d52d178]
Event: 9230694.173 Thread 0x00007f3a3dfe3000 963635       4       java.util.stream.ForEachOps$ForEachOp::getOpFlags (15 bytes)
Event: 9230694.174 Thread 0x00007f3a3dfe3000 nmethod 963635 0x00007f3a2d226290 code [0x00007f3a2d226400, 0x00007f3a2d226498]
Event: 9230808.958 Thread 0x00007f3a3dfe3000 963636       4       java.lang.AbstractStringBuilder::append (54 bytes)
Event: 9230808.980 Thread 0x00007f3a3dfe3000 nmethod 963636 0x00007f3a2d551890 code [0x00007f3a2d551a80, 0x00007f3a2d5529b8]
Event: 9230863.234 Thread 0x00007f3a3dfe3000 963637       4       org.elasticsearch.index.mapper.MappedFieldType::docValueFormat (106 bytes)
Event: 9230863.236 Thread 0x00007f3a3dfe3000 nmethod 963637 0x00007f3a2d82f490 code [0x00007f3a2d82f620, 0x00007f3a2d82f718]
Event: 9230873.152 Thread 0x00007f3a3dfe3000 963638       4       org.apache.lucene.util.packed.DirectMonotonicWriter::add (97 bytes)
Event: 9230873.157 Thread 0x00007f3a3dfe3000 nmethod 963638 0x00007f3a2c417e90 code [0x00007f3a2c418020, 0x00007f3a2c4181c8]
Event: 9230905.637 Thread 0x00007f3a3dfe3000 963639       4       org.elasticsearch.index.mapper.KeywordFieldMapper$KeywordFieldType::fielddataBuilder (12 bytes)
Event: 9230905.641 Thread 0x00007f3a3dfe3000 nmethod 963639 0x00007f3a2c5c5a90 code [0x00007f3a2c5c5c20, 0x00007f3a2c5c5d58]
Event: 9231261.031 Thread 0x00007f3a3dfe3000 963640       4       org.elasticsearch.index.mapper.ParseContext$FilterParseContext::path (8 bytes)
Event: 9231261.034 Thread 0x00007f3a3dfe3000 nmethod 963640 0x00007f3a2c8b4690 code [0x00007f3a2c8b4820, 0x00007f3a2c8b4938]
Event: 9231796.637 Thread 0x00007f3a3dfe3000 963641       4       org.apache.lucene.codecs.lucene80.Lucene80DocValuesProducer$24::nextOrd (96 bytes)
Event: 9231796.650 Thread 0x00007f3a3dfe3000 nmethod 963641 0x00007f3a2c436010 code [0x00007f3a2c4361e0, 0x00007f3a2c436698]
Event: 9231834.793 Thread 0x00007f3a3dfe5000 963642       1       org.elasticsearch.common.lucene.Lucene$DirectoryReaderWithAllLiveDocs$LeafReaderWithLiveDocs::numDocs (5 bytes)
Event: 9231834.794 Thread 0x00007f3a3dfe5000 nmethod 963642 0x00007f3a2d02cb10 code [0x00007f3a2d02cca0, 0x00007f3a2d02cdd0]

GC Heap History (20 events):
Event: 9231836.040 GC heap after
{Heap after GC invocations=6020925 (full 0):
 garbage-first heap   total 25165824K, used 11093836K [0x0000000200000000, 0x0000000800000000)
  region size 8192K, 31 young (253952K), 31 survivors (253952K)
 Metaspace       used 111756K, capacity 123593K, committed 123932K, reserved 1157120K
  class space    used 13344K, capacity 17157K, committed 17228K, reserved 1048576K
}
Event: 9231836.856 GC heap before
{Heap before GC invocations=6020926 (full 0):
 garbage-first heap   total 25165824K, used 11667276K [0x0000000200000000, 0x0000000800000000)
  region size 8192K, 103 young (843776K), 31 survivors (253952K)
 Metaspace       used 111756K, capacity 123593K, committed 123932K, reserved 1157120K
  class space    used 13344K, capacity 17157K, committed 17228K, reserved 1048576K
}
Event: 9231836.901 GC heap after
{Heap after GC invocations=6020927 (full 0):
 garbage-first heap   total 25165824K, used 11071174K [0x0000000200000000, 0x0000000800000000)
  region size 8192K, 25 young (204800K), 25 survivors (204800K)
 Metaspace       used 111756K, capacity 123593K, committed 123932K, reserved 1157120K
  class space    used 13344K, capacity 17157K, committed 17228K, reserved 1048576K
}
Event: 9231844.625 GC heap before
{Heap before GC invocations=6020928 (full 0):
 garbage-first heap   total 25165824K, used 16903878K [0x0000000200000000, 0x0000000800000000)
  region size 8192K, 732 young (5996544K), 25 survivors (204800K)
 Metaspace       used 111756K, capacity 123593K, committed 123932K, reserved 1157120K
  class space    used 13344K, capacity 17157K, committed 17228K, reserved 1048576K
}
Event: 9231844.680 GC heap after
{Heap after GC invocations=6020929 (full 0):
 garbage-first heap   total 25165824K, used 11141211K [0x0000000200000000, 0x0000000800000000)
  region size 8192K, 34 young (278528K), 34 survivors (278528K)
 Metaspace       used 111756K, capacity 123593K, committed 123932K, reserved 1157120K
  class space    used 13344K, capacity 17157K, committed 17228K, reserved 1048576K
}
Event: 9231852.853 GC heap before
{Heap before GC invocations=6020929 (full 0):
 garbage-first heap   total 25165824K, used 17145947K [0x0000000200000000, 0x0000000800000000)
  region size 8192K, 766 young (6275072K), 34 survivors (278528K)
 Metaspace       used 111756K, capacity 123593K, committed 123932K, reserved 1157120K
  class space    used 13344K, capacity 17157K, committed 17228K, reserved 1048576K
}
Event: 9231852.923 GC heap after
{Heap after GC invocations=6020930 (full 0):
 garbage-first heap   total 25165824K, used 11195535K [0x0000000200000000, 0x0000000800000000)
  region size 8192K, 40 young (327680K), 40 survivors (327680K)
 Metaspace       used 111756K, capacity 123593K, committed 123932K, reserved 1157120K
  class space    used 13344K, capacity 17157K, committed 17228K, reserved 1048576K
}
Event: 9231856.029 GC heap before
{Heap before GC invocations=6020930 (full 0):
 garbage-first heap   total 25165824K, used 12989583K [0x0000000200000000, 0x0000000800000000)
  region size 8192K, 261 young (2138112K), 40 survivors (327680K)
 Metaspace       used 111756K, capacity 123593K, committed 123932K, reserved 1157120K
  class space    used 13344K, capacity 17157K, committed 17228K, reserved 1048576K
}
Event: 9231856.087 GC heap after
{Heap after GC invocations=6020931 (full 0):
 garbage-first heap   total 25165824K, used 11202756K [0x0000000200000000, 0x0000000800000000)
  region size 8192K, 41 young (335872K), 41 survivors (335872K)
 Metaspace       used 111756K, capacity 123593K, committed 123932K, reserved 1157120K
  class space    used 13344K, capacity 17157K, committed 17228K, reserved 1048576K
}
Event: 9231863.427 GC heap before
{Heap before GC invocations=6020932 (full 0):
 garbage-first heap   total 25165824K, used 15855812K [0x0000000200000000, 0x0000000800000000)
  region size 8192K, 608 young (4980736K), 41 survivors (335872K)
 Metaspace       used 111756K, capacity 123593K, committed 123932K, reserved 1157120K
  class space    used 13344K, capacity 17157K, committed 17228K, reserved 1048576K
}
Event: 9231863.488 GC heap after
{Heap after GC invocations=6020933 (full 0):
 garbage-first heap   total 25165824K, used 11189501K [0x0000000200000000, 0x0000000800000000)
  region size 8192K, 42 young (344064K), 42 survivors (344064K)
 Metaspace       used 111756K, capacity 123593K, committed 123932K, reserved 1157120K
  class space    used 13344K, capacity 17157K, committed 17228K, reserved 1048576K
}
Event: 9231876.494 GC heap before
{Heap before GC invocations=6020933 (full 0):
 garbage-first heap   total 25165824K, used 16825597K [0x0000000200000000, 0x0000000800000000)
  region size 8192K, 723 young (5922816K), 42 survivors (344064K)
 Metaspace       used 111756K, capacity 123593K, committed 123932K, reserved 1157120K
  class space    used 13344K, capacity 17157K, committed 17228K, reserved 1048576K
}
Event: 9231876.573 GC heap after
{Heap after GC invocations=6020934 (full 0):
 garbage-first heap   total 25165824K, used 11252914K [0x0000000200000000, 0x0000000800000000)
  region size 8192K, 46 young (376832K), 46 survivors (376832K)
 Metaspace       used 111756K, capacity 123593K, committed 123932K, reserved 1157120K
  class space    used 13344K, capacity 17157K, committed 17228K, reserved 1048576K
}
Event: 9231890.395 GC heap before
{Heap before GC invocations=6020934 (full 0):
 garbage-first heap   total 25165824K, used 17077426K [0x0000000200000000, 0x0000000800000000)
  region size 8192K, 758 young (6209536K), 46 survivors (376832K)
 Metaspace       used 111756K, capacity 123593K, committed 123932K, reserved 1157120K
  class space    used 13344K, capacity 17157K, committed 17228K, reserved 1048576K
}
Event: 9231890.447 GC heap after
{Heap after GC invocations=6020935 (full 0):
 garbage-first heap   total 25165824K, used 11140684K [0x0000000200000000, 0x0000000800000000)
  region size 8192K, 32 young (262144K), 32 survivors (262144K)
 Metaspace       used 111756K, capacity 123593K, committed 123932K, reserved 1157120K
  class space    used 13344K, capacity 17157K, committed 17228K, reserved 1048576K
}
Event: 9231891.104 GC heap before
{Heap before GC invocations=6020935 (full 0):
 garbage-first heap   total 25165824K, used 11370060K [0x0000000200000000, 0x0000000800000000)
  region size 8192K, 62 young (507904K), 32 survivors (262144K)
 Metaspace       used 111756K, capacity 123593K, committed 123932K, reserved 1157120K
  class space    used 13344K, capacity 17157K, committed 17228K, reserved 1048576K
}
Event: 9231891.161 GC heap after
{Heap after GC invocations=6020936 (full 0):
 garbage-first heap   total 25165824K, used 11151931K [0x0000000200000000, 0x0000000800000000)
  region size 8192K, 31 young (253952K), 31 survivors (253952K)
 Metaspace       used 111756K, capacity 123593K, committed 123932K, reserved 1157120K
  class space    used 13344K, capacity 17157K, committed 17228K, reserved 1048576K
}
Event: 9231909.539 GC heap before
{Heap before GC invocations=6020937 (full 0):
 garbage-first heap   total 25165824K, used 17041979K [0x0000000200000000, 0x0000000800000000)
  region size 8192K, 754 young (6176768K), 31 survivors (253952K)
 Metaspace       used 111756K, capacity 123593K, committed 123932K, reserved 1157120K
  class space    used 13344K, capacity 17157K, committed 17228K, reserved 1048576K
}
Event: 9231909.597 GC heap after
{Heap after GC invocations=6020938 (full 0):
 garbage-first heap   total 25165824K, used 11123164K [0x0000000200000000, 0x0000000800000000)
  region size 8192K, 29 young (237568K), 29 survivors (237568K)
 Metaspace       used 111756K, capacity 123593K, committed 123932K, reserved 1157120K
  class space    used 13344K, capacity 17157K, committed 17228K, reserved 1048576K
}
Event: 9231912.595 GC heap before
{Heap before GC invocations=6020938 (full 0):
 garbage-first heap   total 25165824K, used 12130780K [0x0000000200000000, 0x0000000800000000)
  region size 8192K, 153 young (1253376K), 29 survivors (237568K)
 Metaspace       used 111756K, capacity 123593K, committed 123932K, reserved 1157120K
  class space    used 13344K, capacity 17157K, committed 17228K, reserved 1048576K
}

Deoptimization events (20 events):
Event: 9231286.796 Thread 0x00007f3240002800 DEOPT PACKING pc=0x00007f3a2c826bdc sp=0x00007f1cab6e7280
Event: 9231286.796 Thread 0x00007f3240002800 DEOPT UNPACKING pc=0x00007f3a247a6f25 sp=0x00007f1cab6e6d40 mode 2
Event: 9231286.918 Thread 0x00007f3664108000 Uncommon trap: trap_request=0xfffffff7 fr.pc=0x00007f3a2c826bdc relative=0x00000000000022bc
Event: 9231286.918 Thread 0x00007f3664108000 Uncommon trap: reason=null_check action=none pc=0x00007f3a2c826bdc method=org.elasticsearch.painless.DefBootstrap$MIC.checkBoth(Ljava/lang/Class;Ljava/lang/Class;Ljava/lang/Object;Ljava/lang/Object;)Z @ 1 c2
Event: 9231286.918 Thread 0x00007f3664108000 DEOPT PACKING pc=0x00007f3a2c826bdc sp=0x00007f3191d38240
Event: 9231286.918 Thread 0x00007f3664108000 DEOPT UNPACKING pc=0x00007f3a247a6f25 sp=0x00007f3191d37d00 mode 2
Event: 9231796.637 Thread 0x00007f240000b800 Uncommon trap: trap_request=0xffffff0c fr.pc=0x00007f3a2d7a59d8 relative=0x00000000000002f8
Event: 9231796.637 Thread 0x00007f240000b800 Uncommon trap: reason=tenured action=make_not_entrant pc=0x00007f3a2d7a59d8 method=org.apache.lucene.codecs.lucene80.Lucene80DocValuesProducer$24.nextOrd()J @ 0 c2
Event: 9231796.637 Thread 0x00007f240000b800 DEOPT PACKING pc=0x00007f3a2d7a59d8 sp=0x00007f3203aa8290
Event: 9231796.637 Thread 0x00007f240000b800 DEOPT UNPACKING pc=0x00007f3a247a6f25 sp=0x00007f3203aa8268 mode 2
Event: 9231828.287 Thread 0x00007f37b8127000 DEOPT PACKING pc=0x00007f3a2cb96ca7 sp=0x00007f33dedec560
Event: 9231828.287 Thread 0x00007f37b8127000 DEOPT UNPACKING pc=0x00007f3a247e714a sp=0x00007f33dedeba20 mode 3
Event: 9231839.779 Thread 0x00007f36e0111000 Uncommon trap: trap_request=0xfffffff7 fr.pc=0x00007f3a2c826bdc relative=0x00000000000022bc
Event: 9231839.779 Thread 0x00007f36e0111000 Uncommon trap: reason=null_check action=none pc=0x00007f3a2c826bdc method=org.elasticsearch.painless.DefBootstrap$MIC.checkBoth(Ljava/lang/Class;Ljava/lang/Class;Ljava/lang/Object;Ljava/lang/Object;)Z @ 1 c2
Event: 9231839.779 Thread 0x00007f36e0111000 DEOPT PACKING pc=0x00007f3a2c826bdc sp=0x00007f1cbd047280
Event: 9231839.779 Thread 0x00007f36e0111000 DEOPT UNPACKING pc=0x00007f3a247a6f25 sp=0x00007f1cbd046d40 mode 2
Event: 9231839.780 Thread 0x00007f36e0111000 Uncommon trap: trap_request=0xfffffff7 fr.pc=0x00007f3a2c826bdc relative=0x00000000000022bc
Event: 9231839.780 Thread 0x00007f36e0111000 Uncommon trap: reason=null_check action=none pc=0x00007f3a2c826bdc method=org.elasticsearch.painless.DefBootstrap$MIC.checkBoth(Ljava/lang/Class;Ljava/lang/Class;Ljava/lang/Object;Ljava/lang/Object;)Z @ 1 c2
Event: 9231839.780 Thread 0x00007f36e0111000 DEOPT PACKING pc=0x00007f3a2c826bdc sp=0x00007f1cbd047280
Event: 9231839.780 Thread 0x00007f36e0111000 DEOPT UNPACKING pc=0x00007f3a247a6f25 sp=0x00007f1cbd046d40 mode 2

Classes unloaded (20 events):
Event: 8957504.722 Thread 0x00007f3a3dfd7000 Unloading class 0x0000000801a8d840 'java/lang/invoke/LambdaForm$MH'
Event: 8957504.722 Thread 0x00007f3a3dfd7000 Unloading class 0x0000000801b2b440 'java/lang/invoke/LambdaForm$MH'
Event: 8957504.722 Thread 0x00007f3a3dfd7000 Unloading class 0x0000000801a85440 'java/lang/invoke/LambdaForm$MH'
Event: 8957504.722 Thread 0x00007f3a3dfd7000 Unloading class 0x0000000801a00c40 'java/lang/invoke/LambdaForm$MH'
Event: 8957504.722 Thread 0x00007f3a3dfd7000 Unloading class 0x00000008019ec040 'java/lang/invoke/LambdaForm$MH'
Event: 8957504.722 Thread 0x00007f3a3dfd7000 Unloading class 0x0000000801ba1040 'java/lang/invoke/LambdaForm$MH'
Event: 8957504.722 Thread 0x00007f3a3dfd7000 Unloading class 0x0000000801ba6040 'java/lang/invoke/LambdaForm$MH'
Event: 8957504.722 Thread 0x00007f3a3dfd7000 Unloading class 0x0000000801ba6c40 'java/lang/invoke/LambdaForm$MH'
Event: 8957504.722 Thread 0x00007f3a3dfd7000 Unloading class 0x0000000801ba7040 'java/lang/invoke/LambdaForm$BMH'
Event: 8957504.722 Thread 0x00007f3a3dfd7000 Unloading class 0x0000000801ba2440 'java/lang/invoke/LambdaForm$MH'
Event: 9221934.795 Thread 0x00007f3a3dfd7000 Unloading class 0x0000000801a85440 'jdk/internal/reflect/GeneratedConstructorAccessor202'
Event: 9221934.795 Thread 0x00007f3a3dfd7000 Unloading class 0x0000000801b2b440 'jdk/internal/reflect/GeneratedConstructorAccessor200'
Event: 9221934.795 Thread 0x00007f3a3dfd7000 Unloading class 0x0000000801a8d840 'jdk/internal/reflect/GeneratedConstructorAccessor199'
Event: 9221934.795 Thread 0x00007f3a3dfd7000 Unloading class 0x0000000801add440 'jdk/internal/reflect/GeneratedConstructorAccessor198'
Event: 9221934.796 Thread 0x00007f3a3dfd7000 Unloading class 0x0000000801af7040 'jdk/internal/reflect/GeneratedConstructorAccessor203'
Event: 9221934.796 Thread 0x00007f3a3dfd7000 Unloading class 0x00000008019edc40 'jdk/internal/reflect/GeneratedConstructorAccessor201'
Event: 9221934.796 Thread 0x00007f3a3dfd7000 Unloading class 0x0000000801ba0c40 'jdk/internal/reflect/GeneratedConstructorAccessor196'
Event: 9221934.796 Thread 0x00007f3a3dfd7000 Unloading class 0x0000000801ae7040 'jdk/internal/reflect/GeneratedConstructorAccessor194'
Event: 9221934.796 Thread 0x00007f3a3dfd7000 Unloading class 0x0000000801ba8440 'jdk/internal/reflect/GeneratedConstructorAccessor192'
Event: 9221934.796 Thread 0x00007f3a3dfd7000 Unloading class 0x0000000801ba9c40 'jdk/internal/reflect/GeneratedConstructorAccessor191'

Classes redefined (0 events):
No events

Internal exceptions (20 events):
Event: 9231888.880 Thread 0x00007f37e8038800 Exception <a 'sun/nio/fs/UnixException'{0x00000006b0681c20}> (0x00000006b0681c20) 
thrown [/home/jenkins/workspace/build-scripts/jobs/jdk13u/jdk13u-linux-x64-hotspot/workspace/build/src/src/hotspot/share/prims/jni.cpp, line 598]
Event: 9231888.881 Thread 0x00007f372c10f800 Exception <a 'sun/nio/fs/UnixException'{0x00000006b07cc7c8}> (0x00000006b07cc7c8) 
thrown [/home/jenkins/workspace/build-scripts/jobs/jdk13u/jdk13u-linux-x64-hotspot/workspace/build/src/src/hotspot/share/prims/jni.cpp, line 598]
Event: 9231888.882 Thread 0x00007f37e8038800 Exception <a 'sun/nio/fs/UnixException'{0x00000006b06c8750}> (0x00000006b06c8750) 
thrown [/home/jenkins/workspace/build-scripts/jobs/jdk13u/jdk13u-linux-x64-hotspot/workspace/build/src/src/hotspot/share/prims/jni.cpp, line 598]
Event: 9231888.883 Thread 0x00007f372c10f800 Exception <a 'sun/nio/fs/UnixException'{0x00000006af92b2e8}> (0x00000006af92b2e8) 
thrown [/home/jenkins/workspace/build-scripts/jobs/jdk13u/jdk13u-linux-x64-hotspot/workspace/build/src/src/hotspot/share/prims/jni.cpp, line 598]
Event: 9231906.350 Thread 0x00007f3710101800 Exception <a 'sun/nio/fs/UnixException'{0x00000007d4e793f8}> (0x00000007d4e793f8) 
thrown [/home/jenkins/workspace/build-scripts/jobs/jdk13u/jdk13u-linux-x64-hotspot/workspace/build/src/src/hotspot/share/prims/jni.cpp, line 598]
Event: 9231906.353 Thread 0x00007f3710101800 Exception <a 'sun/nio/fs/UnixException'{0x00000007d4f00e58}> (0x00000007d4f00e58) 
thrown [/home/jenkins/workspace/build-scripts/jobs/jdk13u/jdk13u-linux-x64-hotspot/workspace/build/src/src/hotspot/share/prims/jni.cpp, line 598]
Event: 9231906.355 Thread 0x00007f37f4095800 Exception <a 'sun/nio/fs/UnixException'{0x00000006d74f8068}> (0x00000006d74f8068) 
thrown [/home/jenkins/workspace/build-scripts/jobs/jdk13u/jdk13u-linux-x64-hotspot/workspace/build/src/src/hotspot/share/prims/jni.cpp, line 598]
Event: 9231906.356 Thread 0x00007f37f4095800 Exception <a 'sun/nio/fs/UnixException'{0x00000006d753eb98}> (0x00000006d753eb98) 
thrown [/home/jenkins/workspace/build-scripts/jobs/jdk13u/jdk13u-linux-x64-hotspot/workspace/build/src/src/hotspot/share/prims/jni.cpp, line 598]
Event: 9231906.356 Thread 0x00007f37e8038800 Exception <a 'sun/nio/fs/UnixException'{0x00000006d6830058}> (0x00000006d6830058) 
thrown [/home/jenkins/workspace/build-scripts/jobs/jdk13u/jdk13u-linux-x64-hotspot/workspace/build/src/src/hotspot/share/prims/jni.cpp, line 598]
Event: 9231906.358 Thread 0x00007f37e8038800 Exception <a 'sun/nio/fs/UnixException'{0x00000006d6876b38}> (0x00000006d6876b38) 
thrown [/home/jenkins/workspace/build-scripts/jobs/jdk13u/jdk13u-linux-x64-hotspot/workspace/build/src/src/hotspot/share/prims/jni.cpp, line 598]
Event: 9231911.070 Thread 0x00007f372c10f800 Exception <a 'sun/nio/fs/UnixException'{0x00000007e3642c38}> (0x00000007e3642c38) 
thrown [/home/jenkins/workspace/build-scripts/jobs/jdk13u/jdk13u-linux-x64-hotspot/workspace/build/src/src/hotspot/share/prims/jni.cpp, line 598]
Event: 9231911.072 Thread 0x00007f372c10f800 Exception <a 'sun/nio/fs/UnixException'{0x00000007e3777e68}> (0x00000007e3777e68) 
thrown [/home/jenkins/workspace/build-scripts/jobs/jdk13u/jdk13u-linux-x64-hotspot/workspace/build/src/src/hotspot/share/prims/jni.cpp, line 598]
Event: 9231911.073 Thread 0x00007f3710101800 Exception <a 'sun/nio/fs/UnixException'{0x00000007e2841cc8}> (0x00000007e2841cc8) 
thrown [/home/jenkins/workspace/build-scripts/jobs/jdk13u/jdk13u-linux-x64-hotspot/workspace/build/src/src/hotspot/share/prims/jni.cpp, line 598]
Event: 9231911.075 Thread 0x00007f3710101800 Exception <a 'sun/nio/fs/UnixException'{0x00000007e29a2358}> (0x00000007e29a2358) 
thrown [/home/jenkins/workspace/build-scripts/jobs/jdk13u/jdk13u-linux-x64-hotspot/workspace/build/src/src/hotspot/share/prims/jni.cpp, line 598]
Event: 9231911.186 Thread 0x00007f37f4095800 Exception <a 'sun/nio/fs/UnixException'{0x00000007e2628410}> (0x00000007e2628410) 
thrown [/home/jenkins/workspace/build-scripts/jobs/jdk13u/jdk13u-linux-x64-hotspot/workspace/build/src/src/hotspot/share/prims/jni.cpp, line 598]
Event: 9231911.188 Thread 0x00007f37f4095800 Exception <a 'sun/nio/fs/UnixException'{0x00000007e266ee48}> (0x00000007e266ee48) 
thrown [/home/jenkins/workspace/build-scripts/jobs/jdk13u/jdk13u-linux-x64-hotspot/workspace/build/src/src/hotspot/share/prims/jni.cpp, line 598]
Event: 9231911.189 Thread 0x00007f37e8038800 Exception <a 'sun/nio/fs/UnixException'{0x00000007e2753f08}> (0x00000007e2753f08) 
thrown [/home/jenkins/workspace/build-scripts/jobs/jdk13u/jdk13u-linux-x64-hotspot/workspace/build/src/src/hotspot/share/prims/jni.cpp, line 598]
Event: 9231911.190 Thread 0x00007f37e8038800 Exception <a 'sun/nio/fs/UnixException'{0x00000007e18467e8}> (0x00000007e18467e8) 
thrown [/home/jenkins/workspace/build-scripts/jobs/jdk13u/jdk13u-linux-x64-hotspot/workspace/build/src/src/hotspot/share/prims/jni.cpp, line 598]
Event: 9231911.197 Thread 0x00007f3710101800 Exception <a 'sun/nio/fs/UnixException'{0x00000007e1b91ad0}> (0x00000007e1b91ad0) 
thrown [/home/jenkins/workspace/build-scripts/jobs/jdk13u/jdk13u-linux-x64-hotspot/workspace/build/src/src/hotspot/share/prims/jni.cpp, line 598]
Event: 9231911.200 Thread 0x00007f3710101800 Exception <a 'sun/nio/fs/UnixException'{0x00000007e1c73ff0}> (0x00000007e1c73ff0) 
thrown [/home/jenkins/workspace/build-scripts/jobs/jdk13u/jdk13u-linux-x64-hotspot/workspace/build/src/src/hotspot/share/prims/jni.cpp, line 598]

Events (20 events):
Event: 9231882.671 Thread 0x00007f3254021000 Thread added: 0x00007f3254021000
Event: 9231882.671 Protecting memory [0x00007f32039a9000,0x00007f32039ad000] with protection modes 0
Event: 9231882.785 Thread 0x00007f3254021000 Thread exited: 0x00007f3254021000
Event: 9231890.393 Executing VM operation: G1CollectForAllocation
Event: 9231890.447 Executing VM operation: G1CollectForAllocation done
Event: 9231891.101 Executing VM operation: G1CollectForAllocation
Event: 9231891.162 Executing VM operation: G1CollectForAllocation done
Event: 9231891.254 Executing VM operation: G1Concurrent
Event: 9231891.297 Executing VM operation: G1Concurrent done
Event: 9231891.377 Executing VM operation: G1Concurrent
Event: 9231891.381 Executing VM operation: G1Concurrent done
Event: 9231903.369 Thread 0x00007f39800c0800 Thread added: 0x00007f39800c0800
Event: 9231903.369 Protecting memory [0x00007f32039a9000,0x00007f32039ad000] with protection modes 0
Event: 9231903.593 Thread 0x00007f39800c0800 Thread exited: 0x00007f39800c0800
Event: 9231909.537 Executing VM operation: G1CollectForAllocation
Event: 9231909.598 Executing VM operation: G1CollectForAllocation done
Event: 9231909.714 Thread 0x00007f2994009000 Thread added: 0x00007f2994009000
Event: 9231909.714 Protecting memory [0x00007f32039a9000,0x00007f32039ad000] with protection modes 0
Event: 9231910.081 Thread 0x00007f2994009000 Thread exited: 0x00007f2994009000
Event: 9231912.591 Executing VM operation: G1CollectForAllocation


Dynamic libraries:
00400000-00401000 r-xp 00000000 08:04 3223411143                         /data/service/elasticsearch/crm-data-node1/jdk/bin/java
00600000-00601000 r--p 00000000 08:04 3223411143                         /data/service/elasticsearch/crm-data-node1/jdk/bin/java
00601000-00602000 rw-p 00001000 08:04 3223411143                         /data/service/elasticsearch/crm-data-node1/jdk/bin/java
00900000-00921000 rw-p 00000000 00:00 0                                  [heap]
200000000-7ff700000 rw-p 00000000 00:00 0 
7ff700000-7ff748000 rw-p 00b60000 08:04 430403                           /data/service/elasticsearch/crm-data-node1/jdk/lib/server/classes.jsa
7ff748000-7ff800000 rw-p 00000000 00:00 0 
7ff800000-7ff878000 rw-p 00ae8000 08:04 430403                           /data/service/elasticsearch/crm-data-node1/jdk/lib/server/classes.jsa
7ff878000-800000000 rw-p 00000000 00:00 0 
800000000-800003000 rwxp 00001000 08:04 430403                           /data/service/elasticsearch/crm-data-node1/jdk/lib/server/classes.jsa
800003000-8003d7000 rw-p 00004000 08:04 430403                           /data/service/elasticsearch/crm-data-node1/jdk/lib/server/classes.jsa
8003d7000-800ae6000 r--p 003d8000 08:04 430403                           /data/service/elasticsearch/crm-data-node1/jdk/lib/server/classes.jsa
800ae6000-800ae7000 rw-p 00ae7000 08:04 430403                           /data/service/elasticsearch/crm-data-node1/jdk/lib/server/classes.jsa

7f3a46113000-7f3a46114000 rwxp 00000000 00:00 0 
7f3a46114000-7f3a46115000 r--p 00000000 00:00 0 
7f3a46115000-7f3a46116000 r--s 00000000 08:04 3221998969                 /data/service/elasticsearch/crm-data-node1/data/nodes/0/indices/h6CyRcdURBKarGbY3klcbQ/1/index/_5pony_1_Lucene80_0.dvd
7f3a46116000-7f3a4611e000 rw-s 00000000 08:03 100835182                  /tmp/hsperfdata_ops/292920
7f3a4611e000-7f3a4611f000 ---p 00000000 00:00 0 
7f3a4611f000-7f3a46120000 r--p 00000000 00:00 0 
7f3a46120000-7f3a46121000 ---p 00000000 00:00 0 
7f3a46121000-7f3a46122000 rw-p 00000000 00:00 0 
7f3a46122000-7f3a46123000 r--p 00021000 08:03 35603790                   /usr/lib64/ld-2.17.so
7f3a46123000-7f3a46124000 rw-p 00022000 08:03 35603790                   /usr/lib64/ld-2.17.so
7f3a46124000-7f3a46125000 rw-p 00000000 00:00 0 
7ffc0d92f000-7ffc0d950000 rw-p 00000000 00:00 0                          [stack]
7ffc0d9bc000-7ffc0d9be000 r-xp 00000000 00:00 0                          [vdso]
ffffffffff600000-ffffffffff601000 r-xp 00000000 00:00 0                  [vsyscall]

.............

VM Arguments:
jvm_args: -Des.networkaddress.cache.ttl=60 -Des.networkaddress.cache.negative.ttl=10 -XX:+AlwaysPreTouch -Xss1m -Djava.awt.headless=true -Dfile.encoding=UTF-8 -Djna.nosys=true -XX:-OmitStackTraceInFastThrow -Dio.netty.noUnsafe=true -Dio.netty.noKeySetOptimization=true -Dio.netty.recycler.maxCapacityPerThread=0 -Dio.netty.allocator.numDirectArenas=0 -Dlog4j.shutdownHookEnabled=false -Dlog4j2.disable.jmx=true -Djava.locale.providers=COMPAT -Xms24g -Xmx24g -XX:+UseG1GC -XX:G1ReservePercent=25 -XX:InitiatingHeapOccupancyPercent=30 -Djava.io.tmpdir=/tmp/elasticsearch-13805822619825575947 -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=data -XX:ErrorFile=logs/hs_err_pid%p.log -Xlog:gc*,gc+age=trace,safepoint:file=logs/gc.log:utctime,pid,tags:filecount=32,filesize=64m -XX:MaxDirectMemorySize=12884901888 -Des.path.home=/data/service/elasticsearch/crm-data-node1 -Des.path.conf=/data/service/elasticsearch/crm-data-node1/config -Des.distribution.flavor=default -Des.distribution.type=tar -Des.bundled_jdk=true 
java_command: org.elasticsearch.bootstrap.Elasticsearch -d
java_class_path (initial): /data/service/elasticsearch/crm-data-node1/lib/HdrHistogram-2.1.9.jar:/data/service/elasticsearch/crm-data-node1/lib/elasticsearch-7.5.1.jar:/data/service/elasticsearch/crm-data-node1/lib/elasticsearch-cli-7.5.1.jar:/data/service/elasticsearch/crm-data-node1/lib/elasticsearch-core-7.5.1.jar:/data/service/elasticsearch/crm-data-node1/lib/elasticsearch-geo-7.5.1.jar:/data/service/elasticsearch/crm-data-node1/lib/elasticsearch-launchers-7.5.1.jar:/data/service/elasticsearch/crm-data-node1/lib/elasticsearch-plugin-classloader-7.5.1.jar:/data/service/elasticsearch/crm-data-node1/lib/elasticsearch-secure-sm-7.5.1.jar:/data/service/elasticsearch/crm-data-node1/lib/elasticsearch-x-content-7.5.1.jar:/data/service/elasticsearch/crm-data-node1/lib/hppc-0.8.1.jar:/data/service/elasticsearch/crm-data-node1/lib/jackson-core-2.8.11.jar:/data/service/elasticsearch/crm-data-node1/lib/jackson-dataformat-cbor-2.8.11.jar:/data/service/elasticsearch/crm-data-node1/lib/jackson-dataformat-smile-2.8.11.jar:/data/service/elasticsearch/crm-data-node1/lib/jackson-dataformat-yaml-2.8.11.jar:/data/service/elasticsearch/crm-data-node1/lib/java-version-checker-7.5.1.jar:/data/service/elasticsearch/crm-data-node1/lib/jna-4.5.1.jar:/data/service/elasticsearch/crm-data-node1/lib/joda-time-2.10.3.jar:/data/service/elasticsearch/crm-data-node1/lib/jopt-simple-5.0.2.jar:/data/service/elasticsearch/crm-data-node1/lib/jts-core-1.15.0.jar:/data/service/elasticsearch/crm-data-node1/lib/log4j-api-2.11.1.jar:/data/service/elasticsearch/crm-data-node1/lib/log4j-core-2.11.1.jar:/data/service/elasticsearch/crm-data-node1/lib/lucene-analyzers-common-8.3.0.jar:/data/service/elasticsearch/crm-data-node1/lib/lucene-backward-codecs-8.3.0.jar:/data/service/elasticsearch/crm-data-node1/lib/lucene-core-8.3.0.jar:/data/service/elasticsearch/crm-data-node1/lib/lucene-grouping-8.3.0.jar:/data/service/elasticsearch/crm-data-node1/lib/lucene-highlighter-8.3.0.jar:/data/service/elasticsearch/crm-
Launcher Type: SUN_STANDARD

[Global flags]
     bool AlwaysPreTouch                           = true                                      {product} {command line}
     intx CICompilerCount                          = 18                                        {product} {ergonomic}
     uint ConcGCThreads                            = 16                                        {product} {ergonomic}
    ccstr ErrorFile                                = logs/hs_err_pid%p.log                     {product} {command line}
     uint G1ConcRefinementThreads                  = 63                                        {product} {ergonomic}
   size_t G1HeapRegionSize                         = 8388608                                   {product} {ergonomic}
    uintx G1ReservePercent                         = 25                                        {product} {command line}
    uintx GCDrainStackTargetSize                   = 64                                        {product} {ergonomic}
     bool HeapDumpOnOutOfMemoryError               = true                                   {manageable} {command line}
    ccstr HeapDumpPath                             = data                                   {manageable} {command line}
   size_t InitialHeapSize                          = 25769803776                               {product} {command line}
    uintx InitiatingHeapOccupancyPercent           = 30                                        {product} {command line}
   size_t MarkStackSize                            = 4194304                                   {product} {ergonomic}
 uint64_t MaxDirectMemorySize                      = 12884901888                               {product} {command line}
   size_t MaxHeapSize                              = 25769803776                               {product} {command line}
   size_t MaxNewSize                               = 15460204544                               {product} {ergonomic}
   size_t MinHeapDeltaBytes                        = 8388608                                   {product} {ergonomic}
   size_t MinHeapSize                              = 25769803776                               {product} {command line}
    uintx NonNMethodCodeHeapSize                   = 8769992                                {pd product} {ergonomic}
    uintx NonProfiledCodeHeapSize                  = 121444124                              {pd product} {ergonomic}
     bool OmitStackTraceInFastThrow                = false                                     {product} {command line}
    uintx ProfiledCodeHeapSize                     = 121444124                              {pd product} {ergonomic}
    uintx ReservedCodeCacheSize                    = 251658240                              {pd product} {ergonomic}
     bool SegmentedCodeCache                       = true                                      {product} {ergonomic}
   size_t SoftMaxHeapSize                          = 25769803776                            {manageable} {ergonomic}
     intx ThreadStackSize                          = 1024                                   {pd product} {command line}
     bool UseCompressedClassPointers               = true                                 {lp64_product} {ergonomic}
     bool UseCompressedOops                        = true                                 {lp64_product} {ergonomic}
     bool UseG1GC                                  = true                                      {product} {command line}

Logging:
Log output configuration:
 #0: stdout all=warning uptime,level,tags
 #1: stderr all=off uptime,level,tags
 #2: file=logs/gc.log all=off,gc*=info,age*=trace,safepoint=info utctime,pid,tags filecount=32,filesize=65536K

Environment Variables:
JAVA_HOME=/data/service/elasticsearch/crm-data-node1/jdk
JRE_HOME=/usr/local/jdk_current/jre
CLASSPATH=.:/usr/local/jdk_current/lib:/usr/local/jdk_current/jre/lib:
PATH=/usr/local/jdk_current/bin:/usr/local/jdk_current/jre/bin:/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/home/ops/.local/bin:/home/ops/bin
SHELL=/bin/bash

Signal Handlers:
SIGSEGV: [libjvm.so+0xfe1a10], sa_mask[0]=11111111011111111101111111111110, sa_flags=SA_RESTART|SA_SIGINFO
SIGBUS: [libjvm.so+0xfe1a10], sa_mask[0]=11111111011111111101111111111110, sa_flags=SA_RESTART|SA_SIGINFO
SIGFPE: [libjvm.so+0xfe1a10], sa_mask[0]=11111111011111111101111111111110, sa_flags=SA_RESTART|SA_SIGINFO
SIGPIPE: [libjvm.so+0xc7cd40], sa_mask[0]=11111111011111111101111111111110, sa_flags=SA_RESTART|SA_SIGINFO
SIGXFSZ: [libjvm.so+0xc7cd40], sa_mask[0]=11111111011111111101111111111110, sa_flags=SA_RESTART|SA_SIGINFO
SIGILL: [libjvm.so+0xfe1a10], sa_mask[0]=11111111011111111101111111111110, sa_flags=SA_RESTART|SA_SIGINFO
SIGUSR2: [libjvm.so+0xc7cbe0], sa_mask[0]=00000000000000000000000000000000, sa_flags=SA_RESTART|SA_SIGINFO
SIGHUP: [libjvm.so+0xc7d1e0], sa_mask[0]=11111111011111111101111111111110, sa_flags=SA_RESTART|SA_SIGINFO
SIGINT: SIG_IGN, sa_mask[0]=00000000000000000000000000000000, sa_flags=none
SIGTERM: [libjvm.so+0xc7d1e0], sa_mask[0]=11111111011111111101111111111110, sa_flags=SA_RESTART|SA_SIGINFO
SIGQUIT: [libjvm.so+0xc7d1e0], sa_mask[0]=11111111011111111101111111111110, sa_flags=SA_RESTART|SA_SIGINFO


---------------  S Y S T E M  ---------------

OS:CentOS Linux release 7.8.2003 (Core)
uname:Linux 3.10.0-1160.102.1.el7.x86_64 #1 SMP Tue Oct 17 15:42:21 UTC 2023 x86_64
libc:glibc 2.17 NPTL 2.17 
rlimit: STACK 8192k, CORE 0k, NPROC 65535, NOFILE 65536, AS infinity, DATA infinity, FSIZE infinity
load average:2.27 1.91 2.08

/proc/meminfo:
MemTotal:       131429420 kB
MemFree:         1379648 kB
MemAvailable:   38763548 kB
Buffers:              20 kB
Cached:         36969684 kB
SwapCached:            0 kB
Active:         44173108 kB
Inactive:       15842932 kB
Active(anon):   24273444 kB
Inactive(anon):   125184 kB
Active(file):   19899664 kB
Inactive(file): 15717748 kB
Unevictable:    65156824 kB
Mlocked:        65157044 kB
SwapTotal:             0 kB
SwapFree:              0 kB
Dirty:              9792 kB
Writeback:             0 kB
AnonPages:      88203704 kB
Mapped:          7320200 kB
Shmem:            239616 kB
Slab:            2866764 kB
SReclaimable:    2392544 kB
SUnreclaim:       474220 kB
KernelStack:       73072 kB
PageTables:       314304 kB
NFS_Unstable:          0 kB
Bounce:                0 kB
WritebackTmp:          0 kB
CommitLimit:    65714708 kB
Committed_AS:   70593592 kB
VmallocTotal:   34359738367 kB
VmallocUsed:      575472 kB
VmallocChunk:   34290763772 kB
Percpu:            83200 kB
HardwareCorrupted:     0 kB
AnonHugePages:  42917888 kB
CmaTotal:              0 kB
CmaFree:               0 kB
HugePages_Total:       0
HugePages_Free:        0
HugePages_Rsvd:        0
HugePages_Surp:        0
Hugepagesize:       2048 kB
DirectMap4k:      279552 kB
DirectMap2M:     7718912 kB
DirectMap1G:    127926272 kB


/proc/sys/kernel/threads-max (system-wide limit on the number of threads):
1024736


/proc/sys/vm/max_map_count (maximum number of memory map areas a process may have):
262144


/proc/sys/kernel/pid_max (system-wide limit on number of process identifiers):
327680



container (cgroup) information:
container_type: cgroupv1
cpu_cpuset_cpus: 0-95
cpu_memory_nodes: 0-1
active_processor_count: 96
cpu_quota: no quota
cpu_period: 100000
cpu_shares: no shares
memory_limit_in_bytes: unlimited
memory_and_swap_limit_in_bytes: unlimited
memory_soft_limit_in_bytes: unlimited
memory_usage_in_bytes: 128177926144
memory_max_usage_in_bytes: unlimited

Steal ticks since vm start: 0
Steal ticks percentage since vm start:  0.000

CPU:total 96 (initial active 96) (24 cores per cpu, 2 threads per core) family 6 model 85 stepping 7, cmov, cx8, fxsr, mmx, sse, sse2, sse3, ssse3, sse4.1, sse4.2, popcnt, avx, avx2, aes, clmul, erms, rtm, 3dnowpref, lzcnt, ht, tsc, tscinvbit, bmi1, bmi2, adx, evex, fma
CPU Model and flags from /proc/cpuinfo:
model name	: Intel(R) Xeon(R) Gold 5220R CPU @ 2.20GHz
flags		: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx pdpe1gb rdtscp lm constant_tsc art arch_perfmon pebs bts rep_good nopl xtopology nonstop_tsc aperfmperf eagerfpu pni pclmulqdq dtes64 monitor ds_cpl vmx smx est tm2 ssse3 sdbg fma cx16 xtpr pdcm pcid dca sse4_1 sse4_2 x2apic movbe popcnt tsc_deadline_timer aes xsave avx f16c rdrand lahf_lm abm 3dnowprefetch epb cat_l3 cdp_l3 invpcid_single intel_ppin ssbd mba rsb_ctxsw ibrs ibpb stibp ibrs_enhanced tpr_shadow vnmi flexpriority ept vpid fsgsbase tsc_adjust bmi1 hle avx2 smep bmi2 erms invpcid rtm cqm mpx rdt_a avx512f avx512dq rdseed adx smap clflushopt clwb intel_pt avx512cd avx512bw avx512vl xsaveopt xsavec xgetbv1 cqm_llc cqm_occup_llc cqm_mbm_total cqm_mbm_local dtherm ida arat pln pts pku ospke avx512_vnni md_clear spec_ctrl intel_stibp flush_l1d arch_capabilities

Memory: 4k page, physical 131429420k(1379648k free), swap 0k(0k free)

vm_info: OpenJDK 64-Bit Server VM (13.0.1+9) for linux-amd64 JRE (13.0.1+9), built on Oct 26 2019 10:07:46 by ""jenkins"" with gcc 7.3.1 20180303 (Red Hat 7.3.1-5)

END.
",typuc,closed,"['>bug', 'needs:triage']",https://github.com/elastic/elasticsearch/issues/117810,2024-12-02T02:30:07Z,2,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/117810,"{
  ""application_resource"": ""yes""
}"
70,117204,[CI] UpgradeClusterClientYamlTestSuiteIT test {p0=mixed_cluster/100_analytics_usage/Basic test for usage stats on analytics indices} failing,"**Build Scans:**
- [elasticsearch-periodic #4960 / 8.1.3_bwc](https://gradle-enterprise.elastic.co/s/ubrwsn4jd64m6)
- [elasticsearch-periodic #4900 / 8.1.3_bwc](https://gradle-enterprise.elastic.co/s/m4iw3pyw6cnta)

**Reproduction Line:**
```
./gradlew "":x-pack:qa:rolling-upgrade:v8.1.3#twoThirdsUpgradedTest"" -Dtests.class=""org.elasticsearch.upgrades.UpgradeClusterClientYamlTestSuiteIT"" -Dtests.method=""test {p0=mixed_cluster/100_analytics_usage/Basic test for usage stats on analytics indices}"" -Dtests.seed=31D5B83898963B81 -Dtests.bwc=true -Dtests.locale=en-SD -Dtests.timezone=Australia/Currie -Druntime.java=23
```

**Applicable branches:**
8.16

**Reproduces locally?:**
N/A

**Failure History:**
[See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&_a=(controlGroupState:(initialChildControlState:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:task.keyword,order:0,selectedOptions:!(),title:'GradleTask',type:optionsListControl),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:className.keyword,order:1,selectedOptions:!(org.elasticsearch.upgrades.UpgradeClusterClientYamlTestSuiteIT),title:'Suite',type:optionsListControl),'144933da-5c1b-4257-a969-7f43455a7901':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:name.keyword,order:2,selectedOptions:!(test%20%7Bp0%3Dmixed_cluster%2F100_analytics_usage%2FBasic%20test%20for%20usage%20stats%20on%20analytics%20indices%7D),title:'Test',type:optionsListControl)))))

**Failure Message:**
```
java.lang.AssertionError: Failure at [mixed_cluster/100_analytics_usage:64]: field [analytics.stats.cumulative_cardinality_usage] is not greater than [$cumulative_cardinality_usage]
Expected: a value greater than <1>
     but: <1> was equal to <1>
```

**Issue Reasons:**
- [8.16] 2 failures in test test {p0=mixed_cluster/100_analytics_usage/Basic test for usage stats on analytics indices} (0.2% fail rate in 935 executions)
- [8.16] 2 failures in step 8.1.3_bwc (15.4% fail rate in 13 executions)
- [8.16] 2 failures in pipeline elasticsearch-periodic (15.4% fail rate in 13 executions)

**Note:**
This issue was created using new test triage automation. Please report issues or feedback to es-delivery.",elasticsearchmachine,closed,"['>test-failure', ':ml', 'Team:ML', 'low-risk']",https://github.com/elastic/elasticsearch/issues/117204,2024-11-20T22:16:47Z,11,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/117204,"{
  ""application_resource"": ""unsure""
}"
71,117116,[CI] RetrySearchIntegTests testRetryPointInTime failing,"**Build Scans:**
- [elasticsearch-periodic #4976 / single-processor-node-tests](https://gradle-enterprise.elastic.co/s/wqvu4uwg44vok)
- [elasticsearch-pull-request #42500 / part-2](https://gradle-enterprise.elastic.co/s/uqwl7kkcvj2le)
- [elasticsearch-pull-request #42454 / part-2](https://gradle-enterprise.elastic.co/s/hyvdzlaqnkp5y)
- [elasticsearch-periodic #4964 / openjdk21_checkpart2_java-matrix](https://gradle-enterprise.elastic.co/s/np4y5utjpmwn6)
- [elasticsearch-pull-request #42364 / part-2](https://gradle-enterprise.elastic.co/s/26dz7wiykv3li)
- [elasticsearch-intake #13137 / part2](https://gradle-enterprise.elastic.co/s/xatlrtg3mdwqc)
- [elasticsearch-pull-request #41670 / part-2](https://gradle-enterprise.elastic.co/s/4m75vrbiu7sda)
- [elasticsearch-pull-request #41627 / part-2](https://gradle-enterprise.elastic.co/s/kucijrb26i7uq)

**Reproduction Line:**
```
./gradlew "":x-pack:plugin:searchable-snapshots:internalClusterTest"" --tests ""org.elasticsearch.xpack.searchablesnapshots.RetrySearchIntegTests.testRetryPointInTime"" -Dtests.seed=ED5FE79C590CEF47 -Dtests.configure_test_clusters_with_one_processor=true -Dtests.locale=fr-DJ -Dtests.timezone=Pacific/Galapagos -Druntime.java=23
```

**Applicable branches:**
main

**Reproduces locally?:**
N/A

**Failure History:**
[See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&_a=(controlGroupState:(initialChildControlState:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:task.keyword,order:0,selectedOptions:!(),title:'GradleTask',type:optionsListControl),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:className.keyword,order:1,selectedOptions:!(org.elasticsearch.xpack.searchablesnapshots.RetrySearchIntegTests),title:'Suite',type:optionsListControl),'144933da-5c1b-4257-a969-7f43455a7901':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:name.keyword,order:2,selectedOptions:!(testRetryPointInTime),title:'Test',type:optionsListControl)))))

**Failure Message:**
```
java.lang.AssertionError: Index{id='kohnffzyet/xEqwMTroQbSyvN_jPBoIOw/2N66dIAWS1ms7kHiO2O0kg/4/_0.cfe/@0', seqNo=5, primaryTerm=1, version=2, autoGeneratedIdTimestamp=-1}
Expected: <3L>
     but: was <1L>
```

**Issue Reasons:**
- [main] 8 failures in test testRetryPointInTime (1.0% fail rate in 812 executions)
- [main] 5 failures in step part-2 (1.4% fail rate in 361 executions)
- [main] 2 failures in pipeline elasticsearch-periodic (15.4% fail rate in 13 executions)
- [main] 5 failures in pipeline elasticsearch-pull-request (1.4% fail rate in 369 executions)

**Note:**
This issue was created using new test triage automation. Please report issues or feedback to es-delivery.",elasticsearchmachine,closed,"['>test-failure', 'low-risk', 'Team:Search Foundations', ':Search Foundations/Search']",https://github.com/elastic/elasticsearch/issues/117116,2024-11-20T06:57:08Z,7,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/117116,"{
  ""application_resource"": ""unsure""
}"
72,116619,[CI] ArchiveGenerateInitialCredentialsTests test20NoAutoGenerationWhenAutoConfigurationDisabled failing,"**Build Scans:**
- [elasticsearch-periodic-packaging #4501 / rhel-7_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/dbvl7wqvpuvlw)
- [elasticsearch-periodic-packaging #4501 / ubuntu-1804_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/uqo763n56eu6g)
- [elasticsearch-periodic-packaging #4501 / sles-12_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/lpwotwek4i5g4)
- [elasticsearch-periodic-packaging #4501 / oraclelinux-7_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/mqn6oep26mxtc)
- [elasticsearch-pull-request #40830 / ubuntu-2004_destructivedistrotest.archives_packaging-tests-unix-sample](https://gradle-enterprise.elastic.co/s/jxbkp2i73j53q)
- [elasticsearch-pull-request #40830 / rhel-8_destructivedistrotest.archives_packaging-tests-unix-sample](https://gradle-enterprise.elastic.co/s/wx4ne7hr35w56)
- [elasticsearch-pull-request #40766 / ubuntu-2004_destructivedistrotest.archives_packaging-tests-unix-sample](https://gradle-enterprise.elastic.co/s/eit4lu44yjp7u)
- [elasticsearch-pull-request #40765 / ubuntu-2004_destructivedistrotest.archives_packaging-tests-unix-sample](https://gradle-enterprise.elastic.co/s/tsobzcpdwhgge)
- [elasticsearch-pull-request #40766 / rhel-8_destructivedistrotest.archives_packaging-tests-unix-sample](https://gradle-enterprise.elastic.co/s/fvv5lock2k7vq)
- [elasticsearch-pull-request #40765 / rhel-8_destructivedistrotest.archives_packaging-tests-unix-sample](https://gradle-enterprise.elastic.co/s/kix6ymeuc2kjy)

**Reproduction Line:**
```
null
```

**Applicable branches:**
main

**Reproduces locally?:**
N/A

**Failure History:**
[See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&_a=(controlGroupState:(initialChildControlState:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:task.keyword,order:0,selectedOptions:!(),title:'GradleTask',type:optionsListControl),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:className.keyword,order:1,selectedOptions:!(org.elasticsearch.packaging.test.ArchiveGenerateInitialCredentialsTests),title:'Suite',type:optionsListControl),'144933da-5c1b-4257-a969-7f43455a7901':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:name.keyword,order:2,selectedOptions:!(test20NoAutoGenerationWhenAutoConfigurationDisabled),title:'Test',type:optionsListControl)))))

**Failure Message:**
```
java.lang.AssertionError: Startup command should succeed. Stderr: [exitCode = [1] stdout = [spawn -ignore HUP sudo -E -u elasticsearch /tmp/elasticsearch/bin/elasticsearch -p /tmp/elasticsearch/elasticsearch.pid -v
Skipping security auto configuration because [xpack.security.autoconfiguration.enabled] is false
CompileCommand: dontinline java/lang/invoke/MethodHandle.setAsTypeCache bool dontinline = true
CompileCommand: dontinline java/lang/invoke/MethodHandle.asTypeUncached bool dontinline = true
[2024-11-11T21:11:00,057][INFO ][o.e.n.NativeAccess       ] [bk-agent-prod-gcp-1731359030615088306] Using native vector library; to disable start with -Dorg.elasticsearch.nativeaccess.enableVectorLibrary=false
[2024-11-11T21:11:00,106][INFO ][o.e.n.NativeAccess       ] [bk-agent-prod-gcp-1731359030615088306] Using [jdk] native provider and native methods for [Linux]
[2024-11-11T21:11:00,234][INFO ][o.a.l.i.v.PanamaVectorizationProvider] [bk-agent-prod-gcp-1731359030615088306] Java vector incubator API enabled; uses preferredBitSize=256; FMA enabled
[2024-11-11T21:11:01,030][WARN ][x-pack-ml-controller-stderr] [bk-agent-prod-gcp-1731359030615088306] /tmp/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/controller: error while loading shared libraries: libzstd.so.1: cannot open shared object file: No such file or directory
[2024-11-11T21:11:02,480][INFO ][o.e.n.Node               ] [bk-agent-prod-gcp-1731359030615088306] version[9.0.0-SNAPSHOT], pid[11819], build[tar/20543579024175b76a621a67dfb4e8924d240263/2024-11-11T21:06:54.300091999Z], OS[Linux/3.10.0-1160.119.1.el7.x86_64/amd64], JVM[Oracle Corporation/OpenJDK 64-Bit Server VM/23/23+37-2369]
[2024-11-11T21:11:02,482][INFO ][o.e.n.Node               ] [bk-agent-prod-gcp-1731359030615088306] JVM home [/tmp/elasticsearch/jdk], using bundled JDK [true]
[2024-11-11T21:11:02,482][INFO ][o.e.n.Node               ] [bk-agent-prod-gcp-1731359030615088306] JVM arguments [-Des.networkaddress.cache.ttl=60, -Des.networkaddress.cache.negative.ttl=10, -XX:+AlwaysPreTouch, -Xss1m, -Djava.awt.headless=true, -Dfile.encoding=UTF-8, -Djna.nosys=true, -XX:-OmitStackTraceInFastThrow, -Dio.netty.noUnsafe=true, -Dio.netty.noKeySetOptimization=true, -Dio.netty.recycler.maxCapacityPerThread=0, -Dlog4j.shutdownHookEnabled=false, -Dlog4j2.disable.jmx=true, -Dlog4j2.formatMsgNoLookups=true, -Djava.locale.providers=CLDR, -Des.distribution.type=tar, --enable-native-access=org.elasticsearch.nativeaccess,org.apache.lucene.core, -XX:ReplayDataFile=logs/replay_pid%p.log, -Djava.security.manager=allow, -XX:+UseG1GC, -Djava.io.tmpdir=/tmp/elasticsearch-7487697842370166026, --add-modules=jdk.incubator.vector, -XX:CompileCommand=dontinline,java/lang/invoke/MethodHandle.setAsTypeCache, -XX:CompileCommand=dontinline,java/lang/invoke/MethodHandle.asTypeUncached, -Dorg.apache.lucene.store.defaultReadAdvice=normal, -XX:+HeapDumpOnOutOfMemoryError, -XX:+ExitOnOutOfMemoryError, -XX:HeapDumpPath=data, -XX:ErrorFile=logs/hs_err_pid%p.log, -Xlog:gc*,gc+age=trace,safepoint:file=logs/gc.log:utctime,level,pid,tags:filecount=32,filesize=64m, -Xmx1g, -Xms1g, -XX:MaxDirectMemorySize=536870912, -XX:G1HeapRegionSize=4m, -XX:InitiatingHeapOccupancyPercent=30, -XX:G1ReservePercent=15, --module-path=/tmp/elasticsearch/lib, --add-modules=jdk.net, --add-modules=ALL-MODULE-PATH, -Djdk.module.main=org.elasticsearch.server]
[2024-11-11T21:11:02,484][INFO ][o.e.n.Node               ] [bk-agent-prod-gcp-1731359030615088306] Default Locale [en_US]
[2024-11-11T21:11:02,484][WARN ][o.e.n.Node               ] [bk-agent-prod-gcp-1731359030615088306] version [9.0.0-SNAPSHOT] is a pre-release version of Elasticsearch and is not suitable for production
[2024-11-11T21:11:03,970][INFO ][o.e.c.u.FeatureFlag      ] [bk-agent-prod-gcp-1731359030615088306] The current build is a snapshot, feature flag [esql_date_nanos] is enabled
[2024-11-11T21:11:03,971][INFO ][o.e.c.u.FeatureFlag      ] [bk-agent-prod-gcp-1731359030615088306] The current build is a snapshot, feature flag [esql_semantic_text] is enabled
[2024-11-11T21:11:05,785][INFO ][o.e.c.u.FeatureFlag      ] [bk-agent-prod-gcp-1731359030615088306] The current build is a snapshot, feature flag [esql_inlinestats] is enabled
[2024-11-11T21:11:09,246][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [repository-url]
[2024-11-11T21:11:09,247][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [rest-root]
[2024-11-11T21:11:09,247][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [x-pack-core]
[2024-11-11T21:11:09,247][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [x-pack-redact]
[2024-11-11T21:11:09,248][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [ingest-user-agent]
[2024-11-11T21:11:09,248][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [x-pack-async-search]
[2024-11-11T21:11:09,248][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [test-error-query]
[2024-11-11T21:11:09,249][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [x-pack-monitoring]
[2024-11-11T21:11:09,249][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [repository-s3]
[2024-11-11T21:11:09,249][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [x-pack-analytics]
[2024-11-11T21:11:09,250][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [x-pack-esql-core]
[2024-11-11T21:11:09,250][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [x-pack-ent-search]
[2024-11-11T21:11:09,250][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [x-pack-autoscaling]
[2024-11-11T21:11:09,251][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [lang-painless]
[2024-11-11T21:11:09,251][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [x-pack-ml]
[2024-11-11T21:11:09,251][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [test-die-with-dignity]
[2024-11-11T21:11:09,251][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [lang-mustache]
[2024-11-11T21:11:09,252][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [legacy-geo]
[2024-11-11T21:11:09,252][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [logsdb]
[2024-11-11T21:11:09,252][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [x-pack-ql]
[2024-11-11T21:11:09,252][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [rank-rrf]
[2024-11-11T21:11:09,253][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [analysis-common]
[2024-11-11T21:11:09,253][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [health-shards-availability]
[2024-11-11T21:11:09,253][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [transport-netty4]
[2024-11-11T21:11:09,253][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [aggregations]
[2024-11-11T21:11:09,254][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [ingest-common]
[2024-11-11T21:11:09,255][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [frozen-indices]
[2024-11-11T21:11:09,255][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [x-pack-identity-provider]
[2024-11-11T21:11:09,255][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [x-pack-shutdown]
[2024-11-11T21:11:09,256][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [x-pack-text-structure]
[2024-11-11T21:11:09,256][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [snapshot-repo-test-kit]
[2024-11-11T21:11:09,256][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [test-delayed-aggs]
[2024-11-11T21:11:09,257][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [ml-package-loader]
[2024-11-11T21:11:09,257][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [kibana]
[2024-11-11T21:11:09,257][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [test-esql-heap-attack]
[2024-11-11T21:11:09,257][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [constant-keyword]
[2024-11-11T21:11:09,258][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [x-pack-logstash]
[2024-11-11T21:11:09,258][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [x-pack-ccr]
[2024-11-11T21:11:09,258][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [x-pack-graph]
[2024-11-11T21:11:09,259][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [x-pack-esql]
[2024-11-11T21:11:09,259][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [parent-join]
[2024-11-11T21:11:09,260][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [x-pack-enrich]
[2024-11-11T21:11:09,260][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [counted-keyword]
[2024-11-11T21:11:09,260][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [repositories-metering-api]
[2024-11-11T21:11:09,260][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [transform]
[2024-11-11T21:11:09,261][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [repository-azure]
[2024-11-11T21:11:09,261][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [dot-prefix-validation]
[2024-11-11T21:11:09,261][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [repository-gcs]
[2024-11-11T21:11:09,261][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [x-pack-otel-data]
[2024-11-11T21:11:09,262][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [spatial]
[2024-11-11T21:11:09,262][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [apm]
[2024-11-11T21:11:09,264][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [mapper-extras]
[2024-11-11T21:11:09,264][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [mapper-version]
[2024-11-11T21:11:09,265][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [test-jvm-crash]
[2024-11-11T21:11:09,265][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [x-pack-rollup]
[2024-11-11T21:11:09,265][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [percolator]
[2024-11-11T21:11:09,265][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [data-streams]
[2024-11-11T21:11:09,266][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [x-pack-stack]
[2024-11-11T21:11:09,266][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [rank-eval]
[2024-11-11T21:11:09,266][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [reindex]
[2024-11-11T21:11:09,266][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [test-apm-integration]
[2024-11-11T21:11:09,266][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [x-pack-security]
[2024-11-11T21:11:09,267][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [blob-cache]
[2024-11-11T21:11:09,267][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [searchable-snapshots]
[2024-11-11T21:11:09,267][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [x-pack-slm]
[2024-11-11T21:11:09,267][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [x-pack-geoip-enterprise-downloader]
[2024-11-11T21:11:09,268][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [test-latency-simulating-directory]
[2024-11-11T21:11:09,268][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [snapshot-based-recoveries]
[2024-11-11T21:11:09,268][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [x-pack-watcher]
[2024-11-11T21:11:09,268][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [old-lucene-versions]
[2024-11-11T21:11:09,268][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [x-pack-ilm]
[2024-11-11T21:11:09,269][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [x-pack-inference]
[2024-11-11T21:11:09,269][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [x-pack-voting-only-node]
[2024-11-11T21:11:09,269][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [x-pack-deprecation]
[2024-11-11T21:11:09,269][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [x-pack-fleet]
[2024-11-11T21:11:09,270][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [x-pack-aggregate-metric]
[2024-11-11T21:11:09,270][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [x-pack-downsample]
[2024-11-11T21:11:09,270][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [x-pack-profiling]
[2024-11-11T21:11:09,270][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [ingest-geoip]
[2024-11-11T21:11:09,271][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [x-pack-write-load-forecaster]
[2024-11-11T21:11:09,271][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [search-business-rules]
[2024-11-11T21:11:09,271][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [ingest-attachment]
[2024-11-11T21:11:09,271][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [wildcard]
[2024-11-11T21:11:09,272][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [x-pack-apm-data]
[2024-11-11T21:11:09,272][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [unsigned-long]
[2024-11-11T21:11:09,272][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [x-pack-sql]
[2024-11-11T21:11:09,272][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [runtime-fields-common]
[2024-11-11T21:11:09,272][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [x-pack-async]
[2024-11-11T21:11:09,273][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [x-pack-kql]
[2024-11-11T21:11:09,273][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [vector-tile]
[2024-11-11T21:11:09,273][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [lang-expression]
[2024-11-11T21:11:09,273][INFO ][o.e.p.PluginsService     ] [bk-agent-prod-gcp-1731359030615088306] loaded module [x-pack-eql]
[2024-11-11T21:11:09,762][INFO ][o.e.c.u.FeatureFlag      ] [bk-agent-prod-gcp-1731359030615088306] The current build is a snapshot, feature flag [failure_store] is enabled
[2024-11-11T21:11:11,029][INFO ][o.e.e.NodeEnvironment    ] [bk-agent-prod-gcp-1731359030615088306] using [1] data paths, mounts [[/ (/dev/sda2)]], net usable_space [274.6gb], net total_space [349.7gb], types [xfs]
[2024-11-11T21:11:11,030][INFO ][o.e.e.NodeEnvironment    ] [bk-agent-prod-gcp-1731359030615088306] heap size [1gb], compressed ordinary object pointers [true]
[2024-11-11T21:11:11,041][INFO ][o.e.n.Node               ] [bk-agent-prod-gcp-1731359030615088306] node name [bk-agent-prod-gcp-1731359030615088306], node ID [vsfRtelMQ7Ko8CmKnWIySw], cluster name [elasticsearch], roles [data_frozen, ml, data_hot, transform, data_content, data_warm, master, remote_cluster_client, data, data_cold, ingest]
[2024-11-11T21:11:16,077][INFO ][o.e.c.u.FeatureFlag      ] [bk-agent-prod-gcp-1731359030615088306] The current build is a snapshot, feature flag [connector_secrets] is enabled
[2024-11-11T21:11:16,287][INFO ][o.e.i.r.RecoverySettings ] [bk-agent-prod-gcp-1731359030615088306] using rate limit [40mb] with [default=40mb, read=0b, write=0b, max=0b]
[2024-11-11T21:11:16,397][INFO ][o.e.c.u.FeatureFlag      ] [bk-agent-prod-gcp-1731359030615088306] The current build is a snapshot, feature flag [multi_dense_vector] is enabled
[2024-11-11T21:11:16,703][INFO ][o.e.c.u.FeatureFlag      ] [bk-agent-prod-gcp-1731359030615088306] The current build is a snapshot, feature flag [sub_objects_auto] is enabled
[2024-11-11T21:11:16,777][INFO ][o.e.c.u.FeatureFlag      ] [bk-agent-prod-gcp-1731359030615088306] The current build is a snapshot, feature flag [inference_default_elser] is enabled
[2024-11-11T21:11:16,781][INFO ][o.e.f.FeatureService     ] [bk-agent-prod-gcp-1731359030615088306] Registered local node features [cluster.reroute.ignores_metric_param, data_stream.auto_sharding, data_stream.lifecycle.global_retention, data_stream.rollover.lazy, desired_node.version_deprecated, esql.agg_values, esql.async_query, esql.base64_decode_encode, esql.casting_operator, esql.counter_types, esql.disable_nullable_opts, esql.from_options, esql.metadata_fields, esql.metrics_counter_fields, esql.metrics_syntax, esql.mv_ordering_sorted_ascending, esql.mv_sort, esql.resolve_fields_api, esql.spatial_points_from_source, esql.spatial_shapes, esql.st_centroid_agg, esql.st_contains_within, esql.st_disjoint, esql.st_intersects, esql.st_x_y, esql.string_literal_auto_casting, esql.string_literal_auto_casting_extended, esql.timespan_abbreviations, features_supported, file_settings, flattened.ignore_above_support, geoip.downloader.database.configuration, get_database_configuration_action.multi_node, health.dsl.info, health.extended_repository_indicator, knn_retriever_supported, license-trial-independent-version, logsdb_telemetry, logsdb_telemetry_stats, lucene_10_upgrade, mapper.boolean_dimension, mapper.bwc_workaround_9_0, mapper.flattened.ignore_above_with_arrays_support, mapper.ignore_above_index_level_setting, mapper.index_sorting_on_nested, mapper.keyword_dimension_ignore_above, mapper.keyword_normalizer_synthetic_source, mapper.pass_through_priority, mapper.query_index_mode, mapper.range.null_values_off_by_one_fix, mapper.segment_level_fields_stats, mapper.source.synthetic_source_copy_to_fix, mapper.source.synthetic_source_copy_to_inside_objects_fix, mapper.source.synthetic_source_fallback, mapper.source.synthetic_source_stored_fields_advance_fix, mapper.source.synthetic_source_with_copy_to_and_doc_values_false, mapper.subobjects_auto, mapper.subobjects_auto_fixes, mapper.synthetic_source_keep, mapper.track_ignored_source, mapper.vectors.bbq, mapper.vectors.bit_vectors, mapper.vectors.int4_quantization, put_database_configuration_action.ipinfo, query_rule_retriever_supported, query_rules.test, random_reranker_retriever_supported, repositories.supports_usage_stats, rest.capabilities_action, rest.local_only_capabilities, retrievers_supported, routing.boolean_routing_path, routing.multi_value_routing_path, rrf_retriever_composition_supported, rrf_retriever_supported, script.hamming, script.term_stats, search.vectors.k_param_supported, security.migration_framework, security.role_mapping_cleanup, security.roles_metadata_flattened, semantic_text.default_elser_2, semantic_text.inner_hits, semantic_text.search_inference_id, simulate.component.template.substitutions, simulate.index.template.substitutions, simulate.mapping.addition, simulate.mapping.validation, simulate.mapping.validation.templates, simulate.support.non.template.mapping, slm.interval_schedule, snapshot.repository_verify_integrity, standard_retriever_supported, stats.include_disk_thresholds, text_similarity_reranker_retriever_composition_supported, text_similarity_reranker_retriever_supported, tsdb.ts_routing_hash_doc_value_parse_byte_ref, unified_highlighter_matched_fields, usage.data_tiers.precalculate_stats]
[2024-11-11T21:11:16,830][INFO ][o.e.c.m.DataStreamGlobalRetentionSettings] [bk-agent-prod-gcp-1731359030615088306] Updated default factory retention to [null]
[2024-11-11T21:11:16,831][INFO ][o.e.c.m.DataStreamGlobalRetentionSettings] [bk-agent-prod-gcp-1731359030615088306] Updated max factory retention to [null]
[2024-11-11T21:11:27,711][ERROR][o.e.b.Elasticsearch      ] [bk-agent-prod-gcp-1731359030615088306] fatal exception while booting Elasticsearch org.elasticsearch.ElasticsearchException: Failure running machine learning native code. This could be due to running on an unsupported OS or distribution, missing OS libraries, or a problem with the temp directory. To bypass this problem by running Elasticsearch without machine learning functionality set [xpack.ml.enabled: false].
	at org.elasticsearch.ml@9.0.0-SNAPSHOT/org.elasticsearch.xpack.ml.MachineLearning.createComponents(MachineLearning.java:1061)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.node.NodeConstruction.lambda$construct$16(NodeConstruction.java:888)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.plugins.PluginsService.lambda$flatMap$1(PluginsService.java:254)
	at java.base/java.util.stream.ReferencePipeline$7$1FlatMap.accept(ReferencePipeline.java:289)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:215)
	at java.base/java.util.AbstractList$RandomAccessSpliterator.forEachRemaining(AbstractList.java:722)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:570)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:560)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:636)
	at java.base/java.util.stream.AbstractPipeline.evaluateToArrayNode(AbstractPipeline.java:291)
	at java.base/java.util.stream.ReferencePipeline.toArray(ReferencePipeline.java:656)
	at java.base/java.util.stream.ReferencePipeline.toArray(ReferencePipeline.java:662)
	at java.base/java.util.stream.ReferencePipeline.toList(ReferencePipeline.java:667)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.node.NodeConstruction.construct(NodeConstruction.java:910)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.node.NodeConstruction.prepareConstruction(NodeConstruction.java:290)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.node.Node.<init>(Node.java:184)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.bootstrap.Elasticsearch$2.<init>(Elasticsearch.java:245)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.bootstrap.Elasticsearch.initPhase3(Elasticsearch.java:245)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:76)

ERROR: Elasticsearch did not exit normally - check the logs at /tmp/elasticsearch/logs/elasticsearch.log

ERROR: Elasticsearch died while starting up, with exit code 1

Failed to determine if startup succeeded] stderr = []]
Expected: <0>
     but: was <1>
```

**Issue Reasons:**
- [main] 2 consecutive failures in test test20NoAutoGenerationWhenAutoConfigurationDisabled
- [main] 22 failures in test test20NoAutoGenerationWhenAutoConfigurationDisabled (3.1% fail rate in 710 executions)
- [main] 9 failures in step rhel-8_destructivedistrotest.archives_packaging-tests-unix-sample (3.8% fail rate in 234 executions)
- [main] 9 failures in step ubuntu-2004_destructivedistrotest.archives_packaging-tests-unix-sample (3.9% fail rate in 233 executions)
- [main] 9 failures in pipeline elasticsearch-pull-request (3.8% fail rate in 237 executions)

**Note:**
This issue was created using new test triage automation. Please report issues or feedback to es-delivery.",elasticsearchmachine,closed,"[':Delivery/Build', '>test-failure', 'Team:Delivery', 'needs:risk']",https://github.com/elastic/elasticsearch/issues/116619,2024-11-11T21:13:23Z,3,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/116619,"{
  ""application_resource"": ""no""
}"
73,116375,[CI] NodesCachesStatsIntegTests testNodesCachesStats failing,"**Build Scans:**
- [elasticsearch-periodic #5430 / release-tests](https://gradle-enterprise.elastic.co/s/kziqagblfrgcw)
- [elasticsearch-periodic-platform-support #5357 / debian-11_platform-support-unix](https://gradle-enterprise.elastic.co/s/dmr52ihxtiask)

**Reproduction Line:**
```
./gradlew "":x-pack:plugin:searchable-snapshots:internalClusterTest"" --tests ""org.elasticsearch.xpack.searchablesnapshots.cache.shared.NodesCachesStatsIntegTests.testNodesCachesStats"" -Dtests.seed=D2D077C1A688A9B6 -Dbuild.snapshot=false -Dtests.jvm.argline=""-Dbuild.snapshot=false"" -Dlicense.key=x-pack/license-tools/src/test/resources/public.key -Dtests.locale=fi-FI -Dtests.timezone=Etc/GMT-7 -Druntime.java=23
```

**Applicable branches:**
8.16

**Reproduces locally?:**
N/A

**Failure History:**
[See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&_a=(controlGroupState:(initialChildControlState:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:task.keyword,order:0,selectedOptions:!(),title:'GradleTask',type:optionsListControl),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:className.keyword,order:1,selectedOptions:!(org.elasticsearch.xpack.searchablesnapshots.cache.shared.NodesCachesStatsIntegTests),title:'Suite',type:optionsListControl),'144933da-5c1b-4257-a969-7f43455a7901':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:name.keyword,order:2,selectedOptions:!(testNodesCachesStats),title:'Test',type:optionsListControl)))))

**Failure Message:**
```
java.lang.AssertionError: 
Expected: a value greater than <0L>
     but: <0L> was equal to <0L>
```

**Issue Reasons:**
- [8.16] 2 failures in test testNodesCachesStats (0.5% fail rate in 376 executions)

**Note:**
This issue was created using new test triage automation. Please report issues or feedback to es-delivery.",elasticsearchmachine,closed,"['>test-failure', ':Distributed Indexing/Distributed', 'low-risk', 'Team:Distributed Indexing']",https://github.com/elastic/elasticsearch/issues/116375,2024-11-07T06:25:33Z,6,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/116375,"{
  ""application_resource"": ""unsure""
}"
74,116317,[CI] ArchiveTests test43AutoconfigurationNotTriggeredWhenTlsAlreadyConfigured failing,"**Build Scans:**
- [elasticsearch-periodic-packaging #4421 / windows-2016_packaging-tests-windows](https://gradle-enterprise.elastic.co/s/oupxfdbzw7yb6)
- [elasticsearch-periodic-packaging #4421 / windows-2019_packaging-tests-windows](https://gradle-enterprise.elastic.co/s/j3wheeuz3s4au)
- [elasticsearch-pull-request #40072 / windows-2019_default-windows-archive_packaging-tests-windows-sample](https://gradle-enterprise.elastic.co/s/drhodfrze2yds)
- [elasticsearch-pull-request #40067 / windows-2019_default-windows-archive_packaging-tests-windows-sample](https://gradle-enterprise.elastic.co/s/iiwpkfoydszwe)
- [elasticsearch-pull-request #40064 / windows-2019_default-windows-archive_packaging-tests-windows-sample](https://gradle-enterprise.elastic.co/s/sp6cixdrxekva)
- [elasticsearch-pull-request #40063 / windows-2019_default-windows-archive_packaging-tests-windows-sample](https://gradle-enterprise.elastic.co/s/374pyjyodvjvw)
- [elasticsearch-pull-request #40061 / windows-2019_default-windows-archive_packaging-tests-windows-sample](https://gradle-enterprise.elastic.co/s/nxtkvvdtk2pxa)
- [elasticsearch-pull-request #40057 / windows-2019_default-windows-archive_packaging-tests-windows-sample](https://gradle-enterprise.elastic.co/s/6ba2t6cxgb2go)
- [elasticsearch-pull-request #40055 / windows-2019_default-windows-archive_packaging-tests-windows-sample](https://gradle-enterprise.elastic.co/s/gb7llsopklre4)
- [elasticsearch-pull-request #40058 / windows-2019_default-windows-archive_packaging-tests-windows-sample](https://gradle-enterprise.elastic.co/s/abe4lq7uez6yq)

**Reproduction Line:**
```
null
```

**Applicable branches:**
main

**Reproduces locally?:**
N/A

**Failure History:**
[See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&_a=(controlGroupState:(initialChildControlState:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:task.keyword,order:0,selectedOptions:!(),title:'GradleTask',type:optionsListControl),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:className.keyword,order:1,selectedOptions:!(org.elasticsearch.packaging.test.ArchiveTests),title:'Suite',type:optionsListControl),'144933da-5c1b-4257-a969-7f43455a7901':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:name.keyword,order:2,selectedOptions:!(test43AutoconfigurationNotTriggeredWhenTlsAlreadyConfigured),title:'Test',type:optionsListControl)))))

**Failure Message:**
```
java.lang.AssertionError: Startup command should succeed. Stderr: [exitCode = [1] stdout = [Skipping security auto configuration because it appears that TLS is already configured.
CompileCommand: dontinline java/lang/invoke/MethodHandle.setAsTypeCache bool dontinline = true
CompileCommand: dontinline java/lang/invoke/MethodHandle.asTypeUncached bool dontinline = true
[2024-11-06T13:18:40,917][INFO ][o.e.n.NativeAccess       ] [BK-AGENT-PROD-G] Using [jdk] native provider and native methods for [Windows]
[2024-11-06T13:18:41,076][INFO ][o.a.l.i.v.PanamaVectorizationProvider] [BK-AGENT-PROD-G] Java vector incubator API enabled; uses preferredBitSize=256; FMA enabled
[2024-11-06T13:18:42,829][INFO ][o.e.n.Node               ] [BK-AGENT-PROD-G] version[9.0.0-SNAPSHOT], pid[3812], build[zip/009c0a56cc94f0ade36deaaa9ae99c6a47cfe94f/2024-11-06T13:10:53.780294600Z], OS[Windows Server 2016/10.0/amd64], JVM[Oracle Corporation/OpenJDK 64-Bit Server VM/23/23+37-2369]
[2024-11-06T13:18:42,832][INFO ][o.e.n.Node               ] [BK-AGENT-PROD-G] JVM home [C:\tmp\elasticsearch\jdk], using bundled JDK [true]
[2024-11-06T13:18:42,832][INFO ][o.e.n.Node               ] [BK-AGENT-PROD-G] JVM arguments [-Des.networkaddress.cache.ttl=60, -Des.networkaddress.cache.negative.ttl=10, -XX:+AlwaysPreTouch, -Xss1m, -Djava.awt.headless=true, -Dfile.encoding=UTF-8, -Djna.nosys=true, -XX:-OmitStackTraceInFastThrow, -Dio.netty.noUnsafe=true, -Dio.netty.noKeySetOptimization=true, -Dio.netty.recycler.maxCapacityPerThread=0, -Dlog4j.shutdownHookEnabled=false, -Dlog4j2.disable.jmx=true, -Dlog4j2.formatMsgNoLookups=true, -Djava.locale.providers=CLDR, -Des.distribution.type=zip, --enable-native-access=org.elasticsearch.nativeaccess,org.apache.lucene.core, -XX:ReplayDataFile=logs/replay_pid%p.log, -Djava.security.manager=allow, -XX:+UseG1GC, -Djava.io.tmpdir=C:\Users\BUILDK~1\AppData\Local\Temp\elasticsearch, --add-modules=jdk.incubator.vector, -XX:CompileCommand=dontinline,java/lang/invoke/MethodHandle.setAsTypeCache, -XX:CompileCommand=dontinline,java/lang/invoke/MethodHandle.asTypeUncached, -Dorg.apache.lucene.store.defaultReadAdvice=normal, -XX:+HeapDumpOnOutOfMemoryError, -XX:+ExitOnOutOfMemoryError, -XX:HeapDumpPath=data, -XX:ErrorFile=logs/hs_err_pid%p.log, -Xlog:gc*,gc+age=trace,safepoint:file=logs/gc.log:utctime,level,pid,tags:filecount=32,filesize=64m, -Xmx1g, -Xms1g, -XX:MaxDirectMemorySize=536870912, -XX:G1HeapRegionSize=4m, -XX:InitiatingHeapOccupancyPercent=30, -XX:G1ReservePercent=15, --module-path=C:\tmp\elasticsearch\lib, --add-modules=jdk.net, --add-modules=ALL-MODULE-PATH, -Djdk.module.main=org.elasticsearch.server]
[2024-11-06T13:18:42,833][INFO ][o.e.n.Node               ] [BK-AGENT-PROD-G] Default Locale [en_US]
[2024-11-06T13:18:42,833][WARN ][o.e.n.Node               ] [BK-AGENT-PROD-G] version [9.0.0-SNAPSHOT] is a pre-release version of Elasticsearch and is not suitable for production
[2024-11-06T13:18:44,156][INFO ][o.e.c.u.FeatureFlag      ] [BK-AGENT-PROD-G] The current build is a snapshot, feature flag [esql_date_nanos] is enabled
[2024-11-06T13:18:44,156][INFO ][o.e.c.u.FeatureFlag      ] [BK-AGENT-PROD-G] The current build is a snapshot, feature flag [esql_semantic_text] is enabled
[2024-11-06T13:18:45,319][INFO ][o.e.c.u.FeatureFlag      ] [BK-AGENT-PROD-G] The current build is a snapshot, feature flag [esql_inlinestats] is enabled
[2024-11-06T13:18:47,993][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [repository-url]
[2024-11-06T13:18:47,994][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [rest-root]
[2024-11-06T13:18:47,994][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-core]
[2024-11-06T13:18:47,994][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-redact]
[2024-11-06T13:18:47,994][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [ingest-user-agent]
[2024-11-06T13:18:47,995][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-async-search]
[2024-11-06T13:18:47,995][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [test-error-query]
[2024-11-06T13:18:47,995][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-monitoring]
[2024-11-06T13:18:47,995][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [repository-s3]
[2024-11-06T13:18:47,995][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-analytics]
[2024-11-06T13:18:47,996][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-esql-core]
[2024-11-06T13:18:47,996][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-ent-search]
[2024-11-06T13:18:47,996][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-autoscaling]
[2024-11-06T13:18:47,996][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [lang-painless]
[2024-11-06T13:18:47,997][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-ml]
[2024-11-06T13:18:47,997][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [test-die-with-dignity]
[2024-11-06T13:18:47,997][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [lang-mustache]
[2024-11-06T13:18:47,997][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [legacy-geo]
[2024-11-06T13:18:47,997][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [logsdb]
[2024-11-06T13:18:47,998][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-ql]
[2024-11-06T13:18:47,998][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [rank-rrf]
[2024-11-06T13:18:47,998][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [analysis-common]
[2024-11-06T13:18:47,998][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [health-shards-availability]
[2024-11-06T13:18:47,999][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [transport-netty4]
[2024-11-06T13:18:47,999][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [aggregations]
[2024-11-06T13:18:47,999][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [ingest-common]
[2024-11-06T13:18:47,999][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [frozen-indices]
[2024-11-06T13:18:47,999][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-identity-provider]
[2024-11-06T13:18:48,000][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-shutdown]
[2024-11-06T13:18:48,000][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-text-structure]
[2024-11-06T13:18:48,000][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [snapshot-repo-test-kit]
[2024-11-06T13:18:48,000][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [ml-package-loader]
[2024-11-06T13:18:48,000][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [test-delayed-aggs]
[2024-11-06T13:18:48,001][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [kibana]
[2024-11-06T13:18:48,001][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [test-esql-heap-attack]
[2024-11-06T13:18:48,001][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [constant-keyword]
[2024-11-06T13:18:48,001][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-logstash]
[2024-11-06T13:18:48,001][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-ccr]
[2024-11-06T13:18:48,001][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-graph]
[2024-11-06T13:18:48,002][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-esql]
[2024-11-06T13:18:48,002][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [parent-join]
[2024-11-06T13:18:48,002][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [counted-keyword]
[2024-11-06T13:18:48,002][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-enrich]
[2024-11-06T13:18:48,002][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [repositories-metering-api]
[2024-11-06T13:18:48,003][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [transform]
[2024-11-06T13:18:48,003][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [repository-azure]
[2024-11-06T13:18:48,003][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [dot-prefix-validation]
[2024-11-06T13:18:48,003][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [repository-gcs]
[2024-11-06T13:18:48,003][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [spatial]
[2024-11-06T13:18:48,003][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-otel-data]
[2024-11-06T13:18:48,004][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [apm]
[2024-11-06T13:18:48,004][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [mapper-extras]
[2024-11-06T13:18:48,004][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [mapper-version]
[2024-11-06T13:18:48,004][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [test-jvm-crash]
[2024-11-06T13:18:48,004][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-rollup]
[2024-11-06T13:18:48,004][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [percolator]
[2024-11-06T13:18:48,005][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [data-streams]
[2024-11-06T13:18:48,005][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-stack]
[2024-11-06T13:18:48,005][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [rank-eval]
[2024-11-06T13:18:48,005][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [reindex]
[2024-11-06T13:18:48,005][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [test-apm-integration]
[2024-11-06T13:18:48,005][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-security]
[2024-11-06T13:18:48,006][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [blob-cache]
[2024-11-06T13:18:48,006][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [searchable-snapshots]
[2024-11-06T13:18:48,006][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-slm]
[2024-11-06T13:18:48,006][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-geoip-enterprise-downloader]
[2024-11-06T13:18:48,006][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [snapshot-based-recoveries]
[2024-11-06T13:18:48,006][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [test-latency-simulating-directory]
[2024-11-06T13:18:48,007][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-watcher]
[2024-11-06T13:18:48,007][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [old-lucene-versions]
[2024-11-06T13:18:48,007][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-ilm]
[2024-11-06T13:18:48,007][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-inference]
[2024-11-06T13:18:48,007][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-voting-only-node]
[2024-11-06T13:18:48,007][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-deprecation]
[2024-11-06T13:18:48,008][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-fleet]
[2024-11-06T13:18:48,008][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-aggregate-metric]
[2024-11-06T13:18:48,008][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-downsample]
[2024-11-06T13:18:48,008][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-profiling]
[2024-11-06T13:18:48,008][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [ingest-geoip]
[2024-11-06T13:18:48,008][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-write-load-forecaster]
[2024-11-06T13:18:48,009][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [search-business-rules]
[2024-11-06T13:18:48,009][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [ingest-attachment]
[2024-11-06T13:18:48,009][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [wildcard]
[2024-11-06T13:18:48,009][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-apm-data]
[2024-11-06T13:18:48,009][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [unsigned-long]
[2024-11-06T13:18:48,009][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-sql]
[2024-11-06T13:18:48,010][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [runtime-fields-common]
[2024-11-06T13:18:48,010][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-async]
[2024-11-06T13:18:48,010][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [vector-tile]
[2024-11-06T13:18:48,010][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-kql]
[2024-11-06T13:18:48,010][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [lang-expression]
[2024-11-06T13:18:48,010][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-eql]
[2024-11-06T13:18:48,449][INFO ][o.e.c.u.FeatureFlag      ] [BK-AGENT-PROD-G] The current build is a snapshot, feature flag [failure_store] is enabled
[2024-11-06T13:18:49,424][INFO ][o.e.e.NodeEnvironment    ] [BK-AGENT-PROD-G] using [1] data paths, mounts [[(C:)]], net usable_space [306.6gb], net total_space [349.8gb], types [NTFS]
[2024-11-06T13:18:49,425][INFO ][o.e.e.NodeEnvironment    ] [BK-AGENT-PROD-G] heap size [1gb], compressed ordinary object pointers [true]
[2024-11-06T13:18:49,437][INFO ][o.e.n.Node               ] [BK-AGENT-PROD-G] node name [BK-AGENT-PROD-G], node ID [f7zvySsrRTqiMZI-XoW8oA], cluster name [elasticsearch], roles [remote_cluster_client, master, data_warm, data_content, transform, data_hot, ml, data_frozen, ingest, data_cold, data]
[2024-11-06T13:18:52,891][INFO ][o.e.c.u.FeatureFlag      ] [BK-AGENT-PROD-G] The current build is a snapshot, feature flag [connector_secrets] is enabled
[2024-11-06T13:18:53,083][INFO ][o.e.i.r.RecoverySettings ] [BK-AGENT-PROD-G] using rate limit [40mb] with [default=40mb, read=0b, write=0b, max=0b]
[2024-11-06T13:18:53,408][INFO ][o.e.c.u.FeatureFlag      ] [BK-AGENT-PROD-G] The current build is a snapshot, feature flag [sub_objects_auto] is enabled
[2024-11-06T13:18:53,463][INFO ][o.e.c.u.FeatureFlag      ] [BK-AGENT-PROD-G] The current build is a snapshot, feature flag [inference_default_elser] is enabled
[2024-11-06T13:18:53,467][INFO ][o.e.f.FeatureService     ] [BK-AGENT-PROD-G] Registered local node features [cluster.reroute.ignores_metric_param, data_stream.auto_sharding, data_stream.lifecycle.global_retention, data_stream.rollover.lazy, desired_node.version_deprecated, esql.agg_values, esql.async_query, esql.base64_decode_encode, esql.casting_operator, esql.counter_types, esql.disable_nullable_opts, esql.from_options, esql.metadata_fields, esql.metrics_counter_fields, esql.metrics_syntax, esql.mv_ordering_sorted_ascending, esql.mv_sort, esql.resolve_fields_api, esql.spatial_points_from_source, esql.spatial_shapes, esql.st_centroid_agg, esql.st_contains_within, esql.st_disjoint, esql.st_intersects, esql.st_x_y, esql.string_literal_auto_casting, esql.string_literal_auto_casting_extended, esql.timespan_abbreviations, features_supported, file_settings, flattened.ignore_above_support, geoip.downloader.database.configuration, get_database_configuration_action.multi_node, health.dsl.info, health.extended_repository_indicator, knn_retriever_supported, license-trial-independent-version, logsdb_telemetry, logsdb_telemetry_stats, lucene_10_upgrade, mapper.boolean_dimension, mapper.bwc_workaround_9_0, mapper.flattened.ignore_above_with_arrays_support, mapper.ignore_above_index_level_setting, mapper.index_sorting_on_nested, mapper.keyword_dimension_ignore_above, mapper.keyword_normalizer_synthetic_source, mapper.pass_through_priority, mapper.query_index_mode, mapper.range.null_values_off_by_one_fix, mapper.segment_level_fields_stats, mapper.source.synthetic_source_copy_to_fix, mapper.source.synthetic_source_copy_to_inside_objects_fix, mapper.source.synthetic_source_fallback, mapper.source.synthetic_source_stored_fields_advance_fix, mapper.source.synthetic_source_with_copy_to_and_doc_values_false, mapper.subobjects_auto, mapper.subobjects_auto_fixes, mapper.synthetic_source_keep, mapper.track_ignored_source, mapper.vectors.bbq, mapper.vectors.bit_vectors, mapper.vectors.int4_quantization, put_database_configuration_action.ipinfo, query_rule_retriever_supported, query_rules.test, random_reranker_retriever_supported, repositories.supports_usage_stats, rest.capabilities_action, rest.local_only_capabilities, retrievers_supported, routing.boolean_routing_path, routing.multi_value_routing_path, rrf_retriever_composition_supported, rrf_retriever_supported, script.hamming, script.term_stats, search.vectors.k_param_supported, security.migration_framework, security.role_mapping_cleanup, security.roles_metadata_flattened, semantic_text.default_elser_2, semantic_text.inner_hits, semantic_text.search_inference_id, simulate.component.template.substitutions, simulate.index.template.substitutions, simulate.mapping.addition, simulate.mapping.validation, simulate.mapping.validation.templates, simulate.support.non.template.mapping, slm.interval_schedule, snapshot.repository_verify_integrity, standard_retriever_supported, stats.include_disk_thresholds, text_similarity_reranker_retriever_composition_supported, text_similarity_reranker_retriever_supported, tsdb.ts_routing_hash_doc_value_parse_byte_ref, unified_highlighter_matched_fields, usage.data_tiers.precalculate_stats]
[2024-11-06T13:18:53,509][INFO ][o.e.c.m.DataStreamGlobalRetentionSettings] [BK-AGENT-PROD-G] Updated default factory retention to [null]
[2024-11-06T13:18:53,509][INFO ][o.e.c.m.DataStreamGlobalRetentionSettings] [BK-AGENT-PROD-G] Updated max factory retention to [null]
[2024-11-06T13:19:04,103][ERROR][o.e.b.Elasticsearch      ] [BK-AGENT-PROD-G] fatal exception while booting Elasticsearch org.elasticsearch.ElasticsearchException: Failure running machine learning native code. This could be due to running on an unsupported OS or distribution, missing OS libraries, or a problem with the temp directory. To bypass this problem by running Elasticsearch without machine learning functionality set [xpack.ml.enabled: false].
	at org.elasticsearch.ml@9.0.0-SNAPSHOT/org.elasticsearch.xpack.ml.MachineLearning.createComponents(MachineLearning.java:1061)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.node.NodeConstruction.lambda$construct$16(NodeConstruction.java:888)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.plugins.PluginsService.lambda$flatMap$1(PluginsService.java:254)
	at java.base/java.util.stream.ReferencePipeline$7$1FlatMap.accept(ReferencePipeline.java:289)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:215)
	at java.base/java.util.AbstractList$RandomAccessSpliterator.forEachRemaining(AbstractList.java:722)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:570)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:560)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:636)
	at java.base/java.util.stream.AbstractPipeline.evaluateToArrayNode(AbstractPipeline.java:291)
	at java.base/java.util.stream.ReferencePipeline.toArray(ReferencePipeline.java:656)
	at java.base/java.util.stream.ReferencePipeline.toArray(ReferencePipeline.java:662)
	at java.base/java.util.stream.ReferencePipeline.toList(ReferencePipeline.java:667)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.node.NodeConstruction.construct(NodeConstruction.java:910)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.node.NodeConstruction.prepareConstruction(NodeConstruction.java:290)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.node.Node.<init>(Node.java:184)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.bootstrap.Elasticsearch$2.<init>(Elasticsearch.java:245)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.bootstrap.Elasticsearch.initPhase3(Elasticsearch.java:245)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:76)] stderr = [ERROR: Elasticsearch did not exit normally - check the logs at C:\tmp\elasticsearch\logs\elasticsearch.log

ERROR: Elasticsearch died while starting up, with exit code 1]]
Expected: <0>
     but: was <1>
```

**Issue Reasons:**
- [main] 2 consecutive failures in test test43AutoconfigurationNotTriggeredWhenTlsAlreadyConfigured
- [main] 2 consecutive failures in step windows-2016_packaging-tests-windows
- [main] 2 consecutive failures in step windows-2019_packaging-tests-windows
- [main] 16 consecutive failures in step windows-2019_default-windows-archive_packaging-tests-windows-sample
- [main] 20 failures in test test43AutoconfigurationNotTriggeredWhenTlsAlreadyConfigured (5.3% fail rate in 379 executions)
- [main] 2 failures in step windows-2016_packaging-tests-windows (50.0% fail rate in 4 executions)
- [main] 2 failures in step windows-2019_packaging-tests-windows (50.0% fail rate in 4 executions)
- [main] 16 failures in step windows-2019_default-windows-archive_packaging-tests-windows-sample (21.6% fail rate in 74 executions)
- [main] 2 failures in pipeline elasticsearch-periodic-packaging (40.0% fail rate in 5 executions)
- [main] 16 failures in pipeline elasticsearch-pull-request (14.5% fail rate in 110 executions)

**Note:**
This issue was created using new test triage automation. Please report issues or feedback to es-delivery.",elasticsearchmachine,closed,"[':Delivery/Packaging', '>test-failure', 'Team:Delivery', 'low-risk']",https://github.com/elastic/elasticsearch/issues/116317,2024-11-06T11:00:48Z,7,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/116317,"{
  ""application_resource"": ""unsure""
}"
75,116290,[CI] ArchiveTests test40AutoconfigurationNotTriggeredWhenNodeIsMeantToJoinExistingCluster failing,"**Build Scans:**
- [elasticsearch-periodic-packaging #4415 / windows-2016_packaging-tests-windows](https://gradle-enterprise.elastic.co/s/3zh5x4mxhqta6)
- [elasticsearch-periodic-packaging #4415 / windows-2019_packaging-tests-windows](https://gradle-enterprise.elastic.co/s/onasj2aa7qpgo)
- [elasticsearch-pull-request #39983 / windows-2019_default-windows-archive_packaging-tests-windows-sample](https://gradle-enterprise.elastic.co/s/ptl4cg6yk2yna)
- [elasticsearch-pull-request #39982 / windows-2019_default-windows-archive_packaging-tests-windows-sample](https://gradle-enterprise.elastic.co/s/eq7gojfeamjqg)
- [elasticsearch-pull-request #39981 / windows-2019_default-windows-archive_packaging-tests-windows-sample](https://gradle-enterprise.elastic.co/s/2q62h3ycp444c)
- [elasticsearch-pull-request #39980 / windows-2019_default-windows-archive_packaging-tests-windows-sample](https://gradle-enterprise.elastic.co/s/ttzopng6w7vxm)

**Reproduction Line:**
```
null
```

**Applicable branches:**
main

**Reproduces locally?:**
N/A

**Failure History:**
[See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&_a=(controlGroupState:(initialChildControlState:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:task.keyword,order:0,selectedOptions:!(),title:'GradleTask',type:optionsListControl),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:className.keyword,order:1,selectedOptions:!(org.elasticsearch.packaging.test.ArchiveTests),title:'Suite',type:optionsListControl),'144933da-5c1b-4257-a969-7f43455a7901':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:name.keyword,order:2,selectedOptions:!(test40AutoconfigurationNotTriggeredWhenNodeIsMeantToJoinExistingCluster),title:'Test',type:optionsListControl)))))

**Failure Message:**
```
java.lang.AssertionError: Startup command should succeed. Stderr: [exitCode = [1] stdout = [Skipping security auto configuration because this node is configured to bootstrap or to join a multi-node cluster, which is not supported.
CompileCommand: dontinline java/lang/invoke/MethodHandle.setAsTypeCache bool dontinline = true
CompileCommand: dontinline java/lang/invoke/MethodHandle.asTypeUncached bool dontinline = true
[2024-11-06T05:16:55,458][INFO ][o.e.n.NativeAccess       ] [BK-AGENT-PROD-G] Using [jdk] native provider and native methods for [Windows]
[2024-11-06T05:16:55,605][INFO ][o.a.l.i.v.PanamaVectorizationProvider] [BK-AGENT-PROD-G] Java vector incubator API enabled; uses preferredBitSize=256; FMA enabled
[2024-11-06T05:16:57,480][INFO ][o.e.n.Node               ] [BK-AGENT-PROD-G] version[9.0.0-SNAPSHOT], pid[468], build[zip/5f6e2582371c1e515331ac42b1ee19fb03f817f7/2024-11-06T05:08:58.147159600Z], OS[Windows Server 2019/10.0/amd64], JVM[Oracle Corporation/OpenJDK 64-Bit Server VM/23/23+37-2369]
[2024-11-06T05:16:57,482][INFO ][o.e.n.Node               ] [BK-AGENT-PROD-G] JVM home [C:\tmp\elasticsearch\jdk], using bundled JDK [true]
[2024-11-06T05:16:57,483][INFO ][o.e.n.Node               ] [BK-AGENT-PROD-G] JVM arguments [-Des.networkaddress.cache.ttl=60, -Des.networkaddress.cache.negative.ttl=10, -XX:+AlwaysPreTouch, -Xss1m, -Djava.awt.headless=true, -Dfile.encoding=UTF-8, -Djna.nosys=true, -XX:-OmitStackTraceInFastThrow, -Dio.netty.noUnsafe=true, -Dio.netty.noKeySetOptimization=true, -Dio.netty.recycler.maxCapacityPerThread=0, -Dlog4j.shutdownHookEnabled=false, -Dlog4j2.disable.jmx=true, -Dlog4j2.formatMsgNoLookups=true, -Djava.locale.providers=CLDR, -Des.distribution.type=zip, --enable-native-access=org.elasticsearch.nativeaccess,org.apache.lucene.core, -XX:ReplayDataFile=logs/replay_pid%p.log, -Djava.security.manager=allow, -XX:+UseG1GC, -Djava.io.tmpdir=C:\Users\BUILDK~1\AppData\Local\Temp\elasticsearch, --add-modules=jdk.incubator.vector, -XX:CompileCommand=dontinline,java/lang/invoke/MethodHandle.setAsTypeCache, -XX:CompileCommand=dontinline,java/lang/invoke/MethodHandle.asTypeUncached, -Dorg.apache.lucene.store.defaultReadAdvice=normal, -XX:+HeapDumpOnOutOfMemoryError, -XX:+ExitOnOutOfMemoryError, -XX:HeapDumpPath=data, -XX:ErrorFile=logs/hs_err_pid%p.log, -Xlog:gc*,gc+age=trace,safepoint:file=logs/gc.log:utctime,level,pid,tags:filecount=32,filesize=64m, -Xmx1g, -Xms1g, -XX:MaxDirectMemorySize=536870912, -XX:G1HeapRegionSize=4m, -XX:InitiatingHeapOccupancyPercent=30, -XX:G1ReservePercent=15, --module-path=C:\tmp\elasticsearch\lib, --add-modules=jdk.net, --add-modules=ALL-MODULE-PATH, -Djdk.module.main=org.elasticsearch.server]
[2024-11-06T05:16:57,483][INFO ][o.e.n.Node               ] [BK-AGENT-PROD-G] Default Locale [en_US]
[2024-11-06T05:16:57,484][WARN ][o.e.n.Node               ] [BK-AGENT-PROD-G] version [9.0.0-SNAPSHOT] is a pre-release version of Elasticsearch and is not suitable for production
[2024-11-06T05:16:58,866][INFO ][o.e.c.u.FeatureFlag      ] [BK-AGENT-PROD-G] The current build is a snapshot, feature flag [esql_date_nanos] is enabled
[2024-11-06T05:16:58,867][INFO ][o.e.c.u.FeatureFlag      ] [BK-AGENT-PROD-G] The current build is a snapshot, feature flag [esql_semantic_text] is enabled
[2024-11-06T05:17:00,062][INFO ][o.e.c.u.FeatureFlag      ] [BK-AGENT-PROD-G] The current build is a snapshot, feature flag [esql_inlinestats] is enabled
[2024-11-06T05:17:02,800][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [repository-url]
[2024-11-06T05:17:02,801][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [rest-root]
[2024-11-06T05:17:02,801][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-core]
[2024-11-06T05:17:02,801][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-redact]
[2024-11-06T05:17:02,801][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [ingest-user-agent]
[2024-11-06T05:17:02,802][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-async-search]
[2024-11-06T05:17:02,802][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [test-error-query]
[2024-11-06T05:17:02,802][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-monitoring]
[2024-11-06T05:17:02,802][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [repository-s3]
[2024-11-06T05:17:02,802][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-analytics]
[2024-11-06T05:17:02,802][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-esql-core]
[2024-11-06T05:17:02,803][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-ent-search]
[2024-11-06T05:17:02,803][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-autoscaling]
[2024-11-06T05:17:02,803][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [lang-painless]
[2024-11-06T05:17:02,803][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-ml]
[2024-11-06T05:17:02,803][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [test-die-with-dignity]
[2024-11-06T05:17:02,804][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [lang-mustache]
[2024-11-06T05:17:02,804][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [legacy-geo]
[2024-11-06T05:17:02,804][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [logsdb]
[2024-11-06T05:17:02,804][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-ql]
[2024-11-06T05:17:02,804][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [rank-rrf]
[2024-11-06T05:17:02,805][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [analysis-common]
[2024-11-06T05:17:02,805][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [health-shards-availability]
[2024-11-06T05:17:02,805][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [transport-netty4]
[2024-11-06T05:17:02,805][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [aggregations]
[2024-11-06T05:17:02,805][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [ingest-common]
[2024-11-06T05:17:02,806][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [frozen-indices]
[2024-11-06T05:17:02,806][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-identity-provider]
[2024-11-06T05:17:02,806][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-shutdown]
[2024-11-06T05:17:02,806][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-text-structure]
[2024-11-06T05:17:02,807][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [snapshot-repo-test-kit]
[2024-11-06T05:17:02,807][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [ml-package-loader]
[2024-11-06T05:17:02,807][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [test-delayed-aggs]
[2024-11-06T05:17:02,808][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [kibana]
[2024-11-06T05:17:02,808][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [test-esql-heap-attack]
[2024-11-06T05:17:02,808][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [constant-keyword]
[2024-11-06T05:17:02,808][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-logstash]
[2024-11-06T05:17:02,808][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-ccr]
[2024-11-06T05:17:02,808][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-graph]
[2024-11-06T05:17:02,809][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-esql]
[2024-11-06T05:17:02,809][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [parent-join]
[2024-11-06T05:17:02,809][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [counted-keyword]
[2024-11-06T05:17:02,809][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-enrich]
[2024-11-06T05:17:02,809][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [repositories-metering-api]
[2024-11-06T05:17:02,809][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [transform]
[2024-11-06T05:17:02,810][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [repository-azure]
[2024-11-06T05:17:02,810][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [dot-prefix-validation]
[2024-11-06T05:17:02,810][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [repository-gcs]
[2024-11-06T05:17:02,810][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [spatial]
[2024-11-06T05:17:02,810][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-otel-data]
[2024-11-06T05:17:02,810][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [apm]
[2024-11-06T05:17:02,811][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [mapper-extras]
[2024-11-06T05:17:02,811][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [mapper-version]
[2024-11-06T05:17:02,811][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [test-jvm-crash]
[2024-11-06T05:17:02,811][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-rollup]
[2024-11-06T05:17:02,811][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [percolator]
[2024-11-06T05:17:02,811][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [data-streams]
[2024-11-06T05:17:02,812][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-stack]
[2024-11-06T05:17:02,812][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [rank-eval]
[2024-11-06T05:17:02,812][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [reindex]
[2024-11-06T05:17:02,812][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [test-apm-integration]
[2024-11-06T05:17:02,812][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-security]
[2024-11-06T05:17:02,812][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [blob-cache]
[2024-11-06T05:17:02,812][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [searchable-snapshots]
[2024-11-06T05:17:02,812][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-slm]
[2024-11-06T05:17:02,812][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-geoip-enterprise-downloader]
[2024-11-06T05:17:02,813][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [snapshot-based-recoveries]
[2024-11-06T05:17:02,813][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [test-latency-simulating-directory]
[2024-11-06T05:17:02,813][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-watcher]
[2024-11-06T05:17:02,813][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [old-lucene-versions]
[2024-11-06T05:17:02,813][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-ilm]
[2024-11-06T05:17:02,813][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-inference]
[2024-11-06T05:17:02,814][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-voting-only-node]
[2024-11-06T05:17:02,814][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-deprecation]
[2024-11-06T05:17:02,814][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-fleet]
[2024-11-06T05:17:02,814][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-aggregate-metric]
[2024-11-06T05:17:02,814][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-downsample]
[2024-11-06T05:17:02,815][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-profiling]
[2024-11-06T05:17:02,815][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [ingest-geoip]
[2024-11-06T05:17:02,815][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-write-load-forecaster]
[2024-11-06T05:17:02,815][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [search-business-rules]
[2024-11-06T05:17:02,815][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [ingest-attachment]
[2024-11-06T05:17:02,815][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [wildcard]
[2024-11-06T05:17:02,816][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-apm-data]
[2024-11-06T05:17:02,816][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [unsigned-long]
[2024-11-06T05:17:02,816][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-sql]
[2024-11-06T05:17:02,816][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [runtime-fields-common]
[2024-11-06T05:17:02,816][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-async]
[2024-11-06T05:17:02,816][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [vector-tile]
[2024-11-06T05:17:02,816][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-kql]
[2024-11-06T05:17:02,817][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [lang-expression]
[2024-11-06T05:17:02,817][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-eql]
[2024-11-06T05:17:03,308][INFO ][o.e.c.u.FeatureFlag      ] [BK-AGENT-PROD-G] The current build is a snapshot, feature flag [failure_store] is enabled
[2024-11-06T05:17:04,239][INFO ][o.e.e.NodeEnvironment    ] [BK-AGENT-PROD-G] using [1] data paths, mounts [[(C:)]], net usable_space [309.2gb], net total_space [349.8gb], types [NTFS]
[2024-11-06T05:17:04,239][INFO ][o.e.e.NodeEnvironment    ] [BK-AGENT-PROD-G] heap size [1gb], compressed ordinary object pointers [true]
[2024-11-06T05:17:04,251][INFO ][o.e.n.Node               ] [BK-AGENT-PROD-G] node name [BK-AGENT-PROD-G], node ID [M30OhkdUS1OaV4RnM7XPMA], cluster name [elasticsearch], roles [data_cold, data, remote_cluster_client, master, data_warm, data_content, transform, data_hot, ml, data_frozen, ingest]
[2024-11-06T05:17:08,139][INFO ][o.e.c.u.FeatureFlag      ] [BK-AGENT-PROD-G] The current build is a snapshot, feature flag [connector_secrets] is enabled
[2024-11-06T05:17:08,368][INFO ][o.e.i.r.RecoverySettings ] [BK-AGENT-PROD-G] using rate limit [40mb] with [default=40mb, read=0b, write=0b, max=0b]
[2024-11-06T05:17:08,766][INFO ][o.e.c.u.FeatureFlag      ] [BK-AGENT-PROD-G] The current build is a snapshot, feature flag [sub_objects_auto] is enabled
[2024-11-06T05:17:08,823][INFO ][o.e.c.u.FeatureFlag      ] [BK-AGENT-PROD-G] The current build is a snapshot, feature flag [inference_default_elser] is enabled
[2024-11-06T05:17:08,827][INFO ][o.e.f.FeatureService     ] [BK-AGENT-PROD-G] Registered local node features [cluster.reroute.ignores_metric_param, data_stream.auto_sharding, data_stream.lifecycle.global_retention, data_stream.rollover.lazy, desired_node.version_deprecated, esql.agg_values, esql.async_query, esql.base64_decode_encode, esql.casting_operator, esql.counter_types, esql.disable_nullable_opts, esql.from_options, esql.metadata_fields, esql.metrics_counter_fields, esql.metrics_syntax, esql.mv_ordering_sorted_ascending, esql.mv_sort, esql.resolve_fields_api, esql.spatial_points_from_source, esql.spatial_shapes, esql.st_centroid_agg, esql.st_contains_within, esql.st_disjoint, esql.st_intersects, esql.st_x_y, esql.string_literal_auto_casting, esql.string_literal_auto_casting_extended, esql.timespan_abbreviations, features_supported, file_settings, flattened.ignore_above_support, geoip.downloader.database.configuration, get_database_configuration_action.multi_node, health.dsl.info, health.extended_repository_indicator, knn_retriever_supported, license-trial-independent-version, logsdb_telemetry, logsdb_telemetry_stats, lucene_10_upgrade, mapper.boolean_dimension, mapper.bwc_workaround_9_0, mapper.flattened.ignore_above_with_arrays_support, mapper.ignore_above_index_level_setting, mapper.index_sorting_on_nested, mapper.keyword_dimension_ignore_above, mapper.keyword_normalizer_synthetic_source, mapper.pass_through_priority, mapper.query_index_mode, mapper.range.null_values_off_by_one_fix, mapper.segment_level_fields_stats, mapper.source.synthetic_source_copy_to_fix, mapper.source.synthetic_source_copy_to_inside_objects_fix, mapper.source.synthetic_source_fallback, mapper.source.synthetic_source_stored_fields_advance_fix, mapper.source.synthetic_source_with_copy_to_and_doc_values_false, mapper.subobjects_auto, mapper.subobjects_auto_fixes, mapper.synthetic_source_keep, mapper.track_ignored_source, mapper.vectors.bbq, mapper.vectors.bit_vectors, mapper.vectors.int4_quantization, put_database_configuration_action.ipinfo, query_rule_retriever_supported, query_rules.test, random_reranker_retriever_supported, repositories.supports_usage_stats, rest.capabilities_action, rest.local_only_capabilities, retrievers_supported, routing.boolean_routing_path, routing.multi_value_routing_path, rrf_retriever_composition_supported, rrf_retriever_supported, script.hamming, script.term_stats, search.vectors.k_param_supported, security.migration_framework, security.role_mapping_cleanup, security.roles_metadata_flattened, semantic_text.default_elser_2, semantic_text.inner_hits, semantic_text.search_inference_id, simulate.component.template.substitutions, simulate.index.template.substitutions, simulate.mapping.addition, simulate.mapping.validation, simulate.mapping.validation.templates, simulate.support.non.template.mapping, slm.interval_schedule, snapshot.repository_verify_integrity, standard_retriever_supported, stats.include_disk_thresholds, text_similarity_reranker_retriever_composition_supported, text_similarity_reranker_retriever_supported, tsdb.ts_routing_hash_doc_value_parse_byte_ref, unified_highlighter_matched_fields, usage.data_tiers.precalculate_stats]
[2024-11-06T05:17:08,870][INFO ][o.e.c.m.DataStreamGlobalRetentionSettings] [BK-AGENT-PROD-G] Updated default factory retention to [null]
[2024-11-06T05:17:08,871][INFO ][o.e.c.m.DataStreamGlobalRetentionSettings] [BK-AGENT-PROD-G] Updated max factory retention to [null]
[2024-11-06T05:17:19,837][ERROR][o.e.b.Elasticsearch      ] [BK-AGENT-PROD-G] fatal exception while booting Elasticsearch org.elasticsearch.ElasticsearchException: Failure running machine learning native code. This could be due to running on an unsupported OS or distribution, missing OS libraries, or a problem with the temp directory. To bypass this problem by running Elasticsearch without machine learning functionality set [xpack.ml.enabled: false].
	at org.elasticsearch.ml@9.0.0-SNAPSHOT/org.elasticsearch.xpack.ml.MachineLearning.createComponents(MachineLearning.java:1061)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.node.NodeConstruction.lambda$construct$16(NodeConstruction.java:888)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.plugins.PluginsService.lambda$flatMap$1(PluginsService.java:254)
	at java.base/java.util.stream.ReferencePipeline$7$1FlatMap.accept(ReferencePipeline.java:289)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:215)
	at java.base/java.util.AbstractList$RandomAccessSpliterator.forEachRemaining(AbstractList.java:722)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:570)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:560)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:636)
	at java.base/java.util.stream.AbstractPipeline.evaluateToArrayNode(AbstractPipeline.java:291)
	at java.base/java.util.stream.ReferencePipeline.toArray(ReferencePipeline.java:656)
	at java.base/java.util.stream.ReferencePipeline.toArray(ReferencePipeline.java:662)
	at java.base/java.util.stream.ReferencePipeline.toList(ReferencePipeline.java:667)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.node.NodeConstruction.construct(NodeConstruction.java:910)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.node.NodeConstruction.prepareConstruction(NodeConstruction.java:290)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.node.Node.<init>(Node.java:184)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.bootstrap.Elasticsearch$2.<init>(Elasticsearch.java:245)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.bootstrap.Elasticsearch.initPhase3(Elasticsearch.java:245)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:76)] stderr = [ERROR: Elasticsearch did not exit normally - check the logs at C:\tmp\elasticsearch\logs\elasticsearch.log

ERROR: Elasticsearch died while starting up, with exit code 1]]
Expected: <0>
     but: was <1>
```

**Issue Reasons:**
- [main] 3 consecutive failures in test test40AutoconfigurationNotTriggeredWhenNodeIsMeantToJoinExistingCluster
- [main] 4 consecutive failures in step windows-2019_default-windows-archive_packaging-tests-windows-sample
- [main] 6 failures in test test40AutoconfigurationNotTriggeredWhenNodeIsMeantToJoinExistingCluster (1.8% fail rate in 329 executions)
- [main] 4 failures in step windows-2019_default-windows-archive_packaging-tests-windows-sample (4.6% fail rate in 87 executions)
- [main] 4 failures in pipeline elasticsearch-pull-request (4.5% fail rate in 89 executions)

**Note:**
This issue was created using new test triage automation. Please report issues or feedback to es-delivery.",elasticsearchmachine,closed,"[':Delivery/Packaging', '>test-failure', ':ml', 'Team:ML', 'Team:Delivery', 'low-risk']",https://github.com/elastic/elasticsearch/issues/116290,2024-11-06T05:20:05Z,5,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/116290,"{
  ""application_resource"": ""unsure""
}"
76,116289,[CI] ArchiveTests test40AutoconfigurationNotTriggeredWhenNodeIsMeantToJoinExistingCluster failing,"**Build Scans:**
- [elasticsearch-periodic-packaging #4415 / windows-2016_packaging-tests-windows](https://gradle-enterprise.elastic.co/s/3zh5x4mxhqta6)
- [elasticsearch-periodic-packaging #4415 / windows-2019_packaging-tests-windows](https://gradle-enterprise.elastic.co/s/onasj2aa7qpgo)
- [elasticsearch-pull-request #39983 / windows-2019_default-windows-archive_packaging-tests-windows-sample](https://gradle-enterprise.elastic.co/s/ptl4cg6yk2yna)
- [elasticsearch-pull-request #39982 / windows-2019_default-windows-archive_packaging-tests-windows-sample](https://gradle-enterprise.elastic.co/s/eq7gojfeamjqg)
- [elasticsearch-pull-request #39981 / windows-2019_default-windows-archive_packaging-tests-windows-sample](https://gradle-enterprise.elastic.co/s/2q62h3ycp444c)
- [elasticsearch-pull-request #39980 / windows-2019_default-windows-archive_packaging-tests-windows-sample](https://gradle-enterprise.elastic.co/s/ttzopng6w7vxm)

**Reproduction Line:**
```
null
```

**Applicable branches:**
main

**Reproduces locally?:**
N/A

**Failure History:**
[See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&_a=(controlGroupState:(initialChildControlState:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:task.keyword,order:0,selectedOptions:!(),title:'GradleTask',type:optionsListControl),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:className.keyword,order:1,selectedOptions:!(org.elasticsearch.packaging.test.ArchiveTests),title:'Suite',type:optionsListControl),'144933da-5c1b-4257-a969-7f43455a7901':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:name.keyword,order:2,selectedOptions:!(test40AutoconfigurationNotTriggeredWhenNodeIsMeantToJoinExistingCluster),title:'Test',type:optionsListControl)))))

**Failure Message:**
```
java.lang.AssertionError: Startup command should succeed. Stderr: [exitCode = [1] stdout = [Skipping security auto configuration because this node is configured to bootstrap or to join a multi-node cluster, which is not supported.
CompileCommand: dontinline java/lang/invoke/MethodHandle.setAsTypeCache bool dontinline = true
CompileCommand: dontinline java/lang/invoke/MethodHandle.asTypeUncached bool dontinline = true
[2024-11-06T05:18:34,356][INFO ][o.e.n.NativeAccess       ] [BK-AGENT-PROD-G] Using [jdk] native provider and native methods for [Windows]
[2024-11-06T05:18:34,494][INFO ][o.a.l.i.v.PanamaVectorizationProvider] [BK-AGENT-PROD-G] Java vector incubator API enabled; uses preferredBitSize=256; FMA enabled
[2024-11-06T05:18:36,217][INFO ][o.e.n.Node               ] [BK-AGENT-PROD-G] version[9.0.0-SNAPSHOT], pid[8692], build[zip/5f6e2582371c1e515331ac42b1ee19fb03f817f7/2024-11-06T05:10:51.327155600Z], OS[Windows Server 2016/10.0/amd64], JVM[Oracle Corporation/OpenJDK 64-Bit Server VM/23/23+37-2369]
[2024-11-06T05:18:36,219][INFO ][o.e.n.Node               ] [BK-AGENT-PROD-G] JVM home [C:\tmp\elasticsearch\jdk], using bundled JDK [true]
[2024-11-06T05:18:36,220][INFO ][o.e.n.Node               ] [BK-AGENT-PROD-G] JVM arguments [-Des.networkaddress.cache.ttl=60, -Des.networkaddress.cache.negative.ttl=10, -XX:+AlwaysPreTouch, -Xss1m, -Djava.awt.headless=true, -Dfile.encoding=UTF-8, -Djna.nosys=true, -XX:-OmitStackTraceInFastThrow, -Dio.netty.noUnsafe=true, -Dio.netty.noKeySetOptimization=true, -Dio.netty.recycler.maxCapacityPerThread=0, -Dlog4j.shutdownHookEnabled=false, -Dlog4j2.disable.jmx=true, -Dlog4j2.formatMsgNoLookups=true, -Djava.locale.providers=CLDR, -Des.distribution.type=zip, --enable-native-access=org.elasticsearch.nativeaccess,org.apache.lucene.core, -XX:ReplayDataFile=logs/replay_pid%p.log, -Djava.security.manager=allow, -XX:+UseG1GC, -Djava.io.tmpdir=C:\Users\BUILDK~1\AppData\Local\Temp\elasticsearch, --add-modules=jdk.incubator.vector, -XX:CompileCommand=dontinline,java/lang/invoke/MethodHandle.setAsTypeCache, -XX:CompileCommand=dontinline,java/lang/invoke/MethodHandle.asTypeUncached, -Dorg.apache.lucene.store.defaultReadAdvice=normal, -XX:+HeapDumpOnOutOfMemoryError, -XX:+ExitOnOutOfMemoryError, -XX:HeapDumpPath=data, -XX:ErrorFile=logs/hs_err_pid%p.log, -Xlog:gc*,gc+age=trace,safepoint:file=logs/gc.log:utctime,level,pid,tags:filecount=32,filesize=64m, -Xmx1g, -Xms1g, -XX:MaxDirectMemorySize=536870912, -XX:G1HeapRegionSize=4m, -XX:InitiatingHeapOccupancyPercent=30, -XX:G1ReservePercent=15, --module-path=C:\tmp\elasticsearch\lib, --add-modules=jdk.net, --add-modules=ALL-MODULE-PATH, -Djdk.module.main=org.elasticsearch.server]
[2024-11-06T05:18:36,220][INFO ][o.e.n.Node               ] [BK-AGENT-PROD-G] Default Locale [en_US]
[2024-11-06T05:18:36,221][WARN ][o.e.n.Node               ] [BK-AGENT-PROD-G] version [9.0.0-SNAPSHOT] is a pre-release version of Elasticsearch and is not suitable for production
[2024-11-06T05:18:37,566][INFO ][o.e.c.u.FeatureFlag      ] [BK-AGENT-PROD-G] The current build is a snapshot, feature flag [esql_date_nanos] is enabled
[2024-11-06T05:18:37,566][INFO ][o.e.c.u.FeatureFlag      ] [BK-AGENT-PROD-G] The current build is a snapshot, feature flag [esql_semantic_text] is enabled
[2024-11-06T05:18:38,702][INFO ][o.e.c.u.FeatureFlag      ] [BK-AGENT-PROD-G] The current build is a snapshot, feature flag [esql_inlinestats] is enabled
[2024-11-06T05:18:41,383][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [repository-url]
[2024-11-06T05:18:41,384][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [rest-root]
[2024-11-06T05:18:41,384][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-core]
[2024-11-06T05:18:41,384][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-redact]
[2024-11-06T05:18:41,385][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [ingest-user-agent]
[2024-11-06T05:18:41,385][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-async-search]
[2024-11-06T05:18:41,385][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [test-error-query]
[2024-11-06T05:18:41,385][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-monitoring]
[2024-11-06T05:18:41,386][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [repository-s3]
[2024-11-06T05:18:41,386][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-analytics]
[2024-11-06T05:18:41,386][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-esql-core]
[2024-11-06T05:18:41,386][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-ent-search]
[2024-11-06T05:18:41,386][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-autoscaling]
[2024-11-06T05:18:41,387][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [lang-painless]
[2024-11-06T05:18:41,387][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-ml]
[2024-11-06T05:18:41,387][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [test-die-with-dignity]
[2024-11-06T05:18:41,387][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [lang-mustache]
[2024-11-06T05:18:41,387][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [legacy-geo]
[2024-11-06T05:18:41,388][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [logsdb]
[2024-11-06T05:18:41,388][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-ql]
[2024-11-06T05:18:41,388][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [rank-rrf]
[2024-11-06T05:18:41,388][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [analysis-common]
[2024-11-06T05:18:41,388][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [health-shards-availability]
[2024-11-06T05:18:41,389][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [transport-netty4]
[2024-11-06T05:18:41,389][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [aggregations]
[2024-11-06T05:18:41,389][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [ingest-common]
[2024-11-06T05:18:41,389][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [frozen-indices]
[2024-11-06T05:18:41,389][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-identity-provider]
[2024-11-06T05:18:41,390][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-shutdown]
[2024-11-06T05:18:41,390][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-text-structure]
[2024-11-06T05:18:41,390][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [snapshot-repo-test-kit]
[2024-11-06T05:18:41,390][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [ml-package-loader]
[2024-11-06T05:18:41,390][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [test-delayed-aggs]
[2024-11-06T05:18:41,391][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [kibana]
[2024-11-06T05:18:41,391][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [test-esql-heap-attack]
[2024-11-06T05:18:41,391][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [constant-keyword]
[2024-11-06T05:18:41,391][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-logstash]
[2024-11-06T05:18:41,391][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-ccr]
[2024-11-06T05:18:41,392][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-graph]
[2024-11-06T05:18:41,392][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-esql]
[2024-11-06T05:18:41,392][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [parent-join]
[2024-11-06T05:18:41,392][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [counted-keyword]
[2024-11-06T05:18:41,392][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-enrich]
[2024-11-06T05:18:41,392][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [repositories-metering-api]
[2024-11-06T05:18:41,393][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [transform]
[2024-11-06T05:18:41,393][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [repository-azure]
[2024-11-06T05:18:41,393][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [dot-prefix-validation]
[2024-11-06T05:18:41,393][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [repository-gcs]
[2024-11-06T05:18:41,393][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [spatial]
[2024-11-06T05:18:41,393][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-otel-data]
[2024-11-06T05:18:41,394][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [apm]
[2024-11-06T05:18:41,394][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [mapper-extras]
[2024-11-06T05:18:41,394][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [mapper-version]
[2024-11-06T05:18:41,394][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [test-jvm-crash]
[2024-11-06T05:18:41,394][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-rollup]
[2024-11-06T05:18:41,394][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [percolator]
[2024-11-06T05:18:41,395][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [data-streams]
[2024-11-06T05:18:41,395][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-stack]
[2024-11-06T05:18:41,395][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [rank-eval]
[2024-11-06T05:18:41,395][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [reindex]
[2024-11-06T05:18:41,395][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [test-apm-integration]
[2024-11-06T05:18:41,395][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-security]
[2024-11-06T05:18:41,396][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [blob-cache]
[2024-11-06T05:18:41,396][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [searchable-snapshots]
[2024-11-06T05:18:41,396][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-slm]
[2024-11-06T05:18:41,396][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-geoip-enterprise-downloader]
[2024-11-06T05:18:41,396][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [snapshot-based-recoveries]
[2024-11-06T05:18:41,396][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [test-latency-simulating-directory]
[2024-11-06T05:18:41,397][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-watcher]
[2024-11-06T05:18:41,397][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [old-lucene-versions]
[2024-11-06T05:18:41,397][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-ilm]
[2024-11-06T05:18:41,397][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-inference]
[2024-11-06T05:18:41,397][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-voting-only-node]
[2024-11-06T05:18:41,397][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-deprecation]
[2024-11-06T05:18:41,398][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-fleet]
[2024-11-06T05:18:41,398][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-aggregate-metric]
[2024-11-06T05:18:41,398][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-downsample]
[2024-11-06T05:18:41,398][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-profiling]
[2024-11-06T05:18:41,398][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [ingest-geoip]
[2024-11-06T05:18:41,398][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-write-load-forecaster]
[2024-11-06T05:18:41,398][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [search-business-rules]
[2024-11-06T05:18:41,398][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [ingest-attachment]
[2024-11-06T05:18:41,398][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [wildcard]
[2024-11-06T05:18:41,398][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-apm-data]
[2024-11-06T05:18:41,399][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [unsigned-long]
[2024-11-06T05:18:41,399][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-sql]
[2024-11-06T05:18:41,399][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [runtime-fields-common]
[2024-11-06T05:18:41,399][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-async]
[2024-11-06T05:18:41,399][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [vector-tile]
[2024-11-06T05:18:41,399][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-kql]
[2024-11-06T05:18:41,399][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [lang-expression]
[2024-11-06T05:18:41,399][INFO ][o.e.p.PluginsService     ] [BK-AGENT-PROD-G] loaded module [x-pack-eql]
[2024-11-06T05:18:41,792][INFO ][o.e.c.u.FeatureFlag      ] [BK-AGENT-PROD-G] The current build is a snapshot, feature flag [failure_store] is enabled
[2024-11-06T05:18:42,697][INFO ][o.e.e.NodeEnvironment    ] [BK-AGENT-PROD-G] using [1] data paths, mounts [[(C:)]], net usable_space [306.6gb], net total_space [349.8gb], types [NTFS]
[2024-11-06T05:18:42,699][INFO ][o.e.e.NodeEnvironment    ] [BK-AGENT-PROD-G] heap size [1gb], compressed ordinary object pointers [true]
[2024-11-06T05:18:42,709][INFO ][o.e.n.Node               ] [BK-AGENT-PROD-G] node name [BK-AGENT-PROD-G], node ID [x41hATTGTE2s0xksRsjKCw], cluster name [elasticsearch], roles [ml, data_hot, transform, data_content, data_warm, master, remote_cluster_client, data, data_cold, ingest, data_frozen]
[2024-11-06T05:18:46,302][INFO ][o.e.c.u.FeatureFlag      ] [BK-AGENT-PROD-G] The current build is a snapshot, feature flag [connector_secrets] is enabled
[2024-11-06T05:18:46,478][INFO ][o.e.i.r.RecoverySettings ] [BK-AGENT-PROD-G] using rate limit [40mb] with [default=40mb, read=0b, write=0b, max=0b]
[2024-11-06T05:18:46,791][INFO ][o.e.c.u.FeatureFlag      ] [BK-AGENT-PROD-G] The current build is a snapshot, feature flag [sub_objects_auto] is enabled
[2024-11-06T05:18:46,843][INFO ][o.e.c.u.FeatureFlag      ] [BK-AGENT-PROD-G] The current build is a snapshot, feature flag [inference_default_elser] is enabled
[2024-11-06T05:18:46,848][INFO ][o.e.f.FeatureService     ] [BK-AGENT-PROD-G] Registered local node features [cluster.reroute.ignores_metric_param, data_stream.auto_sharding, data_stream.lifecycle.global_retention, data_stream.rollover.lazy, desired_node.version_deprecated, esql.agg_values, esql.async_query, esql.base64_decode_encode, esql.casting_operator, esql.counter_types, esql.disable_nullable_opts, esql.from_options, esql.metadata_fields, esql.metrics_counter_fields, esql.metrics_syntax, esql.mv_ordering_sorted_ascending, esql.mv_sort, esql.resolve_fields_api, esql.spatial_points_from_source, esql.spatial_shapes, esql.st_centroid_agg, esql.st_contains_within, esql.st_disjoint, esql.st_intersects, esql.st_x_y, esql.string_literal_auto_casting, esql.string_literal_auto_casting_extended, esql.timespan_abbreviations, features_supported, file_settings, flattened.ignore_above_support, geoip.downloader.database.configuration, get_database_configuration_action.multi_node, health.dsl.info, health.extended_repository_indicator, knn_retriever_supported, license-trial-independent-version, logsdb_telemetry, logsdb_telemetry_stats, lucene_10_upgrade, mapper.boolean_dimension, mapper.bwc_workaround_9_0, mapper.flattened.ignore_above_with_arrays_support, mapper.ignore_above_index_level_setting, mapper.index_sorting_on_nested, mapper.keyword_dimension_ignore_above, mapper.keyword_normalizer_synthetic_source, mapper.pass_through_priority, mapper.query_index_mode, mapper.range.null_values_off_by_one_fix, mapper.segment_level_fields_stats, mapper.source.synthetic_source_copy_to_fix, mapper.source.synthetic_source_copy_to_inside_objects_fix, mapper.source.synthetic_source_fallback, mapper.source.synthetic_source_stored_fields_advance_fix, mapper.source.synthetic_source_with_copy_to_and_doc_values_false, mapper.subobjects_auto, mapper.subobjects_auto_fixes, mapper.synthetic_source_keep, mapper.track_ignored_source, mapper.vectors.bbq, mapper.vectors.bit_vectors, mapper.vectors.int4_quantization, put_database_configuration_action.ipinfo, query_rule_retriever_supported, query_rules.test, random_reranker_retriever_supported, repositories.supports_usage_stats, rest.capabilities_action, rest.local_only_capabilities, retrievers_supported, routing.boolean_routing_path, routing.multi_value_routing_path, rrf_retriever_composition_supported, rrf_retriever_supported, script.hamming, script.term_stats, search.vectors.k_param_supported, security.migration_framework, security.role_mapping_cleanup, security.roles_metadata_flattened, semantic_text.default_elser_2, semantic_text.inner_hits, semantic_text.search_inference_id, simulate.component.template.substitutions, simulate.index.template.substitutions, simulate.mapping.addition, simulate.mapping.validation, simulate.mapping.validation.templates, simulate.support.non.template.mapping, slm.interval_schedule, snapshot.repository_verify_integrity, standard_retriever_supported, stats.include_disk_thresholds, text_similarity_reranker_retriever_composition_supported, text_similarity_reranker_retriever_supported, tsdb.ts_routing_hash_doc_value_parse_byte_ref, unified_highlighter_matched_fields, usage.data_tiers.precalculate_stats]
[2024-11-06T05:18:46,891][INFO ][o.e.c.m.DataStreamGlobalRetentionSettings] [BK-AGENT-PROD-G] Updated default factory retention to [null]
[2024-11-06T05:18:46,892][INFO ][o.e.c.m.DataStreamGlobalRetentionSettings] [BK-AGENT-PROD-G] Updated max factory retention to [null]
[2024-11-06T05:18:57,496][ERROR][o.e.b.Elasticsearch      ] [BK-AGENT-PROD-G] fatal exception while booting Elasticsearch org.elasticsearch.ElasticsearchException: Failure running machine learning native code. This could be due to running on an unsupported OS or distribution, missing OS libraries, or a problem with the temp directory. To bypass this problem by running Elasticsearch without machine learning functionality set [xpack.ml.enabled: false].
	at org.elasticsearch.ml@9.0.0-SNAPSHOT/org.elasticsearch.xpack.ml.MachineLearning.createComponents(MachineLearning.java:1061)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.node.NodeConstruction.lambda$construct$16(NodeConstruction.java:888)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.plugins.PluginsService.lambda$flatMap$1(PluginsService.java:254)
	at java.base/java.util.stream.ReferencePipeline$7$1FlatMap.accept(ReferencePipeline.java:289)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:215)
	at java.base/java.util.AbstractList$RandomAccessSpliterator.forEachRemaining(AbstractList.java:722)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:570)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:560)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:636)
	at java.base/java.util.stream.AbstractPipeline.evaluateToArrayNode(AbstractPipeline.java:291)
	at java.base/java.util.stream.ReferencePipeline.toArray(ReferencePipeline.java:656)
	at java.base/java.util.stream.ReferencePipeline.toArray(ReferencePipeline.java:662)
	at java.base/java.util.stream.ReferencePipeline.toList(ReferencePipeline.java:667)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.node.NodeConstruction.construct(NodeConstruction.java:910)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.node.NodeConstruction.prepareConstruction(NodeConstruction.java:290)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.node.Node.<init>(Node.java:184)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.bootstrap.Elasticsearch$2.<init>(Elasticsearch.java:245)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.bootstrap.Elasticsearch.initPhase3(Elasticsearch.java:245)
	at org.elasticsearch.server@9.0.0-SNAPSHOT/org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:76)] stderr = [ERROR: Elasticsearch did not exit normally - check the logs at C:\tmp\elasticsearch\logs\elasticsearch.log

ERROR: Elasticsearch died while starting up, with exit code 1]]
Expected: <0>
     but: was <1>
```

**Issue Reasons:**
- [main] 3 consecutive failures in test test40AutoconfigurationNotTriggeredWhenNodeIsMeantToJoinExistingCluster
- [main] 4 consecutive failures in step windows-2019_default-windows-archive_packaging-tests-windows-sample
- [main] 6 failures in test test40AutoconfigurationNotTriggeredWhenNodeIsMeantToJoinExistingCluster (1.8% fail rate in 329 executions)
- [main] 4 failures in step windows-2019_default-windows-archive_packaging-tests-windows-sample (4.6% fail rate in 87 executions)
- [main] 4 failures in pipeline elasticsearch-pull-request (4.5% fail rate in 89 executions)

**Note:**
This issue was created using new test triage automation. Please report issues or feedback to es-delivery.",elasticsearchmachine,closed,"[':Delivery/Packaging', '>test-failure', ':ml', 'Team:ML', 'Team:Delivery', 'low-risk']",https://github.com/elastic/elasticsearch/issues/116289,2024-11-06T05:20:02Z,8,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/116289,"{
  ""application_resource"": ""unsure""
}"
77,116110,[CI] MixedClusterClientYamlTestSuiteIT test {p0=cat.shards/10_basic/Help} failing,"**Build Scans:**
- [elasticsearch-intake #12302 / 8.17.0_bwc-snapshots](https://gradle-enterprise.elastic.co/s/4gpylvctqsajq)
- [elasticsearch-pull-request #39545 / 8.17.0_bwc-snapshots](https://gradle-enterprise.elastic.co/s/ay63qqgzy6tkm)
- [elasticsearch-pull-request #39541 / 8.17.0_bwc-snapshots](https://gradle-enterprise.elastic.co/s/hitrowjr5k4oc)
- [elasticsearch-intake #12296 / 8.17.0_bwc-snapshots](https://gradle-enterprise.elastic.co/s/2bn7ixgqko6ti)

**Reproduction Line:**
```
./gradlew "":qa:mixed-cluster:v8.17.0#mixedClusterTest"" -Dtests.class=""org.elasticsearch.backwards.MixedClusterClientYamlTestSuiteIT"" -Dtests.method=""test {p0=cat.shards/10_basic/Help}"" -Dtests.seed=9933C87666406E07 -Dtests.bwc=true -Dtests.locale=doi-Deva-IN -Dtests.timezone=EAT -Druntime.java=23
```

**Applicable branches:**
main

**Reproduces locally?:**
N/A

**Failure History:**
[See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&_a=(controlGroupState:(initialChildControlState:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:task.keyword,order:0,selectedOptions:!(),title:'GradleTask',type:optionsListControl),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:className.keyword,order:1,selectedOptions:!(org.elasticsearch.backwards.MixedClusterClientYamlTestSuiteIT),title:'Suite',type:optionsListControl),'144933da-5c1b-4257-a969-7f43455a7901':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:name.keyword,order:2,selectedOptions:!(test%20%7Bp0%3Dcat.shards%2F10_basic%2FHelp%7D),title:'Test',type:optionsListControl)))))

**Failure Message:**
```
java.lang.AssertionError: Failure at [cat.shards/10_basic:10]: field [$body] was expected to match the provided regex but didn't
Expected: ^   index                            .+   \n
     shard                            .+   \n
     prirep                           .+   \n
     state                            .+   \n
     docs                             .+   \n
     store                            .+   \n
     dataset                          .+   \n
     ip                               .+   \n
     id                               .+   \n
     node                             .+   \n
     unassigned.reason                .+   \n
     unassigned.at                    .+   \n
     unassigned.for                   .+   \n
     unassigned.details               .+   \n
     recoverysource.type              .+   \n
     completion.size                  .+   \n
     fielddata.memory_size            .+   \n
     fielddata.evictions              .+   \n
     query_cache.memory_size          .+   \n
     query_cache.evictions            .+   \n
     flush.total                      .+   \n
     flush.total_time                 .+   \n
     get.current                      .+   \n
     get.time                         .+   \n
     get.total                        .+   \n
     get.exists_time                  .+   \n
     get.exists_total                 .+   \n
     get.missing_time                 .+   \n
     get.missing_total                .+   \n
     indexing.delete_current          .+   \n
     indexing.delete_time             .+   \n
     indexing.delete_total            .+   \n
     indexing.index_current           .+   \n
     indexing.index_time              .+   \n
     indexing.index_total             .+   \n
     indexing.index_failed            .+   \n
     merges.current                   .+   \n
     merges.current_docs              .+   \n
     merges.current_size              .+   \n
     merges.total                     .+   \n
     merges.total_docs                .+   \n
     merges.total_size                .+   \n
     merges.total_time                .+   \n
     refresh.total                    .+   \n
     refresh.time                     .+   \n
     refresh.external_total           .+   \n
     refresh.external_time            .+   \n
     refresh.listeners                .+   \n
     search.fetch_current             .+   \n
     search.fetch_time                .+   \n
     search.fetch_total               .+   \n
     search.open_contexts             .+   \n
     search.query_current             .+   \n
     search.query_time                .+   \n
     search.query_total               .+   \n
     search.scroll_current            .+   \n
     search.scroll_time               .+   \n
     search.scroll_total              .+   \n
     segments.count                   .+   \n
     segments.memory                  .+   \n
     segments.index_writer_memory     .+   \n
     segments.version_map_memory      .+   \n
     segments.fixed_bitset_memory     .+   \n
     seq_no.max                       .+   \n
     seq_no.local_checkpoint          .+   \n
     seq_no.global_checkpoint         .+   \n
     warmer.current                   .+   \n
     warmer.total                     .+   \n
     warmer.total_time                .+   \n
     path.data                        .+   \n
     path.state                       .+   \n
     bulk.total_operations            .+   \n
     bulk.total_time                  .+   \n
     bulk.total_size_in_bytes         .+   \n
     bulk.avg_time                    .+   \n
     bulk.avg_size_in_bytes           .+   \n
     dense_vector.value_count         .+   \n
     sparse_vector.value_count        .+   \n
$
     but: was ""index                        | i,idx                          | index name                                                                                                       \nshard                        | s,sh                           | shard name                                                                                                       \nprirep                       | p,pr,primaryOrReplica          | primary or replica                                                                                               \nstate                        | st                             | shard state                                                                                                      \ndocs                         | d,dc                           | number of docs in shard                                                                                          \nstore                        | sto                            | store size of shard (how much disk it uses)                                                                      \ndataset                      |                                | total size of dataset                                                                                            \nip                           |                                | ip of node where it lives                                                                                        \nid                           |                                | unique id of node where it lives                                                                                 \nnode                         | n                              | name of node where it lives                                                                                      \nsync_id                      | sync_id                        | sync id                                                                                                          \nunassigned.reason            | ur                             | reason shard became unassigned                                                                                   \nunassigned.at                | ua                             | time shard became unassigned (UTC)                                                                               \nunassigned.for               | uf                             | time has been unassigned                                                                                         \nunassigned.details           | ud                             | additional details as to why the shard became unassigned                                                         \nrecoverysource.type          | rs                             | recovery source type                                                                                             \ncompletion.size              | cs,completionSize              | size of completion                                                                                               \nfielddata.memory_size        | fm,fielddataMemory             | used fielddata cache                                                                                             \nfielddata.evictions          | fe,fielddataEvictions          | fielddata evictions                                                                                              \nquery_cache.memory_size      | qcm,queryCacheMemory           | used query cache                                                                                                 \nquery_cache.evictions        | qce,queryCacheEvictions        | query cache evictions                                                                                            \nflush.total                  | ft,flushTotal                  | number of flushes                                                                                                \nflush.total_time             | ftt,flushTotalTime             | time spent in flush                                                                                              \nget.current                  | gc,getCurrent                  | number of current get ops                                                                                        \nget.time                     | gti,getTime                    | time spent in get                                                                                                \nget.total                    | gto,getTotal                   | number of get ops                                                                                                \nget.exists_time              | geti,getExistsTime             | time spent in successful gets                                                                                    \nget.exists_total             | geto,getExistsTotal            | number of successful gets                                                                                        \nget.missing_time             | gmti,getMissingTime            | time spent in failed gets                                                                                        \nget.missing_total            | gmto,getMissingTotal           | number of failed gets                                                                                            \nindexing.delete_current      | idc,indexingDeleteCurrent      | number of current deletions                                                                                      \nindexing.delete_time         | idti,indexingDeleteTime        | time spent in deletions                                                                                          \nindexing.delete_total        | idto,indexingDeleteTotal       | number of delete ops                                                                                             \nindexing.index_current       | iic,indexingIndexCurrent       | number of current indexing ops                                                                                   \nindexing.index_time          | iiti,indexingIndexTime         | time spent in indexing                                                                                           \nindexing.index_total         | iito,indexingIndexTotal        | number of indexing ops                                                                                           \nindexing.index_failed        | iif,indexingIndexFailed        | number of failed indexing ops                                                                                    \nmerges.current               | mc,mergesCurrent               | number of current merges                                                                                         \nmerges.current_docs          | mcd,mergesCurrentDocs          | number of current merging docs                                                                                   \nmerges.current_size          | mcs,mergesCurrentSize          | size of current merges                                                                                           \nmerges.total                 | mt,mergesTotal                 | number of completed merge ops                                                                                    \nmerges.total_docs            | mtd,mergesTotalDocs            | docs merged                                                                                                      \nmerges.total_size            | mts,mergesTotalSize            | size merged                                                                                                      \nmerges.total_time            | mtt,mergesTotalTime            | time spent in merges                                                                                             \nrefresh.total                | rto,refreshTotal               | total refreshes                                                                                                  \nrefresh.time                 | rti,refreshTime                | time spent in refreshes                                                                                          \nrefresh.external_total       | rto,refreshTotal               | total external refreshes                                                                                         \nrefresh.external_time        | rti,refreshTime                | time spent in external refreshes                                                                                 \nrefresh.listeners            | rli,refreshListeners           | number of pending refresh listeners                                                                              \nsearch.fetch_current         | sfc,searchFetchCurrent         | current fetch phase ops                                                                                          \nsearch.fetch_time            | sfti,searchFetchTime           | time spent in fetch phase                                                                                        \nsearch.fetch_total           | sfto,searchFetchTotal          | total fetch ops                                                                                                  \nsearch.open_contexts         | so,searchOpenContexts          | open search contexts                                                                                             \nsearch.query_current         | sqc,searchQueryCurrent         | current query phase ops                                                                                          \nsearch.query_time            | sqti,searchQueryTime           | time spent in query phase                                                                                        \nsearch.query_total           | sqto,searchQueryTotal          | total query phase ops                                                                                            \nsearch.scroll_current        | scc,searchScrollCurrent        | open scroll contexts                                                                                             \nsearch.scroll_time           | scti,searchScrollTime          | time scroll contexts held open                                                                                   \nsearch.scroll_total          | scto,searchScrollTotal         | completed scroll contexts                                                                                        \nsegments.count               | sc,segmentsCount               | number of segments                                                                                               \nsegments.memory              | sm,segmentsMemory              | memory used by segments                                                                                          \nsegments.index_writer_memory | siwm,segmentsIndexWriterMemory | memory used by index writer                                                                                      \nsegments.version_map_memory  | svmm,segmentsVersionMapMemory  | memory used by version map                                                                                       \nsegments.fixed_bitset_memory | sfbm,fixedBitsetMemory         | memory used by fixed bit sets for nested object field types and type filters for types referred in _parent fields\nseq_no.max                   | sqm,maxSeqNo                   | max sequence number                                                                                              \nseq_no.local_checkpoint      | sql,localCheckpoint            | local checkpoint                                                                                                 \nseq_no.global_checkpoint     | sqg,globalCheckpoint           | global checkpoint                                                                                                \nwarmer.current               | wc,warmerCurrent               | current warmer ops                                                                                               \nwarmer.total                 | wto,warmerTotal                | total warmer ops                                                                                                 \nwarmer.total_time            | wtt,warmerTotalTime            | time spent in warmers                                                                                            \npath.data                    | pd,dataPath                    | shard data path                                                                                                  \npath.state                   | ps,statsPath                   | shard state path                                                                                                 \nbulk.total_operations        | bto,bulkTotalOperations        | number of bulk shard ops                                                                                         \nbulk.total_time              | btti,bulkTotalTime             | time spend in shard bulk                                                                                         \nbulk.total_size_in_bytes     | btsi,bulkTotalSizeInBytes      | total size in bytes of shard bulk                                                                                \nbulk.avg_time                | bati,bulkAvgTime               | average time spend in shard bulk                                                                                 \nbulk.avg_size_in_bytes       | basi,bulkAvgSizeInBytes        | avg size in bytes of shard bulk                                                                                  \ndense_vector.value_count     | dvc,denseVectorCount           | number of indexed dense vectors in shard                                                                         \nsparse_vector.value_count    | svc,sparseVectorCount          | number of indexed sparse vectors in shard                                                                        \n""
```

**Issue Reasons:**
- [main] 2 consecutive failures in test test {p0=cat.shards/10_basic/Help}
- [main] 2 consecutive failures in step 8.17.0_bwc-snapshots
- [main] 4 failures in test test {p0=cat.shards/10_basic/Help} (2.9% fail rate in 137 executions)
- [main] 4 failures in step 8.17.0_bwc-snapshots (3.2% fail rate in 124 executions)
- [main] 2 failures in pipeline elasticsearch-intake (4.8% fail rate in 42 executions)
- [main] 2 failures in pipeline elasticsearch-pull-request (2.4% fail rate in 83 executions)

**Note:**
This issue was created using new test triage automation. Please report issues or feedback to es-delivery.",elasticsearchmachine,closed,"['>test-failure', ':Distributed Indexing/Engine', 'low-risk', 'Team:Distributed Indexing']",https://github.com/elastic/elasticsearch/issues/116110,2024-11-01T17:11:35Z,5,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/116110,"{
  ""application_resource"": ""no""
}"
78,116052,[CI] DesiredNodesUpgradeIT testUpgradeDesiredNodes {upgradedNodes=3} failing,"**Build Scans:**
- [elasticsearch-periodic #4665 / 8.13.4_bwc](https://gradle-enterprise.elastic.co/s/njskrxr4m3mzo)
- [elasticsearch-periodic #4660 / openjdk17_8.16.0_java-matrix-bwc](https://gradle-enterprise.elastic.co/s/eefoyopjmrrp4)

**Reproduction Line:**
```
./gradlew "":qa:rolling-upgrade:v8.13.4#bwcTest"" -Dtests.class=""org.elasticsearch.upgrades.DesiredNodesUpgradeIT"" -Dtests.method=""testUpgradeDesiredNodes {upgradedNodes=2}"" -Dtests.seed=B652AF7DB9AE97C9 -Dtests.bwc=true -Dtests.locale=es-NI -Dtests.timezone=GB -Druntime.java=23
```

**Applicable branches:**
8.16

**Reproduces locally?:**
N/A

**Failure History:**
[See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&_a=(controlGroupState:(initialChildControlState:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:task.keyword,order:0,selectedOptions:!(),title:'GradleTask',type:optionsListControl),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:className.keyword,order:1,selectedOptions:!(org.elasticsearch.upgrades.DesiredNodesUpgradeIT),title:'Suite',type:optionsListControl),'144933da-5c1b-4257-a969-7f43455a7901':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:name.keyword,order:2,selectedOptions:!(testUpgradeDesiredNodes%20%7BupgradedNodes%3D3%7D),title:'Test',type:optionsListControl)))))

**Failure Message:**
```
org.elasticsearch.client.ResponseException: method [PUT], host [http://[::1]:36339], URI [/_internal/desired_nodes/upgrade_test/3], status line [HTTP/1.1 400 Bad Request]
{""error"":{""root_cause"":[{""type"":""illegal_argument_exception"",""reason"":""Some nodes contain the same setting value [test-cluster-0, test-cluster-1] for [node.external_id]""}],""type"":""illegal_argument_exception"",""reason"":""Some nodes contain the same setting value [test-cluster-0, test-cluster-1] for [node.external_id]""},""status"":400}
```

**Issue Reasons:**
- [8.16] 2 failures in test testUpgradeDesiredNodes {upgradedNodes=3} (2.2% fail rate in 91 executions)
- [8.16] 2 failures in pipeline elasticsearch-periodic (50.0% fail rate in 4 executions)

**Note:**
This issue was created using new test triage automation. Please report issues or feedback to es-delivery.",elasticsearchmachine,closed,"['>test-failure', ':Distributed Coordination/Allocation', 'low-risk', 'Team:Distributed Coordination']",https://github.com/elastic/elasticsearch/issues/116052,2024-10-31T20:58:50Z,5,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/116052,"{
  ""application_resource"": ""yes""
}"
79,115631,[CI] OldRepositoryAccessIT testOldRepoAccess failing,"**Build Scans:**
- [elasticsearch-intake #11931 / part2](https://gradle-enterprise.elastic.co/s/j6wl5u2tadsui)
- [elasticsearch-pull-request #38421 / part-2](https://gradle-enterprise.elastic.co/s/qj3lzyr6gomqy)

**Reproduction Line:**
```
./gradlew "":x-pack:qa:repository-old-versions:javaRestTestBeforeRestart#5_0_0"" --tests ""org.elasticsearch.oldrepos.OldRepositoryAccessIT.testOldRepoAccess"" -Dtests.seed=360E9472706BB500 -Dtests.locale=de-DE -Dtests.timezone=SystemV/PST8 -Druntime.java=22
```

**Applicable branches:**
main

**Reproduces locally?:**
N/A

**Failure History:**
[See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&_a=(controlGroupState:(initialChildControlState:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:task.keyword,order:0,selectedOptions:!(),title:'GradleTask',type:optionsListControl),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:className.keyword,order:1,selectedOptions:!(org.elasticsearch.oldrepos.OldRepositoryAccessIT),title:'Suite',type:optionsListControl),'144933da-5c1b-4257-a969-7f43455a7901':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:name.keyword,order:2,selectedOptions:!(testOldRepoAccess),title:'Test',type:optionsListControl)))))

**Failure Message:**
```
java.lang.AssertionError: expected:<1> but was:<0>
```

**Issue Reasons:**
- [main] 2 consecutive failures in test testOldRepoAccess
- [main] 2 failures in test testOldRepoAccess (0.2% fail rate in 1000 executions)

**Note:**
This issue was created using new test triage automation. Please report issues or feedback to es-delivery.",elasticsearchmachine,closed,"['>test-failure', 'low-risk', 'Team:Search Foundations', ':Search Foundations/Search']",https://github.com/elastic/elasticsearch/issues/115631,2024-10-25T08:45:38Z,13,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/115631,"{
  ""application_resource"": ""unsure""
}"
80,115170,[CI] UpgradeClusterClientYamlTestSuiteIT class failing,"**Build Scans:**
- [elasticsearch-periodic #4977 / 8.1.3_bwc](https://gradle-enterprise.elastic.co/s/h5uqet7qkjw3y)
- [elasticsearch-periodic #4971 / 8.1.3_bwc](https://gradle-enterprise.elastic.co/s/57mdxhvkqpcf6)
- [elasticsearch-periodic #4965 / 8.1.3_bwc](https://gradle-enterprise.elastic.co/s/icjhmm2ozuvow)
- [elasticsearch-periodic #4960 / 8.1.3_bwc](https://gradle-enterprise.elastic.co/s/ubrwsn4jd64m6)

**Reproduction Line:**
```
./gradlew "":x-pack:qa:rolling-upgrade:v8.1.3#twoThirdsUpgradedTest"" -Dtests.class=""org.elasticsearch.upgrades.UpgradeClusterClientYamlTestSuiteIT"" -Dtests.method=""test {p0=mixed_cluster/80_transform_jobs_crud/Test GET, start, and stop old cluster batch transforms}"" -Dtests.seed=D2241D3F9ECED5B0 -Dtests.bwc=true -Dtests.locale=ku-Latn-TR -Dtests.timezone=Atlantic/Reykjavik -Druntime.java=23
```

**Applicable branches:**
8.16

**Reproduces locally?:**
N/A

**Failure History:**
[See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&_a=(controlGroupState:(initialChildControlState:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:task.keyword,order:0,selectedOptions:!(),title:'GradleTask',type:optionsListControl),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:className.keyword,order:1,selectedOptions:!(org.elasticsearch.upgrades.UpgradeClusterClientYamlTestSuiteIT),title:'Suite',type:optionsListControl),'144933da-5c1b-4257-a969-7f43455a7901':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:name.keyword,order:2,selectedOptions:!(org.elasticsearch.upgrades.UpgradeClusterClientYamlTestSuiteIT),title:'Test',type:optionsListControl)))))

**Failure Message:**
```
java.lang.AssertionError: Failure in test setup: Failed to initialize at least 3 watcher nodes
```

**Issue Reasons:**
- [8.16] 4 failures in class org.elasticsearch.upgrades.UpgradeClusterClientYamlTestSuiteIT (0.4% fail rate in 1000 executions)
- [8.16] 4 failures in step 8.1.3_bwc (100.0% fail rate in 4 executions)
- [8.16] 4 failures in pipeline elasticsearch-periodic (100.0% fail rate in 4 executions)

**Note:**
This issue was created using new test triage automation. Please report issues or feedback to es-delivery.",elasticsearchmachine,closed,"['>test-failure', ':ml', 'Team:ML', 'low-risk']",https://github.com/elastic/elasticsearch/issues/115170,2024-10-19T21:06:51Z,9,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/115170,"{
  ""application_resource"": ""yes""
}"
81,114930,[ML] ML nodes autoscaling not down to 0 in stateful and serverless,"### Environment

- Stateful cloud (gcp-us-west2)
- Serverless QA

### build
```
  ""build"": {
    ""hash"": ""8ccfb227c2131c859033f409ee37a87023fada62"",
    ""date"": ""2024-10-16T05:50:43.944345200Z""
  }
```

### Step to reproduce
1. Deploy a serverless or stateful cluster, for stateful cluster, make sure ML autoscaling is ON
2.  Create an inference endpoint  with adaptive allocation ON
```
PUT _inference/sparse_embedding/elser-endpoint
{
  ""service"": ""elser"", 
  ""service_settings"": {""num_threads"": 4, ""adaptive_allocations"": {""enabled"": true}}
}
```
3. wait a few minutes for scaling up event, ml node available and allocated to that inference endpoint, you can confirm by running: `GET _ml/trained_models/elser-endpoint/_stats`
4. Run inference, you can follow the steps in this tutorial, https://www.elastic.co/guide/en/elasticsearch/reference/current/semantic-search-semantic-text.html
5. after that, wait at least 15 minutes for allocation to scale down to 0
```
{
  ""count"": 1,
  ""trained_model_stats"": [
    {
      ""model_id"": "".elser_model_2_linux-x86_64"",
      ""model_size_stats"": {
        ""model_size_bytes"": 274756282,
        ""required_native_memory_bytes"": 2101346304
      },
      ""pipeline_count"": 1,
      ""ingest"": {
        ""total"": {
          ""count"": 0,
          ""time_in_millis"": 0,
          ""current"": 0,
          ""failed"": 0
        },
        ""pipelines"": {
          "".kibana-elastic-ai-assistant-ingest-pipeline-knowledge-base"": {
            ""count"": 0,
            ""time_in_millis"": 0,
            ""current"": 0,
            ""failed"": 0,
            ""ingested_as_first_pipeline_in_bytes"": 0,
            ""produced_as_first_pipeline_in_bytes"": 0,
            ""processors"": [
              {
                ""inference"": {
                  ""type"": ""inference"",
                  ""stats"": {
                    ""count"": 0,
                    ""time_in_millis"": 0,
                    ""current"": 0,
                    ""failed"": 0
                  }
                }
              }
            ]
          }
        }
      },
      ""inference_stats"": {
        ""failure_count"": 0,
        ""inference_count"": 0,
        ""cache_miss_count"": 0,
        ""missing_all_fields_count"": 0,
        ""timestamp"": 1729097542245
      },
      ""deployment_stats"": {
        ""deployment_id"": ""elser-endpoint"",
        ""model_id"": "".elser_model_2_linux-x86_64"",
        ""threads_per_allocation"": 4,
        ""number_of_allocations"": 0,
        ""adaptive_allocations"": {
          ""enabled"": true
        },
        ""queue_capacity"": 1024,
        ""state"": ""started"",
        ""allocation_status"": {
          ""allocation_count"": 0,
          ""target_allocation_count"": 0,
          ""state"": ""fully_allocated""
        },
        ""cache_size"": ""262mb"",
        ""priority"": ""normal"",
        ""start_time"": 1729044099355,
        ""peak_throughput_per_minute"": 0,
        ""nodes"": []
      }
    }
  ]
}
```
7. after allocation scales down to 0, ml nodes autoscaling (down to 0) should happen in ~1 hour
**Observed:**

After hours wait, ml nodes autoscaling (down to 0) didnt happen

- for stateful, `GET /_autoscaling/capacity/` returns:

```
""ml"": {
      ""required_capacity"": {
        ""node"": {
          ""memory"": 0,
          ""processors"": 4
        },
        ""total"": {
          ""memory"": 0,
          ""processors"": 0
        }
      },
      ""current_capacity"": {
        ""node"": {
          ""storage"": 0,
          ""memory"": 8585740288,
          ""processors"": 4
        },
        ""total"": {
          ""storage"": 0,
          ""memory"": 17171480576,
          ""processors"": 8
        }
      },
      ""current_nodes"": [
        {
          ""name"": ""instance-0000000003""
        },
        {
          ""name"": ""instance-0000000004""
        }
      ],
      ""deciders"": {
        ""ml"": {
          ""required_capacity"": {
            ""node"": {
              ""memory"": 0,
              ""processors"": 4
            },
            ""total"": {
              ""memory"": 0,
              ""processors"": 0
            }
          },
          ""reason_summary"": ""[memory_decider] Requesting scale down as tier and/or node size could be smaller; [processor_decider] requesting scale down as tier and/or node size could be smaller"",
          ""reason_details"": {
            ""waiting_analytics_jobs"": [],
            ""waiting_anomaly_jobs"": [],
            ""waiting_models"": [],
            ""configuration"": {},
            ""perceived_current_capacity"": {
              ""node"": {
                ""memory"": 8585740288,
                ""processors"": 4
              },
              ""total"": {
                ""memory"": 17171480576,
                ""processors"": 8
              }
            },
            ""reason"": ""[memory_decider] Requesting scale down as tier and/or node size could be smaller; [processor_decider] requesting scale down as tier and/or node size could be smaller""
          }
        }
      }
    }
```

- for serverless, `GET /_internal/serverless/autoscaling` returns:
```
""ml"": {
    ""metrics"": {
      ""nodes"": {
        ""value"": 1,
        ""quality"": ""exact""
      },
      ""node_memory_in_bytes"": {
        ""value"": 34359738368,
        ""quality"": ""exact""
      },
      ""model_memory_in_bytes"": {
        ""value"": 0,
        ""quality"": ""exact""
      },
      ""min_nodes"": {
        ""value"": 0,
        ""quality"": ""exact""
      },
      ""extra_single_node_model_memory_in_bytes"": {
        ""value"": 2101346304,
        ""quality"": ""exact""
      },
      ""extra_single_node_processors"": {
        ""value"": 0,
        ""quality"": ""exact""
      },
      ""extra_model_memory_in_bytes"": {
        ""value"": 2101346304,
        ""quality"": ""exact""
      },
      ""extra_processors"": {
        ""value"": 0,
        ""quality"": ""exact""
      },
      ""remove_node_memory_in_bytes"": {
        ""value"": 0,
        ""quality"": ""exact""
      },
      ""per_node_memory_overhead_in_bytes"": {
        ""value"": 31457280,
        ""quality"": ""exact""
      }
    }
  }
```

",wwang500,closed,"['>bug', ':ml', 'Team:ML']",https://github.com/elastic/elasticsearch/issues/114930,2024-10-16T16:46:50Z,10,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/114930,"{
  ""application_resource"": ""yes""
}"
82,114285,Dependency Dashboard,"This issue lists Renovate updates and detected dependencies. Read the [Dependency Dashboard](https://docs.renovatebot.com/key-concepts/dashboard/) docs to learn more.

## Awaiting Schedule

These updates are awaiting their schedule. Click on a checkbox to get an update now.

 - [ ] <!-- unschedule-branch=renovate/main-wolfi-versioned -->Update wolfi (versioned) (main) (`docker.elastic.co/wolfi/chainguard-base`, `docker.elastic.co/wolfi/chainguard-base-fips`)
 - [ ] <!-- unschedule-branch=renovate/9.2-wolfi-versioned -->Update wolfi (versioned) (9.2) (`docker.elastic.co/wolfi/chainguard-base`, `docker.elastic.co/wolfi/chainguard-base-fips`)
 - [ ] <!-- unschedule-branch=renovate/9.2-docker.elastic.co-elasticsearch-elasticsearch-9.x -->Update docker.elastic.co/elasticsearch/elasticsearch Docker tag to v9.2.0 (9.2)
 - [ ] <!-- unschedule-branch=renovate/9.1-wolfi-versioned -->Update wolfi (versioned) (9.1) (`docker.elastic.co/wolfi/chainguard-base`, `docker.elastic.co/wolfi/chainguard-base-fips`)
 - [ ] <!-- unschedule-branch=renovate/9.1-docker.elastic.co-elasticsearch-elasticsearch-9.x -->Update docker.elastic.co/elasticsearch/elasticsearch Docker tag to v9.2.0 (9.1)
 - [ ] <!-- unschedule-branch=renovate/9.1-docker.elastic.co-integrations-elastic-connectors-9.x -->Update docker.elastic.co/integrations/elastic-connectors Docker tag to v9.2.0 (9.1)
 - [ ] <!-- unschedule-branch=renovate/8.19-wolfi-versioned -->Update wolfi (versioned) (8.19) (`docker.elastic.co/wolfi/chainguard-base`, `docker.elastic.co/wolfi/chainguard-base-fips`)

## Edited/Blocked

These updates have been manually edited so Renovate will no longer make changes. To discard all commits and start over, click on a checkbox.

 - [ ] <!-- rebase-branch=renovate/main-docker.elastic.co-elasticsearch-elasticsearch-9.x -->Update docker.elastic.co/elasticsearch/elasticsearch Docker tag to v9.2.0 (main)

## Detected dependencies

> [!NOTE]
> Detected dependencies section has been truncated

<details><summary>bun</summary>
<blockquote>

<details><summary>.buildkite/package.json</summary>


</details>

</blockquote>
</details>

<details><summary>docker-compose</summary>
<blockquote>

<details><summary>distribution/docker/docker-compose.yml</summary>


</details>

<details><summary>docs/reference/setup/install/docker/docker-compose.yml</summary>


</details>

<details><summary>qa/remote-clusters/docker-compose-oss.yml</summary>


</details>

<details><summary>qa/remote-clusters/docker-compose.yml</summary>


</details>

</blockquote>
</details>

<details><summary>dockerfile</summary>
<blockquote>

<details><summary>dev-tools/zstd.Dockerfile</summary>


</details>

<details><summary>distribution/docker/src/docker/Dockerfile.ess</summary>


</details>

<details><summary>distribution/docker/src/docker/dockerfiles/cloud_ess_fips/Dockerfile</summary>

 - `docker.elastic.co/wolfi/chainguard-base-fips latest@sha256:cbdc968f357706186e2b83ea1fea92382f5d51842e867a662541b67c28f4e809`
 - `docker.elastic.co/wolfi/chainguard-base-fips latest@sha256:cbdc968f357706186e2b83ea1fea92382f5d51842e867a662541b67c28f4e809`

</details>

<details><summary>distribution/docker/src/docker/dockerfiles/default/Dockerfile</summary>


</details>

<details><summary>distribution/docker/src/docker/dockerfiles/ironbank/Dockerfile</summary>


</details>

<details><summary>distribution/docker/src/docker/dockerfiles/wolfi/Dockerfile</summary>

 - `docker.elastic.co/wolfi/chainguard-base latest@sha256:b85d54c9019ff80e88aab7d357ede3341d1442ce190173eed42ae5a116753e4e`
 - `docker.elastic.co/wolfi/chainguard-base latest@sha256:b85d54c9019ff80e88aab7d357ede3341d1442ce190173eed42ae5a116753e4e`

</details>

<details><summary>libs/simdvec/native/Dockerfile.aarch64</summary>


</details>

<details><summary>libs/simdvec/native/Dockerfile.amd64</summary>


</details>

<details><summary>test/fixtures/krb5kdc-fixture/Dockerfile</summary>


</details>

<details><summary>x-pack/test/idp-fixture/src/main/resources/idp/Dockerfile</summary>


</details>

<details><summary>x-pack/test/idp-fixture/src/main/resources/nginx/Dockerfile</summary>


</details>

<details><summary>x-pack/test/idp-fixture/src/main/resources/oidc/Dockerfile</summary>


</details>

<details><summary>x-pack/test/idp-fixture/src/main/resources/openldap/Dockerfile</summary>


</details>

<details><summary>x-pack/test/smb-fixture/src/main/resources/Dockerfile</summary>


</details>

</blockquote>
</details>

<details><summary>github-actions</summary>
<blockquote>

<details><summary>.github/workflows/docs-build.yml</summary>


</details>

<details><summary>.github/workflows/docs-cleanup.yml</summary>


</details>

<details><summary>.github/workflows/gradle-wrapper-validation.yml</summary>


</details>

<details><summary>.github/workflows/updatecli-compose.yml</summary>


</details>

</blockquote>
</details>

<details><summary>gradle</summary>
<blockquote>

<details><summary>gradle.properties</summary>


</details>

<details><summary>settings.gradle</summary>


</details>

<details><summary>build.gradle</summary>


</details>

<details><summary>.ci/init.gradle</summary>


</details>

<details><summary>benchmarks/build.gradle</summary>


</details>

<details><summary>build-conventions/settings.gradle</summary>


</details>

<details><summary>build-conventions/build.gradle</summary>


</details>

<details><summary>build-tools/settings.gradle</summary>


</details>

<details><summary>build-tools/build.gradle</summary>


</details>

<details><summary>build-tools-internal/settings.gradle</summary>


</details>

<details><summary>build-tools-internal/build.gradle</summary>


</details>

<details><summary>build-tools-internal/src/integTest/resources/org/elasticsearch/gradle/internal/fake_git/remote/gradle.properties</summary>


</details>

<details><summary>build-tools-internal/src/integTest/resources/org/elasticsearch/gradle/internal/fake_git/remote/settings.gradle</summary>


</details>

<details><summary>build-tools-internal/src/integTest/resources/org/elasticsearch/gradle/internal/fake_git/remote/build.gradle</summary>


</details>

<details><summary>build-tools-internal/src/integTest/resources/org/elasticsearch/gradle/internal/fake_git/remote/distribution/archives/build.gradle</summary>


</details>

<details><summary>build-tools-internal/src/integTest/resources/org/elasticsearch/gradle/internal/fake_git/remote/distribution/archives/darwin-aarch64-tar/build.gradle</summary>


</details>

<details><summary>build-tools-internal/src/integTest/resources/org/elasticsearch/gradle/internal/fake_git/remote/distribution/archives/darwin-tar/build.gradle</summary>


</details>

<details><summary>build-tools-internal/src/integTest/resources/org/elasticsearch/gradle/internal/fake_git/remote/distribution/archives/linux-aarch64-tar/build.gradle</summary>


</details>

<details><summary>build-tools-internal/src/integTest/resources/org/elasticsearch/gradle/internal/fake_git/remote/distribution/archives/oss-darwin-aarch64-tar/build.gradle</summary>


</details>

<details><summary>build-tools-internal/src/integTest/resources/org/elasticsearch/gradle/internal/fake_git/remote/distribution/archives/oss-darwin-tar/build.gradle</summary>


</details>

<details><summary>build-tools-internal/src/integTest/resources/org/elasticsearch/gradle/internal/fake_git/remote/distribution/archives/oss-linux-aarch64-tar/build.gradle</summary>


</details>

<details><summary>build-tools-internal/src/integTest/resources/org/elasticsearch/gradle/internal/fake_git/remote/distribution/bwc/bugfix3/build.gradle</summary>


</details>

<details><summary>build-tools-internal/src/integTest/resources/org/elasticsearch/gradle/internal/fake_git/remote/distribution/bwc/bugfix4/build.gradle</summary>


</details>

<details><summary>build-tools-internal/src/integTest/resources/org/elasticsearch/gradle/internal/fake_git/remote/distribution/bwc/bugfix5/build.gradle</summary>


</details>

<details><summary>build-tools-internal/src/integTest/resources/org/elasticsearch/gradle/internal/fake_git/remote/distribution/bwc/major1/build.gradle</summary>


</details>

<details><summary>build-tools-internal/src/integTest/resources/org/elasticsearch/gradle/internal/fake_git/remote/distribution/bwc/major2/build.gradle</summary>


</details>

<details><summary>build-tools-internal/src/integTest/resources/org/elasticsearch/gradle/internal/fake_git/remote/distribution/bwc/major3/build.gradle</summary>


</details>

<details><summary>build-tools-internal/src/integTest/resources/org/elasticsearch/gradle/internal/fake_git/remote/distribution/bwc/major4/build.gradle</summary>


</details>

<details><summary>build-tools-internal/src/integTest/resources/org/elasticsearch/gradle/internal/fake_git/remote/distribution/bwc/minor1/build.gradle</summary>


</details>

<details><summary>build-tools-internal/src/integTest/resources/org/elasticsearch/gradle/internal/fake_git/remote/distribution/bwc/minor2/build.gradle</summary>


</details>

<details><summary>build-tools-internal/src/integTest/resources/org/elasticsearch/gradle/internal/fake_git/remote/distribution/bwc/minor3/build.gradle</summary>


</details>

<details><summary>build-tools-internal/src/integTest/resources/org/elasticsearch/gradle/internal/fake_git/remote/distribution/bwc/minor4/build.gradle</summary>


</details>

<details><summary>build-tools-internal/src/integTest/resources/org/elasticsearch/gradle/internal/fake_git/remote/distribution/bwc/staged2/build.gradle</summary>


</details>

<details><summary>build-tools-internal/src/main/groovy/elasticsearch.authenticated-testclusters.gradle</summary>


</details>

<details><summary>build-tools-internal/src/main/groovy/elasticsearch.base.gradle</summary>


</details>

<details><summary>build-tools-internal/src/main/groovy/elasticsearch.bc-upgrade-test.gradle</summary>


</details>

<details><summary>build-tools-internal/src/main/groovy/elasticsearch.build-scan.gradle</summary>


</details>

<details><summary>build-tools-internal/src/main/groovy/elasticsearch.bwc-test.gradle</summary>


</details>

<details><summary>build-tools-internal/src/main/groovy/elasticsearch.fips.gradle</summary>


</details>

<details><summary>build-tools-internal/src/main/groovy/elasticsearch.forbidden-dependencies.gradle</summary>


</details>

<details><summary>build-tools-internal/src/main/groovy/elasticsearch.fwc-test.gradle</summary>


</details>

<details><summary>build-tools-internal/src/main/groovy/elasticsearch.ide.gradle</summary>


</details>

<details><summary>build-tools-internal/src/main/groovy/elasticsearch.local-distribution.gradle</summary>


</details>

<details><summary>build-tools-internal/src/main/groovy/elasticsearch.run-ccs.gradle</summary>


</details>

<details><summary>build-tools-internal/src/main/groovy/elasticsearch.run.gradle</summary>


</details>

<details><summary>build-tools-internal/src/main/groovy/elasticsearch.runtime-jdk-provision.gradle</summary>


</details>

<details><summary>build-tools-internal/src/main/groovy/elasticsearch.stable-api.gradle</summary>


</details>

<details><summary>build-tools/reaper/build.gradle</summary>


</details>

<details><summary>client/benchmark/build.gradle</summary>


</details>

<details><summary>client/client-benchmark-noop-api-plugin/build.gradle</summary>


</details>

<details><summary>client/rest/build.gradle</summary>


</details>

<details><summary>client/sniffer/build.gradle</summary>


</details>

<details><summary>client/test/build.gradle</summary>


</details>

<details><summary>distribution/build.gradle</summary>


</details>

<details><summary>distribution/archives/build.gradle</summary>


</details>

<details><summary>distribution/archives/darwin-aarch64-tar/build.gradle</summary>


</details>

<details><summary>distribution/archives/darwin-tar/build.gradle</summary>


</details>

<details><summary>distribution/archives/integ-test-zip/build.gradle</summary>


</details>

<details><summary>distribution/archives/linux-aarch64-tar/build.gradle</summary>


</details>

<details><summary>distribution/archives/linux-tar/build.gradle</summary>


</details>

<details><summary>distribution/archives/windows-zip/build.gradle</summary>


</details>

<details><summary>distribution/bwc/build.gradle</summary>


</details>

<details><summary>distribution/bwc/main/build.gradle</summary>


</details>

<details><summary>distribution/bwc/major1/build.gradle</summary>


</details>

<details><summary>distribution/bwc/major2/build.gradle</summary>


</details>

<details><summary>distribution/bwc/major3/build.gradle</summary>


</details>

<details><summary>distribution/bwc/major4/build.gradle</summary>


</details>

<details><summary>distribution/bwc/minor1/build.gradle</summary>


</details>

<details><summary>distribution/bwc/minor2/build.gradle</summary>


</details>

<details><summary>distribution/bwc/minor3/build.gradle</summary>


</details>

<details><summary>distribution/bwc/minor4/build.gradle</summary>


</details>

<details><summary>distribution/docker/build.gradle</summary>


</details>

<details><summary>distribution/docker/cloud-ess-docker-aarch64-export/build.gradle</summary>


</details>

<details><summary>distribution/docker/cloud-ess-docker-export/build.gradle</summary>


</details>

<details><summary>distribution/docker/cloud-ess-fips-docker-aarch64-export/build.gradle</summary>


</details>

<details><summary>distribution/docker/cloud-ess-fips-docker-export/build.gradle</summary>


</details>

<details><summary>distribution/docker/docker-aarch64-export/build.gradle</summary>


</details>

<details><summary>distribution/docker/docker-export/build.gradle</summary>


</details>

<details><summary>distribution/docker/ironbank-docker-aarch64-export/build.gradle</summary>


</details>

<details><summary>distribution/docker/ironbank-docker-export/build.gradle</summary>


</details>

<details><summary>distribution/docker/wolfi-docker-aarch64-export/build.gradle</summary>


</details>

<details><summary>distribution/docker/wolfi-docker-export/build.gradle</summary>


</details>

<details><summary>distribution/packages/build.gradle</summary>


</details>

<details><summary>distribution/packages/aarch64-deb/build.gradle</summary>


</details>

<details><summary>distribution/packages/aarch64-rpm/build.gradle</summary>


</details>

<details><summary>distribution/packages/deb/build.gradle</summary>


</details>

<details><summary>distribution/packages/rpm/build.gradle</summary>


</details>

<details><summary>distribution/tools/ansi-console/build.gradle</summary>


</details>

<details><summary>distribution/tools/cli-launcher/build.gradle</summary>


</details>

<details><summary>distribution/tools/geoip-cli/build.gradle</summary>


</details>

<details><summary>distribution/tools/java-version-checker/build.gradle</summary>


</details>

<details><summary>distribution/tools/keystore-cli/build.gradle</summary>


</details>

<details><summary>distribution/tools/plugin-cli/build.gradle</summary>


</details>

<details><summary>distribution/tools/server-cli/build.gradle</summary>


</details>

<details><summary>distribution/tools/windows-service-cli/build.gradle</summary>


</details>

<details><summary>docs/build.gradle</summary>


</details>

<details><summary>gradle/build.versions.toml</summary>


</details>

<details><summary>libs/build.gradle</summary>


</details>

<details><summary>libs/cli/build.gradle</summary>


</details>

<details><summary>libs/core/build.gradle</summary>


</details>

<details><summary>libs/dissect/build.gradle</summary>


</details>

<details><summary>libs/entitlement/build.gradle</summary>


</details>

<details><summary>libs/entitlement/agent/build.gradle</summary>


</details>

<details><summary>libs/entitlement/asm-provider/build.gradle</summary>


</details>

<details><summary>libs/entitlement/bridge/build.gradle</summary>


</details>

<details><summary>libs/entitlement/qa/build.gradle</summary>


</details>

<details><summary>libs/entitlement/qa/entitled-plugin/build.gradle</summary>


</details>

<details><summary>libs/entitlement/qa/entitlement-test-plugin/build.gradle</summary>


</details>

<details><summary>libs/entitlement/tools/build.gradle</summary>


</details>

<details><summary>libs/entitlement/tools/common/build.gradle</summary>


</details>

<details><summary>libs/entitlement/tools/jdk-api-extractor/build.gradle</summary>


</details>

<details><summary>libs/entitlement/tools/public-callers-finder/build.gradle</summary>


</details>

<details><summary>libs/entitlement/tools/securitymanager-scanner/build.gradle</summary>


</details>

<details><summary>libs/exponential-histogram/build.gradle</summary>


</details>

<details><summary>libs/geo/build.gradle</summary>


</details>

<details><summary>libs/grok/build.gradle</summary>


</details>

<details><summary>libs/h3/build.gradle</summary>


</details>

<details><summary>libs/log4j/build.gradle</summary>


</details>

<details><summary>libs/logging/build.gradle</summary>


</details>

<details><summary>libs/logstash-bridge/build.gradle</summary>


</details>

<details><summary>libs/lz4/build.gradle</summary>


</details>

<details><summary>libs/native/build.gradle</summary>


</details>

<details><summary>libs/native/libraries/build.gradle</summary>


</details>

<details><summary>libs/plugin-analysis-api/build.gradle</summary>


</details>

<details><summary>libs/plugin-api/build.gradle</summary>


</details>

<details><summary>libs/plugin-scanner/build.gradle</summary>


</details>

<details><summary>libs/simdvec/build.gradle</summary>


</details>

<details><summary>libs/simdvec/native/settings.gradle</summary>


</details>

<details><summary>libs/simdvec/native/build.gradle</summary>


</details>

<details><summary>libs/ssl-config/build.gradle</summary>


</details>

<details><summary>libs/tdigest/build.gradle</summary>


</details>

<details><summary>libs/x-content/build.gradle</summary>


</details>

<details><summary>libs/x-content/impl/build.gradle</summary>


</details>

<details><summary>modules/build.gradle</summary>


</details>

<details><summary>modules/aggregations/build.gradle</summary>


</details>

<details><summary>modules/analysis-common/build.gradle</summary>


</details>

<details><summary>modules/apm/build.gradle</summary>


</details>

<details><summary>modules/data-streams/build.gradle</summary>


</details>

<details><summary>modules/dot-prefix-validation/build.gradle</summary>


</details>

<details><summary>modules/health-shards-availability/build.gradle</summary>


</details>

<details><summary>modules/ingest-attachment/build.gradle</summary>


</details>

<details><summary>modules/ingest-common/build.gradle</summary>


</details>

<details><summary>modules/ingest-geoip/build.gradle</summary>


</details>

<details><summary>modules/ingest-geoip/qa/build.gradle</summary>


</details>

<details><summary>modules/ingest-geoip/qa/file-based-update/build.gradle</summary>


</details>

<details><summary>modules/ingest-geoip/qa/full-cluster-restart/build.gradle</summary>


</details>

<details><summary>modules/ingest-geoip/qa/geoip-reindexed/build.gradle</summary>


</details>

<details><summary>modules/ingest-geoip/qa/multi-project/build.gradle</summary>


</details>

<details><summary>modules/ingest-otel/build.gradle</summary>


</details>

<details><summary>modules/ingest-user-agent/build.gradle</summary>


</details>

<details><summary>modules/kibana/build.gradle</summary>


</details>

<details><summary>modules/lang-expression/build.gradle</summary>


</details>

<details><summary>modules/lang-mustache/build.gradle</summary>


</details>

<details><summary>modules/lang-painless/build.gradle</summary>


</details>

<details><summary>modules/lang-painless/spi/build.gradle</summary>


</details>

<details><summary>modules/legacy-geo/build.gradle</summary>


</details>

<details><summary>modules/mapper-extras/build.gradle</summary>


</details>

<details><summary>modules/parent-join/build.gradle</summary>


</details>

<details><summary>modules/percolator/build.gradle</summary>


</details>

<details><summary>modules/rank-eval/build.gradle</summary>


</details>

<details><summary>modules/reindex/build.gradle</summary>


</details>

<details><summary>modules/repository-azure/build.gradle</summary>


</details>

<details><summary>modules/repository-gcs/build.gradle</summary>


</details>

<details><summary>modules/repository-s3/build.gradle</summary>


</details>

<details><summary>modules/repository-s3/qa/build.gradle</summary>


</details>

<details><summary>modules/repository-s3/qa/insecure-credentials/build.gradle</summary>


</details>

<details><summary>modules/repository-s3/qa/third-party/build.gradle</summary>


</details>

<details><summary>modules/repository-s3/qa/web-identity-token/build.gradle</summary>


</details>

<details><summary>modules/repository-url/build.gradle</summary>


</details>

<details><summary>modules/rest-root/build.gradle</summary>


</details>

<details><summary>modules/runtime-fields-common/build.gradle</summary>


</details>

<details><summary>modules/streams/build.gradle</summary>


</details>

<details><summary>modules/systemd/build.gradle</summary>


</details>

<details><summary>modules/transport-netty4/build.gradle</summary>


</details>

<details><summary>plugins/build.gradle</summary>


</details>

<details><summary>plugins/analysis-icu/build.gradle</summary>


</details>

<details><summary>plugins/analysis-kuromoji/build.gradle</summary>


</details>

<details><summary>plugins/analysis-nori/build.gradle</summary>


</details>

<details><summary>plugins/analysis-phonetic/build.gradle</summary>


</details>

<details><summary>plugins/analysis-smartcn/build.gradle</summary>


</details>

<details><summary>plugins/analysis-stempel/build.gradle</summary>


</details>

<details><summary>plugins/analysis-ukrainian/build.gradle</summary>


</details>

<details><summary>plugins/discovery-azure-classic/build.gradle</summary>


</details>

<details><summary>plugins/discovery-ec2/build.gradle</summary>


</details>

<details><summary>plugins/discovery-gce/build.gradle</summary>


</details>

<details><summary>plugins/examples/gradle.properties</summary>


</details>

<details><summary>plugins/examples/settings.gradle</summary>


</details>

<details><summary>plugins/examples/build.gradle</summary>


</details>

<details><summary>plugins/examples/custom-processor/build.gradle</summary>


</details>

<details><summary>plugins/examples/custom-settings/build.gradle</summary>


</details>

<details><summary>plugins/examples/custom-significance-heuristic/build.gradle</summary>


</details>

<details><summary>plugins/examples/custom-suggester/build.gradle</summary>


</details>

<details><summary>plugins/examples/painless-whitelist/build.gradle</summary>


</details>

<details><summary>plugins/examples/rescore/build.gradle</summary>


</details>

<details><summary>plugins/examples/rest-handler/build.gradle</summary>


</details>

<details><summary>plugins/examples/script-expert-scoring/build.gradle</summary>


</details>

<details><summary>plugins/examples/security-authorization-engine/build.gradle</summary>


</details>

<details><summary>plugins/examples/stable-analysis/build.gradle</summary>


</details>

<details><summary>plugins/mapper-annotated-text/build.gradle</summary>


</details>

<details><summary>plugins/mapper-murmur3/build.gradle</summary>


</details>

<details><summary>plugins/mapper-size/build.gradle</summary>


</details>

<details><summary>plugins/repository-hdfs/build.gradle</summary>


</details>

<details><summary>plugins/store-smb/build.gradle</summary>


</details>

<details><summary>qa/build.gradle</summary>


</details>

<details><summary>qa/ccs-common-rest/build.gradle</summary>


</details>

<details><summary>qa/ccs-rolling-upgrade-remote-cluster/build.gradle</summary>


</details>

<details><summary>qa/ccs-unavailable-clusters/build.gradle</summary>


</details>

<details><summary>qa/custom-rest-controller/build.gradle</summary>


</details>

<details><summary>qa/evil-tests/build.gradle</summary>


</details>

<details><summary>qa/full-cluster-restart/build.gradle</summary>


</details>

<details><summary>qa/logging-config/build.gradle</summary>


</details>

<details><summary>qa/logging-spi/build.gradle</summary>


</details>

<details><summary>qa/lucene-index-compatibility/build.gradle</summary>


</details>

<details><summary>qa/mixed-cluster/build.gradle</summary>


</details>

<details><summary>qa/multi-cluster-search/build.gradle</summary>


</details>

<details><summary>qa/multi-data-path/build.gradle</summary>


</details>

<details><summary>qa/no-bootstrap-tests/build.gradle</summary>


</details>

<details><summary>qa/packaging/build.gradle</summary>


</details>

<details><summary>qa/remote-clusters/build.gradle</summary>


</details>

<details><summary>qa/repository-multi-version/build.gradle</summary>


</details>

<details><summary>qa/restricted-loggers/build.gradle</summary>


</details>

<details><summary>qa/rolling-upgrade/build.gradle</summary>


</details>

<details><summary>qa/rolling-upgrade-legacy/build.gradle</summary>


</details>

<details><summary>qa/smoke-test-http/build.gradle</summary>


</details>

<details><summary>qa/smoke-test-ingest-disabled/build.gradle</summary>


</details>

<details><summary>qa/smoke-test-ingest-with-all-dependencies/build.gradle</summary>


</details>

<details><summary>qa/smoke-test-multinode/build.gradle</summary>


</details>

<details><summary>qa/smoke-test-plugins/build.gradle</summary>


</details>

<details><summary>qa/stable-api/build.gradle</summary>


</details>

<details><summary>qa/stable-api/logging/build.gradle</summary>


</details>

<details><summary>qa/stable-api/plugin-analysis-api/build.gradle</summary>


</details>

<details><summary>qa/stable-api/plugin-api/build.gradle</summary>


</details>

<details><summary>qa/system-indices/build.gradle</summary>


</details>

<details><summary>qa/unconfigured-node-name/build.gradle</summary>


</details>

<details><summary>qa/vector/build.gradle</summary>


</details>

<details><summary>qa/verify-version-constants/build.gradle</summary>


</details>

<details><summary>rest-api-spec/build.gradle</summary>


</details>

<details><summary>server/build.gradle</summary>


</details>

<details><summary>test/build.gradle</summary>


</details>

<details><summary>test/external-modules/build.gradle</summary>


</details>

<details><summary>test/external-modules/apm-integration/build.gradle</summary>


</details>

<details><summary>test/external-modules/delayed-aggs/build.gradle</summary>


</details>

<details><summary>test/external-modules/die-with-dignity/build.gradle</summary>


</details>

<details><summary>test/external-modules/error-query/build.gradle</summary>


</details>

<details><summary>test/external-modules/esql-heap-attack/build.gradle</summary>


</details>

<details><summary>test/external-modules/jvm-crash/build.gradle</summary>


</details>

<details><summary>test/external-modules/latency-simulating-directory/build.gradle</summary>


</details>

<details><summary>test/external-modules/multi-project/build.gradle</summary>


</details>

<details><summary>test/fixtures/build.gradle</summary>


</details>

<details><summary>test/fixtures/aws-ec2-fixture/build.gradle</summary>


</details>

<details><summary>test/fixtures/aws-fixture-utils/build.gradle</summary>


</details>

<details><summary>test/fixtures/aws-sts-fixture/build.gradle</summary>


</details>

<details><summary>test/fixtures/azure-fixture/build.gradle</summary>


</details>

<details><summary>test/fixtures/ec2-imds-fixture/build.gradle</summary>


</details>

<details><summary>test/fixtures/gcs-fixture/build.gradle</summary>


</details>

<details><summary>test/fixtures/geoip-fixture/build.gradle</summary>


</details>

<details><summary>test/fixtures/hdfs-fixture/build.gradle</summary>


</details>

<details><summary>test/fixtures/krb5kdc-fixture/build.gradle</summary>


</details>

<details><summary>test/fixtures/minio-fixture/build.gradle</summary>


</details>

<details><summary>test/fixtures/old-elasticsearch/build.gradle</summary>


</details>

<details><summary>test/fixtures/s3-fixture/build.gradle</summary>


</details>

<details><summary>test/fixtures/testcontainer-utils/build.gradle</summary>


</details>

<details><summary>test/fixtures/url-fixture/build.gradle</summary>


</details>

<details><summary>test/framework/build.gradle</summary>


</details>

<details><summary>test/immutable-collections-patch/build.gradle</summary>


</details>

<details><summary>test/logger-usage/build.gradle</summary>


</details>

<details><summary>test/metadata-extractor/build.gradle</summary>


</details>

<details><summary>test/test-clusters/build.gradle</summary>


</details>

<details><summary>test/x-content/build.gradle</summary>


</details>

<details><summary>test/yaml-rest-runner/build.gradle</summary>


</details>

<details><summary>x-pack/build.gradle</summary>


</details>

<details><summary>x-pack/extras/build.gradle</summary>


</details>

<details><summary>x-pack/extras/plugins/build.gradle</summary>


</details>

<details><summary>x-pack/extras/plugins/microsoft-graph-authz/build.gradle</summary>


</details>

<details><summary>x-pack/extras/plugins/microsoft-graph-authz/kiota-merged/build.gradle</summary>


</details>

<details><summary>x-pack/libs/build.gradle</summary>


</details>

<details><summary>x-pack/libs/es-opensaml-security-api/build.gradle</summary>


</details>

<details><summary>x-pack/license-tools/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/analytics/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/apm-data/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/async/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/async-search/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/autoscaling/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/blob-cache/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/ccr/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/ccr/qa/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/ccr/qa/multi-cluster/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/core/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/core/template-resources/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/deprecation/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/deprecation/qa/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/deprecation/qa/common/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/deprecation/qa/deprecation-plugin/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/deprecation/qa/early-deprecation-plugin/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/downsample/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/downsample/qa/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/downsample/qa/mixed-cluster/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/downsample/qa/rest/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/enrich/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/ent-search/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/ent-search/qa/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/ent-search/qa/full-cluster-restart/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/eql/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/eql/qa/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/eql/qa/ccs-rolling-upgrade/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/eql/qa/common/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/eql/qa/correctness/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/eql/qa/mixed-node/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/eql/qa/multi-cluster-with-security/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/eql/qa/rest/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/eql/qa/security/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/esql/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/esql-core/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/esql-core/test-fixtures/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/esql/arrow/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/esql/compute/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/esql/compute/ann/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/esql/compute/gen/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/esql/compute/test/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/esql/qa/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/esql/qa/action/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/esql/qa/security/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/esql/qa/server/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/esql/qa/server/mixed-cluster/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/esql/qa/server/multi-clusters/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/esql/qa/server/multi-node/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/esql/qa/server/single-node/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/esql/qa/testFixtures/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/esql/tools/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/fleet/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/frozen-indices/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/geoip-enterprise-downloader/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/gpu/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/graph/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/graph/qa/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/graph/qa/with-security/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/identity-provider/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/identity-provider/qa/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/identity-provider/qa/idp-rest-tests/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/ilm/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/ilm/qa/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/ilm/qa/multi-cluster/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/ilm/qa/multi-node/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/ilm/qa/rest/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/ilm/qa/with-security/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/inference/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/inference/qa/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/inference/qa/inference-service-tests/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/inference/qa/inference-with-security/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/inference/qa/mixed-cluster/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/inference/qa/multi-node/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/inference/qa/rolling-upgrade/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/inference/qa/test-service-plugin/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/kql/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/logsdb/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/logsdb/qa/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/logsdb/qa/rolling-upgrade/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/logsdb/qa/with-basic/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/logsdb/qa/with-custom-cutoff/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/logstash/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/mapper-aggregate-metric/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/mapper-constant-keyword/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/mapper-counted-keyword/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/mapper-exponential-histogram/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/mapper-unsigned-long/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/mapper-version/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/migrate/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/ml/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/ml-package-loader/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/ml/qa/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/ml/qa/basic-multi-node/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/ml/qa/datafeed-multicluster-tests/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/ml/qa/disabled/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/ml/qa/ml-inference-service-tests/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/ml/qa/ml-with-security/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/ml/qa/multi-cluster-tests-with-security/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/ml/qa/native-multi-node-tests/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/ml/qa/no-bootstrap-tests/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/ml/qa/single-node-tests/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/monitoring/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/old-lucene-versions/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/otel-data/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/profiling/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/ql/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/ql/test-fixtures/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/rank-rrf/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/rank-vectors/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/redact/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/repositories-metering-api/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/repositories-metering-api/qa/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/repositories-metering-api/qa/azure/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/repositories-metering-api/qa/gcs/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/repositories-metering-api/qa/s3/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/rollup/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/search-business-rules/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/searchable-snapshots/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/searchable-snapshots/qa/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/searchable-snapshots/qa/azure/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/searchable-snapshots/qa/gcs/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/searchable-snapshots/qa/hdfs/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/searchable-snapshots/qa/minio/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/searchable-snapshots/qa/rest/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/searchable-snapshots/qa/s3/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/searchable-snapshots/qa/url/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/security/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/security/cli/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/security/qa/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/security/qa/audit/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/security/qa/basic-enable-security/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/security/qa/consistency-checks/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/security/qa/jwt-realm/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/security/qa/microsoft-graph-authz-tests/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/security/qa/multi-cluster/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/security/qa/multi-project/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/security/qa/operator-privileges-tests/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/security/qa/profile/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/security/qa/rcs-extension/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/security/qa/saml-rest-tests/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/security/qa/secondary-auth-actions/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/security/qa/security-basic/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/security/qa/security-disabled/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/security/qa/security-trial/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/security/qa/service-account/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/security/qa/smoke-test-all-realms/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/security/qa/ssl-extension/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/security/qa/tls-basic/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/shutdown/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/shutdown/qa/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/shutdown/qa/full-cluster-restart/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/shutdown/qa/multi-node/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/shutdown/qa/rolling-upgrade/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/slm/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/snapshot-based-recoveries/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/snapshot-based-recoveries/qa/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/snapshot-based-recoveries/qa/azure/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/snapshot-based-recoveries/qa/fs/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/snapshot-based-recoveries/qa/gcs/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/snapshot-based-recoveries/qa/license-enforcing/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/snapshot-based-recoveries/qa/s3/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/snapshot-repo-test-kit/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/snapshot-repo-test-kit/qa/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/snapshot-repo-test-kit/qa/azure/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/snapshot-repo-test-kit/qa/gcs/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/snapshot-repo-test-kit/qa/hdfs/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/snapshot-repo-test-kit/qa/minio/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/snapshot-repo-test-kit/qa/rest/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/snapshot-repo-test-kit/qa/s3/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/spatial/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/sql/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/sql/jdbc/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/sql/qa/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/sql/qa/jdbc/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/sql/qa/jdbc/multi-node/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/sql/qa/jdbc/no-sql/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/sql/qa/jdbc/security/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/sql/qa/jdbc/security/with-ssl/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/sql/qa/jdbc/security/without-ssl/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/sql/qa/jdbc/single-node/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/sql/qa/mixed-node/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/sql/qa/server/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/sql/qa/server/multi-cluster-with-security/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/sql/qa/server/multi-node/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/sql/qa/server/security/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/sql/qa/server/security/with-ssl/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/sql/qa/server/security/without-ssl/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/sql/qa/server/single-node/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/sql/sql-action/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/sql/sql-cli/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/sql/sql-client/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/sql/sql-proto/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/stack/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/text-structure/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/text-structure/qa/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/text-structure/qa/text-structure-with-security/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/transform/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/transform/qa/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/transform/qa/common/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/transform/qa/multi-cluster-tests-with-security/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/transform/qa/multi-node-tests/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/transform/qa/single-node-tests/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/vector-tile/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/voting-only-node/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/watcher/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/wildcard/build.gradle</summary>


</details>

<details><summary>x-pack/plugin/write-load-forecaster/build.gradle</summary>


</details>

<details><summary>x-pack/qa/build.gradle</summary>


</details>

<details><summary>x-pack/qa/core-rest-tests-with-security/build.gradle</summary>


</details>

<details><summary>x-pack/qa/evil-tests/build.gradle</summary>


</details>

<details><summary>x-pack/qa/full-cluster-restart/build.gradle</summary>


</details>

<details><summary>x-pack/qa/kerberos-tests/build.gradle</summary>


</details>

<details><summary>x-pack/qa/mixed-tier-cluster/build.gradle</summary>


</details>

<details><summary>x-pack/qa/multi-cluster-search-security/build.gradle</summary>


</details>

<details><summary>x-pack/qa/multi-cluster-search-security/legacy-with-basic-license/build.gradle</summary>


</details>

<details><summary>x-pack/qa/multi-cluster-search-security/legacy-with-full-license/build.gradle</summary>


</details>

<details><summary>x-pack/qa/multi-cluster-search-security/legacy-with-restricted-trust/build.gradle</summary>


</details>

<details><summary>x-pack/qa/multi-node/build.gradle</summary>


</details>

<details><summary>x-pack/qa/multi-project/build.gradle</summary>


</details>

<details><summary>x-pack/qa/multi-project/core-rest-tests-with-multiple-projects/build.gradle</summary>


</details>

<details><summary>x-pack/qa/multi-project/xpack-rest-tests-with-multiple-projects/build.gradle</summary>


</details>

<details><summary>x-pack/qa/multi-project/yaml-test-framework/build.gradle</summary>


</details>

<details><summary>x-pack/qa/oidc-op-tests/build.gradle</summary>


</details>

<details><summary>x-pack/qa/openldap-tests/build.gradle</summary>


</details>

<details><summary>x-pack/qa/password-protected-keystore/build.gradle</summary>


</details>

<details><summary>x-pack/qa/reindex-tests-with-security/build.gradle</summary>


</details>

<details><summary>x-pack/qa/repository-old-versions/build.gradle</summary>


</details>

<details><summary>x-pack/qa/repository-old-versions-compatibility/build.gradle</summary>


</details>

<details><summary>x-pack/qa/rolling-upgrade/build.gradle</summary>


</details>

<details><summary>x-pack/qa/rolling-upgrade-basic/build.gradle</summary>


</details>

<details><summary>x-pack/qa/rolling-upgrade-multi-cluster/build.gradle</summary>


</details>

<details><summary>x-pack/qa/runtime-fields/build.gradle</summary>


</details>

<details><summary>x-pack/qa/runtime-fields/core-with-mapped/build.gradle</summary>


</details>

<details><summary>x-pack/qa/runtime-fields/core-with-search/build.gradle</summary>


</details>

<details><summary>x-pack/qa/runtime-fields/with-security/build.gradle</summary>


</details>

<details><summary>x-pack/qa/saml-idp-tests/build.gradle</summary>


</details>

<details><summary>x-pack/qa/security-example-spi-extension/build.gradle</summary>


</details>

<details><summary>x-pack/qa/security-setup-password-tests/build.gradle</summary>


</details>

<details><summary>x-pack/qa/security-tools-tests/build.gradle</summary>


</details>

<details><summary>x-pack/qa/smoke-test-plugins/build.gradle</summary>


</details>

<details><summary>x-pack/qa/smoke-test-plugins-ssl/build.gradle</summary>


</details>

<details><summary>x-pack/qa/smoke-test-security-with-mustache/build.gradle</summary>


</details>

<details><summary>x-pack/qa/third-party/build.gradle</summary>


</details>

<details><summary>x-pack/qa/third-party/active-directory/build.gradle</summary>


</details>

<details><summary>x-pack/qa/third-party/jira/build.gradle</summary>


</details>

<details><summary>x-pack/qa/third-party/pagerduty/build.gradle</summary>


</details>

<details><summary>x-pack/qa/third-party/slack/build.gradle</summary>


</details>

<details><summary>x-pack/rest-resources-zip/build.gradle</summary>


</details>

<details><summary>x-pack/test/build.gradle</summary>


</details>

<details><summary>x-pack/test/deprecated-query/build.gradle</summary>


</details>

<details><summary>x-pack/test/idp-fixture/build.gradle</summary>


</details>

<details><summary>x-pack/test/smb-fixture/build.gradle</summary>


</details>

</blockquote>
</details>

<details><summary>gradle-wrapper</summary>
<blockquote>

<details><summary>build-tools-internal/gradle/wrapper/gradle-wrapper.properties</summary>


</details>

<details><summary>gradle/wrapper/gradle-wrapper.properties</summary>


</details>

<details><summary>libs/simdvec/native/gradle/wrapper/gradle-wrapper.properties</summary>


</details>

<details><summary>plugins/examples/gradle/wrapper/gradle-wrapper.properties</summary>


</details>

</blockquote>
</details>

<details><summary>regex</summary>
<blockquote>

<details><summary>distribution/docker/src/docker/Dockerfile.ess</summary>


</details>

<details><summary>distribution/docker/src/docker/dockerfiles/cloud_ess_fips/Dockerfile</summary>


</details>

<details><summary>distribution/docker/src/docker/dockerfiles/default/Dockerfile</summary>


</details>

<details><summary>distribution/docker/src/docker/dockerfiles/ironbank/Dockerfile</summary>


</details>

<details><summary>distribution/docker/src/docker/dockerfiles/wolfi/Dockerfile</summary>


</details>

<details><summary>x-pack/test/idp-fixture/src/main/resources/idp/Dockerfile</summary>


</details>

<details><summary>x-pack/test/idp-fixture/src/main/resources/nginx/Dockerfile</summary>


</details>

<details><summary>x-pack/test/idp-fixture/src/main/resources/oidc/Dockerfile</summary>


</details>

<details><summary>x-pack/test/smb-fixture/src/main/resources/Dockerfile</summary>


</details>

<details><summary>distribution/docker/src/docker/Dockerfile.ess</summary>


</details>

<details><summary>test/fixtures/krb5kdc-fixture/Dockerfile</summary>


</details>

<details><summary>.buildkite/pipelines/cuvs-snapshot/run-tests.yml</summary>


</details>

<details><summary>.buildkite/pipelines/cuvs-snapshot/update-snapshot.yml</summary>


</details>

<details><summary>.buildkite/pipelines/dra-workflow.yml</summary>


</details>

<details><summary>.buildkite/pipelines/ecs-dynamic-template-tests.yml</summary>


</details>

<details><summary>.buildkite/pipelines/intake.template.yml</summary>


</details>

<details><summary>.buildkite/pipelines/intake.yml</summary>


</details>

<details><summary>.buildkite/pipelines/java-ea-check-new-build.yml</summary>

 - `docker.elastic.co/ci-agent-images/eck-region/buildkite-agent 1.15`

</details>

<details><summary>.buildkite/pipelines/lucene-snapshot/build-snapshot.yml</summary>


</details>

<details><summary>.buildkite/pipelines/lucene-snapshot/run-tests.yml</summary>


</details>

<details><summary>.buildkite/pipelines/periodic-fwc.template.yml</summary>


</details>

<details><summary>.buildkite/pipelines/periodic-fwc.yml</summary>


</details>

<details><summary>.buildkite/pipelines/periodic-java-ea.bwc.template.yml</summary>


</details>

<details><summary>.buildkite/pipelines/periodic-java-ea.template.yml</summary>


</details>

<details><summary>.buildkite/pipelines/periodic-java-ea.yml</summary>


</details>

<details><summary>.buildkite/pipelines/periodic-micro-benchmarks.yml</summary>


</details>

<details><summary>.buildkite/pipelines/periodic-packaging.bwc.template.yml</summary>


</details>

<details><summary>.buildkite/pipelines/periodic-packaging.template.yml</summary>


</details>

<details><summary>.buildkite/pipelines/periodic-packaging.yml</summary>


</details>

<details><summary>.buildkite/pipelines/periodic-platform-support.yml</summary>


</details>

<details><summary>.buildkite/pipelines/periodic.bwc.template.yml</summary>


</details>

<details><summary>.buildkite/pipelines/periodic.template.yml</summary>


</details>

<details><summary>.buildkite/pipelines/periodic.yml</summary>


</details>

<details><summary>.buildkite/pipelines/pull-request-transport-versions.yml</summary>


</details>

<details><summary>.buildkite/pipelines/pull-request/build-benchmark.yml</summary>


</details>

<details><summary>.buildkite/pipelines/pull-request/bwc-snapshots.yml</summary>


</details>

<details><summary>.buildkite/pipelines/pull-request/cloud-deploy.yml</summary>


</details>

<details><summary>.buildkite/pipelines/pull-request/docs-check.yml</summary>


</details>

<details><summary>.buildkite/pipelines/pull-request/eql-correctness.yml</summary>


</details>

<details><summary>.buildkite/pipelines/pull-request/example-plugins.yml</summary>


</details>

<details><summary>.buildkite/pipelines/pull-request/full-bwc.yml</summary>


</details>

<details><summary>.buildkite/pipelines/pull-request/gpu.yml</summary>


</details>

<details><summary>.buildkite/pipelines/pull-request/packaging-tests-unix-sample.yml</summary>


</details>

<details><summary>.buildkite/pipelines/pull-request/packaging-tests-unix.yml</summary>


</details>

<details><summary>.buildkite/pipelines/pull-request/packaging-tests-windows-sample.yml</summary>


</details>

<details><summary>.buildkite/pipelines/pull-request/packaging-tests-windows.yml</summary>


</details>

<details><summary>.buildkite/pipelines/pull-request/packaging-upgrade-tests.yml</summary>


</details>

<details><summary>.buildkite/pipelines/pull-request/part-1-fips.yml</summary>


</details>

<details><summary>.buildkite/pipelines/pull-request/part-1-windows.yml</summary>


</details>

<details><summary>.buildkite/pipelines/pull-request/part-1.yml</summary>


</details>

<details><summary>.buildkite/pipelines/pull-request/part-2-fips.yml</summary>


</details>

<details><summary>.buildkite/pipelines/pull-request/part-2-windows.yml</summary>


</details>

<details><summary>.buildkite/pipelines/pull-request/part-2.yml</summary>


</details>

<details><summary>.buildkite/pipelines/pull-request/part-3-fips.yml</summary>


</details>

<details><summary>.buildkite/pipelines/pull-request/part-3-windows.yml</summary>


</details>

<details><summary>.buildkite/pipelines/pull-request/part-3.yml</summary>


</details>

<details><summary>.buildkite/pipelines/pull-request/part-4-fips.yml</summary>


</details>

<details><summary>.buildkite/pipelines/pull-request/part-4-windows.yml</summary>


</details>

<details><summary>.buildkite/pipelines/pull-request/part-4.yml</summary>


</details>

<details><summary>.buildkite/pipelines/pull-request/part-5-fips.yml</summary>


</details>

<details><summary>.buildkite/pipelines/pull-request/part-5-windows.yml</summary>


</details>

<details><summary>.buildkite/pipelines/pull-request/part-5.yml</summary>


</details>

<details><summary>.buildkite/pipelines/pull-request/part-6-fips.yml</summary>


</details>

<details><summary>.buildkite/pipelines/pull-request/part-6-windows.yml</summary>


</details>

<details><summary>.buildkite/pipelines/pull-request/part-6.yml</summary>


</details>

<details><summary>.buildkite/pipelines/pull-request/pr-upgrade.yml</summary>

 - `docker.elastic.co/ci-agent-images/eck-region/buildkite-agent 1.15`

</details>

<details><summary>.buildkite/pipelines/pull-request/precommit.yml</summary>


</details>

<details><summary>.buildkite/pipelines/pull-request/release-tests.yml</summary>


</details>

<details><summary>.buildkite/pipelines/pull-request/rest-compatibility.yml</summary>


</details>

<details><summary>.buildkite/pipelines/pull-request/validate-changelogs.yml</summary>


</details>

<details><summary>.buildkite/scripts/pull-request/mocks/pipelines/bwc-snapshots.yml</summary>


</details>

<details><summary>.buildkite/scripts/pull-request/mocks/pipelines/docs-check.yml</summary>


</details>

</blockquote>
</details>

---
- [ ] <!-- manual job -->Check this box to run Renovate now
",elastic-renovate-prod[bot],closed,"[':Delivery/Build', 'Team:Delivery']",https://github.com/elastic/elasticsearch/issues/114285,2024-10-08T08:23:11Z,1,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/114285,"{
  ""application_resource"": ""no""
}"
83,114099,7.17/JDK23 `REPRODUCE WITH` lines aren't working for me,"E.g. investigating https://github.com/elastic/elasticsearch/issues/114089, the `REPRODUCE WITH` line is as follows:

```
./gradlew ':plugins:discovery-ec2:test' --tests ""org.elasticsearch.discovery.ec2.Ec2DiscoveryTests.testPublicIp"" -Dtests.seed=67E5E30A1DC80CD3 -Dtests.locale=ne -Dtests.timezone=America/Virgin -Druntime.java=23
```

When I run this I get an error ([build scan](https://gradle-enterprise.elastic.co/s/r2exmxpsplnrc)):

```
FAILURE: Build failed with an exception.    
* Where:    
Build file '/Users/davidturner/src/elasticsearch-7.17/build.gradle' line: 49    
* What went wrong:  
An exception occurred applying plugin request [id: 'elasticsearch.global-build-info']   
> Failed to apply plugin 'elasticsearch.global-build-info'. 
   > Environment variable 'JAVA23_HOME' is not registered with Gradle installation supplier. Ensure 'org.gradle.java.installations.fromEnv' is updated in gradle.properties file.   
```

So I added `JAVA23_HOME` as it suggests, even though there's no mention of `JAVA22_HOME` so I suspect this isn't the exact right fix:

```diff
diff --git a/gradle.properties b/gradle.properties
index cac081293fd5..623f0ff7569a 100644
--- a/gradle.properties
+++ b/gradle.properties
@@ -17,7 +17,7 @@ systemProp.jdk.tls.client.protocols=TLSv1.2

 # java homes resolved by environment variables
 org.gradle.java.installations.auto-detect=false
-org.gradle.java.installations.fromEnv=JAVA_HOME,RUNTIME_JAVA_HOME,JAVA21_HOME,JAVA20_HOME,JAVA19_HOME,JAVA18_HOME,JAVA17_HOME,JAVA16_HOME,JAVA15_HOME,JAVA14_HOME,JAVA13_HOME,JAVA12_HOME,JAVA11_HOME,JAVA8_HOME
+org.gradle.java.installations.fromEnv=JAVA_HOME,RUNTIME_JAVA_HOME,JAVA23_HOME,JAVA21_HOME,JAVA20_HOME,JAVA19_HOME,JAVA18_HOME,JAVA17_HOME,JAVA16_HOME,JAVA15_HOME,JAVA14_HOME,JAVA13_HOME,JAVA12_HOME,JAVA11_HOME,JAVA8_HOME

 # log some dependency verification info to console
 org.gradle.dependency.verification.console=verbose
```

Now I get a load of errors about the new-to-JDK23 `this-escape` and `lossy-conversions` warnings ([build scan 1](https://gradle-enterprise.elastic.co/s/zdvcmev64v754), [build scan 2](https://gradle-enterprise.elastic.co/s/drz7lb54nbgsw)).

Not sure what's different between my dev environment and CI, because CI seems to be handling this ok. Any ideas?",DaveCTurner,closed,"['>bug', ':Delivery/Build', 'Team:Delivery']",https://github.com/elastic/elasticsearch/issues/114099,2024-10-04T07:42:35Z,3,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/114099,"{
  ""application_resource"": ""no""
}"
84,113694,[CI] DocsClientYamlTestSuiteIT test {yaml=reference/rest-api/usage/line_38} failing,"### CI Link

https://gradle-enterprise.elastic.co/s/apw47hfxw6oys

### Repro line

./gradlew "":docs:yamlRestTest"" --tests ""org.elasticsearch.smoketest.DocsClientYamlTestSuiteIT.test {yaml=reference/rest-api/usage/line_38}"" -Dtests.seed=85086C0768E52FC -Dtests.locale=pt-PT -Dtests.timezone=America/Jamaica -Druntime.java=22

### Does it reproduce?

Didn't try

### Applicable branches

main

### Failure history

_No response_

### Failure excerpt

Happened in CI of https://github.com/elastic/elasticsearch/pull/113629 but should be related to main rather than that PR (as the SlicedInputStream changes there should be irrelevant to this I think.

```
REPRODUCE WITH: ./gradlew "":docs:yamlRestTest"" --tests ""org.elasticsearch.smoketest.DocsClientYamlTestSuiteIT.test {yaml=reference/rest-api/usage/line_38}"" -Dtests.seed=85086C0768E52FC -Dtests.locale=pt-PT -Dtests.timezone=America/Jamaica -Druntime.java=22

DocsClientYamlTestSuiteIT > test {yaml=reference/rest-api/usage/line_38} FAILED
    java.lang.AssertionError: Failure at [reference/rest-api/usage:16]: Expected a map containing
                              eql: a map containing
                          available: <true>
                            enabled: <true>
                           features: a map containing
                                joins: a map containing
                     join_queries_three: <0>
                       join_queries_two: <0>
                             join_until: <0>
              join_queries_five_or_more: <0>
                      join_queries_four: <0>
                             sequence: <0>
                                 keys: a map containing
                          join_keys_two: <0>
                          join_keys_one: <0>
                        join_keys_three: <0>
                 join_keys_five_or_more: <0>
                         join_keys_four: <0>
                                 join: <0>
                            sequences: a map containing
                 sequence_queries_three: <0>
                  sequence_queries_four: <0>
                   sequence_queries_two: <0>
                         sequence_until: <0>
                       sequence_maxspan: <0>
          sequence_queries_five_or_more: <0>
                                event: <0>
                                pipes: a map containing
                              pipe_tail: <0>
                              pipe_head: <0>
                            queries: a map containing
                                  all: a map containing
                                  total: <0>
                                 failed: <0>
                                 _all: a map containing
                                  total: <0>
                                 failed: <0>
                        inference: a map containing
                             models: an empty list
                          available: <true>
                            enabled: <true>
                   frozen_indices: a map containing
                      indices_count: <0>
                          available: <true>
                            enabled: <true>
                              sql: a map containing
                           features: a map containing
                               having: <0>
                            subselect: <0>
                                limit: <0>
                              orderby: <1>
                                where: <0>
                                 join: <0>
                              groupby: <0>
                              command: <0>
                                local: <0>
                          available: <true>
                            queries: a map containing
                                 rest: a map containing
                                  total: <1>
                                 paging: <0>
                                 failed: <0>
                                  cli: a map containing
                                  total: <0>
                                 paging: <0>
                                 failed: <0>
                               canvas: a map containing
                                  total: <0>
                                 paging: <0>
                                 failed: <0>
                                 odbc: a map containing
                                  total: <0>
                                 paging: <0>
                                 failed: <0>
                                 jdbc: a map containing
                                  total: <0>
                                 paging: <0>
                                 failed: <0>
                               odbc32: a map containing
                                  total: <0>
                                 paging: <0>
                                 failed: <0>
                               odbc64: a map containing
                                  total: <0>
                                 paging: <0>
                                 failed: <0>
                                 _all: a map containing
                                  total: <1>
                                 paging: <0>
                                 failed: <0>
                            translate: a map containing
                                  count: <0>
                            enabled: <true>
                           rollup: a map containing
                          available: <true>
                            enabled: <true>
              number_of_rollup_jobs: <0>
             searchable_snapshots: a map containing
         shared_cache_indices_count: <0>
                      indices_count: <0>
                          available: <true>
            full_copy_indices_count: <0>
                            enabled: <true>
                        analytics: a map containing
                              stats: a map containing
                           rate_usage: <0>
                      normalize_usage: <0>
                        boxplot_usage: <1>
                    top_metrics_usage: <0>
                    multi_terms_usage: <0>
         cumulative_cardinality_usage: <0>
                   string_stats_usage: <1>
             moving_percentiles_usage: <1>
                         t_test_usage: <0>
                          available: <true>
                            enabled: <true>
                         logstash: a map containing
                          available: <true>
                            enabled: <true>
                         security: a map containing
                          available: <true>
                            enabled: <true>
                             realms: a map containing
                                 file: a map containing
                                   name: a list containing
                                        0: ""file""
                              available: <true>
                                  cache: a list containing
                                        0: a map containing
                                       size: <1>
                                   size: a list containing
                                        0: <2>
                                enabled: <true>
                                  order: a list containing
                                        0: <0>
                                 ldap: a map containing
                                enabled: <false>
                              available: <true>
                               native: a map containing
                                   name: a list containing
                                        0: ""native""
                              available: <true>
                                  cache: a list containing
                                        0: a map containing
                                       size: <0>
                                   size: a list containing
                                        0: <0>
                                enabled: <true>
                                  order: a list containing
                                        0: <1>
                                  jwt: a map containing
                                enabled: <false>
                              available: <true>
                                 saml: a map containing
                                   name: a list containing
                                        0: ""saml1""
                              available: <true>
                                enabled: <true>
                                  order: a list containing
                                        0: <4>
                             kerberos: a map containing
                                enabled: <false>
                              available: <true>
                                 oidc: a map containing
                                   name: a list containing
                                        0: ""oidc1""
                              available: <true>
                                enabled: <true>
                                  order: a list containing
                                        0: <2>
                     active_directory: a map containing
                                enabled: <false>
                              available: <true>
                                  pki: a map containing
                         has_truststore: a list containing
                                        0: <true>
            is_authentication_delegated: a list containing
                                        0: <true>
                                   name: a list containing
                                        0: ""pki1""
                              available: <true>
           has_default_username_pattern: a list containing
                                        0: <true>
                                enabled: <true>
                                  order: a list containing
                                        0: <3>
               has_authorization_realms: a list containing
                                        0: <false>
                              roles: a map containing
                                 file: a map containing
                         remote_indices: <0>
                                    dls: <false>
                                   size: <1>
                                    fls: <false>
                         remote_cluster: <0>
                               native: a map containing
                                    dls: <false>
                                   size: <0>
                                    fls: <false>
                                  dls: a map containing
                          bit_set_cache: a map containing
                          memory_in_bytes: <0>
                                   memory: ""0b""
                                    count: <0>
                       role_mapping: a map containing
                               native: a map containing
                                   size: <0>
                                enabled: <0>
                                ssl: a map containing
                remote_cluster_client: a map containing
                                enabled: <true>
                                 http: a map containing
                                enabled: <false>
                            transport: a map containing
                                enabled: <false>
                      token_service: a map containing
                              enabled: <true>
                    api_key_service: a map containing
                              enabled: <true>
                              audit: a map containing
                              enabled: <false>
                           ipfilter: a map containing
                                 http: <false>
                            transport: <false>
                          anonymous: a map containing
                              enabled: <false>
                           fips_140: a map containing
                              enabled: <false>
                operator_privileges: a map containing
                            available: <true>
                              enabled: <false>
                       user_profile: a map containing
                              enabled: <0>
                                total: <0>
                               recent: <0>
              remote_cluster_server: a map containing
                            available: <true>
                             api_keys: a map containing
                                  total: <0>
                                    ccs: <0>
                                    ccr: <0>
                                ccs_ccr: <0>
                              enabled: <false>
                        transform: a map containing
                          available: <true>
                            enabled: <true>
                              ccr: a map containing
         auto_follow_patterns_count: <0>
                          available: <true>
             follower_indices_count: <0>
                            enabled: <true>
                       health_api: a map containing
                          available: <true>
                            enabled: <true>
                        invocations: a map containing
                                total: <0>
                          spatial: a map containing
                          available: <true>
                            enabled: <true>
                               ml: a map containing
                             memory: a map containing
       anomaly_detectors_memory_bytes: <0>
       pytorch_inference_memory_bytes: <0>
    data_frame_analytics_memory_bytes: <0>
              total_used_memory_bytes: <0>
                          inference: a map containing
                          deployments: a map containing
                                time_ms: a map containing
                                      avg: <0.0>
                                  count: <0>
                         stats_by_model: an empty list
                      model_sizes_bytes: a map containing
                                    total: <0.0>
                                      min: <0.0>
                                      avg: <0.0>
                                      max: <0.0>
                       inference_counts: a map containing
                                    total: <0.0>
                                      min: <0.0>
                                      avg: <0.0>
                                      max: <0.0>
                       trained_models: a map containing
                       model_size_bytes: a map containing
                                    total: <0.0>
                                      min: <0.0>
                                      avg: <0.0>
                                      max: <0.0>
                   estimated_operations: a map containing
                                    total: <0.0>
                                      min: <0.0>
                                      avg: <0.0>
                                      max: <0.0>
                                  count: a map containing
                                    total: <1>
                              prepackaged: <1>
                                    other: <0>
                                   _all: a map containing
                                    count: <1>
                    ingest_processors: a map containing
                                   _all: a map containing
                                pipelines: a map containing
                                      count: <0>
                                  time_ms: a map containing
                                        min: <0>
                                        max: <0>
                                        sum: <0>
                       num_docs_processed: a map containing
                                        min: <0>
                                        max: <0>
                                        sum: <0>
                             num_failures: a map containing
                                        min: <0>
                                        max: <0>
                                        sum: <0>
          data_frame_analytics_jobs: a map containing
                         memory_usage: a map containing
                       peak_usage_bytes: a map containing
                                    total: <0.0>
                                      min: <0.0>
                                      avg: <0.0>
                                      max: <0.0>
                                 _all: a map containing
                                  count: <0>
                      analysis_counts: an empty map
                               jobs: a map containing
                                 _all: a map containing
                                  count: <0>
                              detectors: a map containing
                                    total: <0.0>
                                      min: <0.0>
                                      avg: <0.0>
                                      max: <0.0>
                             created_by: an empty map
                             model_size: a map containing
                                    total: <0.0>
                                      min: <0.0>
                                      avg: <0.0>
                                      max: <0.0>
                              forecasts: a map containing
                                    total: <0>
                          forecasted_jobs: <0>
                          available: <true>
                          datafeeds: a map containing
                                 _all: a map containing
                                  count: <0>
                         node_count: <1>
                            enabled: <true>
                          watcher: a map containing
                          execution: a map containing
                              actions: a map containing
                                   _all: a map containing
                                    total: <1>
                         total_time_in_ms: <197>
                              watch: a map containing
                                input: a map containing
                                   _all: a map containing
                                    total: <1>
                                   active: <1>
                                   http: <unexpected> but was <{total=1, active=1}>
                              trigger: a map containing
                                   _all: a map containing
                                    total: <1>
                                   active: <1>
                               schedule: <unexpected> but was <{total=1, active=1, interval={total=1, active=1}, _all={total=1, active=1}}>
                            condition: <unexpected> but was <{always={total=1, active=1}, _all={total=1, active=1}}>
                          available: <true>
                              count: a map containing
                                total: <1>
                               active: <1>
                            enabled: <true>
                enterprise_search: a map containing
                search_applications: a map containing
                                count: <0>
              analytics_collections: a map containing
                                count: <0>
                     query_rulesets: a map containing
                     total_rule_count: <0>
                          total_count: <0>
                       min_rule_count: <0>
                       max_rule_count: <0>
                          available: <true>
                            enabled: <true>
                             esql: a map containing
                           features: a map containing
                                 drop: <0>
                                 show: <0>
                                 sort: <1>
                                 eval: <0>
                                stats: <0>
                               rename: <0>
                            mv_expand: <0>
                                 meta: <0>
                              dissect: <0>
                                 grok: <0>
                                 keep: <1>
                                limit: <1>
                               enrich: <0>
                                where: <0>
                                 from: <1>
                                  row: <0>
                          available: <true>
                            queries: a map containing
                                 rest: a map containing
                                  total: <1>
                                 failed: <0>
                               kibana: a map containing
                                  total: <0>
                                 failed: <0>
                                 _all: a map containing
                                  total: <1>
                                 failed: <0>
                            enabled: <true>
                          archive: a map containing
                      indices_count: <0>
                          available: <true>
                            enabled: <true>
                              ilm: a map containing
                       policy_count: <26>
                       policy_stats: a list containing
                                    0: a map containing
                                 phases: a map containing
                                     warm: a map containing
                                    min_age: <172800000>
                                    actions: a list containing
                                            0: ""shrink""
                                            1: ""forcemerge""
                                            2: ""migrate""
                             configurations: a map containing
                                   forcemerge: a map containing
                               max_num_segments: <1>
                                       shrink: a map containing
                               number_of_shards: <1>
                                     cold: a map containing
                                    min_age: <2592000000L>
                                    actions: a list containing
                                            0: ""migrate""
                             configurations: an empty map
                                      hot: a map containing
                                    min_age: <0>
                                    actions: a list containing
                                            0: ""rollover""
                             configurations: a map containing
                                     rollover: a map containing
                                        max_age: ""30d""
                                 max_age_millis: <2592000000L>
                         max_primary_shard_size: ""50gb""
                   max_primary_shard_size_bytes: <53687091200L>
                                   delete: a map containing
                                    min_age: <31536000000L>
                                    actions: a list containing
                                            0: ""delete""
                             configurations: an empty map
                        indices_managed: <0>
                                    1: a map containing
                                 phases: a map containing
                                      hot: a map containing
                                    min_age: <0>
                                    actions: a list containing
                                            0: ""rollover""
                             configurations: a map containing
                                     rollover: a map containing
                                        max_age: ""30d""
                                 max_age_millis: <2592000000L>
                         max_primary_shard_size: ""10gb""
                   max_primary_shard_size_bytes: <10737418240L>
                                   delete: a map containing
                                    min_age: <7776000000L>
                                    actions: a list containing
                                            0: ""delete""
                             configurations: an empty map
                        indices_managed: <0>
                                    2: a map containing
                                 phases: a map containing
                                      hot: a map containing
                                    min_age: <0>
                                    actions: a list containing
                                            0: ""rollover""
                             configurations: a map containing
                                     rollover: a map containing
                                        max_age: ""30d""
                                 max_age_millis: <2592000000L>
                         max_primary_shard_size: ""50gb""
                   max_primary_shard_size_bytes: <53687091200L>
                        indices_managed: <0>
                                    3: a map containing
                                 phases: a map containing
                                      hot: a map containing
                                    min_age: <0>
                                    actions: a list containing
                                            0: ""rollover""
                             configurations: a map containing
                                     rollover: a map containing
                                        max_age: ""30d""
                                 max_age_millis: <2592000000L>
                         max_primary_shard_size: ""10gb""
                   max_primary_shard_size_bytes: <10737418240L>
                                   delete: a map containing
                                    min_age: <7776000000L>
                                    actions: a list containing
                                            0: ""delete""
                             configurations: an empty map
                        indices_managed: <0>
                                    4: a map containing
                                 phases: a map containing
                                     warm: a map containing
                                    min_age: <172800000>
                                    actions: a list containing
                                            0: ""shrink""
                                            1: ""forcemerge""
                                            2: ""migrate""
                             configurations: a map containing
                                   forcemerge: a map containing
                               max_num_segments: <1>
                                       shrink: a map containing
                               number_of_shards: <1>
                                      hot: a map containing
                                    min_age: <0>
                                    actions: a list containing
                                            0: ""rollover""
                             configurations: a map containing
                                     rollover: a map containing
                                        max_age: ""30d""
                                 max_age_millis: <2592000000L>
                         max_primary_shard_size: ""50gb""
                   max_primary_shard_size_bytes: <53687091200L>
                                   delete: a map containing
                                    min_age: <2592000000L>
                                    actions: a list containing
                                            0: ""delete""
                             configurations: an empty map
                        indices_managed: <0>
                                    5: a map containing
                                 phases: a map containing
                                      hot: a map containing
                                    min_age: <0>
                                    actions: a list containing
                                            0: ""rollover""
                                            1: ""forcemerge""
                             configurations: a map containing
                                   forcemerge: a map containing
                               max_num_segments: <1>
                                     rollover: a map containing
                                        max_age: ""30d""
                                 max_age_millis: <2592000000L>
                         max_primary_shard_size: ""50gb""
                   max_primary_shard_size_bytes: <53687091200L>
                                   delete: a map containing
                                    min_age: <7776000000L>
                                    actions: a list containing
                                            0: ""delete""
                             configurations: an empty map
                        indices_managed: <0>
                                    6: a map containing
                                 phases: a map containing
                                      hot: a map containing
                                    min_age: <0>
                                    actions: a list containing
                                            0: ""rollover""
                             configurations: a map containing
                                     rollover: a map containing
                                        max_age: ""7d""
                                 max_age_millis: <604800000>
                         max_primary_shard_size: ""10gb""
                   max_primary_shard_size_bytes: <10737418240L>
                                   delete: a map containing
                                    min_age: <604800000>
                                    actions: a list containing
                                            0: ""delete""
                             configurations: an empty map
                        indices_managed: <0>
                                    7: a map containing
                                 phases: a map containing
                                      hot: a map containing
                                    min_age: <0>
                                    actions: a list containing
                                            0: ""rollover""
                             configurations: a map containing
                                     rollover: a map containing
                                        max_age: ""30d""
                                 max_age_millis: <2592000000L>
                         max_primary_shard_size: ""10gb""
                   max_primary_shard_size_bytes: <10737418240L>
                                   delete: a map containing
                                    min_age: <2592000000L>
                                    actions: a list containing
                                            0: ""delete""
                             configurations: an empty map
                        indices_managed: <0>
                                    8: a map containing
                                 phases: a map containing
                                      hot: a map containing
                                    min_age: <0>
                                    actions: a list containing
                                            0: ""rollover""
                             configurations: a map containing
                                     rollover: a map containing
                         max_primary_shard_size: ""50gb""
                   max_primary_shard_size_bytes: <53687091200L>
                        indices_managed: <0>
                                    9: a map containing
                                 phases: a map containing
                                     warm: a map containing
                                    min_age: <172800000>
                                    actions: a list containing
                                            0: ""shrink""
                                            1: ""forcemerge""
                                            2: ""migrate""
                             configurations: a map containing
                                   forcemerge: a map containing
                               max_num_segments: <1>
                                       shrink: a map containing
                               number_of_shards: <1>
                                     cold: a map containing
                                    min_age: <2592000000L>
                                    actions: a list containing
                                            0: ""migrate""
                             configurations: an empty map
                                      hot: a map containing
                                    min_age: <0>
                                    actions: a list containing
                                            0: ""rollover""
                             configurations: a map containing
                                     rollover: a map containing
                                        max_age: ""30d""
                                 max_age_millis: <2592000000L>
                         max_primary_shard_size: ""50gb""
                   max_primary_shard_size_bytes: <53687091200L>
                                   delete: a map containing
                                    min_age: <15552000000L>
                                    actions: a list containing
                                            0: ""delete""
                             configurations: an empty map
                        indices_managed: <0>
                                   10: a map containing
                                 phases: a map containing
                                      hot: a map containing
                                    min_age: <0>
                                    actions: a list containing
                                            0: ""rollover""
                             configurations: a map containing
                                     rollover: a map containing
                                        max_age: ""30d""
                                 max_age_millis: <2592000000L>
                         max_primary_shard_size: ""50gb""
                   max_primary_shard_size_bytes: <53687091200L>
                        indices_managed: <0>
                                   11: a map containing
                                 phases: a map containing
                                     warm: a map containing
                                    min_age: <172800000>
                                    actions: a list containing
                                            0: ""shrink""
                                            1: ""forcemerge""
                                            2: ""migrate""
                             configurations: a map containing
                                   forcemerge: a map containing
                               max_num_segments: <1>
                                       shrink: a map containing
                               number_of_shards: <1>
                                     cold: a map containing
                                    min_age: <2592000000L>
                                    actions: a list containing
                                            0: ""migrate""
                             configurations: an empty map
                                      hot: a map containing
                                    min_age: <0>
                                    actions: a list containing
                                            0: ""rollover""
                             configurations: a map containing
                                     rollover: a map containing
                                        max_age: ""30d""
                                 max_age_millis: <2592000000L>
                         max_primary_shard_size: ""50gb""
                   max_primary_shard_size_bytes: <53687091200L>
                                   delete: a map containing
                                    min_age: <7776000000L>
                                    actions: a list containing
                                            0: ""delete""
                             configurations: an empty map
                        indices_managed: <0>
                                   12: a map containing
                                 phases: a map containing
                                      hot: a map containing
                                    min_age: <0>
                                    actions: a list containing
                                            0: ""rollover""
                             configurations: a map containing
                                     rollover: a map containing
                                        max_age: ""3d""
                                 max_age_millis: <259200000>
                         max_primary_shard_size: ""50gb""
                   max_primary_shard_size_bytes: <53687091200L>
                                   delete: a map containing
                                    min_age: <345600000>
                                    actions: a list containing
                                            0: ""delete""
                             configurations: an empty map
                        indices_managed: <0>
                                   13: a map containing
                                 phases: a map containing
                                     warm: a map containing
                                    min_age: <172800000>
                                    actions: a list containing
                                            0: ""shrink""
                                            1: ""forcemerge""
                                            2: ""migrate""
                             configurations: a map containing
                                   forcemerge: a map containing
                               max_num_segments: <1>
                                       shrink: a map containing
                               number_of_shards: <1>
                                      hot: a map containing
                                    min_age: <0>
                                    actions: a list containing
                                            0: ""rollover""
                             configurations: a map containing
                                     rollover: a map containing
                                        max_age: ""30d""
                                 max_age_millis: <2592000000L>
                         max_primary_shard_size: ""50gb""
                   max_primary_shard_size_bytes: <53687091200L>
                                   delete: a map containing
                                    min_age: <2592000000L>
                                    actions: a list containing
                                            0: ""delete""
                             configurations: an empty map
                        indices_managed: <0>
                                   14: a map containing
                                 phases: a map containing
                                      hot: a map containing
                                    min_age: <0>
                                    actions: a list containing
                                            0: ""rollover""
                             configurations: a map containing
                                     rollover: a map containing
                                        max_age: ""30d""
                                 max_age_millis: <2592000000L>
                         max_primary_shard_size: ""50gb""
                   max_primary_shard_size_bytes: <53687091200L>
                        indices_managed: <0>
                                   15: a map containing
                                 phases: a map containing
                                     warm: a map containing
                                    min_age: <172800000>
                                    actions: a list containing
                                            0: ""shrink""
                                            1: ""forcemerge""
                                            2: ""migrate""
                             configurations: a map containing
                                   forcemerge: a map containing
                               max_num_segments: <1>
                                       shrink: a map containing
                               number_of_shards: <1>
                                     cold: a map containing
                                    min_age: <2592000000L>
                                    actions: a list containing
                                            0: ""migrate""
                             configurations: an empty map
                                      hot: a map containing
                                    min_age: <0>
                                    actions: a list containing
                                            0: ""rollover""
                             configurations: a map containing
                                     rollover: a map containing
                                        max_age: ""30d""
                                 max_age_millis: <2592000000L>
                         max_primary_shard_size: ""50gb""
                   max_primary_shard_size_bytes: <53687091200L>
                                   delete: a map containing
                                    min_age: <7776000000L>
                                    actions: a list containing
                                            0: ""delete""
                             configurations: an empty map
                        indices_managed: <0>
                                   16: a map containing
                                 phases: a map containing
                                     warm: a map containing
                                    min_age: <0>
                                    actions: a list containing
                                            0: ""forcemerge""
                                            1: ""migrate""
                             configurations: a map containing
                                   forcemerge: a map containing
                               max_num_segments: <1>
                                      hot: a map containing
                                    min_age: <0>
                                    actions: a list containing
                                            0: ""rollover""
                             configurations: a map containing
                                     rollover: a map containing
                                        max_age: ""3d""
                                 max_age_millis: <259200000>
                         max_primary_shard_size: ""50gb""
                   max_primary_shard_size_bytes: <53687091200L>
                                   delete: a map containing
                                    min_age: <259200000>
                                    actions: a list containing
                                            0: ""delete""
                             configurations: an empty map
                        indices_managed: <0>
                                   17: a map containing
                                 phases: a map containing
                                     warm: a map containing
                                    min_age: <172800000>
                                    actions: a list containing
                                            0: ""shrink""
                                            1: ""forcemerge""
                                            2: ""migrate""
                             configurations: a map containing
                                   forcemerge: a map containing
                               max_num_segments: <1>
                                       shrink: a map containing
                               number_of_shards: <1>
                                      hot: a map containing
                                    min_age: <0>
                                    actions: a list containing
                                            0: ""rollover""
                             configurations: a map containing
                                     rollover: a map containing
                                        max_age: ""7d""
                                 max_age_millis: <604800000>
                         max_primary_shard_size: ""50gb""
                   max_primary_shard_size_bytes: <53687091200L>
                                   delete: a map containing
                                    min_age: <604800000>
                                    actions: a list containing
                                            0: ""delete""
                             configurations: an empty map
                        indices_managed: <0>
                                   18: a map containing
                                 phases: a map containing
                                      hot: a map containing
                                    min_age: <0>
                                    actions: a list containing
                                            0: ""rollover""
                             configurations: a map containing
                                     rollover: a map containing
                                        max_age: ""30d""
                                 max_age_millis: <2592000000L>
                         max_primary_shard_size: ""300gb""
                   max_primary_shard_size_bytes: <322122547200L>
                                   delete: a map containing
                                    min_age: <7776000000L>
                                    actions: a list containing
                                            0: ""delete""
                             configurations: an empty map
                        indices_managed: <0>
                                   19: a map containing
                                 phases: a map containing
                                      hot: a map containing
                                    min_age: <0>
                                    actions: a list containing
                                            0: ""rollover""
                             configurations: a map containing
                                     rollover: a map containing
                                        max_age: ""30d""
                                 max_age_millis: <2592000000L>
                         max_primary_shard_size: ""50gb""
                   max_primary_shard_size_bytes: <53687091200L>
                        indices_managed: <0>
                                   20: a map containing
                                 phases: a map containing
                                     warm: a map containing
                                    min_age: <172800000>
                                    actions: a list containing
                                            0: ""shrink""
                                            1: ""forcemerge""
                                            2: ""migrate""
                             configurations: a map containing
                                   forcemerge: a map containing
                               max_num_segments: <1>
                                       shrink: a map containing
                               number_of_shards: <1>
                                     cold: a map containing
                                    min_age: <2592000000L>
                                    actions: a list containing
                                            0: ""migrate""
                             configurations: an empty map
                                      hot: a map containing
                                    min_age: <0>
                                    actions: a list containing
                                            0: ""rollover""
                             configurations: a map containing
                                     rollover: a map containing
                                        max_age: ""30d""
                                 max_age_millis: <2592000000L>
                         max_primary_shard_size: ""50gb""
                   max_primary_shard_size_bytes: <53687091200L>
                                   delete: a map containing
                                    min_age: <31536000000L>
                                    actions: a list containing
                                            0: ""delete""
                             configurations: an empty map
                        indices_managed: <0>
                                   21: a map containing
                                 phases: a map containing
                                     warm: a map containing
                                    min_age: <172800000>
                                    actions: a list containing
                                            0: ""shrink""
                                            1: ""forcemerge""
                                            2: ""migrate""
                             configurations: a map containing
                                   forcemerge: a map containing
                               max_num_segments: <1>
                                       shrink: a map containing
                               number_of_shards: <1>
                                      hot: a map containing
                                    min_age: <0>
                                    actions: a list containing
                                            0: ""rollover""
                             configurations: a map containing
                                     rollover: a map containing
                                        max_age: ""7d""
                                 max_age_millis: <604800000>
                         max_primary_shard_size: ""50gb""
                   max_primary_shard_size_bytes: <53687091200L>
                                   delete: a map containing
                                    min_age: <604800000>
                                    actions: a list containing
                                            0: ""delete""
                             configurations: an empty map
                        indices_managed: <0>
                                   22: a map containing
                                 phases: a map containing
                                     warm: a map containing
                                    min_age: <172800000>
                                    actions: a list containing
                                            0: ""shrink""
                                            1: ""forcemerge""
                                            2: ""migrate""
                             configurations: a map containing
                                   forcemerge: a map containing
                               max_num_segments: <1>
                                       shrink: a map containing
                               number_of_shards: <1>
                                     cold: a map containing
                                    min_age: <2592000000L>
                                    actions: a list containing
                                            0: ""migrate""
                             configurations: an empty map
                                      hot: a map containing
                                    min_age: <0>
                                    actions: a list containing
                                            0: ""rollover""
                             configurations: a map containing
                                     rollover: a map containing
                                        max_age: ""30d""
                                 max_age_millis: <2592000000L>
                         max_primary_shard_size: ""50gb""
                   max_primary_shard_size_bytes: <53687091200L>
                                   delete: a map containing
                                    min_age: <15552000000L>
                                    actions: a list containing
                                            0: ""delete""
                             configurations: an empty map
                        indices_managed: <0>
                                   23: a map containing
                                 phases: a map containing
                                      hot: a map containing
                                    min_age: <0>
                                    actions: a list containing
                                            0: ""rollover""
                             configurations: a map containing
                                     rollover: a map containing
                                        max_age: ""30d""
                                 max_age_millis: <2592000000L>
                         max_primary_shard_size: ""50gb""
                   max_primary_shard_size_bytes: <53687091200L>
                        indices_managed: <0>
                                   24: a map containing
                                 phases: a map containing
                                      hot: a map containing
                                    min_age: <0>
                                    actions: a list containing
                                            0: ""rollover""
                             configurations: a map containing
                                     rollover: a map containing
                                        max_age: ""14d""
                                 max_age_millis: <1209600000>
                         max_primary_shard_size: ""10gb""
                   max_primary_shard_size_bytes: <10737418240L>
                                   delete: a map containing
                                    min_age: <2073600000>
                                    actions: a list containing
                                            0: ""delete""
                             configurations: an empty map
                        indices_managed: <0>
                                   25: a map containing
                                 phases: a map containing
                                      hot: a map containing
                                    min_age: <0>
                                    actions: a list containing
                                            0: ""rollover""
                             configurations: a map containing
                                     rollover: a map containing
                                        max_age: ""30d""
                                 max_age_millis: <2592000000L>
                         max_primary_shard_size: ""50gb""
                   max_primary_shard_size_bytes: <53687091200L>
                        indices_managed: <0>
                       monitoring: a map containing
                 collection_enabled: <false>
                          available: <true>
                  enabled_exporters: a map containing
                                local: <1>
                            enabled: <true>
                            graph: a map containing
                          available: <true>
                            enabled: <true>
                 aggregate_metric: a map containing
                          available: <true>
                            enabled: <true>
                       data_tiers: a map containing
                          data_warm: a map containing
      primary_shard_size_median_bytes: <0>
                  primary_shard_count: <0>
                            doc_count: <0>
         primary_shard_size_avg_bytes: <0>
                   primary_size_bytes: <0>
                     total_size_bytes: <0>
                    total_shard_count: <0>
         primary_shard_size_mad_bytes: <0>
                           node_count: <1>
                          index_count: <0>
                        data_frozen: a map containing
      primary_shard_size_median_bytes: <0>
                  primary_shard_count: <0>
                            doc_count: <0>
         primary_shard_size_avg_bytes: <0>
                   primary_size_bytes: <0>
                     total_size_bytes: <0>
                    total_shard_count: <0>
         primary_shard_size_mad_bytes: <0>
                           node_count: <1>
                          index_count: <0>
                          data_cold: a map containing
      primary_shard_size_median_bytes: <0>
                  primary_shard_count: <0>
                            doc_count: <0>
         primary_shard_size_avg_bytes: <0>
                   primary_size_bytes: <0>
                     total_size_bytes: <0>
                    total_shard_count: <0>
         primary_shard_size_mad_bytes: <0>
                           node_count: <1>
                          index_count: <0>
                          available: <true>
                       data_content: a map containing
      primary_shard_size_median_bytes: <0>
                  primary_shard_count: <0>
                            doc_count: <0>
         primary_shard_size_avg_bytes: <0>
                   primary_size_bytes: <0>
                     total_size_bytes: <0>
                    total_shard_count: <0>
         primary_shard_size_mad_bytes: <0>
                           node_count: <1>
                          index_count: <0>
                            enabled: <true>
                           data_hot: a map containing
      primary_shard_size_median_bytes: <0>
                  primary_shard_count: <0>
                            doc_count: <0>
         primary_shard_size_avg_bytes: <0>
                   primary_size_bytes: <0>
                     total_size_bytes: <0>
                    total_shard_count: <0>
         primary_shard_size_mad_bytes: <0>
                           node_count: <1>
                          index_count: <0>
                              slm: a map containing
                          available: <true>
                            enabled: <true>
              universal_profiling: a map containing
                          available: <true>
                            enabled: <true>
                      voting_only: a map containing
                          available: <true>
                            enabled: <true>
                     data_streams: a map containing
                          available: <true>
                            enabled: <true>
                       data_streams: <0>
                      indices_count: <0>
                      failure_store: a map containing
                        enabled_count: <0>
                failure_indices_count: <0>
                   data_lifecycle: a map containing
                   global_retention: a map containing
                              default: a map containing
                                defined: <false>
                                  max: a map containing
                                defined: <false>
                          available: <true>
                              count: <0>
                     data_retention: a map containing
              configured_data_streams: <0>
              default_rollover_used: <true>
                            enabled: <true>
                effective_retention: a map containing
                retained_data_streams: <0>
                  remote_clusters: a map containing
                               mode: a map containing
                                proxy: <0>
                                sniff: <0>
                           security: a map containing
                              api_key: <0>
                                 cert: <0>
                               size: <0>
        at __randomizedtesting.SeedInfo.seed([85086C0768E52FC:8004B91AD8723F04]:0)
        at org.elasticsearch.test.rest.yaml.ESClientYamlSuiteTestCase.executeSection(ESClientYamlSuiteTestCase.java:611)
        at org.elasticsearch.test.rest.yaml.ESClientYamlSuiteTestCase.test(ESClientYamlSuiteTestCase.java:554)
        at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
        at java.base/java.lang.reflect.Method.invoke(Method.java:580)
        at com.carrotsearch.randomizedtesting.RandomizedRunner.invoke(RandomizedRunner.java:1758)
        at com.carrotsearch.randomizedtesting.RandomizedRunner$8.evaluate(RandomizedRunner.java:946)
        at com.carrotsearch.randomizedtesting.RandomizedRunner$9.evaluate(RandomizedRunner.java:982)
        at com.carrotsearch.randomizedtesting.RandomizedRunner$10.evaluate(RandomizedRunner.java:996)
        at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)
        at org.junit.rules.RunRules.evaluate(RunRules.java:20)
        at org.apache.lucene.tests.util.TestRuleSetupTeardownChained$1.evaluate(TestRuleSetupTeardownChained.java:48)
        at org.apache.lucene.tests.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:43)
        at org.apache.lucene.tests.util.TestRuleThreadAndTestName$1.evaluate(TestRuleThreadAndTestName.java:45)
        at org.apache.lucene.tests.util.TestRuleIgnoreAfterMaxFailures$1.evaluate(TestRuleIgnoreAfterMaxFailures.java:60)
        at org.apache.lucene.tests.util.TestRuleMarkFailure$1.evaluate(TestRuleMarkFailure.java:44)
        at org.junit.rules.RunRules.evaluate(RunRules.java:20)
        at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)
        at com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:390)
        at com.carrotsearch.randomizedtesting.ThreadLeakControl.forkTimeoutingTask(ThreadLeakControl.java:843)
        at com.carrotsearch.randomizedtesting.ThreadLeakControl$3.evaluate(ThreadLeakControl.java:490)
        at com.carrotsearch.randomizedtesting.RandomizedRunner.runSingleTest(RandomizedRunner.java:955)
        at com.carrotsearch.randomizedtesting.RandomizedRunner$5.evaluate(RandomizedRunner.java:840)
        at com.carrotsearch.randomizedtesting.RandomizedRunner$6.evaluate(RandomizedRunner.java:891)
        at com.carrotsearch.randomizedtesting.RandomizedRunner$7.evaluate(RandomizedRunner.java:902)
        at org.apache.lucene.tests.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:43)
        at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)
        at org.apache.lucene.tests.util.TestRuleStoreClassName$1.evaluate(TestRuleStoreClassName.java:38)
        at com.carrotsearch.randomizedtesting.rules.NoShadowingOrOverridesOnMethodsRule$1.evaluate(NoShadowingOrOverridesOnMethodsRule.java:40)
        at com.carrotsearch.randomizedtesting.rules.NoShadowingOrOverridesOnMethodsRule$1.evaluate(NoShadowingOrOverridesOnMethodsRule.java:40)
        at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)
        at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)
        at org.apache.lucene.tests.util.TestRuleAssertionsRequired$1.evaluate(TestRuleAssertionsRequired.java:53)
        at org.apache.lucene.tests.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:43)
        at org.apache.lucene.tests.util.TestRuleMarkFailure$1.evaluate(TestRuleMarkFailure.java:44)
        at org.apache.lucene.tests.util.TestRuleIgnoreAfterMaxFailures$1.evaluate(TestRuleIgnoreAfterMaxFailures.java:60)
        at org.apache.lucene.tests.util.TestRuleIgnoreTestSuites$1.evaluate(TestRuleIgnoreTestSuites.java:47)
        at org.junit.rules.RunRules.evaluate(RunRules.java:20)
        at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)
        at com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:390)
        at com.carrotsearch.randomizedtesting.ThreadLeakControl.lambda$forkTimeoutingTask$0(ThreadLeakControl.java:850)
        at java.base/java.lang.Thread.run(Thread.java:1570)
```",kingherc,closed,"['>docs', '>test-failure', ':Data Management/Watcher', 'Team:Data Management', 'Team:Docs', 'medium-risk']",https://github.com/elastic/elasticsearch/issues/113694,2024-09-27T14:58:37Z,10,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/113694,"{
  ""application_resource"": ""unsure""
}"
85,113256,The same search statement multiple times gets different total results,"### One sentence description

When I search using the following statement, the search gets different total hits multiple times.

### For example:

""hits"": {
        ""total"": {
            ""value"": 6000000(This value is unstable and may change occasionally, but in fact the data in this index will never change from a business perspective),
            ""relation"": ""eq""
        },
        ...
}

### Basic Information:

Elasticsearch version: 7.17.1
Cpu architecture: aarch64
Jdk version: 1.8

Cluster overview: 9 nodes, including 6 data nodes and 3 master nodes(Server resources and jvm resources are absolutely sufficient.)
Index(my_index) overview: 9 primary shards, 1 replica shard

### Search statement

**http://:9200/my_index/_search?request_cache=false&explain=true&track_total_hits=true&q=***

In the above search statement, I used three key parameters, corresponding to different purposes:
track_total_hits=true: to get an accurate hits total value
request_cache=false: disable query cache, eliminate the impact of cache
explain=true: explain the search, used to assist query

In actual applications, the query has some conditions. I am using q=* to check for unstable total doc counts. And again, the data in these problematic indexes will never change.

In addition, when checking some basic status through /_cluster/health and /_cat/shards, they are all GREEN and STARTED

It is worth mentioning that I have carefully analyzed this issue in combination with the sharing in this article: https://www.elastic.co/guide/en/elasticsearch/reference/7.17/consistent-scoring.html#_scores_are_not_reproducible

When I search using preference=_shards:0,1,2,3,4,5,6,7,8, the problem still recurs randomly

My current conclusion is that the committed status of some segments of the shards allocated on the datanode03 node of the cluster is false

When I use preference=_shards:0,1,2,3,4,5 to filter out the three shards 6,7,8 allocated on datanode03 (use /cat/shards/my_index to get this information), the hits total value becomes stable

But the most incomprehensible situation is that when observing all parameters such as os, jvm, mem, etc. through /nodes/datanode03/_stats, no possible abnormal information is found. They all look normal.

But the most incomprehensible situation is that I observed all the parameters such as os, jvm, mem, etc. through /nodes/datanode03/_stats, and no possible abnormal information was found. They all looked normal. I currently only have some segments that are not committed and the shards where these segments are located are coincidentally allocated on the datanode03 node. This is a valuable piece of information.

I want to get three help or discussion:
1. Is /_flush necessary? I initially judged that this action can solve this problem, but it is difficult to reproduce the phenomenon of why some segments are difficult to commit in other environments. In other words, if we don‚Äôt know why this situation occurs, we can‚Äôt avoid the problem from happening again in the future
2. From the server level and node level, we have analyzed that the datanode03 server does not have any abnormal information, logs, etc. How can I judge whether this node really has problems? From the phenomenon of all problematic indexes, all of them are segments in the shard allocated to this node
3. Will committed=false and searchable=false in the segment really affect the simplest query statement of _search?request_cache=false&explain=true&track_total_hits=true&q=*?",killersteps,closed,"['Team:Search Foundations', ':Search Foundations/Search']",https://github.com/elastic/elasticsearch/issues/113256,2024-09-20T10:28:11Z,21,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/113256,"{
  ""application_resource"": ""yes""
}"
86,113084,_update on documents with nested array of embeddings randomly triggers errors at times,"### Elasticsearch Version

8.15.1

### Installed Plugins

_No response_

### Java Version

_bundled_

### OS Version

Elastic Cloud GCP Belgium

### Problem Description

The _update API does not work on documents which have nested array of embeddings 
The _update API works on documents which have simple embeddings (ie not in an array) 
The _update test was every time on fields that had nothing to do with the embeddings 

### Steps to Reproduce

TEST1_knn_inference_cache_on_update_embeddings.json : Steps to show that _update on documents that have embeddings work
TEST2_knn_inference_cache_on_update_nested_embeddings.json : Steps to show that _update on documents that have nested array of embeddings does not work 

[TEST1_knn_inference_cache_on_update_embeddings.json](https://github.com/user-attachments/files/17040358/TEST1_knn_inference_cache_on_update_embeddings.json)

[TEST2_knn_inference_cache_on_update_nested_embeddings.json](https://github.com/user-attachments/files/17040359/TEST2_knn_inference_cache_on_update_nested_embeddings.json)

In TEST2, the error thrown is 

> {
  ""error"": {
    ""root_cause"": [
      {
        ""type"": ""document_parsing_exception"",
        ""reason"": ""[1:8223] failed to parse: Field [questions.vector.predicted_value] of type [dense_vector] doesn't support indexing multiple values for the same field in the same document""
      }
    ],
    ""type"": ""document_parsing_exception"",
    ""reason"": ""[1:8223] failed to parse: Field [questions.vector.predicted_value] of type [dense_vector] doesn't support indexing multiple values for the same field in the same document"",
    ""caused_by"": {
      ""type"": ""illegal_argument_exception"",
      ""reason"": ""Field [questions.vector.predicted_value] of type [dense_vector] doesn't support indexing multiple values for the same field in the same document""
    }
  },
  ""status"": 400
} 

### Logs (if relevant)

_No response_",Danouchka,closed,"['>bug', ':ml', 'Team:ML', ':Search Relevance/Vectors', 'medium-risk', 'Team:Search Relevance']",https://github.com/elastic/elasticsearch/issues/113084,2024-09-18T07:44:20Z,11,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/113084,"{
  ""application_resource"": ""no""
}"
87,113030,Lucene memory segment input regression caused by JDK 23,"**ES version**:
main / lucene_snapshot

**JDK**: 
openjdk version ""23"" 2024-09-17
OpenJDK Runtime Environment (build 23+37-2369)
OpenJDK 64-Bit Server VM (build 23+37-2369, mixed mode, sharing)

**OS**:
* bare metal, Ubuntu 18.04 LTS, kernel 5.4.0-65-generic x86_64, 8 cores, 32 GiB RAM - reproducible occasionally
* GCP, Ubuntu 22.04 LTS, kernel 6.5.0-1025-gcp x86_64, 8 cores, 8 GiB RAM - reproducible every time
* GCP, Ubuntu 22.04 LTS, kernel 5.15.0-1025-gcp x86_64, 8 cores, 8 GiB RAM - reproducible every time

**Bug**:
Lucene memory segment input slows down with JDK 23. This applies to both Lucene 9.11.1 as well as most recent 9.12.0 snapshot. The regression was noticed in nightly benchmarks when switched temporarily to JDK 23 on September 4th (rolled back on September 6th).

For example nightly benchmark for [Nested](https://github.com/elastic/rally-tracks/tree/master/nested) Rally track regressed as follows for `nested-date-histo` query ([src](https://github.com/elastic/rally-tracks/blob/54d3433dcca0f239ddedd3d26b8cbefed9eeb44f/nested/operations/default.json#L45-L66)) latency:

([dashboard](https://elasticsearch-benchmarks.elastic.co/#tracks/nested/nightly/default/90d))

![Image](https://github.com/user-attachments/assets/5c0ada1a-ceef-4768-bffe-f0180cbba2fe)

Wall clock profiles collected when running this query continuously show that ES spends way more time in methods such as `org.apache.lucene.store.MemorySegmentIndexInput.readLong()`.

JDK 22:

![Image](https://github.com/user-attachments/assets/c664ca3e-8f20-4353-aa34-9bdc08fc62da)

![Image](https://github.com/user-attachments/assets/6dcf21c3-fb3b-4393-9292-7d02f863edd9)

JDK 23:

![Image](https://github.com/user-attachments/assets/1703395d-6fdf-41b2-bdb2-b842bcf5ea15)

![Image](https://github.com/user-attachments/assets/111ce6d4-a4ba-4d12-974f-915141c903b2)

[wall-clock-profiles.zip](https://github.com/user-attachments/files/17030845/wall-clock-profiles.zip)
",gbanasiak,closed,"[':Search/Search', 'Team:Search']",https://github.com/elastic/elasticsearch/issues/113030,2024-09-17T15:36:24Z,12,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/113030,"{
  ""application_resource"": ""yes""
}"
88,112980,[CI] MLModelDeploymentFullClusterRestartIT testDeploymentSurvivesRestart {cluster=UPGRADED} failing,"**Build Scans:**
- [elasticsearch-periodic #4230 / 8.0.1_bwc](https://gradle-enterprise.elastic.co/s/j6lny66ep3vbc)
- [elasticsearch-pull-request #33411 / 8.16.0_bwc-snapshots](https://gradle-enterprise.elastic.co/s/rxjnwydgtff4g)
- [elasticsearch-pull-request #33411 / 8.15.3_bwc-snapshots](https://gradle-enterprise.elastic.co/s/3wrxmua5wwo6s)
- [elasticsearch-pull-request #33319 / 8.16.0_bwc-snapshots](https://gradle-enterprise.elastic.co/s/634s5wyqss5dy)

**Reproduction Line:**
```
./gradlew "":x-pack:qa:full-cluster-restart:v8.0.1#bwcTest"" -Dtests.class=""org.elasticsearch.xpack.restart.MLModelDeploymentFullClusterRestartIT"" -Dtests.method=""testDeploymentSurvivesRestart {cluster=UPGRADED}"" -Dtests.seed=A7BE2CA36E251E1E -Dtests.bwc=true -Dtests.locale=af-ZA -Dtests.timezone=Antarctica/South_Pole -Druntime.java=22
```

**Applicable branches:**
main

**Reproduces locally?:**
N/A

**Failure History:**
[See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&_a=(controlGroupInput:(chainingSystem:HIERARCHICAL,controlStyle:twoLine,ignoreParentSettings:(ignoreFilters:!f,ignoreQuery:!f,ignoreTimerange:!f,ignoreValidations:!t),panels:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(explicitInput:(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,enhancements:(),fieldName:task.keyword,grow:!t,id:'0c0c9cb8-ccd2-45c6-9b13-96bac4abc542',searchTechnique:wildcard,selectedOptions:!(),singleSelect:!t,title:'Gradle%20Task',width:medium),grow:!t,order:0,type:optionsListControl,width:small),'144933da-5c1b-4257-a969-7f43455a7901':(explicitInput:(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,enhancements:(),fieldName:name.keyword,grow:!t,id:'144933da-5c1b-4257-a969-7f43455a7901',searchTechnique:wildcard,selectedOptions:!('testDeploymentSurvivesRestart%20%7Bcluster%3DUPGRADED%7D'),title:Test,width:medium),grow:!t,order:2,type:optionsListControl,width:medium),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(explicitInput:(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,enhancements:(),fieldName:className.keyword,grow:!t,id:'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850',searchTechnique:wildcard,selectedOptions:!('org.elasticsearch.xpack.restart.MLModelDeploymentFullClusterRestartIT'),title:Suite,width:medium),grow:!t,order:1,type:optionsListControl,width:medium)))))

**Failure Message:**
```
java.lang.AssertionError: {pipeline_count=0, inference_stats={inference_count=0, missing_all_fields_count=0, cache_miss_count=0, failure_count=0, timestamp=1727583532879}, model_size_stats={model_size_bytes=1630, required_native_memory_bytes=251661500}, model_id=trained-model-full-cluster-restart, deployment_stats={start_time=1727583330770, nodes=[{routing_state={routing_state=started}, node={CGZLJvqlRLSEr-HrhzHFwA={transport_address=127.0.0.1:44015, roles=[data, data_cold, data_content, data_frozen, data_hot, data_warm, ingest, master, ml, remote_cluster_client, transform], name=test-cluster-1, min_index_version=8000099, external_id=test-cluster-1, attributes={ml.allocated_processors_double=32.0, ml.machine_memory=126604148736, xpack.installed=true, transform.config_version=10.0.0, testattr=test, ml.config_version=12.0.0, ml.max_jvm_size=536870912, ml.allocated_processors=32}, max_index_version=8515000, ephemeral_id=ml2aiQ73QZigNycsBzN2nw, version=9.0.0}}, start_time=1727583442708, inference_cache_hit_count=0, inference_count=0, throughput_last_minute=0, threads_per_allocation=1, number_of_allocations=1, number_of_pending_requests=0, inference_cache_hit_count_last_minute=0, peak_throughput_per_minute=0}], threads_per_allocation=1, allocation_status={target_allocation_count=1, state=starting, allocation_count=0}, deployment_id=trained-model-full-cluster-restart, model_id=trained-model-full-cluster-restart, state=started, number_of_allocations=1, priority=normal, queue_capacity=1024, peak_throughput_per_minute=0}}
Expected: ""fully_allocated""
     but: was ""starting""
```

**Issue Reasons:**
- [main] 4 failures in test testDeploymentSurvivesRestart {cluster=UPGRADED} (1.1% fail rate in 357 executions)
- [main] 2 failures in step 8.16.0_bwc-snapshots (2.7% fail rate in 74 executions)
- [main] 2 failures in pipeline elasticsearch-pull-request (3.5% fail rate in 57 executions)

**Note:**
This issue was created using new test triage automation. Please report issues or feedback to es-delivery.",elasticsearchmachine,closed,"['>test-failure', ':ml', 'Team:ML', 'needs:risk']",https://github.com/elastic/elasticsearch/issues/112980,2024-09-17T04:28:42Z,3,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/112980,"{
  ""application_resource"": ""yes""
}"
89,112781,Lazy data stream rollover is not triggered when using reroute,"### Elasticsearch Version

8.15.1

### Installed Plugins

_No response_

### Java Version

_bundled_

### OS Version

N/A

### Problem Description

Lazy rollover on a data stream is not triggered when writing a document that is rerouted to another data stream. This affects the apm-data plugin, where we perform a lazy rollover of matching data stream patterns when installing or updating index templates. The data stream never rolls over. See https://github.com/elastic/apm-server/issues/14060#issuecomment-2344837717

Should a write that leads to a reroute also trigger the lazy rollover? I think so, otherwise the default pipeline will not change.

### Steps to Reproduce

1. Create an index template which sets a default ingest pipeline with reroute

```
PUT /_ingest/pipeline/demo-reroute
{
  ""processors"": [
    {
      ""reroute"": {""namespace"": ""foo""}
    }
  ]
}

PUT /_index_template/demo_1
{
  ""index_patterns"" : [""demo*""],
  ""data_stream"": {}, 
  ""priority"" : 1,
  ""template"": {
    ""settings"" : {
      ""number_of_shards"": 1,
      ""index.default_pipeline"": ""demo-reroute""
    }
  }
}
```

2. Create a data stream matching the index template

```
PUT /_data_stream/demo-dataset-default
```

3. Send a document to the data stream; it will be rerouted

```
POST /demo-dataset-default/_doc
{
  ""@timestamp"": ""2024-09-12""
}

{
  ""_index"": "".ds-demo-dataset-foo-2024.09.12-000001"",
  ""_id"": ""z2Ab5JEBCHevSrCVP7aG"",
  ""_version"": 1,
  ""result"": ""created"",
  ""_shards"": {
    ""total"": 2,
    ""successful"": 1,
    ""failed"": 0
  },
  ""_seq_no"": 0,
  ""_primary_term"": 1
}
```
 
4. Create another index template with higher priority with the same index pattern, with no default ingest pipeline

```
PUT /_index_template/demo_2
{
  ""index_patterns"" : [""demo*""],
  ""data_stream"": {}, 
  ""priority"" : 2
}
```

5. Rollover the source data stream with ""lazy=true""

```
POST /demo-dataset-default/_rollover?lazy=true
```

6. Send a document to the data stream; it will still be rerouted

```
POST /demo-dataset-default/_doc
{
  ""@timestamp"": ""2024-09-12""
}

{
  ""_index"": "".ds-demo-dataset-foo-2024.09.12-000001"",
  ""_id"": ""x2gc5JEBfAEizTaQVStE"",
  ""_version"": 1,
  ""result"": ""created"",
  ""_shards"": {
    ""total"": 2,
    ""successful"": 2,
    ""failed"": 0
  },
  ""_seq_no"": 1,
  ""_primary_term"": 1
}
```

7. Rollover the source data stream with ""lazy=false""

```
POST /demo-dataset-default/_rollover?lazy=false
```

8. Send a document to the data stream; it will not be rerouted

```
POST /demo-dataset-default/_doc
{
  ""@timestamp"": ""2024-09-12""
}

{
  ""_index"": "".ds-demo-dataset-default-2024.09.12-000002"",
  ""_id"": ""1mAf5JEBCHevSrCVc7YV"",
  ""_version"": 1,
  ""result"": ""created"",
  ""_shards"": {
    ""total"": 2,
    ""successful"": 2,
    ""failed"": 0
  },
  ""_seq_no"": 0,
  ""_primary_term"": 1
}
```

### Logs (if relevant)

_No response_",axw,closed,"['>bug', ':Data Management/Data streams', 'Team:Data Management']",https://github.com/elastic/elasticsearch/issues/112781,2024-09-12T02:47:46Z,12,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/112781,"{
  ""application_resource"": ""yes""
}"
90,112725,"Error in fleet-server, kibana, elastic search","### Elasticsearch Version

8.15

### Installed Plugins

elasticsearch, kibana, elastic agent

### Java Version

_bundled_

### OS Version

Linux Ubuntu Docker

### Problem Description

I am setting up an Elastic Stack environment in Docker, which includes containers for Elasticsearch, Kibana, and Elastic Agent with Fleet Server enabled. However, I‚Äôve encountered an issue where Fleet Server is not connecting properly to Elasticsearch, and the logs show several errors.

I‚Äôm using certificates issued by Let‚Äôs Encrypt, and both Elasticsearch and Kibana are working correctly. However, Fleet Server is still unable to establish a connection, and I‚Äôve been debugging the issue all week without finding a solution.

Could anyone provide guidance or suggestions on what might be going wrong?

### Steps to Reproduce


### Container Configuration

Here is the relevant configuration for my containers (credentials and tokens replaced for security reasons):

Container


```
elasticsearch:
  container_name: ""elasticsearch""
  image: docker.elastic.co/elasticsearch/elasticsearch:8.15.0
  environment:
    - discovery.type=single-node
    - ""ES_JAVA_OPTS=-Xms512m -Xmx512m""
    - ELASTIC_PASSWORD=<replace>
  ports:
    - ""9200:9200""
  volumes:
    - elasticsearch-service-data:/usr/share/elasticsearch/data
    - elasticsearch-service-certs:/usr/share/elasticsearch/config/certs
    - ./elasticsearch/elasticsearch.yml:/usr/share/elasticsearch/config/elasticsearch.yml
  networks:
    - bridge-net

kibana:
  image: docker.elastic.co/kibana/kibana:8.15.0
  container_name: kibana
  environment:
    - SERVERNAME=kibana
    - ELASTICSEARCH_HOSTS=[""https://elasticsearch:9200""]
    - ELASTIC_USERNAME=kibana_user
    - ELASTICSEARCH_PASSWORD=<replace>
  volumes:
    - kibana-data:/usr/share/kibana/data
    - kibana-certs:/usr/share/kibana/config/certs
    - ./kibana/kibana.yml:/usr/share/kibana/config/kibana.yml
  ports:
    - ""5601:5601""
  networks:
    - bridge-net

elastic-agent:
  image: docker.elastic.co/beats/elastic-agent-complete:8.15.1
  container_name: elastic-agent
  environment:
    - URL=https://kibana:8220
    - FLEET_ENROLLMENT_TOKEN=<replace>
    - CERTIFICATE_AUTHORITIES=/usr/share/elastic-agent/config/certs/chain.pem
    - FLEET_CA=/usr/share/elastic-agent/config/certs/fullchain.pem
    - FLEET_SERVER_ENABLE=true
    - FLEET_SERVER_PORT=8220
    - FLEET_SERVER_ES=https://dominio.com:9200
    - FLEET_SERVER_ES_CA=/usr/share/elastic-agent/config/certs/chain.pem
    - FLEET_SERVER_CERT=/usr/share/elastic-agent/config/certs/fullchain.pem
    - FLEET_SERVER_CERT_KEY=/usr/share/elastic-agent/config/certs/privkey.pem

   - FLEET_SERVER_ES_CERT=/usr/share/elastic-agent/config/certs/fullchain.pem
   - FLEET_SERVER_ES_CERT_KEY=/usr/share/elastic-agent/config/certs/privkey.pem
   - FLEET_SERVER_CLIENT_AUTH=required
      
   - KIBANA_FLEET_SETUP=1
   - KIBANA_FLEET_HOST=https://dominio.com:5601
   - KIBANA_FLEET_USERNAME=""elastic""
   - KIBANA_FLEET_PASSWORD=""PASS""
   - KIBANA_FLEET_CA=/usr/share/elastic-agent/config/certs/chain.pem

   - KIBANA_HOST=https://dominio.com:5601
   - KIBANA_USERNAME=""elastic""
   - KIBANA_PASSWORD=""PASS""
   - KIBANA_CA=/usr/share/elastic-agent/config/certs/chain.pem

   - ELASTICSEARCH_HOST=https://dominio:9200
   - ELASTICSEARCH_USERNAME=""kibana_user""
   - ELASTICSEARCH_PASSWORD=""PASS""
   - ELASTICSEARCH_CA=/usr/share/elastic-agent/config/certs/chain.pem
  volumes:
    - ./fleet/config/certs/:/usr/share/elastic-agent/config/certs/
  ports:
    - ""8220:8220""
  networks:
    - bridge-net
```

Errors Encountered

Logs in Kibana:

`[2024-09-10T22:46:31.887+00:00][INFO ][plugins.fleet] Secrets storage is disabled as minimum fleet server version has not been met`

Logs in Elastic Agent (Fleet Server):


```
{""log.level"":""info"",""@timestamp"":""2024-09-10T23:34:57.648Z"",""log.logger"":""api"",""log.origin"":{""function"":""github.com/elastic/elastic-agent-libs/api.(*Server).Start.func1"",""file.name"":""api/server.go"",""file.line"":90},""message"":""Stats endpoint (127.0.0.1:6791) finished: accept tcp 127.0.0.1:6791: use of closed network connection"",""log"":{""source"":""elastic-agent""},""ecs.version"":""1.6.0""}
Error: context canceled
{""log.level"":""error"",""@timestamp"":""2024-09-10T23:23:28.840Z"",""message"":""Fleet Server failed"",""component"":{""binary"":""fleet-server"",""dataset"":""elastic_agent.fleet_server"",""id"":""fleet-server-default"",""type"":""fleet-server""},""log"":{""source"":""fleet-server-default""},""ecs.version"":""1.6.0"",""service.name"":""fleet-server"",""service.type"":""fleet-server"",""error.message"":""failed version compatibility check with elasticsearch: dial tcp 209.126.6.195:9200: i/o timeout"",""@timestamp"":""2024-09-10T23:23:28.84Z"",""ecs.version"":""1.6.0""}
{""log.level"":""error"",""@timestamp"":""2024-09-10T23:23:28.841Z"",""log.origin"":{""function"":""github.com/elastic/elastic-agent/internal/pkg/agent/application/coordinator.(*Coordinator).watchRuntimeComponents"",""file.name"":""coordinator/coordinator.go"",""file.line"":665},""message"":""Unit state changed fleet-server-default-fleet-server (STARTING->FAILED): Error - failed version compatibility check with elasticsearch: dial tcp 209.126.6.195:9200: i/o timeout"",""log"":{""source"":""elastic-agent""},""component"":{""id"":""fleet-server-default"",""state"":""HEALTHY""},""unit"":{""id"":""fleet-server-default-fleet-server"",""type"":""input"",""state"":""FAILED"",""old_state"":""STARTING""},""ecs.version"":""1.6.0""}
{""log.level"":""error"",""@timestamp"":""2024-09-10T23:23:28.841Z"",""log.origin"":{""function"":""github.com/elastic/elastic-agent/internal/pkg/agent/application/coordinator.(*Coordinator).watchRuntimeComponents"",""file.name"":""coordinator/coordinator.go"",""file.line"":665},""message"":""Unit state changed fleet-server-default (STARTING->FAILED): Error - failed version compatibility check with elasticsearch: dial tcp 209.126.6.195:9200: i/o timeout"",""log"":{""source"":""elastic-agent""},""component"":{""id"":""fleet-server-default"",""state"":""HEALTHY""},""unit"":{""id"":""fleet-server-default"",""type"":""output"",""state"":""FAILED"",""old_state"":""STARTING""},""ecs.version"":""1.6.0""}
```

# kibana.yml


```
elasticsearch.hosts: ""https://temp-elasticsearch-url:9200""
elasticsearch.username: ""elastic""
elasticsearch.password: ""TEMPORARY_PASSWORD""

monitoring.ui.container.elasticsearch.enabled: true

server.publicBaseUrl: ""https://temp-kibana-url""
server.name: temp-kibana

elasticsearch.ssl:
  verificationMode: certificate
  key: /usr/share/kibana/config/certs/privkey.pem # issued by Let's Encrypt
  certificate: /usr/share/kibana/config/certs/fullchain.pem # issued by Let's Encrypt
  certificateAuthorities: /usr/share/kibana/config/certs/chain.pem

server.ssl:
  enabled: true
  key: /usr/share/kibana/config/certs/privkey.pem # issued by Let's Encrypt
  certificate: /usr/share/kibana/config/certs/fullchain.pem # issued by Let's Encrypt
  certificateAuthorities: /usr/share/kibana/config/certs/chain.pem

xpack.reporting.encryptionKey: ""TEMPORARY_ENCRYPTION_KEY""
xpack.security.encryptionKey: ""TEMPORARY_ENCRYPTION_KEY""
xpack.encryptedSavedObjects.encryptionKey: ""TEMPORARY_ENCRYPTION_KEY""
xpack.screenshotting.browser.chromium.disableSandbox: false
xpack.reporting.roles.enabled: false
xpack.fleet.enabled: true

telemetry.enabled: false

server.port: 5601
server.host: ""0.0.0.0""
```

# elasticsearch.yml


```
http.port: 9200

cluster.name: name
node.name: name-1
network.host: ""0.0.0.0""
discovery.type: single-node

xpack.security.enabled: true
xpack.security.enrollment.enabled: true
xpack.security.authc.api_key.enabled: true
xpack.security.transport.ssl.enabled: true

xpack.security.transport.ssl:
  enabled: true
  verification_mode: certificate
  key: /usr/share/elasticsearch/config/certs/privkey.pem
  certificate: /usr/share/elasticsearch/config/certs/fullchain.pem
  certificate_authorities: /usr/share/elasticsearch/config/certs/chain.pem

xpack.security.http.ssl:
  enabled: true
  verification_mode: certificate
  key: /usr/share/elasticsearch/config/certs/privkey.pem
  certificate: /usr/share/elasticsearch/config/certs/fullchain.pem
  certificate_authorities: /usr/share/elasticsearch/config/certs/chain.pem

ingest.geoip.downloader.enabled: false
```

I have also checked the status of elastic-agent


```
elastic-agent@7e798926c7ce:~$ ./elastic-agent status
‚îå‚îÄ fleet
‚îÇ  ‚îî‚îÄ status: (STARTING) 
‚îî‚îÄ elastic-agent
   ‚îú‚îÄ status: (HEALTHY) Running
   ‚îî‚îÄ fleet-server-default
      ‚îú‚îÄ status: (HEALTHY) Healthy: communicating with pid '23'
      ‚îú‚îÄ fleet-server-default
      ‚îÇ  ‚îî‚îÄ status: (STARTING) Starting
      ‚îî‚îÄ fleet-server-default-fleet-server
         ‚îî‚îÄ status: (STARTING) Starting
```

![Image](https://github.com/user-attachments/assets/a23cbcad-d6e1-4aa2-aa2c-b61a0dc3a2b1)

![Image](https://github.com/user-attachments/assets/0f10e107-189b-4d65-8657-05adca358b2e)

![Image](https://github.com/user-attachments/assets/2d243e4f-bb19-4ef2-b140-f161140c9593)

## But the process never leaves this point.

![Image](https://github.com/user-attachments/assets/cd702e77-de99-4d76-a333-7f43503a5b85)


### Logs (if relevant)

**Kibana**

```
[2024-09-10T23:36:01.382+00:00][INFO ][plugins.fleet] Secrets storage is disabled as minimum fleet server version has not been met
[2024-09-10T23:36:10.690+00:00][INFO ][plugins.fleet] Fleet Usage: {""agents_enabled"":true,""agents"":{""total_enrolled"":0,""healthy"":0,""unhealthy"":0,""offline"":0,""inactive"":0,""unenrolled"":0,""total_all_statuses"":0,""updating"":0},""fleet_server"":{""total_enrolled"":0,""healthy"":0,""unhealthy"":0,""offline"":0,""updating"":0,""inactive"":0,""unenrolled"":0,""total_all_statuses"":0,""num_host_urls"":1},""license_issued_to"":""increci""}
[2024-09-10T23:36:15.803+00:00][INFO ][plugins.fleet] Secrets storage is disabled as minimum fleet server version has not been met
[2024-09-10T23:47:17.740+00:00][INFO ][plugins.fleet] Secrets storage is disabled as minimum fleet server version has not been met
[2024-09-10T23:47:29.657+00:00][INFO ][plugins.fleet] Secrets storage is disabled as minimum fleet server version has not been met
[2024-09-10T23:47:40.815+00:00][INFO ][plugins.fleet] Secrets storage is disabled as minimum fleet server version has not been met
[2024-09-10T23:47:59.830+00:00][INFO ][plugins.fleet] Secrets storage is disabled as minimum fleet server version has not been met
```

**Elastic Agent**


```
{""log.level"":""info"",""@timestamp"":""2024-09-10T23:34:57.446Z"",""log.origin"":{""function"":""github.com/elastic/elastic-agent/internal/pkg/agent/cmd.runElasticAgent"",""file.name"":""cmd/run.go"",""file.line"":383},""message"":""signal \""terminated\"" received"",""log"":{""source"":""elastic-agent""},""ecs.version"":""1.6.0""}
{""log.level"":""info"",""@timestamp"":""2024-09-10T23:34:57.446Z"",""log.origin"":{""function"":""github.com/elastic/elastic-agent/internal/pkg/agent/cmd.runElasticAgent"",""file.name"":""cmd/run.go"",""file.line"":395},""message"":""Shutting down Elastic Agent and sending last events..."",""log"":{""source"":""elastic-agent""},""ecs.version"":""1.6.0""}
{""log.level"":""info"",""@timestamp"":""2024-09-10T23:34:57.447Z"",""message"":""On signal"",""component"":{""binary"":""fleet-server"",""dataset"":""elastic_agent.fleet_server"",""id"":""fleet-server-default"",""type"":""fleet-server""},""log"":{""source"":""fleet-server-default""},""ecs.version"":""1.6.0"",""service.name"":""fleet-server"",""service.type"":""fleet-server"",""sig"":""terminated"",""ecs.version"":""1.6.0""}
{""log.level"":""error"",""@timestamp"":""2024-09-10T23:34:57.447Z"",""message"":""failed to fetch elasticsearch version"",""component"":{""binary"":""fleet-server"",""dataset"":""elastic_agent.fleet_server"",""id"":""fleet-server-default"",""type"":""fleet-server""},""log"":{""source"":""fleet-server-default""},""ecs.version"":""1.6.0"",""service.name"":""fleet-server"",""service.type"":""fleet-server"",""error.message"":""context canceled"",""ecs.version"":""1.6.0""}
{""log.level"":""info"",""@timestamp"":""2024-09-10T23:34:57.447Z"",""message"":""Stopping"",""component"":{""binary"":""fleet-server"",""dataset"":""elastic_agent.fleet_server"",""id"":""fleet-server-default"",""type"":""fleet-server""},""log"":{""source"":""fleet-server-default""},""state"":""STOPPING"",""ecs.version"":""1.6.0"",""service.name"":""fleet-server"",""service.type"":""fleet-server"",""ecs.version"":""1.6.0""}
{""log.level"":""info"",""@timestamp"":""2024-09-10T23:34:57.647Z"",""log.origin"":{""function"":""github.com/elastic/elastic-agent/internal/pkg/agent/cmd.runElasticAgent"",""file.name"":""cmd/run.go"",""file.line"":404},""message"":""Shutting down completed."",""log"":{""source"":""elastic-agent""},""ecs.version"":""1.6.0""}
{""log.level"":""info"",""@timestamp"":""2024-09-10T23:34:57.648Z"",""log.origin"":{""function"":""github.com/elastic/elastic-agent/internal/pkg/agent/application/monitoring/reload.(*ServerReloader).Stop"",""file.name"":""reload/reload.go"",""file.line"":74},""message"":""Stopping monitoring server"",""log"":{""source"":""elastic-agent""},""ecs.version"":""1.6.0""}
{""log.level"":""info"",""@timestamp"":""2024-09-10T23:34:57.648Z"",""log.logger"":""api"",""log.origin"":{""function"":""github.com/elastic/elastic-agent-libs/api.(*Server).Start.func1"",""file.name"":""api/server.go"",""file.line"":90},""message"":""Stats endpoint (127.0.0.1:6791) finished: accept tcp 127.0.0.1:6791: use of closed network connection"",""log"":{""source"":""elastic-agent""},""ecs.version"":""1.6.0""}
Error: context canceled
For help, please see our troubleshooting guide at https://www.elastic.co/guide/en/fleet/8.15/fleet-troubleshooting.html
{""log.level"":""info"",""@timestamp"":""2024-09-10T23:34:59.753Z"",""log.origin"":{""function"":""github.com/elastic/elastic-agent/internal/pkg/agent/cmd.runElasticAgent"",""file.name"":""cmd/run.go"",""file.line"":195},""message"":""Elastic Agent started"",""log"":{""source"":""elastic-agent""},""process.pid"":7,""agent.version"":""8.15.1"",""agent.unprivileged"":true,""ecs.version"":""1.6.0""}
{""log.level"":""info"",""@timestamp"":""2024-09-10T23:34:59.961Z"",""log.origin"":{""function"":""github.com/elastic/elastic-agent/internal/pkg/agent/application/upgrade.InvokeWatcher"",""file.name"":""upgrade/rollback.go"",""file.line"":144},""message"":""agent is not upgradable, not starting watcher"",""log"":{""source"":""elastic-agent""},""ecs.version"":""1.6.0""}
{""log.level"":""info"",""@timestamp"":""2024-09-10T23:34:59.964Z"",""log.origin"":{""function"":""github.com/elastic/elastic-agent/internal/pkg/agent/cmd.runElasticAgent"",""file.name"":""cmd/run.go"",""file.line"":284},""message"":""APM instrumentation disabled"",""log"":{""source"":""elastic-agent""},""ecs.version"":""1.6.0""}
{""log.level"":""info"",""@timestamp"":""2024-09-10T23:34:59.966Z"",""log.origin"":{""function"":""github.com/elastic/elastic-agent/internal/pkg/agent/application.New"",""file.name"":""application/application.go"",""file.line"":65},""message"":""Gathered system information"",""log"":{""source"":""elastic-agent""},""ecs.version"":""1.6.0""}
{""log.level"":""info"",""@timestamp"":""2024-09-10T23:34:59.982Z"",""log.origin"":{""function"":""github.com/elastic/elastic-agent/internal/pkg/agent/application.New"",""file.name"":""application/application.go"",""file.line"":71},""message"":""Detected available inputs and outputs"",""log"":{""source"":""elastic-agent""},""inputs"":[""endpoint"",""audit/system"",""cel"",""entity-analytics"",""cloudbeat"",""cloudbeat/cis_eks"",""kafka"",""redis/metrics"",""stan/metrics"",""synthetics/tcp"",""kibana/metrics"",""postgresql/metrics"",""pf-elastic-collector"",""kubernetes/metrics"",""iis/metrics"",""statsd/metrics"",""cloudbeat/asset_inventory_aws"",""etw"",""http_endpoint"",""o365audit"",""synthetics/browser"",""osquery"",""cloud_defend/control"",""pf-host-agent"",""cloudbeat/cis_aws"",""log"",""etcd/metrics"",""kafka/metrics"",""elasticsearch/metrics"",""syncgateway/metrics"",""audit/auditd"",""audit/file_integrity"",""benchmark"",""gcs"",""synthetics/icmp"",""mysql/metrics"",""cloudbeat/cis_azure"",""aws-s3"",""container"",""lumberjack"",""enterprisesearch/metrics"",""unix"",""synthetics/http"",""beat/metrics"",""mssql/metrics"",""jolokia/metrics"",""nats/metrics"",""sql/metrics"",""cloudbeat/cis_k8s"",""cloudbeat/cis_gcp"",""cloudbeat/vuln_mgmt_aws"",""azure-eventhub"",""docker"",""journald"",""system/metrics"",""cloudfoundry/metrics"",""http/metrics"",""syslog"",""haproxy/metrics"",""rabbitmq/metrics"",""vsphere/metrics"",""packet"",""apm"",""azure-blob-storage"",""mqtt"",""websocket"",""aws/metrics"",""nginx/metrics"",""zookeeper/metrics"",""pf-elastic-symbolizer"",""cloudfoundry"",""redis"",""apache/metrics"",""gcp/metrics"",""memcached/metrics"",""awsfargate/metrics"",""oracle/metrics"",""activemq/metrics"",""fleet-server"",""salesforce"",""udp"",""winlog"",""linux/metrics"",""traefik/metrics"",""containerd/metrics"",""aws-cloudwatch"",""cometd"",""tcp"",""docker/metrics"",""windows/metrics"",""mongodb/metrics"",""uwsgi/metrics"",""azure/metrics"",""gcp-pubsub"",""httpjson"",""netflow"",""filestream"",""logstash/metrics"",""prometheus/metrics""],""ecs.version"":""1.6.0""}
{""log.level"":""info"",""@timestamp"":""2024-09-10T23:34:59.982Z"",""log.origin"":{""function"":""github.com/elastic/elastic-agent/internal/pkg/capabilities.LoadFile"",""file.name"":""capabilities/capabilities.go"",""file.line"":48},""message"":""Capabilities file not found in /usr/share/elastic-agent/state/capabilities.yml"",""log"":{""source"":""elastic-agent""},""ecs.version"":""1.6.0""}
{""log.level"":""info"",""@timestamp"":""2024-09-10T23:34:59.982Z"",""log.origin"":{""function"":""github.com/elastic/elastic-agent/internal/pkg/agent/application.New"",""file.name"":""application/application.go"",""file.line"":77},""message"":""Determined allowed capabilities"",""log"":{""source"":""elastic-agent""},""ecs.version"":""1.6.0""}
{""log.level"":""info"",""@timestamp"":""2024-09-10T23:34:59.982Z"",""log.origin"":{""function"":""github.com/elastic/elastic-agent/internal/pkg/agent/application.New"",""file.name"":""application/application.go"",""file.line"":92},""message"":""Loading baseline config from /usr/share/elastic-agent/state/elastic-agent.yml"",""log"":{""source"":""elastic-agent""},""ecs.version"":""1.6.0""}
{""log.level"":""info"",""@timestamp"":""2024-09-10T23:35:00.030Z"",""log.origin"":{""function"":""github.com/elastic/elastic-agent/pkg/component/runtime.NewManager"",""file.name"":""runtime/manager.go"",""file.line"":180},""message"":""GRPC comms socket listening at localhost:6789"",""log"":{""source"":""elastic-agent""},""address"":""localhost:6789"",""ecs.version"":""1.6.0""}
{""log.level"":""info"",""@timestamp"":""2024-09-10T23:35:00.039Z"",""log.origin"":{""function"":""github.com/elastic/elastic-agent/internal/pkg/agent/application.New"",""file.name"":""application/application.go"",""file.line"":167},""message"":""Parsed configuration and determined agent is in Fleet Server bootstrap mode"",""log"":{""source"":""elastic-agent""},""ecs.version"":""1.6.0""}
{""log.level"":""info"",""@timestamp"":""2024-09-10T23:35:00.041Z"",""log.logger"":""control"",""log.origin"":{""function"":""github.com/elastic/elastic-agent/pkg/control/v2/server.(*Server).Start"",""file.name"":""server/server.go"",""file.line"":88},""message"":""GRPC control socket listening at unix:///usr/share/elastic-agent/state/data/Td8I7R-Zby36_zF_IOd9QVNlFblNEro3.sock"",""log"":{""source"":""elastic-agent""},""address"":""unix:///usr/share/elastic-agent/state/data/Td8I7R-Zby36_zF_IOd9QVNlFblNEro3.sock"",""ecs.version"":""1.6.0""}
{""log.level"":""info"",""@timestamp"":""2024-09-10T23:35:00.041Z"",""log.origin"":{""function"":""github.com/elastic/elastic-agent/pkg/component/runtime.(*Manager).Run"",""file.name"":""runtime/manager.go"",""file.line"":246},""message"":""Starting grpc control protocol listener on port 6789 with max_message_size 104857600"",""log"":{""source"":""elastic-agent""},""ecs.version"":""1.6.0""}
{""log.level"":""info"",""@timestamp"":""2024-09-10T23:35:00.042Z"",""log.logger"":""composable.providers.docker"",""log.origin"":{""function"":""github.com/elastic/elastic-agent/internal/pkg/composable/providers/docker.(*dynamicProvider).Run"",""file.name"":""docker/docker.go"",""file.line"":44},""message"":""Docker provider skipped, unable to connect: Cannot connect to the Docker daemon at unix:///var/run/docker.sock. Is the docker daemon running?"",""log"":{""source"":""elastic-agent""},""ecs.version"":""1.6.0""}
{""log.level"":""info"",""@timestamp"":""2024-09-10T23:35:00.042Z"",""log.origin"":{""function"":""github.com/elastic/elastic-agent/internal/pkg/agent/application/upgrade.(*Upgrader).Reload"",""file.name"":""upgrade/upgrade.go"",""file.line"":123},""message"":""Source URI changed from \""https://artifacts.elastic.co/downloads/\"" to \""https://artifacts.elastic.co/downloads/\"""",""log"":{""source"":""elastic-agent""},""ecs.version"":""1.6.0""}
{""log.level"":""info"",""@timestamp"":""2024-09-10T23:35:00.042Z"",""log.origin"":{""function"":""github.com/elastic/elastic-agent/internal/pkg/agent/application/monitoring/reload.(*ServerReloader).Start"",""file.name"":""reload/reload.go"",""file.line"":54},""message"":""Starting monitoring server with cfg &config.MonitoringConfig{Enabled:true, MonitorLogs:true, MonitorMetrics:true, MetricsPeriod:\""\"", LogMetrics:true, HTTP:(*config.MonitoringHTTPConfig)(0xc001766c90), Namespace:\""default\"", Pprof:(*config.PprofConfig)(nil), MonitorTraces:false, APM:config.APMConfig{Environment:\""\"", APIKey:\""\"", SecretToken:\""\"", Hosts:[]string(nil), GlobalLabels:map[string]string(nil), TLS:config.APMTLS{SkipVerify:false, ServerCertificate:\""\"", ServerCA:\""\""}}, Diagnostics:config.Diagnostics{Uploader:config.Uploader{MaxRetries:10, InitDur:1000000000, MaxDur:600000000000}, Limit:config.Limit{Interval:60000000000, Burst:1}}}"",""log"":{""source"":""elastic-agent""},""ecs.version"":""1.6.0""}
{""log.level"":""info"",""@timestamp"":""2024-09-10T23:35:00.042Z"",""log.origin"":{""function"":""github.com/elastic/elastic-agent/internal/pkg/agent/application/monitoring.NewServer.exposeMetricsEndpoint.func1"",""file.name"":""monitoring/server.go"",""file.line"":90},""message"":""creating monitoring API with cfg api.Config{Enabled:true, Host:\""http://localhost:6791\"", Port:6791, User:\""\"", SecurityDescriptor:\""\"", Timeout:5000000000}"",""log"":{""source"":""elastic-agent""},""ecs.version"":""1.6.0""}
{""log.level"":""info"",""@timestamp"":""2024-09-10T23:35:00.042Z"",""log.logger"":""api"",""log.origin"":{""function"":""github.com/elastic/elastic-agent-libs/api.(*Server).Start"",""file.name"":""api/server.go"",""file.line"":85},""message"":""Starting stats endpoint"",""log"":{""source"":""elastic-agent""},""ecs.version"":""1.6.0""}
{""log.level"":""info"",""@timestamp"":""2024-09-10T23:35:00.042Z"",""log.logger"":""api"",""log.origin"":{""function"":""github.com/elastic/elastic-agent-libs/api.(*Server).Start.func1"",""file.name"":""api/server.go"",""file.line"":87},""message"":""Metrics endpoint listening on: 127.0.0.1:6791 (configured: http://localhost:6791)"",""log"":{""source"":""elastic-agent""},""ecs.version"":""1.6.0""}
{""log.level"":""info"",""@timestamp"":""2024-09-10T23:35:00.152Z"",""log.origin"":{""function"":""github.com/elastic/elastic-agent/internal/pkg/agent/application/coordinator.(*Coordinator).refreshComponentModel"",""file.name"":""coordinator/coordinator.go"",""file.line"":1272},""message"":""Updating running component model"",""log"":{""source"":""elastic-agent""},""ecs.version"":""1.6.0""}
{""log.level"":""info"",""@timestamp"":""2024-09-10T23:35:00.233Z"",""log.origin"":{""function"":""github.com/elastic/elastic-agent/internal/pkg/agent/application/coordinator.(*Coordinator).watchRuntimeComponents"",""file.name"":""coordinator/coordinator.go"",""file.line"":627},""message"":""Spawned new component fleet-server-default: Starting: spawned pid '22'"",""log"":{""source"":""elastic-agent""},""component"":{""id"":""fleet-server-default"",""state"":""STARTING""},""ecs.version"":""1.6.0""}
{""log.level"":""info"",""@timestamp"":""2024-09-10T23:35:00.233Z"",""log.origin"":{""function"":""github.com/elastic/elastic-agent/internal/pkg/agent/application/coordinator.(*Coordinator).watchRuntimeComponents"",""file.name"":""coordinator/coordinator.go"",""file.line"":634},""message"":""Spawned new unit fleet-server-default-fleet-server: Starting: spawned pid '22'"",""log"":{""source"":""elastic-agent""},""component"":{""id"":""fleet-server-default"",""state"":""STARTING""},""unit"":{""id"":""fleet-server-default-fleet-server"",""type"":""input"",""state"":""STARTING""},""ecs.version"":""1.6.0""}
{""log.level"":""info"",""@timestamp"":""2024-09-10T23:35:00.233Z"",""log.origin"":{""function"":""github.com/elastic/elastic-agent/internal/pkg/agent/application/coordinator.(*Coordinator).watchRuntimeComponents"",""file.name"":""coordinator/coordinator.go"",""file.line"":634},""message"":""Spawned new unit fleet-server-default: Starting: spawned pid '22'"",""log"":{""source"":""elastic-agent""},""component"":{""id"":""fleet-server-default"",""state"":""STARTING""},""unit"":{""id"":""fleet-server-default"",""type"":""output"",""state"":""STARTING""},""ecs.version"":""1.6.0""}
{""log.level"":""info"",""@timestamp"":""2024-09-10T23:35:00.262Z"",""message"":""Boot fleet-server"",""component"":{""binary"":""fleet-server"",""dataset"":""elastic_agent.fleet_server"",""id"":""fleet-server-default"",""type"":""fleet-server""},""log"":{""source"":""fleet-server-default""},""commit"":""13e2f247"",""pid"":22,""ecs.version"":""1.6.0"",""service.name"":""fleet-server"",""service.type"":""fleet-server"",""version"":""8.15.1"",""ppid"":7,""exe"":""/usr/share/elastic-agent/data/elastic-agent-ecab0c/components/fleet-server"",""args"":[""--agent-mode"",""-E"",""logging.level=debug"",""-E"",""logging.to_stderr=true"",""-E"",""path.data=/usr/share/elastic-agent/state/data/run/fleet-server-default""],""ecs.version"":""1.6.0""}
{""log.level"":""info"",""@timestamp"":""2024-09-10T23:35:00.263Z"",""message"":""starting communication connection back to Elastic Agent"",""component"":{""binary"":""fleet-server"",""dataset"":""elastic_agent.fleet_server"",""id"":""fleet-server-default"",""type"":""fleet-server""},""log"":{""source"":""fleet-server-default""},""ecs.version"":""1.6.0"",""service.name"":""fleet-server"",""service.type"":""fleet-server"",""ecs.version"":""1.6.0""}
{""log.level"":""info"",""@timestamp"":""2024-09-10T23:35:00.269Z"",""log.logger"":""component.runtime.fleet-server-default"",""log.origin"":{""function"":""github.com/elastic/elastic-agent/pkg/component/runtime.(*Manager).CheckinV2"",""file.name"":""runtime/manager.go"",""file.line"":715},""message"":""control checkin v2 protocol has chunking enabled"",""ecs.version"":""1.6.0""}
{""log.level"":""info"",""@timestamp"":""2024-09-10T23:35:00.269Z"",""log.origin"":{""function"":""github.com/elastic/elastic-agent/internal/pkg/agent/application/coordinator.(*Coordinator).watchRuntimeComponents"",""file.name"":""coordinator/coordinator.go"",""file.line"":647},""message"":""Component state changed fleet-server-default (STARTING->HEALTHY): Healthy: communicating with pid '22'"",""log"":{""source"":""elastic-agent""},""component"":{""id"":""fleet-server-default"",""state"":""HEALTHY"",""old_state"":""STARTING""},""ecs.version"":""1.6.0""}
{""log.level"":""error"",""@timestamp"":""2024-09-10T23:35:00.272Z"",""message"":""failed to fetch elasticsearch version"",""component"":{""binary"":""fleet-server"",""dataset"":""elastic_agent.fleet_server"",""id"":""fleet-server-default"",""type"":""fleet-server""},""log"":{""source"":""fleet-server-default""},""ecs.version"":""1.6.0"",""service.name"":""fleet-server"",""service.type"":""fleet-server"",""error.message"":""dial tcp [::1]:9200: connect: connection refused"",""ecs.version"":""1.6.0""}
{""log.level"":""warn"",""@timestamp"":""2024-09-10T23:35:00.272Z"",""message"":""Failed Elasticsearch output configuration test, using bootstrap values."",""component"":{""binary"":""fleet-server"",""dataset"":""elastic_agent.fleet_server"",""id"":""fleet-server-default"",""type"":""fleet-server""},""log"":{""source"":""fleet-server-default""},""output"":{""hosts"":[""localhost:9200""],""protocol"":""https"",""proxy_disable"":false,""proxy_headers"":{},""service_token"":""AAEAAWVsYXN0aWMvZmxlZXQtc2VydmVyL3Rva2VuLTE3MjU5NjMxMzMzMDk6elBSZWhmV01TUmlfaWpDZUFjNng2UQ"",""ssl"":{""certificate"":""/usr/share/elastic-agent/config/certs/fullchain.pem"",""certificate_authorities"":[""/usr/share/elastic-agent/config/certs/chain.pem""],""key"":""/usr/share/elastic-agent/config/certs/privkey.pem"",""verification_mode"":""full""},""type"":""elasticsearch""},""ecs.version"":""1.6.0"",""service.name"":""fleet-server"",""service.type"":""fleet-server"",""error.message"":""dial tcp [::1]:9200: connect: connection refused"",""ecs.version"":""1.6.0""}
{""log.level"":""info"",""@timestamp"":""2024-09-10T23:35:00.273Z"",""message"":""Found settings with recommended ram."",""component"":{""binary"":""fleet-server"",""dataset"":""elastic_agent.fleet_server"",""id"":""fleet-server-default"",""type"":""fleet-server""},""log"":{""source"":""fleet-server-default""},""memory_mb"":24027,""recommended_mb"":16192,""ecs.version"":""1.6.0"",""service.name"":""fleet-server"",""service.type"":""fleet-server"",""ecs.version"":""1.6.0""}
{""log.level"":""info"",""@timestamp"":""2024-09-10T23:35:00.273Z"",""message"":""Setting cache config options"",""component"":{""binary"":""fleet-server"",""dataset"":""elastic_agent.fleet_server"",""id"":""fleet-server-default"",""type"":""fleet-server""},""log"":{""source"":""fleet-server-default""},""ecs.version"":""1.6.0"",""service.name"":""fleet-server"",""service.type"":""fleet-server"",""cfg"":{""APIKeyJitter"":300000000000,""APIKeyTTL"":900000000000,""ActionTTL"":300000000000,""ArtifactTTL"":86400000000000,""EnrollKeyTTL"":60000000000,""MaxCost"":268435456,""NumCounters"":1600000},""ecs.version"":""1.6.0""}
{""log.level"":""info"",""@timestamp"":""2024-09-10T23:35:00.275Z"",""message"":""Starting"",""component"":{""binary"":""fleet-server"",""dataset"":""elastic_agent.fleet_server"",""id"":""fleet-server-default"",""type"":""fleet-server""},""log"":{""source"":""fleet-server-default""},""ecs.version"":""1.6.0"",""service.name"":""fleet-server"",""service.type"":""fleet-server"",""state"":""STARTING"",""ecs.version"":""1.6.0""}
{""log.level"":""info"",""@timestamp"":""2024-09-10T23:35:00.275Z"",""message"":""Found settings with recommended ram."",""component"":{""binary"":""fleet-server"",""dataset"":""elastic_agent.fleet_server"",""id"":""fleet-server-default"",""type"":""fleet-server""},""log"":{""source"":""fleet-server-default""},""ecs.version"":""1.6.0"",""service.name"":""fleet-server"",""service.type"":""fleet-server"",""memory_mb"":24027,""recommended_mb"":16192,""ecs.version"":""1.6.0""}
{""log.level"":""info"",""@timestamp"":""2024-09-10T23:35:00.276Z"",""message"":""initial server configuration"",""component"":{""binary"":""fleet-server"",""dataset"":""elastic_agent.fleet_server"",""id"":""fleet-server-default"",""type"":""fleet-server""},""log"":{""source"":""fleet-server-default""},""ecs.version"":""1.6.0"",""service.name"":""fleet-server"",""service.type"":""fleet-server"",""new"":{""Fleet"":{""Agent"":{""ID"":"""",""Logging"":{""Level"":""""},""Version"":""8.15.1""},""Host"":{""ID"":"""",""Name"":""""}},""HTTP"":{""Enabled"":false,""Host"":""localhost"",""Port"":5066,""SecurityDescriptor"":"""",""User"":""""},""Inputs"":[{""Cache"":{""APIKeyJitter"":0,""APIKeyTTL"":0,""ActionTTL"":0,""ArtifactTTL"":0,""EnrollKeyTTL"":0,""MaxCost"":0,""NumCounters"":0},""Monitor"":{""FetchSize"":0,""PolicyDebounceTime"":0,""PollTimeout"":0},""Policy"":{""ID"":""""},""Server"":{""Bulk"":{""FlushInterval"":250000000,""FlushMaxPending"":8,""FlushThresholdCount"":2048,""FlushThresholdSize"":1048576},""CompressionLevel"":1,""CompressionThresh"":1024,""GC"":{""CleanupAfterExpiredInterval"":""30d"",""ScheduleInterval"":3600000000000},""Host"":""0.0.0.0"",""Instrumentation"":{""APIKey"":"""",""APIKeyPath"":"""",""Enabled"":false,""Environment"":"""",""GlobalLabels"":"""",""Hosts"":null,""SecretToken"":"""",""SecretTokenPath"":"""",""TLS"":{""ServerCA"":"""",""ServerCertificate"":"""",""SkipVerify"":false},""TransactionSampleRate"":""""},""InternalPort"":8221,""Limits"":{""AckLimit"":{""Burst"":4000,""Interval"":500000,""Max"":8000,""MaxBody"":2097152},""ActionLimit"":{""Burst"":100,""Interval"":500000,""Max"":0,""MaxBody"":0},""ArtifactLimit"":{""Burst"":4000,""Interval"":500000,""Max"":8000,""MaxBody"":0},""CheckinLimit"":{""Burst"":4000,""Interval"":500000,""Max"":40000,""MaxBody"":1048576},""DeliverFileLimit"":{""Burst"":40,""Interval"":100000000,""Max"":80,""MaxBody"":0},""EnrollLimit"":{""Burst"":100,""Interval"":10000000,""Max"":200,""MaxBody"":524288},""GetPGPKey"":{""Burst"":25,""Interval"":5000000,""Max"":50,""MaxBody"":0},""MaxAgents"":0,""MaxConnections"":0,""MaxHeaderByteSize"":8192,""PolicyLimit"":{""Burst"":1,""Interval"":2000000,""Max"":0,""MaxBody"":0},""PolicyThrottle"":0,""StatusLimit"":{""Burst"":200,""Interval"":5000000,""Max"":400,""MaxBody"":0},""UploadChunkLimit"":{""Burst"":40,""Interval"":3000000,""Max"":80,""MaxBody"":4194304},""UploadEndLimit"":{""Burst"":40,""Interval"":2000000000,""Max"":80,""MaxBody"":1024},""UploadStartLimit"":{""Burst"":40,""Interval"":2000000000,""Max"":80,""MaxBody"":5242880}},""PGP"":{""Dir"":""/usr/share/elastic-agent/data/elastic-agent-ecab0c/components/elastic-agent-upgrade-keys"",""UpstreamURL"":""https://artifacts.elastic.co/GPG-KEY-elastic-agent""},""Port"":8220,""Profiler"":{""Bind"":""localhost:6060"",""Enabled"":false},""Runtime"":{""GCPercent"":0,""MemoryLimit"":0},""StaticPolicyTokens"":{""Enabled"":false,""PolicyTokens"":null},""TLS"":{""CASha256"":null,""CAs"":[""/usr/share/elastic-agent/config/certs/fullchain.pem""],""Certificate"":{""Certificate"":""/usr/share/elastic-agent/config/certs/fullchain.pem"",""Key"":""[redacted]"",""Passphrase"":"""",""PassphrasePath"":""""},""CipherSuites"":null,""ClientAuth"":""required"",""CurveTypes"":null,""Enabled"":null,""VerificationMode"":""full"",""Versions"":null},""Timeouts"":{""CheckinJitter"":30000000000,""CheckinLongPoll"":300000000000,""CheckinMaxPoll"":3600000000000,""CheckinTimestamp"":30000000000,""Drain"":10000000000,""Idle"":30000000000,""Read"":60000000000,""ReadHeader"":5000000000,""Write"":600000000000}},""Type"":""""}],""Logging"":{""Files"":null,""Level"":""info"",""Pretty"":false,""ToFiles"":true,""ToStderr"":true},""Output"":{""Elasticsearch"":{""Headers"":null,""Hosts"":[""increci-kibana.opperweb.com:9200""],""MaxConnPerHost"":128,""MaxContentLength"":104857600,""MaxRetries"":3,""Path"":"""",""Protocol"":""https"",""ProxyDisable"":false,""ProxyHeaders"":{},""ProxyURL"":"""",""ServiceToken"":""[redacted]"",""ServiceTokenPath"":"""",""TLS"":{""CASha256"":null,""CATrustedFingerprint"":"""",""CAs"":[""/usr/share/elastic-agent/config/certs/chain.pem""],""Certificate"":{""Certificate"":""/usr/share/elastic-agent/config/certs/fullchain.pem"",""Key"":""[redacted]"",""Passphrase"":"""",""PassphrasePath"":""""},""CipherSuites"":null,""CurveTypes"":null,""Enabled"":null,""Renegotiation"":""never"",""VerificationMode"":""full"",""Versions"":null},""Timeout"":90000000000},""Extra"":null}},""ecs.version"":""1.6.0""}
{""log.level"":""info"",""@timestamp"":""2024-09-10T23:35:00.276Z"",""message"":""starting server on configuration change"",""component"":{""binary"":""fleet-server"",""dataset"":""elastic_agent.fleet_server"",""id"":""fleet-server-default"",""type"":""fleet-server""},""log"":{""source"":""fleet-server-default""},""ecs.version"":""1.6.0"",""service.name"":""fleet-server"",""service.type"":""fleet-server"",""ecs.version"":""1.6.0""}
{""log.level"":""info"",""@timestamp"":""2024-09-10T23:35:00.276Z"",""message"":""Run bulker with options"",""component"":{""binary"":""fleet-server"",""dataset"":""elastic_agent.fleet_server"",""id"":""fleet-server-default"",""type"":""fleet-server""},""log"":{""source"":""fleet-server-default""},""ecs.version"":""1.6.0"",""service.name"":""fleet-server"",""service.type"":""fleet-server"",""opts"":{""apikeyMaxParallel"":120,""apikeyMaxReqSize"":104857600,""blockQueueSz"":32,""flushInterval"":250,""flushThresholdCnt"":2048,""flushThresholdSz"":1048576,""maxPending"":8},""ecs.version"":""1.6.0""}
{""log.level"":""info"",""@timestamp"":""2024-09-10T23:35:00.358Z"",""log.origin"":{""function"":""github.com/elastic/elastic-agent/internal/pkg/agent/application/coordinator.(*Coordinator).checkAndLogUpdate"",""file.name"":""coordinator/coordinator.go"",""file.line"":1478},""message"":""component model updated"",""log"":{""source"":""elastic-agent""},""changes"":{""components"":{""count"":1},""outputs"":{}},""ecs.version"":""1.6.0""}
{""log.level"":""info"",""@timestamp"":""2024-09-10T23:35:00.359Z"",""log.origin"":{""function"":""github.com/elastic/elastic-agent/internal/pkg/agent/application/coordinator.(*Coordinator).refreshComponentModel"",""file.name"":""coordinator/coordinator.go"",""file.line"":1272},""message"":""Updating running component model"",""log"":{""source"":""elastic-agent""},""ecs.version"":""1.6.0""}
```",soularius,closed,"['>bug', 'needs:triage']",https://github.com/elastic/elasticsearch/issues/112725,2024-09-10T23:50:24Z,2,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/112725,"{
  ""application_resource"": ""yes""
}"
91,112422,[CI] SearchableSnapshotsPrewarmingIntegTests testConcurrentPrewarming failing,"**Build Scans:**
- [elasticsearch-periodic-platform-support #3910 / opensuse-leap-15_platform-support-unix](https://gradle-enterprise.elastic.co/s/ivzfimcatkrxm)
- [elasticsearch-periodic-platform-support #3883 / debian-11_platform-support-unix](https://gradle-enterprise.elastic.co/s/25qfdvpadvgpy)

**Reproduction Line:**
```
./gradlew ':x-pack:plugin:searchable-snapshots:internalClusterTest' --tests ""org.elasticsearch.xpack.searchablesnapshots.cache.full.SearchableSnapshotsPrewarmingIntegTests.testConcurrentPrewarming"" -Dtests.seed=5A2056D53BE797B2 -Dtests.locale=ar-LB -Dtests.timezone=America/Santarem -Druntime.java=22
```

**Applicable branches:**
7.17

**Reproduces locally?:**
N/A

**Failure History:**
[See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&_a=(controlGroupInput:(chainingSystem:HIERARCHICAL,controlStyle:twoLine,ignoreParentSettings:(ignoreFilters:!f,ignoreQuery:!f,ignoreTimerange:!f,ignoreValidations:!t),panels:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(explicitInput:(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,enhancements:(),fieldName:task.keyword,grow:!t,id:'0c0c9cb8-ccd2-45c6-9b13-96bac4abc542',searchTechnique:wildcard,selectedOptions:!(),singleSelect:!t,title:'Gradle%20Task',width:medium),grow:!t,order:0,type:optionsListControl,width:small),'144933da-5c1b-4257-a969-7f43455a7901':(explicitInput:(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,enhancements:(),fieldName:name.keyword,grow:!t,id:'144933da-5c1b-4257-a969-7f43455a7901',searchTechnique:wildcard,selectedOptions:!('testConcurrentPrewarming'),title:Test,width:medium),grow:!t,order:2,type:optionsListControl,width:medium),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(explicitInput:(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,enhancements:(),fieldName:className.keyword,grow:!t,id:'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850',searchTechnique:wildcard,selectedOptions:!('org.elasticsearch.xpack.searchablesnapshots.cache.full.SearchableSnapshotsPrewarmingIntegTests'),title:Suite,width:medium),grow:!t,order:1,type:optionsListControl,width:medium)))))

**Failure Message:**
```
java.lang.AssertionError: 
Expected: <21>
     but: was <20>
```

**Issue Reasons:**
- [7.17] 2 failures in test testConcurrentPrewarming (0.6% fail rate in 358 executions)
- [7.17] 2 failures in pipeline elasticsearch-periodic-platform-support (20.0% fail rate in 10 executions)

**Note:**
This issue was created using new test triage automation. Please report issues or feedback to es-delivery.",elasticsearchmachine,closed,"[':Distributed Coordination/Snapshot/Restore', '>test-failure', 'Team:Distributed (Obsolete)', 'low-risk']",https://github.com/elastic/elasticsearch/issues/112422,2024-09-01T21:08:53Z,3,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/112422,"{
  ""application_resource"": ""yes""
}"
92,112384,[CI] NodesCachesStatsIntegTests testNodesCachesStats failing,"**Build Scans:**
- [elasticsearch-periodic-platform-support #3884 / centos-7_platform-support-unix](https://gradle-enterprise.elastic.co/s/qqm7gy4hnman4)
- [elasticsearch-pull-request #29293 / part-2](https://gradle-enterprise.elastic.co/s/7tazkuxk5eooy)
- [elasticsearch-pull-request #29079 / part-2](https://gradle-enterprise.elastic.co/s/tluqdydyvenjo)

**Reproduction Line:**
```
./gradlew "":x-pack:plugin:searchable-snapshots:internalClusterTest"" --tests ""org.elasticsearch.xpack.searchablesnapshots.cache.shared.NodesCachesStatsIntegTests.testNodesCachesStats"" -Dtests.seed=1EA29C05D828C3CD -Dtests.locale=ar-LY -Dtests.timezone=IST -Druntime.java=22
```

**Applicable branches:**
main

**Reproduces locally?:**
N/A

**Failure History:**
[See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&_a=(controlGroupInput:(chainingSystem:HIERARCHICAL,controlStyle:twoLine,ignoreParentSettings:(ignoreFilters:!f,ignoreQuery:!f,ignoreTimerange:!f,ignoreValidations:!t),panels:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(explicitInput:(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,enhancements:(),fieldName:task.keyword,grow:!t,id:'0c0c9cb8-ccd2-45c6-9b13-96bac4abc542',searchTechnique:wildcard,selectedOptions:!(),singleSelect:!t,title:'Gradle%20Task',width:medium),grow:!t,order:0,type:optionsListControl,width:small),'144933da-5c1b-4257-a969-7f43455a7901':(explicitInput:(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,enhancements:(),fieldName:name.keyword,grow:!t,id:'144933da-5c1b-4257-a969-7f43455a7901',searchTechnique:wildcard,selectedOptions:!('testNodesCachesStats'),title:Test,width:medium),grow:!t,order:2,type:optionsListControl,width:medium),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(explicitInput:(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,enhancements:(),fieldName:className.keyword,grow:!t,id:'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850',searchTechnique:wildcard,selectedOptions:!('org.elasticsearch.xpack.searchablesnapshots.cache.shared.NodesCachesStatsIntegTests'),title:Suite,width:medium),grow:!t,order:1,type:optionsListControl,width:medium)))))

**Failure Message:**
```
java.lang.AssertionError: 
Expected: a value greater than <0L>
     but: <0L> was equal to <0L>
```

**Issue Reasons:**
- [main] 3 failures in test testNodesCachesStats (0.3% fail rate in 966 executions)
- [main] 2 failures in step part-2 (0.8% fail rate in 237 executions)
- [main] 2 failures in pipeline elasticsearch-pull-request (0.8% fail rate in 240 executions)

**Note:**
This issue was created using new test triage automation. Please report issues or feedback to es-delivery.",elasticsearchmachine,closed,"[':Distributed Coordination/Snapshot/Restore', '>test-failure', 'Team:Distributed (Obsolete)', 'low-risk']",https://github.com/elastic/elasticsearch/issues/112384,2024-08-30T05:21:49Z,4,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/112384,"{
  ""application_resource"": ""yes""
}"
93,112314,[CI] SharedBlobCacheServiceTests testGetMultiThreaded failing,"**Build Scans:**
- [elasticsearch-periodic-platform-support #3872 / oraclelinux-7_platform-support-unix](https://gradle-enterprise.elastic.co/s/3izgwe545bwag)
- [elasticsearch-periodic-platform-support #3872 / opensuse-leap-15_platform-support-unix](https://gradle-enterprise.elastic.co/s/7bo54t6zpqpku)
- [elasticsearch-periodic-platform-support #3872 / windows-2016_checkpart2_platform-support-windows](https://gradle-enterprise.elastic.co/s/ufadt4jwuj3ac)
- [elasticsearch-periodic #3899 / openjdk23_checkpart2_java-matrix](https://gradle-enterprise.elastic.co/s/kex62zneqzp2c)
- [elasticsearch-pull-request #29539 / part-2](https://gradle-enterprise.elastic.co/s/sxoygoc732nmc)
- [elasticsearch-pull-request #29538 / part-2](https://gradle-enterprise.elastic.co/s/ydhoifhng7pa6)
- [elasticsearch-pull-request #29521 / part-2](https://gradle-enterprise.elastic.co/s/pw3qpllwjfzyq)
- [elasticsearch-pull-request #29518 / part-2](https://gradle-enterprise.elastic.co/s/xtboa4ibelamo)
- [elasticsearch-pull-request #29516 / part-2](https://gradle-enterprise.elastic.co/s/nv7i75zpdu4oq)
- [elasticsearch-pull-request #29515 / part-2](https://gradle-enterprise.elastic.co/s/ieetjzos2svao)

**Reproduction Line:**
```
./gradlew "":x-pack:plugin:blob-cache:test"" --tests ""org.elasticsearch.blobcache.shared.SharedBlobCacheServiceTests.testGetMultiThreaded"" -Dtests.seed=744C35EC5FE33380 -Dtests.locale=es-EC -Dtests.timezone=Antarctica/Casey -Druntime.java=22
```

**Applicable branches:**
main

**Reproduces locally?:**
N/A

**Failure History:**
[See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&_a=(controlGroupInput:(chainingSystem:HIERARCHICAL,controlStyle:twoLine,ignoreParentSettings:(ignoreFilters:!f,ignoreQuery:!f,ignoreTimerange:!f,ignoreValidations:!t),panels:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(explicitInput:(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,enhancements:(),fieldName:task.keyword,grow:!t,id:'0c0c9cb8-ccd2-45c6-9b13-96bac4abc542',searchTechnique:wildcard,selectedOptions:!(),singleSelect:!t,title:'Gradle%20Task',width:medium),grow:!t,order:0,type:optionsListControl,width:small),'144933da-5c1b-4257-a969-7f43455a7901':(explicitInput:(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,enhancements:(),fieldName:name.keyword,grow:!t,id:'144933da-5c1b-4257-a969-7f43455a7901',searchTechnique:wildcard,selectedOptions:!('testGetMultiThreaded'),title:Test,width:medium),grow:!t,order:2,type:optionsListControl,width:medium),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(explicitInput:(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,enhancements:(),fieldName:className.keyword,grow:!t,id:'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850',searchTechnique:wildcard,selectedOptions:!('org.elasticsearch.blobcache.shared.SharedBlobCacheServiceTests'),title:Suite,width:medium),grow:!t,order:1,type:optionsListControl,width:medium)))))

**Failure Message:**
```
java.lang.AssertionError: null
```

**Issue Reasons:**
- [main] 10 failures in test testGetMultiThreaded (4.7% fail rate in 211 executions)
- [main] 7 failures in step part-2 (8.9% fail rate in 79 executions)
- [main] 7 failures in pipeline elasticsearch-pull-request (8.9% fail rate in 79 executions)

**Note:**
This issue was created using new test triage automation. Please report issues or feedback to es-delivery.",elasticsearchmachine,closed,"['>test-failure', 'low-risk', 'Team:Search Foundations', ':Search Foundations/Search']",https://github.com/elastic/elasticsearch/issues/112314,2024-08-28T20:20:28Z,2,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/112314,"{
  ""application_resource"": ""yes""
}"
94,112305,[CI] SharedBlobCacheServiceTests.testGetMultiThreaded failure,"### CI Link

https://gradle-enterprise.elastic.co/s/ieetjzos2svao

### Repro line

./gradlew "":x-pack:plugin:blob-cache:test"" --tests ""org.elasticsearch.blobcache.shared.SharedBlobCacheServiceTests.testGetMultiThreaded"" -Dtests.seed=9176519ABB89E00D -Dtests.locale=fr-FR -Dtests.timezone=Asia/Pyongyang -Druntime.java=22

### Does it reproduce?

Yes

### Applicable branches

main

### Failure history

failed in PR build

### Failure excerpt

```
SharedBlobCacheServiceTests > testGetMultiThreaded FAILED
    java.lang.AssertionError
        at __randomizedtesting.SeedInfo.seed([9176519ABB89E00D]:0)
        at org.junit.Assert.fail(Assert.java:87)aturesMetadata
        at org.junit.Assert.assertTrue(Assert.java:42)
        at org.junit.Assert.assertNotNull(Assert.java:713)
        at org.junit.Assert.assertNotNull(Assert.java:723)
        at org.elasticsearch.blobcache.shared.SharedBlobCacheServiceTests.lambda$testGetMultiThreaded$16(SharedBlobCacheServiceTests.java:500)
    java.lang.AssertionError
        at __randomizedtesting.SeedInfo.seed([9176519ABB89E00D]:0)
        at org.junit.Assert.fail(Assert.java:87)t org.elasticsearch...shared.SharedBlobCacheServiceTests
        at org.junit.Assert.assertTrue(Assert.java:42)elasticsearch.blobcache.common.SparseFileTrackerTests
        at org.junit.Assert.assertNotNull(Assert.java:713)
        at org.junit.Assert.assertNotNull(Assert.java:723)
        at org.elasticsearch.blobcache.shared.SharedBlobCacheServiceTests.lambda$testGetMultiThreaded$16(SharedBlobCacheServiceTests.java:500)
    java.lang.AssertionError
        at __randomizedtesting.SeedInfo.seed([9176519ABB89E00D]:0)
        at org.junit.Assert.fail(Assert.java:87)
        at org.junit.Assert.assertTrue(Assert.java:42)
        at org.junit.Assert.assertNotNull(Assert.java:713)
        at org.junit.Assert.assertNotNull(Assert.java:723)
        at org.elasticsearch.blobcache.shared.SharedBlobCacheServiceTests.lambda$testGetMultiThreaded$16(SharedBlobCacheServiceTests.java:500)
```",dakrone,closed,"['>test-failure', ':Distributed Indexing/Distributed', 'Team:Distributed (Obsolete)', 'needs:risk']",https://github.com/elastic/elasticsearch/issues/112305,2024-08-28T18:33:41Z,3,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/112305,"{
  ""application_resource"": ""yes""
}"
95,111870,[Discussion] OpenSearch searchable snapshot set-up in Glacier tier,"Hi knowledgeable folks of the forum,

Searching for some guidance and assistance with an OpenSearch searchable snapshot set-up. The intent here is to store the searchable snapshot in one of the cheaper Glacier tiers for cost effective (but still searchable) archival. Performance is not a major consideration here.

Done so far to:

Created snapshot in an S3 bucket.
Restored snapshot using API : POST _snapshot///_restore with storage_type = remote_snapshot.
Index is restored and tested searchable.
Given the somewhat random nature of the data searches, cache has been minimizes as it would unlikely return any meaningful hits.
A few open items so far:

When doing a search for results contained within the searchable index, will the search process all of the snapshot?
Or is the search smart enough to jump directly to the matching blob units within the snapshot?
Would greatly appreciate any thoughts or ideas how to pursue this further.

Thanks!",Sweetnesh,closed,['needs:triage'],https://github.com/elastic/elasticsearch/issues/111870,2024-08-14T06:39:11Z,1,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/111870,"{
  ""application_resource"": ""no""
}"
96,111828,REROUTE processor doesn't work for 2nd and later instances of the same integration and drops documents for theese instances.,"### Elasticsearch Version

8.15.0, Build: deb/1a77947f34deddb41af25e6f0ddb8e830159c179/2024-08-05T10:05:34.233336849Z, JVM: 22.0.1

### Installed Plugins

_No response_

### Java Version

_bundled_

### OS Version

6.1.0-22-amd64 #1 SMP PREEMPT_DYNAMIC Debian 6.1.94-1 (2024-06-21) x86_64 GNU/Linux

### Problem Description

Trying to split existing integration datastream (""System"" integration v1.60.2) in the ingest pipeline logs-system.auth@custom
with ""REROUTE"" processor.
```
[
  {
    ""reroute"": {
      ""dataset"": [
        ""{{data_stream.dataset}}""
      ],
      ""namespace"": [
        ""1y.nbu""
      ]
    }
  }
]
```

The idea is to keep critical docs (logs) longer then usual docs (logs).

This is a working configuration but only for the first agent policy to which the integration was added.
For example docs routed to the index .ds-logs-system.auth-1y.nbu-2024.08.05-000004

If the integration will be added to other agent policies with different names, the documents from such integrations will be completely lost. If i remove the reroute processor from the ingest pipeline the docs stop getting lost and all ingest pipeline works as expected (System integration documents are saved to the datastream from the all agent policies).
This behavior was observed in previous elasticsearch versions as well.

### Steps to Reproduce

Install System integration
Add ""Reroute"" processor in the ingest pipeline ""logs-system.auth@custom"":
[
  {
    ""reroute"": {
      ""dataset"": [
        ""{{data_stream.dataset}}""
      ],
      ""namespace"": [
        ""1y.nbu""
      ]
    }
  }
]
Add ""System"" integration to more then one agent policy name.
Check logs from hosts in the different agent policies.

### Logs (if relevant)

_No response_",SergeyDrachuk,closed,"['>bug', ':Data Management/Ingest Node', 'Team:Data Management']",https://github.com/elastic/elasticsearch/issues/111828,2024-08-13T09:32:07Z,13,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/111828,"{
  ""application_resource"": ""unsure""
}"
97,111715,`Engine#getSparseVectorValueCount` seems rather expensive,"I was looking at the hot threads for a large-ish node and observed that all the `management` threads were at 100% executing `Engine#getSparseVectorValueCount`. This was added in https://github.com/elastic/elasticsearch/pull/108793. I think this is going to be a problem, it looks like maybe we should add some caching or other optimizations here.",DaveCTurner,closed,"['>bug', ':Search Relevance/Vectors', ':SearchOrg/Relevance']",https://github.com/elastic/elasticsearch/issues/111715,2024-08-08T16:52:57Z,7,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/111715,"{
  ""application_resource"": ""unsure""
}"
98,111637,IndexOutOfBounds error when using DLS over a runtime field,"### Elasticsearch Version

any

### Installed Plugins

_No response_

### Java Version

_bundled_

### OS Version

_any_

### Problem Description

When using document level security that queries a runtime field, users might see an exceptions logged like
```
java.lang.IndexOutOfBoundsException: Index 2 out of bounds for length 2
```

And even retrieve fewer than expected documents. Meaning, they can get different documents returned at different times, very unexpected behavior.


We should either:

 - disallow DLS over runtime fields
 - Fix this behavior so it just works (I am in favor of this one...)

### Steps to Reproduce

Run the following test in `org.elasticsearch.integration.DocumentLevelSecurityRandomTests`

```
public void testWithRuntimeMapping() throws Exception {
        XContentBuilder mapping = XContentFactory.jsonBuilder()
            .startObject()
            .startObject(""runtime"")
            .startObject(""field1"")
            .field(""type"", ""keyword"")
            .endObject()
            .endObject()
            .startObject(""properties"")
            .startObject(""field2"")
            .field(""type"", ""keyword"")
            .endObject()
            .endObject()
            .endObject();
        assertAcked(indicesAdmin().prepareCreate(""test"").setMapping(mapping));
        List<IndexRequestBuilder> requests = new ArrayList<>(47);
        for (int i = 1; i <= 42; i++) {
            requests.add(prepareIndex(""test"").setSource(""field1"", ""value1"", ""field2"", ""foo"" + i));
        }
        for (int i = 42; i <= 57; i++) {
            requests.add(prepareIndex(""test"").setSource(""field1"", ""value2"", ""field2"", ""foo"" + i));
        }
        indexRandom(true, requests);
        assertResponse(
            client().filterWithHeader(Collections.singletonMap(BASIC_AUTH_HEADER, basicAuthHeaderValue(""user1"", USERS_PASSWD)))
                .prepareSearch(""test""),
            searchResponse -> {
                assertThat(searchResponse.getHits().getTotalHits().value, equalTo(42L));
            }
        );
    }
```

### Logs (if relevant)

```
Caused by: java.lang.IndexOutOfBoundsException: Index 2 out of bounds for length 2
	at jdk.internal.util.Preconditions.outOfBounds(Preconditions.java:100) ~[?:?]
	at jdk.internal.util.Preconditions.outOfBoundsCheckIndex(Preconditions.java:106) ~[?:?]
	at jdk.internal.util.Preconditions.checkIndex(Preconditions.java:302) ~[?:?]
	at java.util.Objects.checkIndex(Objects.java:365) ~[?:?]
	at org.apache.lucene.codecs.lucene90.compressing.FieldsIndexReader.getStartPointer(FieldsIndexReader.java:117) ~[lucene-core-9.11.1.jar:9.11.1 0c087dfdd10e0f6f3f6faecc6af4415e671a9e69 - 2024-06-23 12:31:02]
	at org.apache.lucene.codecs.lucene90.compressing.Lucene90CompressingStoredFieldsReader.serializedDocument(Lucene90CompressingStoredFieldsReader.java:606) ~[lucene-core-9.11.1.jar:9.11.1 0c087dfdd10e0f6f3f6faecc6af4415e671a9e69 - 2024-06-23 12:31:02]
	at org.apache.lucene.codecs.lucene90.compressing.Lucene90CompressingStoredFieldsReader.document(Lucene90CompressingStoredFieldsReader.java:628) ~[lucene-core-9.11.1.jar:9.11.1 0c087dfdd10e0f6f3f6faecc6af4415e671a9e69 - 2024-06-23 12:31:02]
	at org.elasticsearch.search.internal.FieldUsageTrackingDirectoryReader$FieldUsageTrackingLeafReader$FieldUsageTrackingStoredFieldsReader.document(FieldUsageTrackingDirectoryReader.java:271) ~[elasticsearch-8.16.0-SNAPSHOT.jar:8.16.0-SNAPSHOT]
	at org.elasticsearch.index.fieldvisitor.StoredFieldLoader$ReaderStoredFieldLoader.advanceTo(StoredFieldLoader.java:204) ~[elasticsearch-8.16.0-SNAPSHOT.jar:8.16.0-SNAPSHOT]
	at org.elasticsearch.search.lookup.StoredFieldSourceProvider$LeafStoredFieldSourceProvider.getSource(StoredFieldSourceProvider.java:75) ~[elasticsearch-8.16.0-SNAPSHOT.jar:8.16.0-SNAPSHOT]
	at org.elasticsearch.search.lookup.StoredFieldSourceProvider.getSource(StoredFieldSourceProvider.java:38) ~[elasticsearch-8.16.0-SNAPSHOT.jar:8.16.0-SNAPSHOT]
	at org.elasticsearch.search.lookup.LeafSearchLookup.lambda$new$0(LeafSearchLookup.java:39) ~[elasticsearch-8.16.0-SNAPSHOT.jar:8.16.0-SNAPSHOT]
	at org.elasticsearch.script.AbstractFieldScript.extractFromSource(AbstractFieldScript.java:106) ~[elasticsearch-8.16.0-SNAPSHOT.jar:8.16.0-SNAPSHOT]
	at org.elasticsearch.script.AbstractFieldScript.emitFromSource(AbstractFieldScript.java:126) ~[elasticsearch-8.16.0-SNAPSHOT.jar:8.16.0-SNAPSHOT]
	at org.elasticsearch.script.StringFieldScript$1$1.execute(StringFieldScript.java:36) ~[elasticsearch-8.16.0-SNAPSHOT.jar:8.16.0-SNAPSHOT]
	at org.elasticsearch.script.AbstractFieldScript.runForDoc(AbstractFieldScript.java:158) ~[elasticsearch-8.16.0-SNAPSHOT.jar:8.16.0-SNAPSHOT]
	at org.elasticsearch.search.runtime.AbstractStringScriptFieldQuery.matches(AbstractStringScriptFieldQuery.java:27) ~[elasticsearch-8.16.0-SNAPSHOT.jar:8.16.0-SNAPSHOT]
	at org.elasticsearch.search.runtime.AbstractStringScriptFieldQuery.matches(AbstractStringScriptFieldQuery.java:19) ~[elasticsearch-8.16.0-SNAPSHOT.jar:8.16.0-SNAPSHOT]
	at org.elasticsearch.search.runtime.AbstractScriptFieldQuery$2.matches(AbstractScriptFieldQuery.java:96) ~[elasticsearch-8.16.0-SNAPSHOT.jar:8.16.0-SNAPSHOT]
	at org.apache.lucene.search.TwoPhaseIterator$TwoPhaseIteratorAsDocIdSetIterator.doNext(TwoPhaseIterator.java:85) ~[lucene-core-9.11.1.jar:9.11.1 0c087dfdd10e0f6f3f6faecc6af4415e671a9e69 - 2024-06-23 12:31:02]
	at org.apache.lucene.search.TwoPhaseIterator$TwoPhaseIteratorAsDocIdSetIterator.nextDoc(TwoPhaseIterator.java:73) ~[lucene-core-9.11.1.jar:9.11.1 0c087dfdd10e0f6f3f6faecc6af4415e671a9e69 - 2024-06-23 12:31:02]
	at org.apache.lucene.util.BitSet.or(BitSet.java:110) ~[lucene-core-9.11.1.jar:9.11.1 0c087dfdd10e0f6f3f6faecc6af4415e671a9e69 - 2024-06-23 12:31:02]
	at org.apache.lucene.util.FixedBitSet.or(FixedBitSet.java:326) ~[lucene-core-9.11.1.jar:9.11.1 0c087dfdd10e0f6f3f6faecc6af4415e671a9e69 - 2024-06-23 12:31:02]
	at org.apache.lucene.util.BitSet.of(BitSet.java:42) ~[lucene-core-9.11.1.jar:9.11.1 0c087dfdd10e0f6f3f6faecc6af4415e671a9e69 - 2024-06-23 12:31:02]
	at org.elasticsearch.lucene.util.BitSets.of(BitSets.java:24) ~[elasticsearch-8.16.0-SNAPSHOT.jar:8.16.0-SNAPSHOT]
	at org.elasticsearch.xpack.core.security.authz.accesscontrol.DocumentSubsetBitsetCache.computeBitSet(DocumentSubsetBitsetCache.java:286) ~[x-pack-core-8.16.0-SNAPSHOT.jar:8.16.0-SNAPSHOT]
	at org.elasticsearch.xpack.core.security.authz.accesscontrol.DocumentSubsetBitsetCache.lambda$getBitSet$4(DocumentSubsetBitsetCache.java:244) ~[x-pack-core-8.16.0-SNAPSHOT.jar:8.16.0-SNAPSHOT]
	at org.elasticsearch.common.cache.Cache.computeIfAbsent(Cache.java:439) ~[elasticsearch-8.16.0-SNAPSHOT.jar:8.16.0-SNAPSHOT]
	at org.elasticsearch.xpack.core.security.authz.accesscontrol.DocumentSubsetBitsetCache.getBitSet(DocumentSubsetBitsetCache.java:235) ~[x-pack-core-8.16.0-SNAPSHOT.jar:8.16.0-SNAPSHOT]
	at org.elasticsearch.xpack.core.security.authz.accesscontrol.DocumentSubsetReader.computeNumDocsIfNeeded(DocumentSubsetReader.java:183) ~[x-pack-core-8.16.0-SNAPSHOT.jar:8.16.0-SNAPSHOT]
	at org.elasticsearch.xpack.core.security.authz.accesscontrol.DocumentSubsetReader.numDocs(DocumentSubsetReader.java:213) ~[x-pack-core-8.16.0-SNAPSHOT.jar:8.16.0-SNAPSHOT]
	at org.apache.lucene.index.BaseCompositeReader.numDocs(BaseCompositeReader.java:154) ~[lucene-core-9.11.1.jar:9.11.1 0c087dfdd10e0f6f3f6faecc6af4415e671a9e69 - 2024-06-23 12:31:02]
	at org.elasticsearch.search.query.QueryPhaseCollectorManager.createQueryPhaseCollectorManager(QueryPhaseCollectorManager.java:224) ~[elasticsearch-8.16.0-SNAPSHOT.jar:8.16.0-SNAPSHOT]
	at org.elasticsearch.search.query.QueryPhase.addCollectorsAndSearch(QueryPhase.java:193) ~[elasticsearch-8.16.0-SNAPSHOT.jar:8.16.0-SNAPSHOT]
	at org.elasticsearch.search.query.QueryPhase.executeQuery(QueryPhase.java:135) ~[elasticsearch-8.16.0-SNAPSHOT.jar:8.16.0-SNAPSHOT]
	at org.elasticsearch.search.query.QueryPhase.execute(QueryPhase.java:62) ~[elasticsearch-8.16.0-SNAPSHOT.jar:8.16.0-SNAPSHOT]
	at org.elasticsearch.search.SearchService.loadOrExecuteQueryPhase(SearchService.java:532) ~[elasticsearch-8.16.0-SNAPSHOT.jar:8.16.0-SNAPSHOT]
	at org.elasticsearch.search.SearchService.executeQueryPhase(SearchService.java:690) ~[elasticsearch-8.16.0-SNAPSHOT.jar:8.16.0-SNAPSHOT]
	at org.elasticsearch.search.SearchService.lambda$executeQueryPhase$2(SearchService.java:559) ~[elasticsearch-8.16.0-SNAPSHOT.jar:8.16.0-SNAPSHOT]
	at org.elasticsearch.action.ActionRunnable$3.accept(ActionRunnable.java:78) ~[elasticsearch-8.16.0-SNAPSHOT.jar:8.16.0-SNAPSHOT]
	at org.elasticsearch.action.ActionRunnable$3.accept(ActionRunnable.java:75) ~[elasticsearch-8.16.0-SNAPSHOT.jar:8.16.0-SNAPSHOT]
	at org.elasticsearch.action.ActionRunnable$4.doRun(ActionRunnable.java:100) ~[elasticsearch-8.16.0-SNAPSHOT.jar:8.16.0-SNAPSHOT]
	at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:26) ~[elasticsearch-8.16.0-SNAPSHOT.jar:8.16.0-SNAPSHOT]
```

Here are some 8.13 logs (we trip a `maxDoc` assertion):

```
d‚Äôag. 06, 2024 1:58:04 PM com.carrotsearch.randomizedtesting.RandomizedRunner$QueueUncaughtExceptionsHandler uncaughtException
WARNING: Uncaught exception in thread: Thread[#185,elasticsearch[node_s5][search][T#2],5,TGRP-DocumentLevelSecurityRandomTests]
java.lang.AssertionError
	at __randomizedtesting.SeedInfo.seed([8F34F6DFB7E6B7B]:0)
	at org.apache.lucene.tests.codecs.asserting.AssertingStoredFieldsFormat$AssertingStoredFieldsReader.document(AssertingStoredFieldsFormat.java:76)
	at org.elasticsearch.search.internal.FieldUsageTrackingDirectoryReader$FieldUsageTrackingLeafReader$FieldUsageTrackingStoredFieldsReader.document(FieldUsageTrackingDirectoryReader.java:271)
	at org.elasticsearch.index.fieldvisitor.StoredFieldLoader$ReaderStoredFieldLoader.advanceTo(StoredFieldLoader.java:204)
	at org.elasticsearch.search.lookup.StoredFieldSourceProvider$LeafStoredFieldSourceProvider.getSource(StoredFieldSourceProvider.java:75)
	at org.elasticsearch.search.lookup.StoredFieldSourceProvider.getSource(StoredFieldSourceProvider.java:38)
	at org.elasticsearch.search.lookup.LeafSearchLookup.lambda$new$0(LeafSearchLookup.java:39)
	at org.elasticsearch.script.AbstractFieldScript.extractFromSource(AbstractFieldScript.java:106)
	at org.elasticsearch.script.AbstractFieldScript.emitFromSource(AbstractFieldScript.java:126)
	at org.elasticsearch.script.StringFieldScript$1$1.execute(StringFieldScript.java:36)
	at org.elasticsearch.script.AbstractFieldScript.runForDoc(AbstractFieldScript.java:158)
	at org.elasticsearch.search.runtime.AbstractStringScriptFieldQuery.matches(AbstractStringScriptFieldQuery.java:27)
	at org.elasticsearch.search.runtime.AbstractStringScriptFieldQuery.matches(AbstractStringScriptFieldQuery.java:19)
	at org.elasticsearch.search.runtime.AbstractScriptFieldQuery$2.matches(AbstractScriptFieldQuery.java:96)
	at org.apache.lucene.search.TwoPhaseIterator$TwoPhaseIteratorAsDocIdSetIterator.doNext(TwoPhaseIterator.java:85)
	at org.apache.lucene.search.TwoPhaseIterator$TwoPhaseIteratorAsDocIdSetIterator.nextDoc(TwoPhaseIterator.java:73)
	at org.apache.lucene.util.BitSet.or(BitSet.java:110)
	at org.apache.lucene.util.FixedBitSet.or(FixedBitSet.java:326)
	at org.apache.lucene.util.BitSet.of(BitSet.java:42)
	at org.elasticsearch.lucene.util.BitSets.of(BitSets.java:24)
	at org.elasticsearch.xpack.core.security.authz.accesscontrol.DocumentSubsetBitsetCache.computeBitSet(DocumentSubsetBitsetCache.java:286)
	at org.elasticsearch.xpack.core.security.authz.accesscontrol.DocumentSubsetBitsetCache.
```",benwtrent,closed,"['>bug', ':Security/Authorization', 'Team:Security', 'priority:high', 'Team:Search Foundations', ':Search Foundations/Search']",https://github.com/elastic/elasticsearch/issues/111637,2024-08-06T14:30:07Z,2,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/111637,"{
  ""application_resource"": ""yes""
}"
99,111132,[CI] DockerTests test600Interrupt failing,"**Build Scans:**
- [elasticsearch-periodic-packaging #3172 / rhel-7_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/fexh4gdsq7uki)
- [elasticsearch-periodic-packaging #3172 / ubuntu-2204_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/7xv7rpj3l63dq)
- [elasticsearch-periodic-packaging #3172 / oraclelinux-8_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/b6yhmoxtb7i3k)
- [elasticsearch-periodic-packaging #3172 / centos-7_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/wetp4bh6thxeo)
- [elasticsearch-periodic-packaging #3172 / sles-15_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/zrpv72fagatok)
- [elasticsearch-periodic-packaging #3172 / oraclelinux-8_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/b6yhmoxtb7i3k)
- [elasticsearch-periodic-packaging #3172 / rhel-9_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/uojgbgroc4zyq)
- [elasticsearch-periodic-packaging #3172 / opensuse-leap-15_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/3gmu5uw6btjhm)
- [elasticsearch-periodic-packaging #3172 / almalinux-8_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/p6dlucwiz7ph6)
- [elasticsearch-periodic-packaging #3172 / rocky-8_packaging-tests-unix](https://gradle-enterprise.elastic.co/s/tiy3rrnd2llmo)

**Reproduction Line:**
```
null
```

**Applicable branches:**
8.15

**Reproduces locally?:**
N/A

**Failure History:**
[See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&_a=(controlGroupInput:(chainingSystem:HIERARCHICAL,controlStyle:twoLine,ignoreParentSettings:(ignoreFilters:!f,ignoreQuery:!f,ignoreTimerange:!f,ignoreValidations:!t),panels:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(explicitInput:(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,enhancements:(),fieldName:task.keyword,grow:!t,id:'0c0c9cb8-ccd2-45c6-9b13-96bac4abc542',searchTechnique:wildcard,selectedOptions:!(),singleSelect:!t,title:'Gradle%20Task',width:medium),grow:!t,order:0,type:optionsListControl,width:small),'144933da-5c1b-4257-a969-7f43455a7901':(explicitInput:(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,enhancements:(),fieldName:name.keyword,grow:!t,id:'144933da-5c1b-4257-a969-7f43455a7901',searchTechnique:wildcard,selectedOptions:!('test600Interrupt'),title:Test,width:medium),grow:!t,order:2,type:optionsListControl,width:medium),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(explicitInput:(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,enhancements:(),fieldName:className.keyword,grow:!t,id:'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850',searchTechnique:wildcard,selectedOptions:!('org.elasticsearch.packaging.test.DockerTests'),title:Suite,width:medium),grow:!t,order:1,type:optionsListControl,width:medium)))))

**Failure Message:**
```
java.lang.AssertionError: Container logs should contain stopping ...
Expected: a string containing ""stopping ...""
     but: was ""Created elasticsearch keystore in /usr/share/elasticsearch/config/elasticsearch.keystore
{""@timestamp"":""2024-07-23T23:42:24.690Z"", ""log.level"": ""INFO"", ""message"":""Using native vector library; to disable start with -Dorg.elasticsearch.nativeaccess.enableVectorLibrary=false"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.nativeaccess.NativeAccess"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:24.798Z"", ""log.level"": ""INFO"", ""message"":""Using [jdk] native provider and native methods for [Linux]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.nativeaccess.NativeAccess"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:25.172Z"", ""log.level"": ""INFO"", ""message"":""Java vector incubator API enabled; uses preferredBitSize=256; FMA enabled"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.apache.lucene.internal.vectorization.PanamaVectorizationProvider"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:26.293Z"", ""log.level"": ""INFO"", ""message"":""version[8.15.0-SNAPSHOT], pid[315], build[docker/c9af95cc9eb2bf27ce98047cd4a17f036cc2add2/2024-07-23T20:15:30.662792919Z], OS[Linux/3.10.0-1160.119.1.el7.x86_64/amd64], JVM[Oracle Corporation/OpenJDK 64-Bit Server VM/22.0.1/22.0.1+8-16]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.node.Node"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:26.294Z"", ""log.level"": ""INFO"", ""message"":""JVM home [/usr/share/elasticsearch/jdk], using bundled JDK [true]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.node.Node"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:26.294Z"", ""log.level"": ""INFO"", ""message"":""JVM arguments [-Des.networkaddress.cache.ttl=60, -Des.networkaddress.cache.negative.ttl=10, -Djava.security.manager=allow, -XX:+AlwaysPreTouch, -Xss1m, -Djava.awt.headless=true, -Dfile.encoding=UTF-8, -Djna.nosys=true, -XX:-OmitStackTraceInFastThrow, -Dio.netty.noUnsafe=true, -Dio.netty.noKeySetOptimization=true, -Dio.netty.recycler.maxCapacityPerThread=0, -Dlog4j.shutdownHookEnabled=false, -Dlog4j2.disable.jmx=true, -Dlog4j2.formatMsgNoLookups=true, -Djava.locale.providers=SPI,COMPAT, --add-opens=java.base/java.io=org.elasticsearch.preallocate, --enable-native-access=org.elasticsearch.nativeaccess,org.apache.lucene.core, -Des.cgroups.hierarchy.override=/, -XX:ReplayDataFile=logs/replay_pid%p.log, -Djava.library.path=/usr/share/elasticsearch/lib/platform/linux-x64:/usr/java/packages/lib:/usr/lib64:/lib64:/lib:/usr/lib, -Djna.library.path=/usr/share/elasticsearch/lib/platform/linux-x64:/usr/java/packages/lib:/usr/lib64:/lib64:/lib:/usr/lib, -Des.distribution.type=docker, -XX:+UnlockDiagnosticVMOptions, -XX:G1NumCollectionsKeepPinned=10000000, -XX:+UseG1GC, -Djava.io.tmpdir=/tmp/elasticsearch-13018149644747155157, --add-modules=jdk.incubator.vector, -XX:+HeapDumpOnOutOfMemoryError, -XX:+ExitOnOutOfMemoryError, -XX:HeapDumpPath=data, -XX:ErrorFile=logs/hs_err_pid%p.log, -Xlog:gc*,gc+age=trace,safepoint:file=logs/gc.log:utctime,level,pid,tags:filecount=32,filesize=64m, -Xms1024m, -Xmx1024m, -XX:MaxDirectMemorySize=536870912, -XX:G1HeapRegionSize=4m, -XX:InitiatingHeapOccupancyPercent=30, -XX:G1ReservePercent=15, --module-path=/usr/share/elasticsearch/lib, --add-modules=jdk.net, --add-modules=ALL-MODULE-PATH, -Djdk.module.main=org.elasticsearch.server]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.node.Node"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:26.295Z"", ""log.level"": ""INFO"", ""message"":""Default Locale [en_US]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.node.Node"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:26.295Z"", ""log.level"": ""WARN"", ""message"":""version [8.15.0-SNAPSHOT] is a pre-release version of Elasticsearch and is not suitable for production"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.node.Node"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.146Z"", ""log.level"": ""INFO"", ""message"":""loaded module [repository-url]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.146Z"", ""log.level"": ""INFO"", ""message"":""loaded module [rest-root]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.147Z"", ""log.level"": ""INFO"", ""message"":""loaded module [x-pack-core]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.147Z"", ""log.level"": ""INFO"", ""message"":""loaded module [x-pack-redact]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.147Z"", ""log.level"": ""INFO"", ""message"":""loaded module [ingest-user-agent]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.147Z"", ""log.level"": ""INFO"", ""message"":""loaded module [x-pack-async-search]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.148Z"", ""log.level"": ""INFO"", ""message"":""loaded module [test-error-query]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.148Z"", ""log.level"": ""INFO"", ""message"":""loaded module [x-pack-monitoring]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.148Z"", ""log.level"": ""INFO"", ""message"":""loaded module [repository-s3]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.148Z"", ""log.level"": ""INFO"", ""message"":""loaded module [x-pack-analytics]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.149Z"", ""log.level"": ""INFO"", ""message"":""loaded module [x-pack-esql-core]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.149Z"", ""log.level"": ""INFO"", ""message"":""loaded module [x-pack-ent-search]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.149Z"", ""log.level"": ""INFO"", ""message"":""loaded module [x-pack-autoscaling]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.149Z"", ""log.level"": ""INFO"", ""message"":""loaded module [lang-painless]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.149Z"", ""log.level"": ""INFO"", ""message"":""loaded module [x-pack-ml]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.150Z"", ""log.level"": ""INFO"", ""message"":""loaded module [test-die-with-dignity]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.150Z"", ""log.level"": ""INFO"", ""message"":""loaded module [lang-mustache]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.150Z"", ""log.level"": ""INFO"", ""message"":""loaded module [legacy-geo]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.150Z"", ""log.level"": ""INFO"", ""message"":""loaded module [x-pack-ql]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.150Z"", ""log.level"": ""INFO"", ""message"":""loaded module [rank-rrf]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.151Z"", ""log.level"": ""INFO"", ""message"":""loaded module [analysis-common]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.151Z"", ""log.level"": ""INFO"", ""message"":""loaded module [health-shards-availability]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.151Z"", ""log.level"": ""INFO"", ""message"":""loaded module [transport-netty4]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.151Z"", ""log.level"": ""INFO"", ""message"":""loaded module [aggregations]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.151Z"", ""log.level"": ""INFO"", ""message"":""loaded module [ingest-common]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.152Z"", ""log.level"": ""INFO"", ""message"":""loaded module [frozen-indices]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.152Z"", ""log.level"": ""INFO"", ""message"":""loaded module [x-pack-identity-provider]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.152Z"", ""log.level"": ""INFO"", ""message"":""loaded module [x-pack-shutdown]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.152Z"", ""log.level"": ""INFO"", ""message"":""loaded module [x-pack-text-structure]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.152Z"", ""log.level"": ""INFO"", ""message"":""loaded module [snapshot-repo-test-kit]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.153Z"", ""log.level"": ""INFO"", ""message"":""loaded module [ml-package-loader]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.153Z"", ""log.level"": ""INFO"", ""message"":""loaded module [test-delayed-aggs]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.153Z"", ""log.level"": ""INFO"", ""message"":""loaded module [kibana]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.153Z"", ""log.level"": ""INFO"", ""message"":""loaded module [test-esql-heap-attack]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.153Z"", ""log.level"": ""INFO"", ""message"":""loaded module [constant-keyword]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.154Z"", ""log.level"": ""INFO"", ""message"":""loaded module [x-pack-logstash]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.154Z"", ""log.level"": ""INFO"", ""message"":""loaded module [x-pack-ccr]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.154Z"", ""log.level"": ""INFO"", ""message"":""loaded module [x-pack-graph]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.155Z"", ""log.level"": ""INFO"", ""message"":""loaded module [x-pack-esql]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.155Z"", ""log.level"": ""INFO"", ""message"":""loaded module [parent-join]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.155Z"", ""log.level"": ""INFO"", ""message"":""loaded module [counted-keyword]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.155Z"", ""log.level"": ""INFO"", ""message"":""loaded module [x-pack-enrich]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.155Z"", ""log.level"": ""INFO"", ""message"":""loaded module [repositories-metering-api]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.156Z"", ""log.level"": ""INFO"", ""message"":""loaded module [transform]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.156Z"", ""log.level"": ""INFO"", ""message"":""loaded module [repository-azure]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.156Z"", ""log.level"": ""INFO"", ""message"":""loaded module [repository-gcs]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.156Z"", ""log.level"": ""INFO"", ""message"":""loaded module [spatial]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.156Z"", ""log.level"": ""INFO"", ""message"":""loaded module [apm]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.156Z"", ""log.level"": ""INFO"", ""message"":""loaded module [mapper-extras]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.157Z"", ""log.level"": ""INFO"", ""message"":""loaded module [mapper-version]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.157Z"", ""log.level"": ""INFO"", ""message"":""loaded module [test-jvm-crash]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.157Z"", ""log.level"": ""INFO"", ""message"":""loaded module [x-pack-rollup]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.157Z"", ""log.level"": ""INFO"", ""message"":""loaded module [percolator]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.158Z"", ""log.level"": ""INFO"", ""message"":""loaded module [data-streams]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.158Z"", ""log.level"": ""INFO"", ""message"":""loaded module [x-pack-stack]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.158Z"", ""log.level"": ""INFO"", ""message"":""loaded module [rank-eval]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.158Z"", ""log.level"": ""INFO"", ""message"":""loaded module [reindex]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.158Z"", ""log.level"": ""INFO"", ""message"":""loaded module [test-apm-integration]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.159Z"", ""log.level"": ""INFO"", ""message"":""loaded module [x-pack-security]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.159Z"", ""log.level"": ""INFO"", ""message"":""loaded module [blob-cache]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.159Z"", ""log.level"": ""INFO"", ""message"":""loaded module [searchable-snapshots]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.159Z"", ""log.level"": ""INFO"", ""message"":""loaded module [x-pack-slm]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.159Z"", ""log.level"": ""INFO"", ""message"":""loaded module [x-pack-geoip-enterprise-downloader]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.160Z"", ""log.level"": ""INFO"", ""message"":""loaded module [snapshot-based-recoveries]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.160Z"", ""log.level"": ""INFO"", ""message"":""loaded module [test-latency-simulating-directory]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.160Z"", ""log.level"": ""INFO"", ""message"":""loaded module [x-pack-watcher]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.160Z"", ""log.level"": ""INFO"", ""message"":""loaded module [old-lucene-versions]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.160Z"", ""log.level"": ""INFO"", ""message"":""loaded module [x-pack-ilm]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.161Z"", ""log.level"": ""INFO"", ""message"":""loaded module [x-pack-inference]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.161Z"", ""log.level"": ""INFO"", ""message"":""loaded module [x-pack-voting-only-node]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.161Z"", ""log.level"": ""INFO"", ""message"":""loaded module [x-pack-deprecation]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.161Z"", ""log.level"": ""INFO"", ""message"":""loaded module [x-pack-fleet]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.162Z"", ""log.level"": ""INFO"", ""message"":""loaded module [x-pack-aggregate-metric]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.162Z"", ""log.level"": ""INFO"", ""message"":""loaded module [x-pack-downsample]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.162Z"", ""log.level"": ""INFO"", ""message"":""loaded module [x-pack-profiling]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.162Z"", ""log.level"": ""INFO"", ""message"":""loaded module [ingest-geoip]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.162Z"", ""log.level"": ""INFO"", ""message"":""loaded module [x-pack-write-load-forecaster]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.163Z"", ""log.level"": ""INFO"", ""message"":""loaded module [search-business-rules]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.163Z"", ""log.level"": ""INFO"", ""message"":""loaded module [ingest-attachment]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.163Z"", ""log.level"": ""INFO"", ""message"":""loaded module [wildcard]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.163Z"", ""log.level"": ""INFO"", ""message"":""loaded module [x-pack-apm-data]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.163Z"", ""log.level"": ""INFO"", ""message"":""loaded module [unsigned-long]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.164Z"", ""log.level"": ""INFO"", ""message"":""loaded module [x-pack-sql]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.164Z"", ""log.level"": ""INFO"", ""message"":""loaded module [runtime-fields-common]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.164Z"", ""log.level"": ""INFO"", ""message"":""loaded module [x-pack-async]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.164Z"", ""log.level"": ""INFO"", ""message"":""loaded module [vector-tile]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.164Z"", ""log.level"": ""INFO"", ""message"":""loaded module [lang-expression]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.164Z"", ""log.level"": ""INFO"", ""message"":""loaded module [x-pack-eql]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.plugins.PluginsService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:31.406Z"", ""log.level"": ""INFO"", ""message"":""The current build is a snapshot, feature flag [failure_store] is enabled"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.common.util.FeatureFlag"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:32.613Z"", ""log.level"": ""INFO"", ""message"":""The current build is a snapshot, feature flag [madv_random] is enabled"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.common.util.FeatureFlag"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:32.942Z"", ""log.level"": ""INFO"", ""message"":""using [1] data paths, mounts [[/ (overlay)]], net usable_space [261.3gb], net total_space [349.7gb], types [overlay]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.env.NodeEnvironment"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:32.942Z"", ""log.level"": ""INFO"", ""message"":""heap size [1gb], compressed ordinary object pointers [true]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.env.NodeEnvironment"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:32.954Z"", ""log.level"": ""INFO"", ""message"":""node name [078c56155cc0], node ID [EJGhdb6WS9SQZiTVfDI8TQ], cluster name [docker-cluster], roles [data_frozen, ingest, data_cold, data, remote_cluster_client, master, data_warm, data_content, transform, data_hot, ml]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.node.Node"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:36.875Z"", ""log.level"": ""INFO"", ""message"":""The current build is a snapshot, feature flag [connector_secrets] is enabled"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.common.util.FeatureFlag"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:38.828Z"", ""log.level"": ""INFO"", ""message"":""using rate limit [40mb] with [default=40mb, read=0b, write=0b, max=0b]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.indices.recovery.RecoverySettings"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:39.030Z"", ""log.level"": ""INFO"", ""message"":""Registered local node features [data_stream.auto_sharding, data_stream.lifecycle.global_retention, data_stream.rollover.lazy, desired_node.version_deprecated, esql.agg_values, esql.async_query, esql.base64_decode_encode, esql.casting_operator, esql.counter_types, esql.disable_nullable_opts, esql.from_options, esql.metadata_fields, esql.metrics_counter_fields, esql.metrics_syntax, esql.mv_ordering_sorted_ascending, esql.mv_sort, esql.spatial_points_from_source, esql.spatial_shapes, esql.st_centroid_agg, esql.st_contains_within, esql.st_disjoint, esql.st_intersects, esql.st_x_y, esql.string_literal_auto_casting, esql.string_literal_auto_casting_extended, esql.timespan_abbreviations, features_supported, file_settings, geoip.downloader.database.configuration, health.dsl.info, health.extended_repository_indicator, knn_retriever_supported, license-trial-independent-version, mapper.index_sorting_on_nested, mapper.keyword_dimension_ignore_above, mapper.pass_through_priority, mapper.range.null_values_off_by_one_fix, mapper.source.synthetic_source_fallback, mapper.track_ignored_source, mapper.vectors.bit_vectors, mapper.vectors.int4_quantization, rest.capabilities_action, retrievers_supported, rrf_retriever_supported, script.hamming, search.vectors.k_param_supported, security.migration_framework, security.roles_metadata_flattened, standard_retriever_supported, stats.include_disk_thresholds, text_similarity_reranker_retriever_supported, unified_highlighter_matched_fields, usage.data_tiers.precalculate_stats]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.features.FeatureService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:39.684Z"", ""log.level"": ""INFO"", ""message"":""[controller/355] [Main.cc@123] controller (64 bit): Version 8.15.0-SNAPSHOT (Build 64f00009177815) Copyright (c) 2024 Elasticsearch BV"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""ml-cpp-log-tail-thread"",""log.logger"":""org.elasticsearch.xpack.ml.process.logging.CppLogMessageHandler"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:39.981Z"", ""log.level"": ""INFO"", ""message"":""Sending apm metrics is disabled"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.telemetry.apm.APM"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:39.982Z"", ""log.level"": ""INFO"", ""message"":""Sending apm tracing is disabled"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.telemetry.apm.APM"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:40.031Z"", ""log.level"": ""INFO"", ""message"":""Security is enabled"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.xpack.security.Security"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:40.588Z"", ""log.level"": ""INFO"", ""message"":""parsed [0] roles from file [/usr/share/elasticsearch/config/roles.yml]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.xpack.security.authz.store.FileRolesStore"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:40.850Z"", ""log.level"": ""INFO"", ""message"":""Auto-configuration will not generate a password for the elastic built-in superuser, as we cannot  determine if there is a terminal attached to the elasticsearch process. You can use the `bin/elasticsearch-reset-password` tool to set the password for the elastic user."", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.xpack.security.InitialNodeSecurityAutoConfiguration"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:41.225Z"", ""log.level"": ""INFO"", ""message"":""Watcher initialized components at 2024-07-23T23:42:41.225Z"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.xpack.watcher.Watcher"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:41.337Z"", ""log.level"": ""INFO"", ""message"":""Profiling is enabled"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.xpack.profiling.ProfilingPlugin"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:41.366Z"", ""log.level"": ""INFO"", ""message"":""profiling index templates will not be installed or reinstalled"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.xpack.profiling.ProfilingPlugin"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:41.373Z"", ""log.level"": ""INFO"", ""message"":""APM ingest plugin is enabled"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.xpack.apmdata.APMPlugin"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:41.422Z"", ""log.level"": ""INFO"", ""message"":""APM index template registry is enabled"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.xpack.apmdata.APMIndexTemplateRegistry"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:41.785Z"", ""log.level"": ""INFO"", ""message"":""The current build is a snapshot, feature flag [connector_api] is enabled"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.common.util.FeatureFlag"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:42.191Z"", ""log.level"": ""INFO"", ""message"":""creating NettyAllocator with the following configs: [name=unpooled, suggested_max_allocation_size=1mb, factors={es.unsafe.use_unpooled_allocator=null, g1gc_enabled=true, g1gc_region_size=4mb, heap_size=1gb}]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.transport.netty4.NettyAllocator"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:42.268Z"", ""log.level"": ""INFO"", ""message"":""using discovery type [multi-node] and seed hosts providers [settings]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.discovery.DiscoveryModule"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:43.864Z"", ""log.level"": ""INFO"", ""message"":""initialized"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.node.Node"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:43.865Z"", ""log.level"": ""INFO"", ""message"":""starting ..."", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.node.Node"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:43.887Z"", ""log.level"": ""INFO"", ""message"":""persistent cache index loaded"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.xpack.searchablesnapshots.cache.full.PersistentCache"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:43.887Z"", ""log.level"": ""INFO"", ""message"":""deprecation component started"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.xpack.deprecation.logging.DeprecationIndexingComponent"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:43.993Z"", ""log.level"": ""INFO"", ""message"":""publish_address {172.17.0.3:9300}, bound_addresses {[::]:9300}"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.transport.TransportService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:44.128Z"", ""log.level"": ""INFO"", ""message"":""bound or publishing to a non-loopback address, enforcing bootstrap checks"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.bootstrap.BootstrapChecks"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:44.133Z"", ""log.level"": ""INFO"", ""message"":""this node has not joined a bootstrapped cluster yet; [cluster.initial_master_nodes] is set to [078c56155cc0]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.cluster.coordination.ClusterBootstrapService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:44.142Z"", ""log.level"": ""INFO"", ""message"":""setting initial configuration to VotingConfiguration{EJGhdb6WS9SQZiTVfDI8TQ}"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.cluster.coordination.Coordinator"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:44.330Z"", ""log.level"": ""INFO"", ""message"":""elected-as-master ([1] nodes joined in term 1)[_FINISH_ELECTION_, {078c56155cc0}{EJGhdb6WS9SQZiTVfDI8TQ}{2_judpfGQHuXc-nkAtVScg}{078c56155cc0}{172.17.0.3}{172.17.0.3:9300}{cdfhilmrstw}{8.15.0}{7000099-8512000} completing election], term: 1, version: 1, delta: master node changed {previous [], current [{078c56155cc0}{EJGhdb6WS9SQZiTVfDI8TQ}{2_judpfGQHuXc-nkAtVScg}{078c56155cc0}{172.17.0.3}{172.17.0.3:9300}{cdfhilmrstw}{8.15.0}{7000099-8512000}]}"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.service.MasterService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:44.373Z"", ""log.level"": ""INFO"", ""message"":""cluster UUID set to [k7ezh5GJSFK-XGURJVQrTQ]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][cluster_coordination][T#1]"",""log.logger"":""org.elasticsearch.cluster.coordination.CoordinationState"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:44.399Z"", ""log.level"": ""INFO"", ""message"":""master node changed {previous [], current [{078c56155cc0}{EJGhdb6WS9SQZiTVfDI8TQ}{2_judpfGQHuXc-nkAtVScg}{078c56155cc0}{172.17.0.3}{172.17.0.3:9300}{cdfhilmrstw}{8.15.0}{7000099-8512000}]}, term: 1, version: 1, reason: Publication{term=1, version=1}"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][clusterApplierService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.service.ClusterApplierService"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:44.460Z"", ""log.level"": ""INFO"", ""message"":""publish_address {172.17.0.3:9200}, bound_addresses {[::]:9200}"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.http.AbstractHttpServerTransport"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:44.460Z"", ""log.level"": ""INFO"", ""message"":""node-join: [{078c56155cc0}{EJGhdb6WS9SQZiTVfDI8TQ}{2_judpfGQHuXc-nkAtVScg}{078c56155cc0}{172.17.0.3}{172.17.0.3:9300}{cdfhilmrstw}{8.15.0}{7000099-8512000}] with reason [completing election]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.coordination.NodeJoinExecutor"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:44.490Z"", ""log.level"": ""INFO"", ""message"":""started {078c56155cc0}{EJGhdb6WS9SQZiTVfDI8TQ}{2_judpfGQHuXc-nkAtVScg}{078c56155cc0}{172.17.0.3}{172.17.0.3:9300}{cdfhilmrstw}{8.15.0}{7000099-8512000}{ml.allocated_processors=8, ml.machine_memory=2147483648, transform.config_version=10.0.0, xpack.installed=true, ml.config_version=12.0.0, ml.max_jvm_size=1073741824, ml.allocated_processors_double=8.0}"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""main"",""log.logger"":""org.elasticsearch.node.Node"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:44.692Z"", ""log.level"": ""INFO"", ""message"":""starting file watcher ..."", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][clusterApplierService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.common.file.AbstractFileWatchingService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:44.698Z"", ""log.level"": ""INFO"", ""message"":""file settings service up and running [tid=90]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[file-watcher[/usr/share/elasticsearch/config/operator/settings.json]]"",""log.logger"":""org.elasticsearch.common.file.AbstractFileWatchingService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:44.698Z"", ""log.level"": ""INFO"", ""message"":""setting file [/usr/share/elasticsearch/config/operator/settings.json] not found, initializing [file_settings] as empty"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[file-watcher[/usr/share/elasticsearch/config/operator/settings.json]]"",""log.logger"":""org.elasticsearch.reservedstate.service.FileSettingsService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:44.699Z"", ""log.level"": ""INFO"", ""message"":""recovered [0] indices into cluster_state"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.gateway.GatewayService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:44.941Z"", ""log.level"": ""INFO"", ""message"":""adding template [.monitoring-es] for index patterns [.monitoring-es-7-*]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:44.954Z"", ""log.level"": ""INFO"", ""message"":""adding template [.monitoring-alerts-7] for index patterns [.monitoring-alerts-7]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:44.968Z"", ""log.level"": ""INFO"", ""message"":""adding template [.monitoring-kibana] for index patterns [.monitoring-kibana-7-*]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:44.996Z"", ""log.level"": ""INFO"", ""message"":""adding template [.monitoring-beats] for index patterns [.monitoring-beats-7-*]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.013Z"", ""log.level"": ""INFO"", ""message"":""adding template [.monitoring-logstash] for index patterns [.monitoring-logstash-7-*]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.079Z"", ""log.level"": ""INFO"", ""message"":""adding index template [.monitoring-es-mb] for index patterns [.monitoring-es-8-*]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.101Z"", ""log.level"": ""INFO"", ""message"":""adding index template [.monitoring-logstash-mb] for index patterns [.monitoring-logstash-8-*]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.126Z"", ""log.level"": ""INFO"", ""message"":""adding component template [behavioral_analytics-events-mappings]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.144Z"", ""log.level"": ""INFO"", ""message"":""adding component template [elastic-connectors-mappings]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.163Z"", ""log.level"": ""INFO"", ""message"":""adding index template [.monitoring-ent-search-mb] for index patterns [.monitoring-ent-search-8-*]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.170Z"", ""log.level"": ""INFO"", ""message"":""adding component template [elastic-connectors-settings]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.192Z"", ""log.level"": ""INFO"", ""message"":""adding index template [.monitoring-kibana-mb] for index patterns [.monitoring-kibana-8-*]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.228Z"", ""log.level"": ""INFO"", ""message"":""adding index template [.monitoring-beats-mb] for index patterns [.monitoring-beats-8-*]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.260Z"", ""log.level"": ""INFO"", ""message"":""adding index template [.ml-anomalies-] for index patterns [.ml-anomalies-*]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.274Z"", ""log.level"": ""INFO"", ""message"":""adding index template [.ml-stats] for index patterns [.ml-stats-*]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.283Z"", ""log.level"": ""INFO"", ""message"":""adding index template [.ml-state] for index patterns [.ml-state*]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.293Z"", ""log.level"": ""INFO"", ""message"":""adding component template [elastic-connectors-sync-jobs-mappings]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.306Z"", ""log.level"": ""INFO"", ""message"":""adding index template [.ml-notifications-000002] for index patterns [.ml-notifications-000002]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.315Z"", ""log.level"": ""INFO"", ""message"":""adding index template [search-acl-filter] for index patterns [.search-acl-filter-*]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.322Z"", ""log.level"": ""INFO"", ""message"":""adding component template [elastic-connectors-sync-jobs-settings]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.334Z"", ""log.level"": ""INFO"", ""message"":""adding component template [logs-mappings]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.341Z"", ""log.level"": ""INFO"", ""message"":""adding component template [metrics-tsdb-settings]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.348Z"", ""log.level"": ""INFO"", ""message"":""adding component template [synthetics-mappings]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.355Z"", ""log.level"": ""INFO"", ""message"":""adding component template [synthetics-settings]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.360Z"", ""log.level"": ""INFO"", ""message"":""adding component template [metrics-settings]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.373Z"", ""log.level"": ""INFO"", ""message"":""adding component template [data-streams-mappings]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.382Z"", ""log.level"": ""INFO"", ""message"":""adding component template [metrics-mappings]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.392Z"", ""log.level"": ""INFO"", ""message"":""adding component template [ecs@dynamic_templates]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.399Z"", ""log.level"": ""INFO"", ""message"":""adding component template [synthetics@settings]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.409Z"", ""log.level"": ""INFO"", ""message"":""adding component template [ecs@mappings]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.418Z"", ""log.level"": ""INFO"", ""message"":""adding component template [data-streams@mappings]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.425Z"", ""log.level"": ""INFO"", ""message"":""adding component template [logs@mappings]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.432Z"", ""log.level"": ""INFO"", ""message"":""adding component template [synthetics@mappings]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.441Z"", ""log.level"": ""INFO"", ""message"":""adding component template [metrics@mappings]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.447Z"", ""log.level"": ""INFO"", ""message"":""adding component template [metrics@tsdb-settings]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.452Z"", ""log.level"": ""INFO"", ""message"":""adding component template [metrics@settings]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.470Z"", ""log.level"": ""INFO"", ""message"":""adding index template [.watch-history-16] for index patterns [.watcher-history-16*]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.482Z"", ""log.level"": ""INFO"", ""message"":""adding index template [.slm-history-7] for index patterns [.slm-history-7*]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.492Z"", ""log.level"": ""INFO"", ""message"":""adding index template [ilm-history-7] for index patterns [ilm-history-7*]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.499Z"", ""log.level"": ""INFO"", ""message"":""adding component template [.deprecation-indexing-settings]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.510Z"", ""log.level"": ""INFO"", ""message"":""adding index template [.fleet-fileds-fromhost-data] for index patterns [.fleet-fileds-fromhost-data-*]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.520Z"", ""log.level"": ""INFO"", ""message"":""adding index template [.fleet-fileds-fromhost-meta] for index patterns [.fleet-fileds-fromhost-meta-*]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.530Z"", ""log.level"": ""INFO"", ""message"":""adding index template [.fleet-fileds-tohost-meta] for index patterns [.fleet-fileds-tohost-meta-*]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.540Z"", ""log.level"": ""INFO"", ""message"":""adding index template [.fleet-fileds-tohost-data] for index patterns [.fleet-fileds-tohost-data-*]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.546Z"", ""log.level"": ""INFO"", ""message"":""adding component template [.deprecation-indexing-mappings]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.551Z"", ""log.level"": ""INFO"", ""message"":""adding component template [kibana-reporting@settings]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.556Z"", ""log.level"": ""INFO"", ""message"":""adding component template [traces@mappings]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.568Z"", ""log.level"": ""INFO"", ""message"":""adding component template [metrics-apm.service_transaction@mappings]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.574Z"", ""log.level"": ""INFO"", ""message"":""adding component template [apm@settings]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.578Z"", ""log.level"": ""INFO"", ""message"":""adding component template [apm-10d@lifecycle]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.583Z"", ""log.level"": ""INFO"", ""message"":""adding component template [metrics-apm.service_destination@mappings]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.587Z"", ""log.level"": ""INFO"", ""message"":""adding component template [apm-180d@lifecycle]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.592Z"", ""log.level"": ""INFO"", ""message"":""adding component template [metrics-apm.transaction@mappings]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.596Z"", ""log.level"": ""INFO"", ""message"":""adding component template [logs-apm@settings]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.637Z"", ""log.level"": ""INFO"", ""message"":""adding component template [logs-apm.error@mappings]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.641Z"", ""log.level"": ""INFO"", ""message"":""adding component template [apm-390d@lifecycle]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.646Z"", ""log.level"": ""INFO"", ""message"":""adding component template [metrics-apm.service_summary@mappings]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.650Z"", ""log.level"": ""INFO"", ""message"":""adding component template [apm-90d@lifecycle]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.655Z"", ""log.level"": ""INFO"", ""message"":""adding component template [traces-apm.rum@mappings]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.659Z"", ""log.level"": ""INFO"", ""message"":""adding component template [metrics-apm@settings]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.664Z"", ""log.level"": ""INFO"", ""message"":""adding component template [apm@mappings]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.672Z"", ""log.level"": ""INFO"", ""message"":""adding component template [metrics-apm@mappings]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.679Z"", ""log.level"": ""INFO"", ""message"":""adding component template [traces-apm@mappings]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.809Z"", ""log.level"": ""INFO"", ""message"":""adding index template [elastic-connectors] for index patterns [.elastic-connectors-v1]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.819Z"", ""log.level"": ""INFO"", ""message"":""adding index template [elastic-connectors-sync-jobs] for index patterns [.elastic-connectors-sync-jobs-v1]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.828Z"", ""log.level"": ""INFO"", ""message"":""adding index template [synthetics] for index patterns [synthetics-*-*]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.837Z"", ""log.level"": ""INFO"", ""message"":""adding index template [metrics] for index patterns [metrics-*-*]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.846Z"", ""log.level"": ""INFO"", ""message"":""adding index template [.deprecation-indexing-template] for index patterns [.logs-deprecation.*]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.856Z"", ""log.level"": ""INFO"", ""message"":""adding index template [.kibana-reporting] for index patterns [.kibana-reporting*]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.872Z"", ""log.level"": ""INFO"", ""message"":""adding index template [metrics-apm.service_transaction.60m@template] for index patterns [metrics-apm.service_transaction.60m-*]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.883Z"", ""log.level"": ""INFO"", ""message"":""adding index template [metrics-apm.service_transaction.1m@template] for index patterns [metrics-apm.service_transaction.1m-*]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.892Z"", ""log.level"": ""INFO"", ""message"":""adding index template [metrics-apm.internal@template] for index patterns [metrics-apm.internal-*]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.902Z"", ""log.level"": ""INFO"", ""message"":""adding index template [metrics-apm.service_destination.1m@template] for index patterns [metrics-apm.service_destination.1m-*]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.912Z"", ""log.level"": ""INFO"", ""message"":""adding index template [metrics-apm.service_destination.60m@template] for index patterns [metrics-apm.service_destination.60m-*]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.922Z"", ""log.level"": ""INFO"", ""message"":""adding index template [metrics-apm.service_summary.1m@template] for index patterns [metrics-apm.service_summary.1m-*]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.932Z"", ""log.level"": ""INFO"", ""message"":""adding index template [logs-apm.error@template] for index patterns [logs-apm.error-*]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.940Z"", ""log.level"": ""INFO"", ""message"":""adding index template [metrics-apm.app@template] for index patterns [metrics-apm.app.*-*]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.949Z"", ""log.level"": ""INFO"", ""message"":""adding index template [metrics-apm.transaction.1m@template] for index patterns [metrics-apm.transaction.1m-*]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.958Z"", ""log.level"": ""INFO"", ""message"":""adding index template [metrics-apm.transaction.10m@template] for index patterns [metrics-apm.transaction.10m-*]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.968Z"", ""log.level"": ""INFO"", ""message"":""adding index template [metrics-apm.service_summary.60m@template] for index patterns [metrics-apm.service_summary.60m-*]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.977Z"", ""log.level"": ""INFO"", ""message"":""adding index template [metrics-apm.service_transaction.10m@template] for index patterns [metrics-apm.service_transaction.10m-*]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.986Z"", ""log.level"": ""INFO"", ""message"":""adding index template [metrics-apm.transaction.60m@template] for index patterns [metrics-apm.transaction.60m-*]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:45.995Z"", ""log.level"": ""INFO"", ""message"":""adding index template [metrics-apm.service_destination.10m@template] for index patterns [metrics-apm.service_destination.10m-*]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:46.005Z"", ""log.level"": ""INFO"", ""message"":""adding index template [traces-apm.rum@template] for index patterns [traces-apm.rum-*]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:46.023Z"", ""log.level"": ""INFO"", ""message"":""adding index template [traces-apm.sampled@template] for index patterns [traces-apm.sampled-*]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:46.033Z"", ""log.level"": ""INFO"", ""message"":""adding index template [traces-apm@template] for index patterns [traces-apm-*]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:46.041Z"", ""log.level"": ""INFO"", ""message"":""adding index template [logs-apm.app@template] for index patterns [logs-apm.app.*-*]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:46.050Z"", ""log.level"": ""INFO"", ""message"":""adding index template [metrics-apm.service_summary.10m@template] for index patterns [metrics-apm.service_summary.10m-*]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:46.083Z"", ""log.level"": ""INFO"", ""message"":""adding index lifecycle policy [.monitoring-8-ilm-policy]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.xpack.ilm.action.TransportPutLifecycleAction"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:46.183Z"", ""log.level"": ""INFO"", ""message"":""adding ingest pipeline behavioral_analytics-events-final_pipeline"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.xpack.core.template.IndexTemplateRegistry"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:46.184Z"", ""log.level"": ""INFO"", ""message"":""adding ingest pipeline logs-default-pipeline"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.xpack.core.template.IndexTemplateRegistry"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:46.184Z"", ""log.level"": ""INFO"", ""message"":""adding ingest pipeline logs@default-pipeline"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.xpack.core.template.IndexTemplateRegistry"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:46.184Z"", ""log.level"": ""INFO"", ""message"":""adding ingest pipeline metrics-apm.service_destination@default-pipeline"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.xpack.core.template.IndexTemplateRegistry"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:46.185Z"", ""log.level"": ""INFO"", ""message"":""adding ingest pipeline logs-apm.app@default-pipeline"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.xpack.core.template.IndexTemplateRegistry"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:46.185Z"", ""log.level"": ""INFO"", ""message"":""adding ingest pipeline traces-apm@default-pipeline"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.xpack.core.template.IndexTemplateRegistry"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:46.185Z"", ""log.level"": ""INFO"", ""message"":""adding ingest pipeline metrics-apm.transaction@default-pipeline"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.xpack.core.template.IndexTemplateRegistry"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:46.185Z"", ""log.level"": ""INFO"", ""message"":""adding ingest pipeline metrics-apm.app@default-pipeline"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.xpack.core.template.IndexTemplateRegistry"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:46.186Z"", ""log.level"": ""INFO"", ""message"":""adding ingest pipeline traces-apm.rum@default-pipeline"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.xpack.core.template.IndexTemplateRegistry"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:46.186Z"", ""log.level"": ""INFO"", ""message"":""adding ingest pipeline apm@pipeline"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.xpack.core.template.IndexTemplateRegistry"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:46.186Z"", ""log.level"": ""INFO"", ""message"":""adding ingest pipeline metrics-apm.service_transaction@default-pipeline"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.xpack.core.template.IndexTemplateRegistry"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:46.186Z"", ""log.level"": ""INFO"", ""message"":""adding ingest pipeline metrics-apm.service_summary@default-pipeline"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.xpack.core.template.IndexTemplateRegistry"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:46.186Z"", ""log.level"": ""INFO"", ""message"":""adding ingest pipeline logs-apm.error@default-pipeline"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.xpack.core.template.IndexTemplateRegistry"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:46.187Z"", ""log.level"": ""INFO"", ""message"":""adding ingest pipeline search-default-ingestion"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.xpack.core.template.IndexTemplateRegistry"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:46.187Z"", ""log.level"": ""INFO"", ""message"":""adding ingest pipeline ent-search-generic-ingestion"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.xpack.core.template.IndexTemplateRegistry"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:46.187Z"", ""log.level"": ""INFO"", ""message"":""adding ingest pipeline logs@json-pipeline"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.xpack.core.template.IndexTemplateRegistry"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:46.187Z"", ""log.level"": ""INFO"", ""message"":""adding ingest pipeline logs@json-message"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.xpack.core.template.IndexTemplateRegistry"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:46.193Z"", ""log.level"": ""INFO"", ""message"":""adding component template [behavioral_analytics-events-settings]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:46.199Z"", ""log.level"": ""INFO"", ""message"":""adding component template [logs-settings]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:46.204Z"", ""log.level"": ""INFO"", ""message"":""adding component template [logs@settings]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:46.268Z"", ""log.level"": ""INFO"", ""message"":""adding index template [logs] for index patterns [logs-*-*]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:46.313Z"", ""log.level"": ""INFO"", ""message"":""adding index template [behavioral_analytics-events-default] for index patterns [behavioral_analytics-events-*]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.cluster.metadata.MetadataIndexTemplateService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:46.348Z"", ""log.level"": ""INFO"", ""message"":""adding index lifecycle policy [ml-size-based-ilm-policy]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.xpack.ilm.action.TransportPutLifecycleAction"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:46.383Z"", ""log.level"": ""INFO"", ""message"":""adding index lifecycle policy [logs]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.xpack.ilm.action.TransportPutLifecycleAction"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:46.417Z"", ""log.level"": ""INFO"", ""message"":""adding index lifecycle policy [synthetics]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.xpack.ilm.action.TransportPutLifecycleAction"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:46.449Z"", ""log.level"": ""INFO"", ""message"":""adding index lifecycle policy [7-days-default]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.xpack.ilm.action.TransportPutLifecycleAction"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:46.491Z"", ""log.level"": ""INFO"", ""message"":""adding index lifecycle policy [metrics@lifecycle]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.xpack.ilm.action.TransportPutLifecycleAction"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:46.523Z"", ""log.level"": ""INFO"", ""message"":""adding index lifecycle policy [synthetics@lifecycle]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.xpack.ilm.action.TransportPutLifecycleAction"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:46.556Z"", ""log.level"": ""INFO"", ""message"":""adding index lifecycle policy [logs@lifecycle]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.xpack.ilm.action.TransportPutLifecycleAction"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:46.589Z"", ""log.level"": ""INFO"", ""message"":""adding index lifecycle policy [7-days@lifecycle]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.xpack.ilm.action.TransportPutLifecycleAction"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:46.623Z"", ""log.level"": ""INFO"", ""message"":""adding index lifecycle policy [30-days@lifecycle]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.xpack.ilm.action.TransportPutLifecycleAction"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:46.656Z"", ""log.level"": ""INFO"", ""message"":""adding index lifecycle policy [90-days@lifecycle]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.xpack.ilm.action.TransportPutLifecycleAction"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:46.689Z"", ""log.level"": ""INFO"", ""message"":""adding index lifecycle policy [365-days@lifecycle]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.xpack.ilm.action.TransportPutLifecycleAction"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:46.721Z"", ""log.level"": ""INFO"", ""message"":""adding index lifecycle policy [180-days-default]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.xpack.ilm.action.TransportPutLifecycleAction"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:46.752Z"", ""log.level"": ""INFO"", ""message"":""adding index lifecycle policy [180-days@lifecycle]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.xpack.ilm.action.TransportPutLifecycleAction"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:46.784Z"", ""log.level"": ""INFO"", ""message"":""adding index lifecycle policy [slm-history-ilm-policy]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.xpack.ilm.action.TransportPutLifecycleAction"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:46.813Z"", ""log.level"": ""INFO"", ""message"":""adding index lifecycle policy [ilm-history-ilm-policy]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.xpack.ilm.action.TransportPutLifecycleAction"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:46.844Z"", ""log.level"": ""INFO"", ""message"":""adding index lifecycle policy [watch-history-ilm-policy-16]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.xpack.ilm.action.TransportPutLifecycleAction"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:46.876Z"", ""log.level"": ""INFO"", ""message"":""adding index lifecycle policy [90-days-default]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.xpack.ilm.action.TransportPutLifecycleAction"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:46.906Z"", ""log.level"": ""INFO"", ""message"":""adding index lifecycle policy [.fleet-file-tohost-meta-ilm-policy]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.xpack.ilm.action.TransportPutLifecycleAction"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:46.942Z"", ""log.level"": ""INFO"", ""message"":""adding index lifecycle policy [.fleet-file-tohost-data-ilm-policy]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.xpack.ilm.action.TransportPutLifecycleAction"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:46.975Z"", ""log.level"": ""INFO"", ""message"":""adding index lifecycle policy [.fleet-actions-results-ilm-policy]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.xpack.ilm.action.TransportPutLifecycleAction"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:47.008Z"", ""log.level"": ""INFO"", ""message"":""adding index lifecycle policy [.deprecation-indexing-ilm-policy]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.xpack.ilm.action.TransportPutLifecycleAction"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:47.046Z"", ""log.level"": ""INFO"", ""message"":""adding index lifecycle policy [365-days-default]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.xpack.ilm.action.TransportPutLifecycleAction"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:47.077Z"", ""log.level"": ""INFO"", ""message"":""adding index lifecycle policy [.fleet-file-fromhost-meta-ilm-policy]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.xpack.ilm.action.TransportPutLifecycleAction"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:47.109Z"", ""log.level"": ""INFO"", ""message"":""adding index lifecycle policy [.fleet-file-fromhost-data-ilm-policy]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.xpack.ilm.action.TransportPutLifecycleAction"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:47.140Z"", ""log.level"": ""INFO"", ""message"":""adding index lifecycle policy [metrics]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.xpack.ilm.action.TransportPutLifecycleAction"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:47.210Z"", ""log.level"": ""INFO"", ""message"":""Node [{078c56155cc0}{EJGhdb6WS9SQZiTVfDI8TQ}] is selected as the current health node."", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][management][T#2]"",""log.logger"":""org.elasticsearch.health.node.selection.HealthNodeTaskExecutor"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:47.211Z"", ""log.level"": ""INFO"", ""message"":""adding index lifecycle policy [30-days-default]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.xpack.ilm.action.TransportPutLifecycleAction"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:47.348Z"", ""log.level"": ""INFO"", ""message"":""license mode is [basic], currently licensed security realms are [reserved/reserved,file/default_file,native/default_native]"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][clusterApplierService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.xpack.security.authc.Realms"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:47.352Z"", ""log.level"": ""INFO"", ""message"":""license [5148ee1a-9f32-4357-a870-dabe49671086] mode [basic] - valid"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][clusterApplierService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.license.ClusterStateLicenseService"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:47.391Z"", ""log.level"": ""INFO"", ""message"":""adding ingest pipeline metrics-apm.internal@default-pipeline"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.xpack.core.template.IndexTemplateRegistry"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:47.391Z"", ""log.level"": ""INFO"", ""message"":""adding ingest pipeline traces-apm@pipeline"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.xpack.core.template.IndexTemplateRegistry"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}
{""@timestamp"":""2024-07-23T23:42:47.392Z"", ""log.level"": ""INFO"", ""message"":""adding ingest pipeline metrics-apm@pipeline"", ""ecs.version"": ""1.2.0"",""service.name"":""ES_ECS"",""event.dataset"":""elasticsearch.server"",""process.thread.name"":""elasticsearch[078c56155cc0][masterService#updateTask][T#1]"",""log.logger"":""org.elasticsearch.xpack.core.template.IndexTemplateRegistry"",""elasticsearch.cluster.uuid"":""k7ezh5GJSFK-XGURJVQrTQ"",""elasticsearch.node.id"":""EJGhdb6WS9SQZiTVfDI8TQ"",""elasticsearch.node.name"":""078c56155cc0"",""elasticsearch.cluster.name"":""docker-cluster""}""
```

**Issue Reasons:**
- [8.15] 42 failures in test test600Interrupt (13.3% fail rate in 315 executions)
- [8.15] 2 failures in step rhel-7_packaging-tests-unix (50.0% fail rate in 4 executions)
- [8.15] 2 failures in step centos-7_packaging-tests-unix (50.0% fail rate in 4 executions)
- [8.15] 2 failures in step rhel-8_packaging-tests-unix (50.0% fail rate in 4 executions)
- [8.15] 3 failures in step debian-11_packaging-tests-unix (75.0% fail rate in 4 executions)
- [8.15] 2 failures in step almalinux-8_packaging-tests-unix (50.0% fail rate in 4 executions)
- [8.15] 4 failures in step opensuse-leap-15_packaging-tests-unix (100.0% fail rate in 4 executions)
- [8.15] 3 failures in step rocky-8_packaging-tests-unix (75.0% fail rate in 4 executions)
- [8.15] 2 failures in step sles-15_packaging-tests-unix (50.0% fail rate in 4 executions)
- [8.15] 3 failures in step rhel-9_packaging-tests-unix (75.0% fail rate in 4 executions)
- [8.15] 3 failures in step ubuntu-2204_packaging-tests-unix (75.0% fail rate in 4 executions)
- [8.15] 2 failures in step oraclelinux-8_packaging-tests-unix (50.0% fail rate in 4 executions)
- [8.15] 2 failures in step ubuntu-2004_destructivedistrotest.docker_packaging-tests-unix-sample (40.0% fail rate in 5 executions)
- [8.15] 2 failures in step ubuntu-2004_packaging-tests-unix (66.7% fail rate in 3 executions)
- [8.15] 4 failures in pipeline elasticsearch-periodic-packaging (100.0% fail rate in 4 executions)

**Note:**
This issue was created using new test triage automation. Please report issues or feedback to es-delivery.",elasticsearchmachine,closed,"[':Delivery/Build', '>test-failure', 'Team:Delivery', 'low-risk']",https://github.com/elastic/elasticsearch/issues/111132,2024-07-20T13:54:18Z,8,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/111132,"{
  ""application_resource"": ""unsure""
}"
100,111009,LogsDB - Rally `elastic/logs` dataset generation,"### Description

We need to generate a suitable dataset to be used in our logging experiments with LogsDB. The dataset should be crafted so to resemble a real-world logging use-case.

The `elastic/logs` Rally track includes a ""Data Generation"" stage which has parameters that can be tweaked to generate a dataset with specific characteristics and a set of queries whose data access pattern can also be configured. The goal behind this issue is to find suitable parameters for this data generation stage and generate such a dataset resembling as closely as possible a logging real-world use-case.

Ideally we would like to work with a very large dataset so to have disks filled up enough so to benchmark querying in a real-world scenario.

Once we have such dataset we will use it to run experiments and understand how our deployments react when resources are scaled up or down and, to be more precise, how query latency is affect and if we have any error when running queries (especially out of memory errors).

Hardware expected to be used for such profile: https://instances.vantage.sh/aws/ec2/im4gn.4xlarge",salvatore-campagna,closed,"['>enhancement', '>test', 'Team:StorageEngine', ':StorageEngine/Logs']",https://github.com/elastic/elasticsearch/issues/111009,2024-07-18T07:46:15Z,6,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/111009,"{
  ""application_resource"": ""no""
}"
101,110826,ES shard allocation bug,"### Elasticsearch Version

Version: 7.17.18, Build: default/tar/8682172c2130b9a411b1bd5ff37c9792367de6b0/2024-02-02T12:04:59.691750271Z, JVM: 11.0.20

### Installed Plugins

_No response_

### Java Version

11.0.20

### OS Version

Linux bsa5295 3.10.0-1160.108.1.el7.x86_64 #1 SMP Thu Jan 25 16:17:31 UTC 2024 x86_64 x86_64 x86_64 GNU/Linux

### Problem Description

When the path.data length of the es data node exceeds 20, all shards of the same index will be allocated to one path. Causes disk io skew when writing. 


### Steps to Reproduce

My test steps are as follows
1. elasticsearch.yml
```
cluster.name: ISOP_1720490318878
http.port: 19399
network.host: bsa5295
node.name: bsa5295
bootstrap.memory_lock: false
bootstrap.system_call_filter: false
node.master: true
node.data: true
path.logs: /home/worker/elasticsearch/logs
path.data: /home/sdf/elasticsearch/data,/home/sdg/elasticsearch/data,/home/sdh/elasticsearch/data,/home/sdi/elasticsearch/data,/home/sdb/elasticsearch/data,/home/sdc/elasticsearch/data,/home/sdd/elasticsearch/data,/home/sde/elasticsearch/data,/home/sdj/elasticsearch/data,/home/sdk/elasticsearch/data,/home/sdf/elasticsearch_1/data,/home/sdg/elasticsearch_1/data,/home/sdh/elasticsearch_1/data,/home/sdi/elasticsearch_1/data,/home/sdb/elasticsearch_1/data,/home/sdc/elasticsearch_1/data,/home/sdd/elasticsearch_1/data,/home/sde/elasticsearch_1/data,/home/sdj/elasticsearch_1/data,/home/sdk/elasticsearch_1/data,/home/sdf/elasticsearch_2/data,/home/sdg/elasticsearch_2/data
transport.tcp.port: 9300
gateway.expected_nodes: 1
action.auto_create_index: .watches,.triggered_watches,.watcher-history-*,.kibana*,.security,.monitoring*
discovery.seed_hosts: [bsa5295]
cluster.initial_master_nodes: [bsa5295]
thread_pool.write.queue_size: 2000
indices.recovery.max_bytes_per_sec: 200mb
cluster.routing.allocation.node_concurrent_recoveries: 10
cluster.max_shards_per_node: 5000
cluster.routing.allocation.same_shard.host: true
cluster.routing.allocation.disk.watermark.low: 90%
cluster.routing.allocation.disk.watermark.high: 95%
cluster.fault_detection.follower_check.timeout: 180s
cluster.fault_detection.follower_check.retry_count: 10
cluster.fault_detection.follower_check.interval: 10s
cluster.publish.timeout: 1800s
indices.fielddata.cache.size: 10%
indices.memory.index_buffer_size: 10%
xpack.ml.enabled: false
cluster.election.duration: 30s
cluster.join.timeout: 360s
node.processors: 80
```
2. Create index my_index1
```
curl -X PUT ""bsa5295:19399/my_index1"" -H 'Content-Type: application/json' -d'
{
  ""settings"": {
    ""number_of_shards"": 25,
    ""number_of_replicas"": 0
  }
}'
```
3. View index uuid
```
[worker@bsa5295 ~]$ curl bsa5295:19399/_cat/indices | grep my_index1
green open  my_index1                                 fI4auV0lRtmxeYN8XrXf8g 25 0         0      0   5.5kb   5.5kb
```
4. View the path corresponding to the shard
![‰ºÅ‰∏öÂæÆ‰ø°Êà™Âõæ_b672c602-b73c-49ad-8cb5-76ce64d5fd38](https://github.com/user-attachments/assets/bbf838e1-4046-47d5-aa6b-59d1dae93cba)

5. You can see that all shards are allocated under `/home/sdj/elasticsearch`

6. expected behavior: 

-    When the path.data configured on the data node is multi-path, it is expected that all shards of a single index can be distributed nearly evenly to each path.
-   Almost all shards take the same path, which is not in line with our expectations. Because when writing and querying the index data, only a few disk IO resources can be utilized at the same time.


### Logs (if relevant)

_No response_",LuPan92,closed,"['>bug', ':Distributed Coordination/Allocation', 'Team:Distributed (Obsolete)']",https://github.com/elastic/elasticsearch/issues/110826,2024-07-12T13:11:40Z,7,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/110826,"{
  ""application_resource"": ""yes""
}"
102,110802,[CI] CacheFileTests testCacheFileCreatedAsSparseFile failing,"**Build Scans:**
- [elasticsearch-periodic #3381 / openjdk17_checkpart2_java-fips-matrix](https://gradle-enterprise.elastic.co/s/6fjteu6ldsv5e)
- [elasticsearch-periodic #3381 / openjdk17_checkpart2_java-matrix](https://gradle-enterprise.elastic.co/s/hb6wx6apmtq3y)
- [elasticsearch-periodic #3381 / graalvm-ce17_checkpart2_java-matrix](https://gradle-enterprise.elastic.co/s/w72eadcz63cmo)
- [elasticsearch-pull-request #25518 / part-2](https://gradle-enterprise.elastic.co/s/4usx2zj4yzzmu)
- [elasticsearch-pull-request #25514 / part-2](https://gradle-enterprise.elastic.co/s/glevhth5h5dxg)
- [elasticsearch-pull-request #25502 / part-2](https://gradle-enterprise.elastic.co/s/7jeusekx5iaq2)
- [elasticsearch-pull-request #25484 / part-2](https://gradle-enterprise.elastic.co/s/v56dd5mwiy7yg)
- [elasticsearch-pull-request #25397 / part-2](https://gradle-enterprise.elastic.co/s/gzxkaj4ep23x4)

**Reproduction Line:**
```
./gradlew "":x-pack:plugin:searchable-snapshots:test"" --tests ""org.elasticsearch.xpack.searchablesnapshots.cache.common.CacheFileTests.testCacheFileCreatedAsSparseFile"" -Dtests.seed=28FF9A4D7FBE85EB -Dtests.locale=hu-HU -Dtests.timezone=Asia/Choibalsan -Druntime.java=17
```

**Applicable branches:**
main

**Reproduces locally?:**
N/A

**Failure History:**
[See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&_a=(controlGroupInput:(chainingSystem:HIERARCHICAL,controlStyle:twoLine,ignoreParentSettings:(ignoreFilters:!f,ignoreQuery:!f,ignoreTimerange:!f,ignoreValidations:!t),panels:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(explicitInput:(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,enhancements:(),fieldName:task.keyword,grow:!t,id:'0c0c9cb8-ccd2-45c6-9b13-96bac4abc542',searchTechnique:wildcard,selectedOptions:!(),singleSelect:!t,title:'Gradle%20Task',width:medium),grow:!t,order:0,type:optionsListControl,width:small),'144933da-5c1b-4257-a969-7f43455a7901':(explicitInput:(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,enhancements:(),fieldName:name.keyword,grow:!t,id:'144933da-5c1b-4257-a969-7f43455a7901',searchTechnique:wildcard,selectedOptions:!('testCacheFileCreatedAsSparseFile'),title:Test,width:medium),grow:!t,order:2,type:optionsListControl,width:medium),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(explicitInput:(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,enhancements:(),fieldName:className.keyword,grow:!t,id:'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850',searchTechnique:wildcard,selectedOptions:!('org.elasticsearch.xpack.searchablesnapshots.cache.common.CacheFileTests'),title:Suite,width:medium),grow:!t,order:1,type:optionsListControl,width:medium)))))

**Failure Message:**
```
java.lang.UnsatisfiedLinkError: Error looking up function 'fstat64': /opt/buildkite-agent/.java/graalvm-ce17/bin/java: undefined symbol: fstat64
```

**Issue Reasons:**
- [main] 3 consecutive failures in test testCacheFileCreatedAsSparseFile
- [main] 8 failures in test testCacheFileCreatedAsSparseFile (2.4% fail rate in 334 executions)
- [main] 5 failures in step part-2 (4.0% fail rate in 125 executions)
- [main] 5 failures in pipeline elasticsearch-pull-request (4.0% fail rate in 125 executions)

**Note:**
This issue was created using new, in-development muting automation. Please mind any issues.",elasticsearchmachine,closed,"[':Core/Infra/Core', '>test-failure', 'Team:Core/Infra', 'needs:risk']",https://github.com/elastic/elasticsearch/issues/110802,2024-07-11T20:41:25Z,2,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/110802,"{
  ""application_resource"": ""unsure""
}"
103,110801,[CI] CacheFileTests testCacheFileCreatedAsSparseFile failing,"**Build Scans:**
- [elasticsearch-periodic #3381 / openjdk17_checkpart2_java-fips-matrix](https://gradle-enterprise.elastic.co/s/6fjteu6ldsv5e)
- [elasticsearch-periodic #3381 / openjdk17_checkpart2_java-matrix](https://gradle-enterprise.elastic.co/s/hb6wx6apmtq3y)
- [elasticsearch-periodic #3381 / graalvm-ce17_checkpart2_java-matrix](https://gradle-enterprise.elastic.co/s/w72eadcz63cmo)
- [elasticsearch-pull-request #25518 / part-2](https://gradle-enterprise.elastic.co/s/4usx2zj4yzzmu)
- [elasticsearch-pull-request #25514 / part-2](https://gradle-enterprise.elastic.co/s/glevhth5h5dxg)
- [elasticsearch-pull-request #25502 / part-2](https://gradle-enterprise.elastic.co/s/7jeusekx5iaq2)
- [elasticsearch-pull-request #25484 / part-2](https://gradle-enterprise.elastic.co/s/v56dd5mwiy7yg)
- [elasticsearch-pull-request #25397 / part-2](https://gradle-enterprise.elastic.co/s/gzxkaj4ep23x4)

**Reproduction Line:**
```
./gradlew "":x-pack:plugin:searchable-snapshots:test"" --tests ""org.elasticsearch.xpack.searchablesnapshots.cache.common.CacheFileTests.testCacheFileCreatedAsSparseFile"" -Dtests.seed=28FF9A4D7FBE85EB -Dtests.locale=hu-HU -Dtests.timezone=Asia/Choibalsan -Druntime.java=17
```

**Applicable branches:**
main

**Reproduces locally?:**
N/A

**Failure History:**
[See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&_a=(controlGroupInput:(chainingSystem:HIERARCHICAL,controlStyle:twoLine,ignoreParentSettings:(ignoreFilters:!f,ignoreQuery:!f,ignoreTimerange:!f,ignoreValidations:!t),panels:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(explicitInput:(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,enhancements:(),fieldName:task.keyword,grow:!t,id:'0c0c9cb8-ccd2-45c6-9b13-96bac4abc542',searchTechnique:wildcard,selectedOptions:!(),singleSelect:!t,title:'Gradle%20Task',width:medium),grow:!t,order:0,type:optionsListControl,width:small),'144933da-5c1b-4257-a969-7f43455a7901':(explicitInput:(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,enhancements:(),fieldName:name.keyword,grow:!t,id:'144933da-5c1b-4257-a969-7f43455a7901',searchTechnique:wildcard,selectedOptions:!('testCacheFileCreatedAsSparseFile'),title:Test,width:medium),grow:!t,order:2,type:optionsListControl,width:medium),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(explicitInput:(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,enhancements:(),fieldName:className.keyword,grow:!t,id:'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850',searchTechnique:wildcard,selectedOptions:!('org.elasticsearch.xpack.searchablesnapshots.cache.common.CacheFileTests'),title:Suite,width:medium),grow:!t,order:1,type:optionsListControl,width:medium)))))

**Failure Message:**
```
java.lang.UnsatisfiedLinkError: Error looking up function 'fstat64': /opt/buildkite-agent/.java/graalvm-ce17/bin/java: undefined symbol: fstat64
```

**Issue Reasons:**
- [main] 3 consecutive failures in test testCacheFileCreatedAsSparseFile
- [main] 8 failures in test testCacheFileCreatedAsSparseFile (2.4% fail rate in 334 executions)
- [main] 5 failures in step part-2 (4.0% fail rate in 125 executions)
- [main] 5 failures in pipeline elasticsearch-pull-request (4.0% fail rate in 125 executions)

**Note:**
This issue was created using new, in-development muting automation. Please mind any issues.",elasticsearchmachine,closed,"[':Core/Infra/Core', '>test-failure', 'Team:Core/Infra', 'needs:risk']",https://github.com/elastic/elasticsearch/issues/110801,2024-07-11T20:41:22Z,4,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/110801,"{
  ""application_resource"": ""unsure""
}"
104,110716,TransportGetAllocationStatsAction may cause significant load on elected master,"### Elasticsearch Version

8.14

### Installed Plugins

_No response_

### Java Version

_bundled_

### OS Version

any

### Problem Description

TransportGetAllocationStatsAction runs on elected master so it is theoretically possible to overload it by executing node stats requests around various nodes in cluster, especially in a clusters with many shards as complexity is proportional to the shard count.

The aggregated result of the computation is small (5 numbers per node), we should consider caching it for small period of time (1 minute?) and reuse it between different calls during.

https://github.com/elastic/elasticsearch/blob/5e5205994747618edf5d81cb6a813adef9f2dbce/server/src/main/java/org/elasticsearch/action/admin/cluster/node/stats/TransportNodesStatsAction.java#L88-L96

### Steps to Reproduce

n/a

### Logs (if relevant)

_No response_",idegtiarenko,closed,"['>bug', ':Distributed Indexing/Distributed', 'Team:Distributed (Obsolete)']",https://github.com/elastic/elasticsearch/issues/110716,2024-07-10T13:41:57Z,13,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/110716,"{
  ""application_resource"": ""yes""
}"
105,110408,[CI] FrozenSearchableSnapshotsIntegTests testCreateAndRestorePartialSearchableSnapshot failing,"**Build scan:**
https://gradle-enterprise.elastic.co/s/aypliammakd7q/tests/:x-pack:plugin:searchable-snapshots:internalClusterTest/org.elasticsearch.xpack.searchablesnapshots.FrozenSearchableSnapshotsIntegTests/testCreateAndRestorePartialSearchableSnapshot


**Reproduction line:**
```
./gradlew ':x-pack:plugin:searchable-snapshots:internalClusterTest' --tests ""org.elasticsearch.xpack.searchablesnapshots.FrozenSearchableSnapshotsIntegTests.testCreateAndRestorePartialSearchableSnapshot"" -Dtests.seed=278167E3FC1AC094 -Dtests.locale=ar-QA -Dtests.timezone=Etc/GMT+3 -Druntime.java=22
```

**Applicable branches:**
main

**Reproduces locally?:**
Didn't try

**Failure history:**
[Failure dashboard for `org.elasticsearch.xpack.searchablesnapshots.FrozenSearchableSnapshotsIntegTests#testCreateAndRestorePartialSearchableSnapshot`](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&_a=(controlGroupInput:(chainingSystem:HIERARCHICAL,controlStyle:twoLine,ignoreParentSettings:(ignoreFilters:!f,ignoreQuery:!f,ignoreTimerange:!f,ignoreValidations:!t),panels:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(explicitInput:(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,enhancements:(),fieldName:task.keyword,grow:!t,id:'0c0c9cb8-ccd2-45c6-9b13-96bac4abc542',searchTechnique:wildcard,selectedOptions:!(),singleSelect:!t,title:'Gradle%20Task',width:medium),grow:!t,order:0,type:optionsListControl,width:small),'144933da-5c1b-4257-a969-7f43455a7901':(explicitInput:(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,enhancements:(),fieldName:name.keyword,grow:!t,id:'144933da-5c1b-4257-a969-7f43455a7901',searchTechnique:wildcard,selectedOptions:!('testCreateAndRestorePartialSearchableSnapshot'),title:Test,width:medium),grow:!t,order:2,type:optionsListControl,width:medium),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(explicitInput:(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,enhancements:(),fieldName:className.keyword,grow:!t,id:'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850',searchTechnique:wildcard,selectedOptions:!('org.elasticsearch.xpack.searchablesnapshots.FrozenSearchableSnapshotsIntegTests'),title:Suite,width:medium),grow:!t,order:1,type:optionsListControl,width:medium)))))


**Failure excerpt:**
```
java.lang.AssertionError: cannot complete future on thread Thread[#97,elasticsearch[node_s2][generic][T#2],5,TGRP-FrozenSearchableSnapshotsIntegTests] with waiter on thread Thread[#199,elasticsearch[node_s2][generic][T#8],5,TGRP-FrozenSearchableSnapshotsIntegTests], could deadlock if pool was full
	at java.base/java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:269)
	at java.base/java.util.concurrent.locks.AbstractQueuedSynchronizer.acquire(AbstractQueuedSynchronizer.java:756)
	at java.base/java.util.concurrent.locks.AbstractQueuedSynchronizer.tryAcquireSharedNanos(AbstractQueuedSynchronizer.java:1126)
	at org.elasticsearch.action.support.PlainActionFuture$Sync.get(PlainActionFuture.java:262)
	at org.elasticsearch.action.support.PlainActionFuture.get(PlainActionFuture.java:74)
	at org.elasticsearch.common.util.concurrent.FutureUtils.get(FutureUtils.java:65)
	at org.elasticsearch.action.support.PlainActionFuture.actionGet(PlainActionFuture.java:171)
	at org.elasticsearch.xpack.searchablesnapshots.cache.blob.BlobStoreCacheService.get(BlobStoreCacheService.java:126)
	at org.elasticsearch.xpack.searchablesnapshots.store.SearchableSnapshotDirectory.getCachedBlob(SearchableSnapshotDirectory.java:673)
	at org.elasticsearch.xpack.searchablesnapshots.store.input.MetadataCachingIndexInput.readWithBlobCache(MetadataCachingIndexInput.java:280)
	at org.elasticsearch.xpack.searchablesnapshots.store.input.MetadataCachingIndexInput.readInternal(MetadataCachingIndexInput.java:615)
	at org.elasticsearch.blobcache.common.BlobCacheBufferedIndexInput.refill(BlobCacheBufferedIndexInput.java:304)
	at org.elasticsearch.blobcache.common.BlobCacheBufferedIndexInput.readByte(BlobCacheBufferedIndexInput.java:57)
	at org.apache.lucene.codecs.CodecUtil.readBEInt(CodecUtil.java:668)
	at org.apache.lucene.codecs.CodecUtil.checkHeader(CodecUtil.java:185)
	at org.apache.lucene.codecs.CodecUtil.checkIndexHeader(CodecUtil.java:254)
	at org.apache.lucene.codecs.lucene90.Lucene90DocValuesProducer.<init>(Lucene90DocValuesProducer.java:114)
	at org.apache.lucene.codecs.lucene90.Lucene90DocValuesFormat.fieldsProducer(Lucene90DocValuesFormat.java:154)
	at org.apache.lucene.codecs.perfield.PerFieldDocValuesFormat$FieldsReader.<init>(PerFieldDocValuesFormat.java:305)
	at org.apache.lucene.codecs.perfield.PerFieldDocValuesFormat.fieldsProducer(PerFieldDocValuesFormat.java:374)
	at org.apache.lucene.index.SegmentDocValues.newDocValuesProducer(SegmentDocValues.java:52)
	at org.apache.lucene.index.SegmentDocValues.getDocValuesProducer(SegmentDocValues.java:69)
	at org.apache.lucene.index.SegmentDocValuesProducer.<init>(SegmentDocValuesProducer.java:66)
	at org.apache.lucene.index.SegmentReader.initDocValuesProducer(SegmentReader.java:194)
	at org.apache.lucene.index.SegmentReader.<init>(SegmentReader.java:113)
	at org.apache.lucene.index.StandardDirectoryReader$1.doBody(StandardDirectoryReader.java:94)
	at org.apache.lucene.index.StandardDirectoryReader$1.doBody(StandardDirectoryReader.java:77)
	at org.apache.lucene.index.SegmentInfos$FindSegmentsFile.run(SegmentInfos.java:820)
	at org.apache.lucene.index.StandardDirectoryReader.open(StandardDirectoryReader.java:109)
	at org.apache.lucene.index.StandardDirectoryReader.open(StandardDirectoryReader.java:67)
	at org.apache.lucene.index.DirectoryReader.open(DirectoryReader.java:60)
	at org.elasticsearch.index.engine.ReadOnlyEngine.openDirectory(ReadOnlyEngine.java:575)
	at org.elasticsearch.index.engine.frozen.FrozenEngine.<init>(FrozenEngine.java:89)
	at org.elasticsearch.xpack.searchablesnapshots.SearchableSnapshots.lambda$getEngineFactory$6(SearchableSnapshots.java:457)
	at org.elasticsearch.index.shard.IndexShard.createEngine(IndexShard.java:2150)
	at org.elasticsearch.index.shard.IndexShard.innerOpenEngineAndTranslog(IndexShard.java:2123)
	at org.elasticsearch.index.shard.IndexShard.openEngineAndSkipTranslogRecovery(IndexShard.java:2099)
	at org.elasticsearch.indices.recovery.RecoveryTarget.lambda$prepareForTranslogOperations$1(RecoveryTarget.java:378)
	at org.elasticsearch.action.ActionListener.completeWith(ActionListener.java:348)
	at org.elasticsearch.indices.recovery.RecoveryTarget.prepareForTranslogOperations(RecoveryTarget.java:375)
	at org.elasticsearch.indices.recovery.PeerRecoveryTargetService$4.handleRequest(PeerRecoveryTargetService.java:192)
	at org.elasticsearch.indices.recovery.PeerRecoveryTargetService$4.handleRequest(PeerRecoveryTargetService.java:185)
	at org.elasticsearch.indices.recovery.PeerRecoveryTargetService$RecoveryRequestHandler.messageReceived(PeerRecoveryTargetService.java:648)
	at org.elasticsearch.indices.recovery.PeerRecoveryTargetService$RecoveryRequestHandler.messageReceived(PeerRecoveryTargetService.java:635)
	at org.elasticsearch.transport.RequestHandlerRegistry.processMessageReceived(RequestHandlerRegistry.java:75)
	at org.elasticsearch.transport.InboundHandler.doHandleRequest(InboundHandler.java:287)
	at org.elasticsearch.transport.InboundHandler$1.doRun(InboundHandler.java:300)
	at org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:984)
	at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:26)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1570)

  at __randomizedtesting.SeedInfo.seed([278167E3FC1AC094]:0)
  at org.elasticsearch.action.support.PlainActionFuture.assertCompleteAllowed(PlainActionFuture.java:416)
  at org.elasticsearch.action.support.PlainActionFuture.set(PlainActionFuture.java:137)
  at org.elasticsearch.action.support.PlainActionFuture.onResponse(PlainActionFuture.java:37)
  at org.elasticsearch.xpack.searchablesnapshots.cache.blob.BlobStoreCacheService$1.onFailure(BlobStoreCacheService.java:191)
  at org.elasticsearch.action.ActionListenerImplementations.safeAcceptException(ActionListenerImplementations.java:62)
  at org.elasticsearch.action.ActionListenerImplementations.safeOnFailure(ActionListenerImplementations.java:73)
  at org.elasticsearch.action.DelegatingActionListener.onFailure(DelegatingActionListener.java:31)
  at org.elasticsearch.action.support.ContextPreservingActionListener.onFailure(ContextPreservingActionListener.java:39)
  at org.elasticsearch.action.ActionListenerImplementations.safeAcceptException(ActionListenerImplementations.java:62)
  at org.elasticsearch.action.ActionListenerImplementations.safeOnFailure(ActionListenerImplementations.java:73)
  at org.elasticsearch.action.ActionListener$3.onFailure(ActionListener.java:402)
  at org.elasticsearch.tasks.TaskManager$1.onFailure(TaskManager.java:214)
  at org.elasticsearch.action.ActionListenerImplementations.safeAcceptException(ActionListenerImplementations.java:62)
  at org.elasticsearch.action.ActionListenerImplementations.safeOnFailure(ActionListenerImplementations.java:73)
  at org.elasticsearch.action.DelegatingActionListener.onFailure(DelegatingActionListener.java:31)
  at org.elasticsearch.action.ActionListenerImplementations$RunBeforeActionListener.onFailure(ActionListenerImplementations.java:317)
  at org.elasticsearch.action.ActionListenerImplementations.safeAcceptException(ActionListenerImplementations.java:62)
  at org.elasticsearch.action.ActionListenerImplementations.safeOnFailure(ActionListenerImplementations.java:73)
  at org.elasticsearch.action.ActionListener$3.onFailure(ActionListener.java:402)
  at org.elasticsearch.action.support.single.shard.TransportSingleShardAction$AsyncSingleAction.perform(TransportSingleShardAction.java:216)
  at org.elasticsearch.action.support.single.shard.TransportSingleShardAction$AsyncSingleAction.onFailure(TransportSingleShardAction.java:195)
  at org.elasticsearch.action.support.single.shard.TransportSingleShardAction$AsyncSingleAction$1.handleException(TransportSingleShardAction.java:240)
  at org.elasticsearch.transport.TransportService$ContextRestoreResponseHandler.handleException(TransportService.java:1490)
  at org.elasticsearch.transport.TransportService$5.doRun(TransportService.java:1001)
  at org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:984)
  at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:26)
  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
  at java.lang.Thread.run(Thread.java:1570)

```",DaveCTurner,closed,"[':Distributed Coordination/Snapshot/Restore', '>test-failure', 'medium-risk', 'Team:Distributed Coordination']",https://github.com/elastic/elasticsearch/issues/110408,2024-07-03T06:56:51Z,4,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/110408,"{
  ""application_resource"": ""yes""
}"
106,110356,[CI] Many tests failing when testing with fips,"This started occurring with #109899 

They are failing with:

```

Caused by: java.lang.IllegalStateException: jar hell! | ¬†
-- | --
¬† | class: org.bouncycastle.LICENSE | ¬†
¬† | jar1: /opt/buildkite-agent/.gradle/caches/modules-2/files-2.1/org.bouncycastle/bcprov-jdk18on/1.78.1/39e9e45359e20998eb79c1828751f94a818d25f8/bcprov-jdk18on-1.78.1.jar | ¬†
¬† | jar2: /opt/buildkite-agent/.gradle/caches/modules-2/files-2.1/org.bouncycastle/bc-fips/1.0.2.4/9008d04fc13da6455e6a792935b93b629757335d/bc-fips-1.0.2.4.jar
```

**Build Scans:**
- [elasticsearch-periodic #3265 / openjdk17_checkpart4_java-fips-matrix](https://gradle-enterprise.elastic.co/s/vcftxhhnqladw)
- [elasticsearch-pull-request #24283 / part-4-fips](https://gradle-enterprise.elastic.co/s/gi3kirqtrgdri)
- [elasticsearch-pull-request #24279 / part-4-fips](https://gradle-enterprise.elastic.co/s/po7p4enaatonm)
- [elasticsearch-pull-request #24276 / part-4-fips](https://gradle-enterprise.elastic.co/s/yzjiwyuimar7u)
- [elasticsearch-pull-request #24269 / part-4-fips](https://gradle-enterprise.elastic.co/s/7yvvrmxthjrvq)
- [elasticsearch-pull-request #24268 / part-4-fips](https://gradle-enterprise.elastic.co/s/25ynh7jv2dihk)
- [elasticsearch-periodic #3262 / openjdk17_checkpart4_java-fips-matrix](https://gradle-enterprise.elastic.co/s/5poffknbw3pgu)
- [elasticsearch-pull-request #24256 / part-4-fips](https://gradle-enterprise.elastic.co/s/ewntvjww2cbny)
- [elasticsearch-pull-request #24213 / part-4-fips](https://gradle-enterprise.elastic.co/s/66oqsdegdwnl6)
- [elasticsearch-pull-request #24213 / part-4-fips](https://gradle-enterprise.elastic.co/s/bzf7nm3iylhc2)

**Applicable branches:**
main

**Reproduces locally?:**
N/A

**Failure History:**
[See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&_a=(controlGroupInput:(chainingSystem:HIERARCHICAL,controlStyle:twoLine,ignoreParentSettings:(ignoreFilters:!f,ignoreQuery:!f,ignoreTimerange:!f,ignoreValidations:!t),panels:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(explicitInput:(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,enhancements:(),fieldName:task.keyword,grow:!t,id:'0c0c9cb8-ccd2-45c6-9b13-96bac4abc542',searchTechnique:wildcard,selectedOptions:!(),singleSelect:!t,title:'Gradle%20Task',width:medium),grow:!t,order:0,type:optionsListControl,width:small),'144933da-5c1b-4257-a969-7f43455a7901':(explicitInput:(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,enhancements:(),fieldName:name.keyword,grow:!t,id:'144933da-5c1b-4257-a969-7f43455a7901',searchTechnique:wildcard,selectedOptions:!('classMethod'),title:Test,width:medium),grow:!t,order:2,type:optionsListControl,width:medium),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(explicitInput:(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,enhancements:(),fieldName:className.keyword,grow:!t,id:'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850',searchTechnique:wildcard,selectedOptions:!('org.elasticsearch.xpack.security.authc.file.tool.UsersToolTests'),title:Suite,width:medium),grow:!t,order:1,type:optionsListControl,width:medium)))))

**Failure Message:**
```
java.lang.RuntimeException: found jar hell in test classpath
```

**Issue Reasons:**
- [main] 17 consecutive failures in test classMethod (100.0% fail rate)
- [main] 9 consecutive failures in step openjdk17_checkpart4_java-fips-matrix (100.0% fail rate)
- [main] 8 consecutive failures in step part-4-fips (100.0% fail rate)
- [main] 9 consecutive failures in pipeline elasticsearch-periodic (100.0% fail rate)
- [main] 7 consecutive failures in pipeline elasticsearch-pull-request (100.0% fail rate)
- [main] 17 failures in test classMethod (100.0% fail rate)
- [main] 9 failures in step openjdk17_checkpart4_java-fips-matrix (100.0% fail rate)
- [main] 8 failures in step part-4-fips (100.0% fail rate)
- [main] 9 failures in pipeline elasticsearch-periodic (100.0% fail rate)
- [main] 7 failures in pipeline elasticsearch-pull-request (100.0% fail rate)",brianseeders,closed,"[':Distributed Coordination/Network', '>test-failure', 'Team:Distributed (Obsolete)', 'low-risk']",https://github.com/elastic/elasticsearch/issues/110356,2024-07-01T20:56:05Z,1,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/110356,"{
  ""application_resource"": ""no""
}"
107,110315,http 401,"### Elasticsearch Version

7.9.3

### Installed Plugins

analysis-icu,analysis-ik,analysis-pinyin,analysis-smartcn,elasticsearch-analysis-ansj,repository-s3 ,sql

### Java Version

openjdk version ""15"" 2020-09-15

### OS Version

Linux p-l67-32-16 5.15.81

### Problem Description

When we were doing a master-slave cluster switch drill, we found a large number of authentication exception logs http 401, The actual account authorization is normal

### Steps to Reproduce

You can shut down all cluster nodes and restart them to reproduce the HTTP 401 error. You can also switch the domain name from the primary cluster to the backup cluster to reproduce the HTTP 401 error.

### Logs (if relevant)

1„ÄÅthe service code log was Caused by: co.elastic.clients.elasticsearch._types.ElasticsearchException: [es/search] failed: [security_exception] ation [indices:data/read/search] is unauthorized for user [jxsarvr_es]
2„ÄÅThe load layer log is { ""_index"": ""nginx-es-2024.07.01"",""_type"": ""access"",""_id"": ""kfRcbJABRmWLQ4b-KHkM"",""_version"": 1, ""_score"": null, ""_source"": { ""scheme"": ""http"", ""upstream_addr"": ""10.28.101.135:9212"", ""body_bytes_sent"": 687, ""autolog_uri_prefix"": ""/syzy_vr_series_dealer/_search"", ""request_method"": ""POST"", ""type"": """", ""sent_http_cache_control"": ""-"", ""http_user_agent"": ""elastic-java/8.11.0 (Java/1.8.0_191)"", ""reqid"": ""-"", ""upstream_status"": 401, ""upstream_cache_status"": ""-"", ""request_time"": ""0.000"", ""auto_business_enname"": ""es"", ""host_addr"": ""jxs-zxdp-ha-es79.search.corpautohome.com"", ""remote_addr"": ""10.248.45.56"", ""autolog_real_ip"": ""10.248.45.56"", ""http_X_Forwarded_For"": ""-"", ""server_addr"": ""10.28.8.117"", ""request_uri"": ""/syzy_vr_series_dealer/_search?typed_keys=true"", ""date_pre"": ""2024.07.01"", ""@timestamp"": ""2024-07-01T03:34:56.000Z"", ""http_referer"": ""-"", ""upstream_response_time"": 0, ""cachezone"": """", ""status"": 401 }",liqunlin,closed,"['>bug', 'needs:triage']",https://github.com/elastic/elasticsearch/issues/110315,2024-07-01T03:44:08Z,2,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/110315,"{
  ""application_resource"": ""unsure""
}"
108,110134,`top_hits` fails with Null Pointer Exception when child of random_sampler agg,"### Elasticsearch Version

_any_

### Installed Plugins

_No response_

### Java Version

_bundled_

### OS Version

_any_

### Problem Description

When I use the top_hits aggregation as a child of a random_sampler aggregation, it triggers a shard request failure with an NPE. It only throws an NPE when sort is not defined - if I add it (e.g. { ""sort"": { ""@timestamp"": ""desc"" } }) it returns results.

### Steps to Reproduce

```
GET logs-*/_search
{
  ""track_total_hits"": false,
  ""size"": 0,
  ""query"": {
    ""bool"": {
      ""filter"": [
        {
          ""range"": {
            ""@timestamp"": {
              ""gte"": ""now-30s""
            }
          }
        }
      ]
    }
  },
  ""aggs"": {
    ""message"": {
      ""categorize_text"": {
        ""size"": 6,
        ""field"": ""message""
      },
      ""aggs"": {
        ""samples"": {
          ""top_hits"": {
            ""size"": 1,
            ""_source"": [
              ""message""
            ]
          }
        }
      }
    }
  }
}
```

### Logs (if relevant)

<details>
<summary>Details</summary>

```
{
  ""error"": {
    ""root_cause"": [
      {
        ""type"": ""null_pointer_exception"",
        ""reason"": """"""Cannot invoke ""org.apache.lucene.search.Scorable.score()"" because ""this.scorer"" is null"""""",
        ""stack_trace"": """"""org.elasticsearch.ElasticsearchException$1: Cannot invoke ""org.apache.lucene.search.Scorable.score()"" because ""this.scorer"" is null
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.ElasticsearchException.guessRootCauses(ElasticsearchException.java:704)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.action.search.SearchPhaseExecutionException.guessRootCauses(SearchPhaseExecutionException.java:160)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.ElasticsearchException.guessRootCauses(ElasticsearchException.java:686)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.ElasticsearchException.generateFailureXContent(ElasticsearchException.java:632)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.rest.RestResponse.build(RestResponse.java:186)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.rest.RestResponse.<init>(RestResponse.java:145)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.rest.RestResponse.<init>(RestResponse.java:116)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.rest.action.RestActionListener.onFailure(RestActionListener.java:53)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.rest.action.RestCancellableNodeClient$1.onFailure(RestCancellableNodeClient.java:96)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.tasks.TaskManager$1.onFailure(TaskManager.java:214)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.action.ActionListenerImplementations.safeAcceptException(ActionListenerImplementations.java:62)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.action.ActionListenerImplementations.safeOnFailure(ActionListenerImplementations.java:73)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.action.DelegatingActionListener.onFailure(DelegatingActionListener.java:31)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.action.ActionListenerImplementations$RunBeforeActionListener.onFailure(ActionListenerImplementations.java:317)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.action.ActionListenerImplementations.safeAcceptException(ActionListenerImplementations.java:62)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.action.ActionListenerImplementations.safeOnFailure(ActionListenerImplementations.java:73)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.action.DelegatingActionListener.onFailure(DelegatingActionListener.java:31)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.action.support.ContextPreservingActionListener.onFailure(ContextPreservingActionListener.java:39)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.action.ActionListenerImplementations.safeAcceptException(ActionListenerImplementations.java:62)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.action.ActionListenerImplementations.safeOnFailure(ActionListenerImplementations.java:73)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.action.DelegatingActionListener.onFailure(DelegatingActionListener.java:31)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.action.ActionListenerImplementations.safeAcceptException(ActionListenerImplementations.java:62)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.action.ActionListenerImplementations.safeOnFailure(ActionListenerImplementations.java:73)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.action.DelegatingActionListener.onFailure(DelegatingActionListener.java:31)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.action.ActionListenerImplementations.safeAcceptException(ActionListenerImplementations.java:62)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.action.ActionListenerImplementations.safeOnFailure(ActionListenerImplementations.java:73)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.action.DelegatingActionListener.onFailure(DelegatingActionListener.java:31)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.action.ActionListenerImplementations$RunAfterActionListener.onFailure(ActionListenerImplementations.java:278)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.action.search.AbstractSearchAsyncAction.raisePhaseFailure(AbstractSearchAsyncAction.java:747)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.action.search.AbstractSearchAsyncAction.onPhaseFailure(AbstractSearchAsyncAction.java:724)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.action.search.AbstractSearchAsyncAction.executeNextPhase(AbstractSearchAsyncAction.java:416)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.action.search.AbstractSearchAsyncAction.onPhaseDone(AbstractSearchAsyncAction.java:756)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.action.search.AbstractSearchAsyncAction.onShardFailure(AbstractSearchAsyncAction.java:509)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.action.search.AbstractSearchAsyncAction$1.onFailure(AbstractSearchAsyncAction.java:337)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.action.ActionListenerImplementations.safeAcceptException(ActionListenerImplementations.java:62)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.action.ActionListenerImplementations.safeOnFailure(ActionListenerImplementations.java:73)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.action.DelegatingActionListener.onFailure(DelegatingActionListener.java:31)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.action.ActionListenerResponseHandler.handleException(ActionListenerResponseHandler.java:53)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.action.search.SearchTransportService$ConnectionCountingHandler.handleException(SearchTransportService.java:672)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.transport.TransportService$UnregisterChildTransportResponseHandler.handleException(TransportService.java:1766)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.transport.TransportService$ContextRestoreResponseHandler.handleException(TransportService.java:1490)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.transport.InboundHandler.doHandleException(InboundHandler.java:474)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.transport.InboundHandler.handleException(InboundHandler.java:461)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.transport.InboundHandler.handlerResponseError(InboundHandler.java:452)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.transport.InboundHandler.executeResponseHandler(InboundHandler.java:146)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.transport.InboundHandler.messageReceived(InboundHandler.java:123)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.transport.InboundHandler.inboundMessage(InboundHandler.java:97)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.transport.TcpTransport.inboundMessage(TcpTransport.java:821)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.transport.InboundPipeline.forwardFragments(InboundPipeline.java:124)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.transport.InboundPipeline.doHandleBytes(InboundPipeline.java:96)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.transport.InboundPipeline.handleBytes(InboundPipeline.java:61)
	at org.elasticsearch.transport.netty4@8.15.0-SNAPSHOT/org.elasticsearch.transport.netty4.Netty4MessageInboundHandler.channelRead(Netty4MessageInboundHandler.java:57)
	at io.netty.transport@4.1.109.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)
	at io.netty.transport@4.1.109.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.transport@4.1.109.Final/io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.codec@4.1.109.Final/io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:103)
	at io.netty.transport@4.1.109.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)
	at io.netty.transport@4.1.109.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.transport@4.1.109.Final/io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.handler@4.1.109.Final/io.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:1475)
	at io.netty.handler@4.1.109.Final/io.netty.handler.ssl.SslHandler.decodeJdkCompatible(SslHandler.java:1338)
	at io.netty.handler@4.1.109.Final/io.netty.handler.ssl.SslHandler.decode(SslHandler.java:1387)
	at io.netty.codec@4.1.109.Final/io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:530)
	at io.netty.codec@4.1.109.Final/io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:469)
	at io.netty.codec@4.1.109.Final/io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:290)
	at io.netty.transport@4.1.109.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)
	at io.netty.transport@4.1.109.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.transport@4.1.109.Final/io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.transport@4.1.109.Final/io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.transport@4.1.109.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)
	at io.netty.transport@4.1.109.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.transport@4.1.109.Final/io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.transport@4.1.109.Final/io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)
	at io.netty.transport@4.1.109.Final/io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)
	at io.netty.transport@4.1.109.Final/io.netty.channel.nio.NioEventLoop.processSelectedKeysPlain(NioEventLoop.java:689)
	at io.netty.transport@4.1.109.Final/io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:652)
	at io.netty.transport@4.1.109.Final/io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.common@4.1.109.Final/io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.common@4.1.109.Final/io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at java.base/java.lang.Thread.run(Thread.java:1570)
Caused by: java.lang.NullPointerException: Cannot invoke ""org.apache.lucene.search.Scorable.score()"" because ""this.scorer"" is null
	at org.apache.lucene.search.TopScoreDocCollector$SimpleTopScoreDocCollector$1.collect(TopScoreDocCollector.java:72)
	at org.elasticsearch.search.aggregations.metrics.TopHitsAggregator$1.collect(TopHitsAggregator.java:158)
	at org.elasticsearch.search.aggregations.bucket.BucketsAggregator.collectBucket(BucketsAggregator.java:90)
	at org.elasticsearch.xpack.ml.aggs.categorization.CategorizeTextAggregator$1.processTokenStream(CategorizeTextAggregator.java:204)
	at org.elasticsearch.xpack.ml.aggs.categorization.CategorizeTextAggregator$1.collectFromSource(CategorizeTextAggregator.java:180)
	at org.elasticsearch.xpack.ml.aggs.categorization.CategorizeTextAggregator$1.collect(CategorizeTextAggregator.java:163)
	at org.elasticsearch.search.aggregations.bucket.BucketsAggregator.collectExistingBucket(BucketsAggregator.java:98)
	at org.elasticsearch.search.aggregations.bucket.sampler.random.RandomSamplerAggregator$1.collect(RandomSamplerAggregator.java:108)
	at org.elasticsearch.search.aggregations.LeafBucketCollector.collect(LeafBucketCollector.java:86)
	at org.apache.lucene.search.FilterLeafCollector.collect(FilterLeafCollector.java:42)
	at org.apache.lucene.search.MatchAllDocsQuery$1$1.score(MatchAllDocsQuery.java:63)
	at org.apache.lucene.search.ConstantScoreQuery$ConstantBulkScorer.score(ConstantScoreQuery.java:99)
	at org.elasticsearch.search.internal.CancellableBulkScorer.score(CancellableBulkScorer.java:45)
	at org.apache.lucene.search.BulkScorer.score(BulkScorer.java:38)
	at org.elasticsearch.search.internal.ContextIndexSearcher.searchLeaf(ContextIndexSearcher.java:436)
	at org.elasticsearch.search.internal.ContextIndexSearcher.search(ContextIndexSearcher.java:365)
	at org.elasticsearch.search.internal.ContextIndexSearcher.lambda$search$3(ContextIndexSearcher.java:350)
	at org.apache.lucene.search.TaskExecutor$TaskGroup.lambda$createTask$0(TaskExecutor.java:117)
	at java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at org.elasticsearch.common.util.concurrent.TimedRunnable.doRun(TimedRunnable.java:33)
	at org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:984)
	at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:26)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.lang.Thread.run(Thread.java:1570)
""""""
      }
    ],
    ""type"": ""search_phase_execution_exception"",
    ""reason"": ""all shards failed"",
    ""phase"": ""query"",
    ""grouped"": true,
    ""failed_shards"": [
      {
        ""shard"": 0,
        ""index"": "".ds-logs-foo-default-2024.06.25-000001"",
        ""node"": ""zVlBFBb8QqSNzSPZgqKNfg"",
        ""reason"": {
          ""type"": ""null_pointer_exception"",
          ""reason"": """"""Cannot invoke ""org.apache.lucene.search.Scorable.score()"" because ""this.scorer"" is null"""""",
          ""stack_trace"": """"""java.lang.NullPointerException: Cannot invoke ""org.apache.lucene.search.Scorable.score()"" because ""this.scorer"" is null
	at org.apache.lucene.search.TopScoreDocCollector$SimpleTopScoreDocCollector$1.collect(TopScoreDocCollector.java:72)
	at org.elasticsearch.search.aggregations.metrics.TopHitsAggregator$1.collect(TopHitsAggregator.java:158)
	at org.elasticsearch.search.aggregations.bucket.BucketsAggregator.collectBucket(BucketsAggregator.java:90)
	at org.elasticsearch.xpack.ml.aggs.categorization.CategorizeTextAggregator$1.processTokenStream(CategorizeTextAggregator.java:204)
	at org.elasticsearch.xpack.ml.aggs.categorization.CategorizeTextAggregator$1.collectFromSource(CategorizeTextAggregator.java:180)
	at org.elasticsearch.xpack.ml.aggs.categorization.CategorizeTextAggregator$1.collect(CategorizeTextAggregator.java:163)
	at org.elasticsearch.search.aggregations.bucket.BucketsAggregator.collectExistingBucket(BucketsAggregator.java:98)
	at org.elasticsearch.search.aggregations.bucket.sampler.random.RandomSamplerAggregator$1.collect(RandomSamplerAggregator.java:108)
	at org.elasticsearch.search.aggregations.LeafBucketCollector.collect(LeafBucketCollector.java:86)
	at org.apache.lucene.search.FilterLeafCollector.collect(FilterLeafCollector.java:42)
	at org.apache.lucene.search.MatchAllDocsQuery$1$1.score(MatchAllDocsQuery.java:63)
	at org.apache.lucene.search.ConstantScoreQuery$ConstantBulkScorer.score(ConstantScoreQuery.java:99)
	at org.elasticsearch.search.internal.CancellableBulkScorer.score(CancellableBulkScorer.java:45)
	at org.apache.lucene.search.BulkScorer.score(BulkScorer.java:38)
	at org.elasticsearch.search.internal.ContextIndexSearcher.searchLeaf(ContextIndexSearcher.java:436)
	at org.elasticsearch.search.internal.ContextIndexSearcher.search(ContextIndexSearcher.java:365)
	at org.elasticsearch.search.internal.ContextIndexSearcher.lambda$search$3(ContextIndexSearcher.java:350)
	at org.apache.lucene.search.TaskExecutor$TaskGroup.lambda$createTask$0(TaskExecutor.java:117)
	at java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at org.elasticsearch.common.util.concurrent.TimedRunnable.doRun(TimedRunnable.java:33)
	at org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:984)
	at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:26)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.lang.Thread.run(Thread.java:1570)
""""""
        }
      }
    ],
    ""caused_by"": {
      ""type"": ""null_pointer_exception"",
      ""reason"": """"""Cannot invoke ""org.apache.lucene.search.Scorable.score()"" because ""this.scorer"" is null"""""",
      ""caused_by"": {
        ""type"": ""null_pointer_exception"",
        ""reason"": """"""Cannot invoke ""org.apache.lucene.search.Scorable.score()"" because ""this.scorer"" is null"""""",
        ""stack_trace"": """"""java.lang.NullPointerException: Cannot invoke ""org.apache.lucene.search.Scorable.score()"" because ""this.scorer"" is null
	at org.apache.lucene.search.TopScoreDocCollector$SimpleTopScoreDocCollector$1.collect(TopScoreDocCollector.java:72)
	at org.elasticsearch.search.aggregations.metrics.TopHitsAggregator$1.collect(TopHitsAggregator.java:158)
	at org.elasticsearch.search.aggregations.bucket.BucketsAggregator.collectBucket(BucketsAggregator.java:90)
	at org.elasticsearch.xpack.ml.aggs.categorization.CategorizeTextAggregator$1.processTokenStream(CategorizeTextAggregator.java:204)
	at org.elasticsearch.xpack.ml.aggs.categorization.CategorizeTextAggregator$1.collectFromSource(CategorizeTextAggregator.java:180)
	at org.elasticsearch.xpack.ml.aggs.categorization.CategorizeTextAggregator$1.collect(CategorizeTextAggregator.java:163)
	at org.elasticsearch.search.aggregations.bucket.BucketsAggregator.collectExistingBucket(BucketsAggregator.java:98)
	at org.elasticsearch.search.aggregations.bucket.sampler.random.RandomSamplerAggregator$1.collect(RandomSamplerAggregator.java:108)
	at org.elasticsearch.search.aggregations.LeafBucketCollector.collect(LeafBucketCollector.java:86)
	at org.apache.lucene.search.FilterLeafCollector.collect(FilterLeafCollector.java:42)
	at org.apache.lucene.search.MatchAllDocsQuery$1$1.score(MatchAllDocsQuery.java:63)
	at org.apache.lucene.search.ConstantScoreQuery$ConstantBulkScorer.score(ConstantScoreQuery.java:99)
	at org.elasticsearch.search.internal.CancellableBulkScorer.score(CancellableBulkScorer.java:45)
	at org.apache.lucene.search.BulkScorer.score(BulkScorer.java:38)
	at org.elasticsearch.search.internal.ContextIndexSearcher.searchLeaf(ContextIndexSearcher.java:436)
	at org.elasticsearch.search.internal.ContextIndexSearcher.search(ContextIndexSearcher.java:365)
	at org.elasticsearch.search.internal.ContextIndexSearcher.lambda$search$3(ContextIndexSearcher.java:350)
	at org.apache.lucene.search.TaskExecutor$TaskGroup.lambda$createTask$0(TaskExecutor.java:117)
	at java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at org.elasticsearch.common.util.concurrent.TimedRunnable.doRun(TimedRunnable.java:33)
	at org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:984)
	at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:26)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.lang.Thread.run(Thread.java:1570)
""""""
      },
      ""stack_trace"": """"""org.elasticsearch.ElasticsearchException$1: Cannot invoke ""org.apache.lucene.search.Scorable.score()"" because ""this.scorer"" is null
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.ElasticsearchException.guessRootCauses(ElasticsearchException.java:704)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.action.search.AbstractSearchAsyncAction.executeNextPhase(AbstractSearchAsyncAction.java:414)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.action.search.AbstractSearchAsyncAction.onPhaseDone(AbstractSearchAsyncAction.java:756)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.action.search.AbstractSearchAsyncAction.onShardFailure(AbstractSearchAsyncAction.java:509)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.action.search.AbstractSearchAsyncAction$1.onFailure(AbstractSearchAsyncAction.java:337)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.action.ActionListenerImplementations.safeAcceptException(ActionListenerImplementations.java:62)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.action.ActionListenerImplementations.safeOnFailure(ActionListenerImplementations.java:73)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.action.DelegatingActionListener.onFailure(DelegatingActionListener.java:31)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.action.ActionListenerResponseHandler.handleException(ActionListenerResponseHandler.java:53)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.action.search.SearchTransportService$ConnectionCountingHandler.handleException(SearchTransportService.java:672)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.transport.TransportService$UnregisterChildTransportResponseHandler.handleException(TransportService.java:1766)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.transport.TransportService$ContextRestoreResponseHandler.handleException(TransportService.java:1490)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.transport.InboundHandler.doHandleException(InboundHandler.java:474)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.transport.InboundHandler.handleException(InboundHandler.java:461)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.transport.InboundHandler.handlerResponseError(InboundHandler.java:452)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.transport.InboundHandler.executeResponseHandler(InboundHandler.java:146)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.transport.InboundHandler.messageReceived(InboundHandler.java:123)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.transport.InboundHandler.inboundMessage(InboundHandler.java:97)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.transport.TcpTransport.inboundMessage(TcpTransport.java:821)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.transport.InboundPipeline.forwardFragments(InboundPipeline.java:124)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.transport.InboundPipeline.doHandleBytes(InboundPipeline.java:96)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.transport.InboundPipeline.handleBytes(InboundPipeline.java:61)
	at org.elasticsearch.transport.netty4@8.15.0-SNAPSHOT/org.elasticsearch.transport.netty4.Netty4MessageInboundHandler.channelRead(Netty4MessageInboundHandler.java:57)
	at io.netty.transport@4.1.109.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)
	at io.netty.transport@4.1.109.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.transport@4.1.109.Final/io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.codec@4.1.109.Final/io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:103)
	at io.netty.transport@4.1.109.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)
	at io.netty.transport@4.1.109.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.transport@4.1.109.Final/io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.handler@4.1.109.Final/io.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:1475)
	at io.netty.handler@4.1.109.Final/io.netty.handler.ssl.SslHandler.decodeJdkCompatible(SslHandler.java:1338)
	at io.netty.handler@4.1.109.Final/io.netty.handler.ssl.SslHandler.decode(SslHandler.java:1387)
	at io.netty.codec@4.1.109.Final/io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:530)
	at io.netty.codec@4.1.109.Final/io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:469)
	at io.netty.codec@4.1.109.Final/io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:290)
	at io.netty.transport@4.1.109.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)
	at io.netty.transport@4.1.109.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.transport@4.1.109.Final/io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.transport@4.1.109.Final/io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.transport@4.1.109.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)
	at io.netty.transport@4.1.109.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.transport@4.1.109.Final/io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.transport@4.1.109.Final/io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)
	at io.netty.transport@4.1.109.Final/io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)
	at io.netty.transport@4.1.109.Final/io.netty.channel.nio.NioEventLoop.processSelectedKeysPlain(NioEventLoop.java:689)
	at io.netty.transport@4.1.109.Final/io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:652)
	at io.netty.transport@4.1.109.Final/io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.common@4.1.109.Final/io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.common@4.1.109.Final/io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at java.base/java.lang.Thread.run(Thread.java:1570)
Caused by: java.lang.NullPointerException: Cannot invoke ""org.apache.lucene.search.Scorable.score()"" because ""this.scorer"" is null
	at org.apache.lucene.search.TopScoreDocCollector$SimpleTopScoreDocCollector$1.collect(TopScoreDocCollector.java:72)
	at org.elasticsearch.search.aggregations.metrics.TopHitsAggregator$1.collect(TopHitsAggregator.java:158)
	at org.elasticsearch.search.aggregations.bucket.BucketsAggregator.collectBucket(BucketsAggregator.java:90)
	at org.elasticsearch.xpack.ml.aggs.categorization.CategorizeTextAggregator$1.processTokenStream(CategorizeTextAggregator.java:204)
	at org.elasticsearch.xpack.ml.aggs.categorization.CategorizeTextAggregator$1.collectFromSource(CategorizeTextAggregator.java:180)
	at org.elasticsearch.xpack.ml.aggs.categorization.CategorizeTextAggregator$1.collect(CategorizeTextAggregator.java:163)
	at org.elasticsearch.search.aggregations.bucket.BucketsAggregator.collectExistingBucket(BucketsAggregator.java:98)
	at org.elasticsearch.search.aggregations.bucket.sampler.random.RandomSamplerAggregator$1.collect(RandomSamplerAggregator.java:108)
	at org.elasticsearch.search.aggregations.LeafBucketCollector.collect(LeafBucketCollector.java:86)
	at org.apache.lucene.search.FilterLeafCollector.collect(FilterLeafCollector.java:42)
	at org.apache.lucene.search.MatchAllDocsQuery$1$1.score(MatchAllDocsQuery.java:63)
	at org.apache.lucene.search.ConstantScoreQuery$ConstantBulkScorer.score(ConstantScoreQuery.java:99)
	at org.elasticsearch.search.internal.CancellableBulkScorer.score(CancellableBulkScorer.java:45)
	at org.apache.lucene.search.BulkScorer.score(BulkScorer.java:38)
	at org.elasticsearch.search.internal.ContextIndexSearcher.searchLeaf(ContextIndexSearcher.java:436)
	at org.elasticsearch.search.internal.ContextIndexSearcher.search(ContextIndexSearcher.java:365)
	at org.elasticsearch.search.internal.ContextIndexSearcher.lambda$search$3(ContextIndexSearcher.java:350)
	at org.apache.lucene.search.TaskExecutor$TaskGroup.lambda$createTask$0(TaskExecutor.java:117)
	at java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at org.elasticsearch.common.util.concurrent.TimedRunnable.doRun(TimedRunnable.java:33)
	at org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:984)
	at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:26)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.lang.Thread.run(Thread.java:1570)
""""""
    },
    ""stack_trace"": """"""Failed to execute phase [query], all shards failed; shardFailures {[zVlBFBb8QqSNzSPZgqKNfg][.ds-logs-foo-default-2024.06.25-000001][0]: org.elasticsearch.transport.RemoteTransportException: [instance-0000000002][172.17.0.6:19830][indices:data/read/search[phase/query]]
Caused by: org.elasticsearch.search.query.QueryPhaseExecutionException: Query Failed [Failed to execute main query]
	at org.elasticsearch.search.query.QueryPhase.addCollectorsAndSearch(QueryPhase.java:229)
	at org.elasticsearch.search.query.QueryPhase.executeQuery(QueryPhase.java:135)
	at org.elasticsearch.search.query.QueryPhase.execute(QueryPhase.java:62)
	at org.elasticsearch.indices.IndicesService.lambda$loadIntoContext$38(IndicesService.java:1592)
	at org.elasticsearch.indices.IndicesService.lambda$cacheShardLevelResult$39(IndicesService.java:1658)
	at org.elasticsearch.indices.IndicesRequestCache$Loader.load(IndicesRequestCache.java:164)
	at org.elasticsearch.indices.IndicesRequestCache$Loader.load(IndicesRequestCache.java:147)
	at org.elasticsearch.common.cache.Cache.computeIfAbsent(Cache.java:439)
	at org.elasticsearch.indices.IndicesRequestCache.getOrCompute(IndicesRequestCache.java:110)
	at org.elasticsearch.indices.IndicesService.cacheShardLevelResult(IndicesService.java:1664)
	at org.elasticsearch.indices.IndicesService.loadIntoContext(IndicesService.java:1586)
	at org.elasticsearch.search.SearchService.loadOrExecuteQueryPhase(SearchService.java:528)
	at org.elasticsearch.search.SearchService.executeQueryPhase(SearchService.java:688)
	at org.elasticsearch.search.SearchService.lambda$executeQueryPhase$2(SearchService.java:557)
	at org.elasticsearch.action.ActionRunnable$3.accept(ActionRunnable.java:78)
	at org.elasticsearch.action.ActionRunnable$3.accept(ActionRunnable.java:75)
	at org.elasticsearch.action.ActionRunnable$4.doRun(ActionRunnable.java:100)
	at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:26)
	at org.elasticsearch.common.util.concurrent.TimedRunnable.doRun(TimedRunnable.java:33)
	at org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:984)
	at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:26)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.lang.Thread.run(Thread.java:1570)
Caused by: java.lang.NullPointerException: Cannot invoke ""org.apache.lucene.search.Scorable.score()"" because ""this.scorer"" is null
	at org.apache.lucene.search.TopScoreDocCollector$SimpleTopScoreDocCollector$1.collect(TopScoreDocCollector.java:72)
	at org.elasticsearch.search.aggregations.metrics.TopHitsAggregator$1.collect(TopHitsAggregator.java:158)
	at org.elasticsearch.search.aggregations.bucket.BucketsAggregator.collectBucket(BucketsAggregator.java:90)
	at org.elasticsearch.xpack.ml.aggs.categorization.CategorizeTextAggregator$1.processTokenStream(CategorizeTextAggregator.java:204)
	at org.elasticsearch.xpack.ml.aggs.categorization.CategorizeTextAggregator$1.collectFromSource(CategorizeTextAggregator.java:180)
	at org.elasticsearch.xpack.ml.aggs.categorization.CategorizeTextAggregator$1.collect(CategorizeTextAggregator.java:163)
	at org.elasticsearch.search.aggregations.bucket.BucketsAggregator.collectExistingBucket(BucketsAggregator.java:98)
	at org.elasticsearch.search.aggregations.bucket.sampler.random.RandomSamplerAggregator$1.collect(RandomSamplerAggregator.java:108)
	at org.elasticsearch.search.aggregations.LeafBucketCollector.collect(LeafBucketCollector.java:86)
	at org.apache.lucene.search.FilterLeafCollector.collect(FilterLeafCollector.java:42)
	at org.apache.lucene.search.MatchAllDocsQuery$1$1.score(MatchAllDocsQuery.java:63)
	at org.apache.lucene.search.ConstantScoreQuery$ConstantBulkScorer.score(ConstantScoreQuery.java:99)
	at org.elasticsearch.search.internal.CancellableBulkScorer.score(CancellableBulkScorer.java:45)
	at org.apache.lucene.search.BulkScorer.score(BulkScorer.java:38)
	at org.elasticsearch.search.internal.ContextIndexSearcher.searchLeaf(ContextIndexSearcher.java:436)
	at org.elasticsearch.search.internal.ContextIndexSearcher.search(ContextIndexSearcher.java:365)
	at org.elasticsearch.search.internal.ContextIndexSearcher.lambda$search$3(ContextIndexSearcher.java:350)
	at org.apache.lucene.search.TaskExecutor$TaskGroup.lambda$createTask$0(TaskExecutor.java:117)
	at java.util.concurrent.FutureTask.run(FutureTask.java:317)
	... 6 more
}
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.action.search.AbstractSearchAsyncAction.onPhaseFailure(AbstractSearchAsyncAction.java:724)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.action.search.AbstractSearchAsyncAction.executeNextPhase(AbstractSearchAsyncAction.java:416)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.action.search.AbstractSearchAsyncAction.onPhaseDone(AbstractSearchAsyncAction.java:756)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.action.search.AbstractSearchAsyncAction.onShardFailure(AbstractSearchAsyncAction.java:509)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.action.search.AbstractSearchAsyncAction$1.onFailure(AbstractSearchAsyncAction.java:337)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.action.ActionListenerImplementations.safeAcceptException(ActionListenerImplementations.java:62)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.action.ActionListenerImplementations.safeOnFailure(ActionListenerImplementations.java:73)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.action.DelegatingActionListener.onFailure(DelegatingActionListener.java:31)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.action.ActionListenerResponseHandler.handleException(ActionListenerResponseHandler.java:53)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.action.search.SearchTransportService$ConnectionCountingHandler.handleException(SearchTransportService.java:672)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.transport.TransportService$UnregisterChildTransportResponseHandler.handleException(TransportService.java:1766)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.transport.TransportService$ContextRestoreResponseHandler.handleException(TransportService.java:1490)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.transport.InboundHandler.doHandleException(InboundHandler.java:474)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.transport.InboundHandler.handleException(InboundHandler.java:461)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.transport.InboundHandler.handlerResponseError(InboundHandler.java:452)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.transport.InboundHandler.executeResponseHandler(InboundHandler.java:146)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.transport.InboundHandler.messageReceived(InboundHandler.java:123)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.transport.InboundHandler.inboundMessage(InboundHandler.java:97)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.transport.TcpTransport.inboundMessage(TcpTransport.java:821)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.transport.InboundPipeline.forwardFragments(InboundPipeline.java:124)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.transport.InboundPipeline.doHandleBytes(InboundPipeline.java:96)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.transport.InboundPipeline.handleBytes(InboundPipeline.java:61)
	at org.elasticsearch.transport.netty4@8.15.0-SNAPSHOT/org.elasticsearch.transport.netty4.Netty4MessageInboundHandler.channelRead(Netty4MessageInboundHandler.java:57)
	at io.netty.transport@4.1.109.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)
	at io.netty.transport@4.1.109.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.transport@4.1.109.Final/io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.codec@4.1.109.Final/io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:103)
	at io.netty.transport@4.1.109.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)
	at io.netty.transport@4.1.109.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.transport@4.1.109.Final/io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.handler@4.1.109.Final/io.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:1475)
	at io.netty.handler@4.1.109.Final/io.netty.handler.ssl.SslHandler.decodeJdkCompatible(SslHandler.java:1338)
	at io.netty.handler@4.1.109.Final/io.netty.handler.ssl.SslHandler.decode(SslHandler.java:1387)
	at io.netty.codec@4.1.109.Final/io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:530)
	at io.netty.codec@4.1.109.Final/io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:469)
	at io.netty.codec@4.1.109.Final/io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:290)
	at io.netty.transport@4.1.109.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)
	at io.netty.transport@4.1.109.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.transport@4.1.109.Final/io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.transport@4.1.109.Final/io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.transport@4.1.109.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)
	at io.netty.transport@4.1.109.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.transport@4.1.109.Final/io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.transport@4.1.109.Final/io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)
	at io.netty.transport@4.1.109.Final/io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)
	at io.netty.transport@4.1.109.Final/io.netty.channel.nio.NioEventLoop.processSelectedKeysPlain(NioEventLoop.java:689)
	at io.netty.transport@4.1.109.Final/io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:652)
	at io.netty.transport@4.1.109.Final/io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.common@4.1.109.Final/io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.common@4.1.109.Final/io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at java.base/java.lang.Thread.run(Thread.java:1570)
Caused by: org.elasticsearch.ElasticsearchException$1: Cannot invoke ""org.apache.lucene.search.Scorable.score()"" because ""this.scorer"" is null
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.ElasticsearchException.guessRootCauses(ElasticsearchException.java:704)
	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.action.search.AbstractSearchAsyncAction.executeNextPhase(AbstractSearchAsyncAction.java:414)
	... 49 more
Caused by: java.lang.NullPointerException: Cannot invoke ""org.apache.lucene.search.Scorable.score()"" because ""this.scorer"" is null
	at org.apache.lucene.search.TopScoreDocCollector$SimpleTopScoreDocCollector$1.collect(TopScoreDocCollector.java:72)
	at org.elasticsearch.search.aggregations.metrics.TopHitsAggregator$1.collect(TopHitsAggregator.java:158)
	at org.elasticsearch.search.aggregations.bucket.BucketsAggregator.collectBucket(BucketsAggregator.java:90)
	at org.elasticsearch.xpack.ml.aggs.categorization.CategorizeTextAggregator$1.processTokenStream(CategorizeTextAggregator.java:204)
	at org.elasticsearch.xpack.ml.aggs.categorization.CategorizeTextAggregator$1.collectFromSource(CategorizeTextAggregator.java:180)
	at org.elasticsearch.xpack.ml.aggs.categorization.CategorizeTextAggregator$1.collect(CategorizeTextAggregator.java:163)
	at org.elasticsearch.search.aggregations.bucket.BucketsAggregator.collectExistingBucket(BucketsAggregator.java:98)
	at org.elasticsearch.search.aggregations.bucket.sampler.random.RandomSamplerAggregator$1.collect(RandomSamplerAggregator.java:108)
	at org.elasticsearch.search.aggregations.LeafBucketCollector.collect(LeafBucketCollector.java:86)
	at org.apache.lucene.search.FilterLeafCollector.collect(FilterLeafCollector.java:42)
	at org.apache.lucene.search.MatchAllDocsQuery$1$1.score(MatchAllDocsQuery.java:63)
	at org.apache.lucene.search.ConstantScoreQuery$ConstantBulkScorer.score(ConstantScoreQuery.java:99)
	at org.elasticsearch.search.internal.CancellableBulkScorer.score(CancellableBulkScorer.java:45)
	at org.apache.lucene.search.BulkScorer.score(BulkScorer.java:38)
	at org.elasticsearch.search.internal.ContextIndexSearcher.searchLeaf(ContextIndexSearcher.java:436)
	at org.elasticsearch.search.internal.ContextIndexSearcher.search(ContextIndexSearcher.java:365)
	at org.elasticsearch.search.internal.ContextIndexSearcher.lambda$search$3(ContextIndexSearcher.java:350)
	at org.apache.lucene.search.TaskExecutor$TaskGroup.lambda$createTask$0(TaskExecutor.java:117)
	at java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at org.elasticsearch.common.util.concurrent.TimedRunnable.doRun(TimedRunnable.java:33)
	at org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:984)
	at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:26)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.lang.Thread.run(Thread.java:1570)
""""""
  },
  ""status"": 500
}
```

</details>",benwtrent,closed,"['>bug', ':Analytics/Aggregations', ':ml', 'Team:Analytics', 'Team:ML']",https://github.com/elastic/elasticsearch/issues/110134,2024-06-25T12:41:17Z,7,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/110134,"{
  ""application_resource"": ""unsure""
}"
109,110076,[ESQL] SingleValueQuery may stop emitting some warnings if it is cached,"SingleValueQuery is a wrapper for lucene queries in ESQL. It wrps queries in order to emit warnings in case queries are being executed against multivalue fields. We don't fail the queries but emit warnings instead.

In https://github.com/elastic/elasticsearch/pull/110035 we fixed the implementation of equals and hashcode, with the side effect that queries might be cached by the query cache. The side effect is that queries that emit warnings, when running agains the cached version might stop emitting those warnings which is probably not desire.",iverase,closed,"['>bug', 'blocker', 'Team:Analytics', ':Analytics/ES|QL']",https://github.com/elastic/elasticsearch/issues/110076,2024-06-23T08:46:39Z,1,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/110076,"{
  ""application_resource"": ""yes""
}"
110,110052,[CI] JvmCrashIT testJvmCrash failing,"**Build Scans:**
- [elasticsearch-periodic-platform-support #3146 / windows-2019_checkpart1_platform-support-windows](https://gradle-enterprise.elastic.co/s/cniuylvdk2rxs)
- [elasticsearch-periodic-platform-support #3146 / windows-2022_checkpart1_platform-support-windows](https://gradle-enterprise.elastic.co/s/cmqcguq3vfnym)
- [elasticsearch-periodic-platform-support #3146 / windows-2016_checkpart1_platform-support-windows](https://gradle-enterprise.elastic.co/s/7mxwobmpyuqq2)

**Reproduction Line:**
```
gradlew ':test:external-modules:test-jvm-crash:javaRestTest' --tests ""org.elasticsearch.test.jvm_crash.JvmCrashIT.testJvmCrash"" -Dtests.seed=BCB1C54884DD6ACB -Dtests.locale=es-HN -Dtests.timezone=UCT -Druntime.java=22
```

**Applicable branches:**
main

**Reproduces locally?:**
N/A

**Failure History:**
[See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&_a=(controlGroupInput:(chainingSystem:HIERARCHICAL,controlStyle:twoLine,ignoreParentSettings:(ignoreFilters:!f,ignoreQuery:!f,ignoreTimerange:!f,ignoreValidations:!t),panels:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(explicitInput:(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,enhancements:(),fieldName:task.keyword,grow:!t,id:'0c0c9cb8-ccd2-45c6-9b13-96bac4abc542',searchTechnique:wildcard,selectedOptions:!(),singleSelect:!t,title:'Gradle%20Task',width:medium),grow:!t,order:0,type:optionsListControl,width:small),'144933da-5c1b-4257-a969-7f43455a7901':(explicitInput:(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,enhancements:(),fieldName:name.keyword,grow:!t,id:'144933da-5c1b-4257-a969-7f43455a7901',searchTechnique:wildcard,selectedOptions:!('testJvmCrash'),title:Test,width:medium),grow:!t,order:2,type:optionsListControl,width:medium),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(explicitInput:(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,enhancements:(),fieldName:className.keyword,grow:!t,id:'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850',searchTechnique:wildcard,selectedOptions:!('org.elasticsearch.test.jvm_crash.JvmCrashIT'),title:Suite,width:medium),grow:!t,order:1,type:optionsListControl,width:medium)))))

**Failure Message:**
```
java.lang.AssertionError: 
Expected: with toString() a string matching the pattern <.*# A fatal error has been detected by the Java Runtime Environment:.*SIGSEGV.*>
     but: toString() the string was ""[2024-06-21T14:03:42,879][INFO ][o.e.n.NativeAccess       ] [test-cluster-0] Using [jdk] native provider and native methods for [Windows]\r\n[2024-06-21T14:03:43,629][INFO ][o.a.l.i.v.PanamaVectorizationProvider] [test-cluster-0] Java vector incubator API enabled; uses preferredBitSize=256; FMA enabled\r\n[2024-06-21T14:03:44,642][INFO ][o.e.n.Node               ] [test-cluster-0] version[8.15.0-SNAPSHOT], pid[18612], build[zip/95d855923d17c4c64fd6a49d53c47930c87d06c9/2024-06-21T12:10:58.761630400Z], OS[Windows Server 2016/10.0/amd64], JVM[Oracle Corporation/OpenJDK 64-Bit Server VM/22.0.1/22.0.1+8-16]\r\n[2024-06-21T14:03:44,647][INFO ][o.e.n.Node               ] [test-cluster-0] JVM home [C:\\Users\\buildkite\\.gradle\\jdks\\oracle_corporation-22-amd64-windows\\jdk-22.0.1], using bundled JDK [false]\r\n[2024-06-21T14:03:44,648][INFO ][o.e.n.Node               ] [test-cluster-0] JVM arguments [-Des.networkaddress.cache.ttl=60, -Des.networkaddress.cache.negative.ttl=10, -Djava.security.manager=allow, -XX:+AlwaysPreTouch, -Xss1m, -Djava.awt.headless=true, -Dfile.encoding=UTF-8, -Djna.nosys=true, -XX:-OmitStackTraceInFastThrow, -Dio.netty.noUnsafe=true, -Dio.netty.noKeySetOptimization=true, -Dio.netty.recycler.maxCapacityPerThread=0, -Dlog4j.shutdownHookEnabled=false, -Dlog4j2.disable.jmx=true, -Dlog4j2.formatMsgNoLookups=true, -Djava.locale.providers=SPI,COMPAT, --add-opens=java.base/java.io=org.elasticsearch.preallocate, --enable-native-access=org.elasticsearch.nativeaccess,org.apache.lucene.core, -XX:ReplayDataFile=logs/replay_pid%p.log, -Djava.library.path=C:\\bk\\test\\external-modules\\jvm-crash\\build\\testrun\\javaRestTest\\temp\\test-cluster3175310756303214425\\test-cluster-0\\distro\\8.15.0\\lib\\platform\\windows-x64;C:\\Users\\buildkite\\.gradle\\jdks\\oracle_corporation-22-amd64-windows\\jdk-22.0.1\\bin;C:\\Windows\\Sun\\Java\\bin;C:\\Windows\\system32;C:\\Windows;., -Djna.library.path=C:\\bk\\test\\external-modules\\jvm-crash\\build\\testrun\\javaRestTest\\temp\\test-cluster3175310756303214425\\test-cluster-0\\distro\\8.15.0\\lib\\platform\\windows-x64;C:\\Users\\buildkite\\.gradle\\jdks\\oracle_corporation-22-amd64-windows\\jdk-22.0.1\\bin;C:\\Windows\\Sun\\Java\\bin;C:\\Windows\\system32;C:\\Windows;., -Des.distribution.type=zip, -XX:+UnlockDiagnosticVMOptions, -XX:G1NumCollectionsKeepPinned=10000000, -XX:+UseG1GC, -Djava.io.tmpdir=C:\\bk\\test\\external-modules\\jvm-crash\\build\\testrun\\javaRestTest\\temp\\test-cluster3175310756303214425\\test-cluster-0\\tmp, --add-modules=jdk.incubator.vector, -XX:+HeapDumpOnOutOfMemoryError, -XX:+ExitOnOutOfMemoryError, -XX:HeapDumpPath=C:\\bk\\test\\external-modules\\jvm-crash\\build\\testrun\\javaRestTest\\temp\\test-cluster3175310756303214425\\test-cluster-0\\logs, -XX:ErrorFile=C:\\bk\\test\\external-modules\\jvm-crash\\build\\testrun\\javaRestTest\\temp\\test-cluster3175310756303214425\\test-cluster-0\\logs\\hs_err_pid%p.log, -Xlog:gc*,gc+age=trace,safepoint:file=C:\\bk\\test\\external-modules\\jvm-crash\\build\\testrun\\javaRestTest\\temp\\test-cluster3175310756303214425\\test-cluster-0\\logs\\gc.log:utctime,level,pid,tags:filecount=32,filesize=64m, -Xms512m, -Xmx512m, -ea, -esa, -Djvm.crash=true, -XX:MaxDirectMemorySize=268435456, -XX:G1HeapRegionSize=4m, -XX:InitiatingHeapOccupancyPercent=30, -XX:G1ReservePercent=15, --module-path=C:\\bk\\test\\external-modules\\jvm-crash\\build\\testrun\\javaRestTest\\temp\\test-cluster3175310756303214425\\test-cluster-0\\distro\\8.15.0\\lib, --add-modules=jdk.net, --add-modules=ALL-MODULE-PATH, -Djdk.module.main=org.elasticsearch.server]\r\n[2024-06-21T14:03:44,649][INFO ][o.e.n.Node               ] [test-cluster-0] Default Locale [en_US]\r\n[2024-06-21T14:03:44,650][WARN ][o.e.n.Node               ] [test-cluster-0] version [8.15.0-SNAPSHOT] is a pre-release version of Elasticsearch and is not suitable for production\r\n[2024-06-21T14:03:45,911][INFO ][o.e.p.PluginsService     ] [test-cluster-0] loaded module [x-pack-core]\r\n[2024-06-21T14:03:45,911][INFO ][o.e.p.PluginsService     ] [test-cluster-0] loaded module [x-pack-security]\r\n[2024-06-21T14:03:45,912][INFO ][o.e.p.PluginsService     ] [test-cluster-0] loaded module [transport-netty4]\r\n[2024-06-21T14:03:45,912][INFO ][o.e.p.PluginsService     ] [test-cluster-0] loaded module [test-jvm-crash]\r\n[2024-06-21T14:03:47,152][INFO ][o.e.c.u.FeatureFlag      ] [test-cluster-0] The current build is a snapshot, feature flag [madv_random] is enabled\r\n[2024-06-21T14:03:47,522][INFO ][o.e.e.NodeEnvironment    ] [test-cluster-0] using [1] data paths, mounts [[(C:)]], net usable_space [287.7gb], net total_space [349.8gb], types [NTFS]\r\n[2024-06-21T14:03:47,523][INFO ][o.e.e.NodeEnvironment    ] [test-cluster-0] heap size [512mb], compressed ordinary object pointers [true]\r\n[2024-06-21T14:03:47,543][INFO ][o.e.n.Node               ] [test-cluster-0] node name [test-cluster-0], node ID [H7cMutpyT02cCctNxO4BKA], cluster name [test-cluster], roles [data_cold, data, remote_cluster_client, master, data_warm, data_content, transform, data_hot, ml, data_frozen, ingest]\r\n[2024-06-21T14:03:48,462][INFO ][o.e.i.r.RecoverySettings ] [test-cluster-0] using rate limit [40mb] with [default=40mb, read=0b, write=0b, max=0b]\r\n[2024-06-21T14:03:48,659][INFO ][o.e.f.FeatureService     ] [test-cluster-0] Registered local node features [desired_node.version_deprecated, features_supported, file_settings, health.extended_repository_indicator, knn_retriever_supported, license-trial-independent-version, mapper.pass_through_priority, mapper.range.null_values_off_by_one_fix, mapper.source.synthetic_source_fallback, mapper.track_ignored_source, mapper.vectors.int4_quantization, rest.capabilities_action, retrievers_supported, script.hamming, security.migration_framework, security.roles_metadata_flattened, standard_retriever_supported, stats.include_disk_thresholds, unified_highlighter_matched_fields, usage.data_tiers.precalculate_stats]\r\n[2024-06-21T14:03:48,995][INFO ][o.e.x.s.Security         ] [test-cluster-0] Security is disabled\r\n[2024-06-21T14:03:49,288][INFO ][o.e.t.n.NettyAllocator   ] [test-cluster-0] creating NettyAllocator with the following configs: [name=unpooled, suggested_max_allocation_size=1mb, factors={es.unsafe.use_unpooled_allocator=null, g1gc_enabled=true, g1gc_region_size=4mb, heap_size=512mb}]\r\n[2024-06-21T14:03:49,372][INFO ][o.e.d.DiscoveryModule    ] [test-cluster-0] using discovery type [multi-node] and seed hosts providers [settings, file]\r\n[2024-06-21T14:03:50,569][INFO ][o.e.n.Node               ] [test-cluster-0] initialized\r\n[2024-06-21T14:03:50,571][INFO ][o.e.n.Node               ] [test-cluster-0] starting ...\r\n[2024-06-21T14:03:50,765][INFO ][o.e.t.TransportService   ] [test-cluster-0] publish_address {127.0.0.1:59794}, bound_addresses {[::1]:59793}, {127.0.0.1:59794}\r\n[2024-06-21T14:03:51,039][INFO ][o.e.c.c.ClusterBootstrapService] [test-cluster-0] this node has not joined a bootstrapped cluster yet; [cluster.initial_master_nodes] is set to [test-cluster-0]\r\n[2024-06-21T14:03:51,046][WARN ][o.e.d.FileBasedSeedHostsProvider] [test-cluster-0] expected, but did not find, a dynamic hosts list at [C:\\bk\\test\\external-modules\\jvm-crash\\build\\testrun\\javaRestTest\\temp\\test-cluster3175310756303214425\\test-cluster-0\\config\\unicast_hosts.txt]\r\n[2024-06-21T14:03:51,046][INFO ][o.e.c.c.Coordinator      ] [test-cluster-0] setting initial configuration to VotingConfiguration{H7cMutpyT02cCctNxO4BKA}\r\n[2024-06-21T14:03:51,143][INFO ][o.e.h.AbstractHttpServerTransport] [test-cluster-0] publish_address {127.0.0.1:59796}, bound_addresses {[::1]:59795}, {127.0.0.1:59796}\r\n[2024-06-21T14:03:51,165][INFO ][o.e.n.Node               ] [test-cluster-0] started {test-cluster-0}{H7cMutpyT02cCctNxO4BKA}{38JRkdpbQcGHJu-VAuUa3A}{test-cluster-0}{127.0.0.1}{127.0.0.1:59794}{cdfhilmrstw}{8.15.0}{7000099-8508000}{testattr=test, xpack.installed=true}\r\n[2024-06-21T14:03:51,289][INFO ][o.e.c.s.MasterService    ] [test-cluster-0] elected-as-master ([1] nodes joined in term 1)[_FINISH_ELECTION_, {test-cluster-0}{H7cMutpyT02cCctNxO4BKA}{38JRkdpbQcGHJu-VAuUa3A}{test-cluster-0}{127.0.0.1}{127.0.0.1:59794}{cdfhilmrstw}{8.15.0}{7000099-8508000} completing election], term: 1, version: 1, delta: master node changed {previous [], current [{test-cluster-0}{H7cMutpyT02cCctNxO4BKA}{38JRkdpbQcGHJu-VAuUa3A}{test-cluster-0}{127.0.0.1}{127.0.0.1:59794}{cdfhilmrstw}{8.15.0}{7000099-8508000}]}\r\n[2024-06-21T14:03:51,339][INFO ][o.e.c.c.CoordinationState] [test-cluster-0] cluster UUID set to [iPH2DCsNQ5-fh7-dpqfylg]\r\n[2024-06-21T14:03:51,339][INFO ][o.e.c.u.FeatureFlag      ] [test-cluster-0] The current build is a snapshot, feature flag [failure_store] is enabled\r\n[2024-06-21T14:03:51,379][INFO ][o.e.c.s.ClusterApplierService] [test-cluster-0] master node changed {previous [], current [{test-cluster-0}{H7cMutpyT02cCctNxO4BKA}{38JRkdpbQcGHJu-VAuUa3A}{test-cluster-0}{127.0.0.1}{127.0.0.1:59794}{cdfhilmrstw}{8.15.0}{7000099-8508000}]}, term: 1, version: 1, reason: Publication{term=1, version=1}\r\n[2024-06-21T14:03:51,432][INFO ][o.e.c.c.NodeJoinExecutor ] [test-cluster-0] node-join: [{test-cluster-0}{H7cMutpyT02cCctNxO4BKA}{38JRkdpbQcGHJu-VAuUa3A}{test-cluster-0}{127.0.0.1}{127.0.0.1:59794}{cdfhilmrstw}{8.15.0}{7000099-8508000}] with reason [completing election]\r\n[2024-06-21T14:03:51,464][INFO ][o.e.c.f.AbstractFileWatchingService] [test-cluster-0] starting file watcher ...\r\n[2024-06-21T14:03:51,471][INFO ][o.e.c.f.AbstractFileWatchingService] [test-cluster-0] file settings service up and running [tid=67]\r\n[2024-06-21T14:03:51,472][INFO ][o.e.r.s.FileSettingsService] [test-cluster-0] setting file [C:\\bk\\test\\external-modules\\jvm-crash\\build\\testrun\\javaRestTest\\temp\\test-cluster3175310756303214425\\test-cluster-0\\config\\operator\\settings.json] not found, initializing [file_settings] as empty\r\n[2024-06-21T14:03:51,473][INFO ][o.e.g.GatewayService     ] [test-cluster-0] recovered [0] indices into cluster_state\r\n[2024-06-21T14:03:51,583][INFO ][o.e.h.n.s.HealthNodeTaskExecutor] [test-cluster-0] Node [{test-cluster-0}{H7cMutpyT02cCctNxO4BKA}] is selected as the current health node.\r\n[2024-06-21T14:03:51,785][INFO ][o.e.l.ClusterStateLicenseService] [test-cluster-0] license [cffbba22-d938-4877-965f-1457971c195a] mode [basic] - valid\r\n""
```

**Mute Reasons:**
- [main] 3 failures in test testJvmCrash (4.7% fail rate)

**Note:**
This issue was created using new, in-development muting automation. Please mind any issues.",elasticsearchmachine,closed,"[':Core/Infra/Core', '>test-failure', 'Team:Core/Infra', 'low-risk']",https://github.com/elastic/elasticsearch/issues/110052,2024-06-21T15:10:22Z,5,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/110052,"{
  ""application_resource"": ""unsure""
}"
111,109901,[CI] PackageUpgradeTests test10InstallBwcVersion failing,"This fails on many branches include 8.14.2 and all the way to 8.1.3

**Build scan:**
https://gradle-enterprise.elastic.co/s/ohrrdisecnssi/tests/:qa:packaging:destructiveDistroUpgradeTest.v8.3.3.default-rpm/org.elasticsearch.packaging.test.PackageUpgradeTests/test10InstallBwcVersion


**Reproduction line:**
```
null
```

**Applicable branches:**
8.14

**Reproduces locally?:**
Didn't try

**Failure history:**
[Failure dashboard for `org.elasticsearch.packaging.test.PackageUpgradeTests#test10InstallBwcVersion`](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&_a=(controlGroupInput:(chainingSystem:HIERARCHICAL,controlStyle:twoLine,ignoreParentSettings:(ignoreFilters:!f,ignoreQuery:!f,ignoreTimerange:!f,ignoreValidations:!t),panels:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(explicitInput:(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,enhancements:(),fieldName:task.keyword,grow:!t,id:'0c0c9cb8-ccd2-45c6-9b13-96bac4abc542',searchTechnique:wildcard,selectedOptions:!(),singleSelect:!t,title:'Gradle%20Task',width:medium),grow:!t,order:0,type:optionsListControl,width:small),'144933da-5c1b-4257-a969-7f43455a7901':(explicitInput:(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,enhancements:(),fieldName:name.keyword,grow:!t,id:'144933da-5c1b-4257-a969-7f43455a7901',searchTechnique:wildcard,selectedOptions:!('test10InstallBwcVersion'),title:Test,width:medium),grow:!t,order:2,type:optionsListControl,width:medium),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(explicitInput:(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,enhancements:(),fieldName:className.keyword,grow:!t,id:'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850',searchTechnique:wildcard,selectedOptions:!('org.elasticsearch.packaging.test.PackageUpgradeTests'),title:Suite,width:medium),grow:!t,order:1,type:optionsListControl,width:medium)))))


**Failure excerpt:**
```
java.lang.RuntimeException: Installing distribution org.elasticsearch.packaging.util.Distribution@3d568341 failed: exitCode = [1] stdout = [] stderr = [warning: /opt/buildkite-agent/.gradle/caches/modules-2/files-2.1/elasticsearch-distribution/elasticsearch/8.3.3/2965288f452b7d3aeeb4ec83199c64e3b6e78910/elasticsearch-8.3.3-x86_64.rpm: Header V4 RSA/SHA512 Signature, key ID d88e42b4: NOKEY
	installing package elasticsearch-0:8.3.3-1.x86_64 needs 1009MB on the / filesystem]

  at __randomizedtesting.SeedInfo.seed([29857869666838E8:BAB6D26F9FC895]:0)
  at org.elasticsearch.packaging.util.Packages.installPackage(Packages.java:93)
  at org.elasticsearch.packaging.util.Packages.installPackage(Packages.java:82)
  at org.elasticsearch.packaging.test.PackageUpgradeTests.test10InstallBwcVersion(PackageUpgradeTests.java:47)
  at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
  at java.lang.reflect.Method.invoke(Method.java:580)
  at com.carrotsearch.randomizedtesting.RandomizedRunner.invoke(RandomizedRunner.java:1758)
  at com.carrotsearch.randomizedtesting.RandomizedRunner$8.evaluate(RandomizedRunner.java:946)
  at com.carrotsearch.randomizedtesting.RandomizedRunner$9.evaluate(RandomizedRunner.java:982)
  at com.carrotsearch.randomizedtesting.RandomizedRunner$10.evaluate(RandomizedRunner.java:996)
  at org.junit.rules.TestWatcher$1.evaluate(TestWatcher.java:61)
  at org.junit.rules.TestWatcher$1.evaluate(TestWatcher.java:61)
  at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)
  at com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:390)
  at com.carrotsearch.randomizedtesting.ThreadLeakControl.lambda$forkTimeoutingTask$0(ThreadLeakControl.java:850)
  at java.lang.Thread.run(Thread.java:1570)

```",ywangd,closed,"[':Delivery/Packaging', '>test-failure', 'Team:Delivery', 'needs:risk']",https://github.com/elastic/elasticsearch/issues/109901,2024-06-19T05:36:49Z,4,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/109901,"{
  ""application_resource"": ""no""
}"
112,109461,"Data too large, data for [<http_request>] would be [4542266196/4.2gb], which is larger than the limit of [4509715660/4.1gb","### Elasticsearch Version

7.17.14

### Installed Plugins

_No response_

### Java Version

openjdk version ""21"" 2023-09-19

### OS Version

centos 7.9

### Problem Description

The Java heap memory of ES is full, and a request error occurs, but there will be no GC. After using external tools to assist it in executing GC, everything returns to normal.

### Steps to Reproduce

This is an error message

```
[parent] Data too large, data for [<http_request>] would be [4542266196/4.2gb], which is larger than the limit of [4509715660/4.1gb], real usage: [4542265928/4.2gb], new bytes reserved: [268/268b], usages [request=0/0b, fielddata=0/0b, in_flight_requests=268/268b, model_inference=0/0b, eql_sequence=0/0b, accounting=240580/234.9kb
```

startup jvm parameter
```
/data/elasticsearch/elasticsearch-7.17.14/jdk/bin/java -Xshare:auto -Des.networkaddress.cache.ttl=60 -Des.networkaddress.cache.negative.ttl=10 -XX:+AlwaysPreTouch -Xss1m -Djav.awt.headless=true -Dfile.encoding=UTF-8 -Djna.nosys=true -XX:-OmitStackTraceInFastThrow -XX:+ShowCodeDetailsInExceptionMessages -Dio.netty.noUnsafe=true -Dio.netty.noKeySetOptimization=true -Dio.netty.recycler.maxCapacityPerThread=0 -Dio.netty.allocator.numDirectArenas=0 -Dlog4j.shutdownHookEnabled=false -Dlog4j2.disable.jmx=true -Dlog4j2.formatMsgNoLookups=true -Djava.locale.providers=SPI,COMPAT --add-opens=java.base/java.io=ALL-UNNAMED -Djava.security.manager=allow -XX:+UseG1GC -Djava.io.tmpdir=/tmp/elasticsearch-1620762326664537413 -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=data -XX:ErrorFile=/data/elasticsearch/eslogs/hs_err_pid%p.log -Xlog:gc*,gc+age=trace,safepoint:file=/data/elasticsearch/eslogs/gc.log:utctime,pid,tags:filecount=6,filesize=128m -Xms6g -Xmx6g -XX:MaxDirectMemorySize=3221225472 -XX:G1HeapRegionSize=4m -XX:InitiatingHeapOccupancyPercent=30 -XX:G1ReservePercent=15 -Des.path.home=/data/elasticsearch/elasticsearch-7.17.14 -Des.path.conf=/data/elasticsearch/elasticsearch-7.17.14/config -Des.distribution.flavor=default -Des.distribution.type=tar -Des.bundled_jdk=true -cp /data/elasticsearch/elasticsearch-7.17.14/lib/* org.elasticsearch.bootstrap.Elasticsearch -d
```

startup es parameter
```
indices.breaker.total.limit: 80%
indices.memory.index_buffer_size: 20%
cluster.max_shards_per_node: 10000
```

jhsdb jmap --heap --pid 49150

```
Debugger attached successfully.
Server compiler detected.
JVM version is 21+35-2513

using thread-local object allocation.
Garbage-First (G1) GC with 4 thread(s)

Heap Configuration:
   MinHeapFreeRatio         = 40
   MaxHeapFreeRatio         = 70
   MaxHeapSize              = 6442450944 (6144.0MB)
   NewSize                  = 1363144 (1.2999954223632812MB)
   MaxNewSize               = 3862953984 (3684.0MB)
   OldSize                  = 5452592 (5.1999969482421875MB)
   NewRatio                 = 2
   SurvivorRatio            = 8
   MetaspaceSize            = 22020096 (21.0MB)
   CompressedClassSpaceSize = 1073741824 (1024.0MB)
   MaxMetaspaceSize         = 17592186044415 MB
   G1HeapRegionSize         = 4194304 (4.0MB)

Heap Usage:
G1 Heap:
   regions  = 1536
   capacity = 6442450944 (6144.0MB)
   used     = 4554717080 (4343.716697692871MB)
   free     = 1887733864 (1800.283302307129MB)
   70.6985139598449% used
G1 Young Generation:
Eden Space:
   regions  = 2
   capacity = 1140850688 (1088.0MB)
   used     = 8388608 (8.0MB)
   free     = 1132462080 (1080.0MB)
   0.7352941176470589% used
Survivor Space:
   regions  = 0
   capacity = 0 (0.0MB)
   used     = 0 (0.0MB)
   free     = 0 (0.0MB)
   0.0% used
G1 Old Generation:
   regions  = 1123
   capacity = 5301600256 (5056.0MB)
   used     = 4546328472 (4335.716697692871MB)
   free     = 755271784 (720.2833023071289MB)
   85.75389038158369% used
```

I use tools to assist ES in executing GCÔºå Everything is okay
```
./jcmd pid GC.run
```

```
G1 Old Generation:
   regions  = 53
   capacity = 2382364672 (2272.0MB)
   used     = 212700864 (202.84735107421875MB)
   free     = 2169663808 (2069.1526489257812MB)
   8.928140452210332% used
```





### Logs (if relevant)

_No response_",xhrg,closed,"['>bug', 'needs:triage']",https://github.com/elastic/elasticsearch/issues/109461,2024-06-07T03:10:26Z,1,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/109461,"{
  ""application_resource"": ""yes""
}"
113,109455,[CI] MappingIT testMapperDynamicIndexSetting failing,"This looks to be a new test added in https://github.com/elastic/elasticsearch/pull/109301

**Build scan:**
https://gradle-enterprise.elastic.co/s/hoxn5f3dd54hk/tests/:qa:rolling-upgrade:v7.13.4%23oneThirdUpgradedTest/org.elasticsearch.upgrades.MappingIT/testMapperDynamicIndexSetting


**Reproduction line:**
```
./gradlew ':qa:rolling-upgrade:v7.13.4#oneThirdUpgradedTest' -Dtests.class=""org.elasticsearch.upgrades.MappingIT"" -Dtests.method=""testMapperDynamicIndexSetting"" -Dtests.seed=272DB9A7614B8058 -Dtests.bwc=true -Dtests.locale=es-CO -Dtests.timezone=Asia/Baghdad -Druntime.java=22
```

**Applicable branches:**
7.17

**Reproduces locally?:**
Didn't try

**Failure history:**
[Failure dashboard for `org.elasticsearch.upgrades.MappingIT#testMapperDynamicIndexSetting`](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&_a=(controlGroupInput:(chainingSystem:HIERARCHICAL,controlStyle:twoLine,ignoreParentSettings:(ignoreFilters:!f,ignoreQuery:!f,ignoreTimerange:!f,ignoreValidations:!t),panels:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(explicitInput:(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,enhancements:(),fieldName:task.keyword,grow:!t,id:'0c0c9cb8-ccd2-45c6-9b13-96bac4abc542',searchTechnique:wildcard,selectedOptions:!(),singleSelect:!t,title:'Gradle%20Task',width:medium),grow:!t,order:0,type:optionsListControl,width:small),'144933da-5c1b-4257-a969-7f43455a7901':(explicitInput:(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,enhancements:(),fieldName:name.keyword,grow:!t,id:'144933da-5c1b-4257-a969-7f43455a7901',searchTechnique:wildcard,selectedOptions:!('testMapperDynamicIndexSetting'),title:Test,width:medium),grow:!t,order:2,type:optionsListControl,width:medium),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(explicitInput:(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,enhancements:(),fieldName:className.keyword,grow:!t,id:'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850',searchTechnique:wildcard,selectedOptions:!('org.elasticsearch.upgrades.MappingIT'),title:Suite,width:medium),grow:!t,order:1,type:optionsListControl,width:medium)))))


**Failure excerpt:**
```
java.lang.AssertionError: timed out waiting for green state for index [my-index] cluster state [{
  ""cluster_name"" : ""v7.13.4"",
  ""cluster_uuid"" : ""jdJyCc9nRbK52Z3qrblQrA"",
  ""version"" : 387,
  ""state_uuid"" : ""ugOc_dkoSqu0CeTWhRysTw"",
  ""master_node"" : ""5SaXoi7LQv-rMGdQWoEcsg"",
  ""blocks"" : {
    ""indices"" : {
      ""closed_index_created_on_old"" : {
        ""4"" : {
          ""description"" : ""index closed"",
          ""retryable"" : false,
          ""levels"" : [
            ""read"",
            ""write""
          ]
        }
      },
      ""index_old_7130499"" : {
        ""4"" : {
          ""description"" : ""index closed"",
          ""retryable"" : false,
          ""levels"" : [
            ""read"",
            ""write""
          ]
        }
      },
      ""closed_index_replica_allocation"" : {
        ""4"" : {
          ""description"" : ""index closed"",
          ""retryable"" : false,
          ""levels"" : [
            ""read"",
            ""write""
          ]
        }
      }
    }
  },
  ""nodes"" : {
    ""DN1nowVMRZeeiWTNpNoxxQ"" : {
      ""name"" : ""v7.13.4-2"",
      ""ephemeral_id"" : ""bC1AVhnJSeaCCm5qK9AI4g"",
      ""transport_address"" : ""127.0.0.1:42289"",
      ""attributes"" : {
        ""testattr"" : ""test"",
        ""ml.machine_memory"" : ""126604300288"",
        ""ml.max_open_jobs"" : ""512"",
        ""xpack.installed"" : ""true"",
        ""ml.max_jvm_size"" : ""536870912"",
        ""transform.node"" : ""true""
      },
      ""roles"" : [
        ""data"",
        ""data_cold"",
        ""data_content"",
        ""data_frozen"",
        ""data_hot"",
        ""data_warm"",
        ""ingest"",
        ""master"",
        ""ml"",
        ""remote_cluster_client"",
        ""transform""
      ]
    },
    ""5SaXoi7LQv-rMGdQWoEcsg"" : {
      ""name"" : ""v7.13.4-1"",
      ""ephemeral_id"" : ""qDGsIvPzSc2cfALfpe0psA"",
      ""transport_address"" : ""127.0.0.1:34839"",
      ""attributes"" : {
        ""testattr"" : ""test"",
        ""ml.machine_memory"" : ""126604300288"",
        ""ml.max_open_jobs"" : ""512"",
        ""xpack.installed"" : ""true"",
        ""ml.max_jvm_size"" : ""536870912"",
        ""transform.node"" : ""true""
      },
      ""roles"" : [
        ""data"",
        ""data_cold"",
        ""data_content"",
        ""data_frozen"",
        ""data_hot"",
        ""data_warm"",
        ""ingest"",
        ""master"",
        ""ml"",
        ""remote_cluster_client"",
        ""transform""
      ]
    },
    ""vz9cOsqBRGSQfSLU8TOO0w"" : {
      ""name"" : ""v7.13.4-0"",
      ""ephemeral_id"" : ""dHnz-_AlSn6QKeLPjJyrVA"",
      ""transport_address"" : ""127.0.0.1:43783"",
      ""attributes"" : {
        ""ml.machine_memory"" : ""126604300288"",
        ""upgraded"" : ""true"",
        ""xpack.installed"" : ""true"",
        ""transform.node"" : ""true"",
        ""testattr"" : ""test"",
        ""ml.max_open_jobs"" : ""512"",
        ""ml.max_jvm_size"" : ""536870912""
      },
      ""roles"" : [
        ""data"",
        ""data_cold"",
        ""data_content"",
        ""data_frozen"",
        ""data_hot"",
        ""data_warm"",
        ""ingest"",
        ""master"",
        ""ml"",
        ""remote_cluster_client"",
        ""transform""
      ]
    }
  },
  ""metadata"" : {
    ""cluster_uuid"" : ""jdJyCc9nRbK52Z3qrblQrA"",
    ""cluster_uuid_committed"" : true,
    ""cluster_coordination"" : {
      ""term"" : 1,
      ""last_committed_config"" : [
        ""DN1nowVMRZeeiWTNpNoxxQ"",
        ""vz9cOsqBRGSQfSLU8TOO0w"",
        ""5SaXoi7LQv-rMGdQWoEcsg""
      ],
      ""last_accepted_config"" : [
        ""DN1nowVMRZeeiWTNpNoxxQ"",
        ""vz9cOsqBRGSQfSLU8TOO0w"",
        ""5SaXoi7LQv-rMGdQWoEcsg""
      ],
      ""voting_config_exclusions"" : [ ]
    },
    ""templates"" : {
      "".ml-stats"" : {
        ""order"" : 0,
        ""version"" : 7130499,
        ""index_patterns"" : [
          "".ml-stats-*""
        ],
        ""settings"" : {
          ""index"" : {
            ""lifecycle"" : {
              ""name"" : ""ml-size-based-ilm-policy"",
              ""rollover_alias"" : "".ml-stats-write""
            },
            ""hidden"" : ""true"",
            ""number_of_shards"" : ""1"",
            ""auto_expand_replicas"" : ""0-1""
          }
        },
        ""mappings"" : {
          ""_doc"" : {
            ""_meta"" : {
              ""version"" : ""7.13.4""
            },
            ""dynamic"" : false,
            ""properties"" : {
              ""skipped_docs_count"" : {
                ""type"" : ""long""
              },
              ""validation_loss"" : {
                ""properties"" : {
                  ""fold_values"" : {
                    ""properties"" : {
                      ""fold"" : {
                        ""type"" : ""integer""
                      },
                      ""values"" : {
                        ""type"" : ""double""
                      }
                    }
                  },
                  ""loss_type"" : {
                    ""type"" : ""keyword""
                  }
                }
              },
              ""cache_miss_count"" : {
                ""type"" : ""long""
              },
              ""timing_stats"" : {
                ""properties"" : {
                  ""iteration_time"" : {
                    ""type"" : ""long""
                  },
                  ""elapsed_time"" : {
                    ""type"" : ""long""
                  }
                }
              },
              ""failure_count"" : {
                ""type"" : ""long""
              },
              ""model_id"" : {
                ""type"" : ""keyword""
              },
              ""type"" : {
                ""type"" : ""keyword""
              },
              ""training_docs_count"" : {
                ""type"" : ""long""
              },
              ""inference_count"" : {
                ""type"" : ""long""
              },
              ""job_id"" : {
                ""type"" : ""keyword""
              },
              ""missing_all_fields_count"" : {
                ""type"" : ""long""
              },
              ""peak_usage_bytes"" : {
                ""type"" : ""long""
              },
              ""iteration"" : {
                ""type"" : ""integer""
              },
              ""hyperparameters"" : {
                ""properties"" : {
                  ""max_attempts_to_add_tree"" : {
                    ""type"" : ""integer""
                  },
                  ""downsample_factor"" : {
                    ""type"" : ""double""
                  },
                  ""eta_growth_rate_per_tree"" : {
                    ""type"" : ""double""
                  },
                  ""soft_tree_depth_tolerance"" : {
                    ""type"" : ""double""
                  },
                  ""max_trees"" : {
                    ""type"" : ""integer""
                  },
                  ""lambda"" : {
                    ""type"" : ""double""
                  },
                  ""max_optimization_rounds_per_hyperparameter"" : {
                    ""type"" : ""integer""
                  },
                  ""eta"" : {
                    ""type"" : ""double""
                  },
                  ""soft_tree_depth_limit"" : {
                    ""type"" : ""double""
                  },
                  ""alpha"" : {
                    ""type"" : ""double""
                  },
                  ""class_assignment_objective"" : {
                    ""type"" : ""keyword""
                  },
                  ""feature_bag_fraction"" : {
                    ""type"" : ""double""
                  },
                  ""num_splits_per_feature"" : {
                    ""type"" : ""integer""
                  },
                  ""gamma"" : {
                    ""type"" : ""double""
                  },
                  ""num_folds"" : {
                    ""type"" : ""integer""
                  }
                }
              },
              ""parameters"" : {
                ""properties"" : {
                  ""compute_feature_influence"" : {
                    ""type"" : ""boolean""
                  },
                  ""feature_influence_threshold"" : {
                    ""type"" : ""double""
                  },
                  ""outlier_fraction"" : {
                    ""type"" : ""double""
                  },
                  ""method"" : {
                    ""type"" : ""keyword""
                  },
                  ""standardization_enabled"" : {
                    ""type"" : ""boolean""
                  },
                  ""n_neighbors"" : {
                    ""type"" : ""integer""
                  }
                }
              },
              ""test_docs_count"" : {
                ""type"" : ""long""
              },
              ""node_id"" : {
                ""type"" : ""keyword""
              },
              ""timestamp"" : {
                ""type"" : ""date""
              }
            }
          }
        },
        ""aliases"" : { }
      },
      "".monitoring-alerts-7"" : {
        ""order"" : 0,
        ""version"" : 7120099,
        ""index_patterns"" : [
          "".monitoring-alerts-7""
        ],
        ""settings"" : {
          ""index"" : {
            ""format"" : ""7"",
            ""codec"" : ""best_compression"",
            ""number_of_shards"" : ""1"",
            ""auto_expand_replicas"" : ""0-1"",
            ""number_of_replicas"" : ""0""
          }
        },
        ""mappings"" : {
          ""_doc"" : {
            ""dynamic"" : false,
            ""properties"" : {
              ""metadata"" : {
                ""properties"" : {
                  ""severity"" : {
                    ""type"" : ""short""
                  },
                  ""cluster_uuid"" : {
                    ""type"" : ""keyword""
                  },
                  ""watch"" : {
                    ""type"" : ""keyword""
                  },
                  ""link"" : {
                    ""type"" : ""keyword""
                  },
                  ""type"" : {
                    ""type"" : ""keyword""
                  },
                  ""version"" : {
                    ""type"" : ""keyword""
                  }
                }
              },
              ""update_timestamp"" : {
                ""type"" : ""date""
              },
              ""prefix"" : {
                ""type"" : ""text""
              },
              ""message"" : {
                ""type"" : ""text""
              },
              ""suffix"" : {
                ""type"" : ""text""
              },
              ""resolved_timestamp"" : {
                ""type"" : ""date""
              },
              ""timestamp"" : {
                ""type"" : ""date""
              }
            }
          }
        },
        ""aliases"" : { }
      },
      "".monitoring-logstash"" : {
        ""order"" : 0,
        ""version"" : 7120099,
        ""index_patterns"" : [
          "".monitoring-logstash-7-*""
        ],
        ""settings"" : {
          ""index"" : {
            ""format"" : ""7"",
            ""codec"" : ""best_compression"",
            ""number_of_shards"" : ""1"",
            ""auto_expand_replicas"" : ""0-1"",
            ""number_of_replicas"" : ""0""
          }
        },
        ""mappings"" : {
          ""_doc"" : {
            ""dynamic"" : false,
            ""properties"" : {
              ""interval_ms"" : {
                ""type"" : ""long""
              },
              ""logstash_state"" : {
                ""properties"" : {
                  ""pipeline"" : {
                    ""properties"" : {
                      ""batch_size"" : {
                        ""type"" : ""integer""
                      },
                      ""format"" : {
                        ""type"" : ""keyword""
                      },
                      ""id"" : {
                        ""type"" : ""keyword""
                      },
                      ""ephemeral_id"" : {
                        ""type"" : ""keyword""
                      },
                      ""workers"" : {
                        ""type"" : ""short""
                      },
                      ""version"" : {
                        ""type"" : ""keyword""
                      },
                      ""representation"" : {
                        ""enabled"" : false
                      },
                      ""hash"" : {
                        ""type"" : ""keyword""
                      }
                    }
                  },
                  ""http_address"" : {
                    ""type"" : ""keyword""
                  },
                  ""name"" : {
                    ""type"" : ""keyword""
                  },
                  ""host"" : {
                    ""type"" : ""keyword""
                  },
                  ""ephemeral_id"" : {
                    ""type"" : ""keyword""
                  },
                  ""uuid"" : {
                    ""type"" : ""keyword""
                  },
                  ""version"" : {
                    ""type"" : ""keyword""
                  },
                  ""snapshot"" : {
                    ""type"" : ""boolean""
                  },
                  ""status"" : {
                    ""type"" : ""keyword""
                  }
                }
              },
              ""logstash_stats"" : {
                ""type"" : ""object"",
                ""properties"" : {
                  ""jvm"" : {
                    ""properties"" : {
                      ""mem"" : {
                        ""properties"" : {
                          ""heap_used_percent"" : {
                            ""type"" : ""long""
                          },
                          ""heap_max_in_bytes"" : {
                            ""type"" : ""long""
                          },
                          ""heap_used_in_bytes"" : {
                            ""type"" : ""long""
                          }
                        }
                      },
                      ""uptime_in_millis"" : {
                        ""type"" : ""long""
                      },
                      ""gc"" : {
                        ""properties"" : {
                          ""collectors"" : {
                            ""properties"" : {
                              ""young"" : {
                                ""properties"" : {
                                  ""collection_count"" : {
                                    ""type"" : ""long""
                                  },
                                  ""collection_time_in_millis"" : {
                                    ""type"" : ""long""
                                  }
                                }
                              },
                              ""old"" : {
                                ""properties"" : {
                                  ""collection_count"" : {
                                    ""type"" : ""long""
                                  },
                                  ""collection_time_in_millis"" : {
                                    ""type"" : ""long""
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  },
                  ""logstash"" : {
                    ""properties"" : {
                      ""pipeline"" : {
                        ""properties"" : {
                          ""batch_size"" : {
                            ""type"" : ""long""
                          },
                          ""workers"" : {
                            ""type"" : ""short""
                          }
                        }
                      },
                      ""http_address"" : {
                        ""type"" : ""keyword""
                      },
                      ""name"" : {
                        ""type"" : ""keyword""
                      },
                      ""host"" : {
                        ""type"" : ""keyword""
                      },
                      ""ephemeral_id"" : {
                        ""type"" : ""keyword""
                      },
                      ""uuid"" : {
                        ""type"" : ""keyword""
                      },
                      ""version"" : {
                        ""type"" : ""keyword""
                      },
                      ""snapshot"" : {
                        ""type"" : ""boolean""
                      },
                      ""status"" : {
                        ""type"" : ""keyword""
                      }
                    }
                  },
                  ""process"" : {
                    ""properties"" : {
                      ""open_file_descriptors"" : {
                        ""type"" : ""long""
                      },
                      ""max_file_descriptors"" : {
                        ""type"" : ""long""
                      },
                      ""cpu"" : {
                        ""properties"" : {
                          ""percent"" : {
                            ""type"" : ""long""
                          }
                        }
                      }
                    }
                  },
                  ""pipelines"" : {
                    ""type"" : ""nested"",
                    ""properties"" : {
                      ""vertices"" : {
                        ""type"" : ""nested"",
                        ""properties"" : {
                          ""events_out"" : {
                            ""type"" : ""long""
                          },
                          ""pipeline_ephemeral_id"" : {
                            ""type"" : ""keyword""
                          },
                          ""events_in"" : {
                            ""type"" : ""long""
                          },
                          ""double_gauges"" : {
                            ""type"" : ""nested"",
                            ""properties"" : {
                              ""name"" : {
                                ""type"" : ""keyword""
                              },
                              ""value"" : {
                                ""type"" : ""double""
                              }
                            }
                          },
                          ""queue_push_duration_in_millis"" : {
                            ""type"" : ""long""
                          },
                          ""duration_in_millis"" : {
                            ""type"" : ""long""
                          },
                          ""id"" : {
                            ""type"" : ""keyword""
                          },
                          ""long_counters"" : {
                            ""type"" : ""nested"",
                            ""properties"" : {
                              ""name"" : {
                                ""type"" : ""keyword""
                              },
                              ""value"" : {
                                ""type"" : ""long""
                              }
                            }
                          }
                        }
                      },
                      ""id"" : {
                        ""type"" : ""keyword""
                      },
                      ""ephemeral_id"" : {
                        ""type"" : ""keyword""
                      },
                      ""hash"" : {
                        ""type"" : ""keyword""
                      },
                      ""events"" : {
                        ""properties"" : {
                          ""filtered"" : {
                            ""type"" : ""long""
                          },
                          ""in"" : {
                            ""type"" : ""long""
                          },
                          ""queue_push_duration_in_millis"" : {
                            ""type"" : ""long""
                          },
                          ""duration_in_millis"" : {
                            ""type"" : ""long""
                          },
                          ""out"" : {
                            ""type"" : ""long""
                          }
                        }
                      },
                      ""queue"" : {
                        ""properties"" : {
                          ""events_count"" : {
                            ""type"" : ""long""
                          },
                          ""max_queue_size_in_bytes"" : {
                            ""type"" : ""long""
                          },
                          ""queue_size_in_bytes"" : {
                            ""type"" : ""long""
                          },
                          ""type"" : {
                            ""type"" : ""keyword""
                          }
                        }
                      },
                      ""reloads"" : {
                        ""properties"" : {
                          ""failures"" : {
                            ""type"" : ""long""
                          },
                          ""successes"" : {
                            ""type"" : ""long""
                          }
                        }
                      }
                    }
                  },
                  ""batch_size"" : {
                    ""type"" : ""integer""
                  },
                  ""os"" : {
                    ""properties"" : {
                      ""cpu"" : {
                        ""properties"" : {
                          ""load_average"" : {
                            ""properties"" : {
                              ""5m"" : {
                                ""type"" : ""half_float""
                              },
                              ""15m"" : {
                                ""type"" : ""half_float""
                              },
                              ""1m"" : {
                                ""type"" : ""half_float""
                              }
                            }
                          }
                        }
                      },
                      ""cgroup"" : {
                        ""properties"" : {
                          ""cpu"" : {
                            ""properties"" : {
                              ""stat"" : {
                                ""properties"" : {
                                  ""number_of_elapsed_periods"" : {
                                    ""type"" : ""long""
                                  },
                                  ""number_of_times_throttled"" : {
                                    ""type"" : ""long""
                                  },
                                  ""time_throttled_nanos"" : {
                                    ""type"" : ""long""
                                  }
                                }
                              },
                              ""control_group"" : {
                                ""type"" : ""keyword""
                              }
                            }
                          },
                          ""cpuacct"" : {
                            ""properties"" : {
                              ""control_group"" : {
                                ""type"" : ""keyword""
                              },
                              ""usage_nanos"" : {
                                ""type"" : ""long""
                              }
                            }
                          }
                        }
                      }
                    }
                  },
                  ""workers"" : {
                    ""type"" : ""short""
                  },
                  ""events"" : {
                    ""properties"" : {
                      ""filtered"" : {
                        ""type"" : ""long""
                      },
                      ""in"" : {
                        ""type"" : ""long""
                      },
                      ""duration_in_millis"" : {
                        ""type"" : ""long""
                      },
                      ""out"" : {
                        ""type"" : ""long""
                      }
                    }
                  },
                  ""queue"" : {
                    ""properties"" : {
                      ""events_count"" : {
                        ""type"" : ""long""
                      },
                      ""type"" : {
                        ""type"" : ""keyword""
                      }
                    }
                  },
                  ""timestamp"" : {
                    ""type"" : ""date""
                  },
                  ""reloads"" : {
                    ""properties"" : {
                      ""failures"" : {
                        ""type"" : ""long""
                      },
                      ""successes"" : {
                        ""type"" : ""long""
                      }
                    }
                  }
                }
              },
              ""cluster_uuid"" : {
                ""type"" : ""keyword""
              },
              ""source_node"" : {
                ""properties"" : {
                  ""transport_address"" : {
                    ""type"" : ""keyword""
                  },
                  ""ip"" : {
                    ""type"" : ""keyword""
                  },
                  ""host"" : {
                    ""type"" : ""keyword""
                  },
                  ""name"" : {
                    ""type"" : ""keyword""
                  },
                  ""uuid"" : {
                    ""type"" : ""keyword""
                  },
                  ""timestamp"" : {
                    ""format"" : ""date_time"",
                    ""type"" : ""date""
                  }
                }
              },
              ""type"" : {
                ""type"" : ""keyword""
              },
              ""timestamp"" : {
                ""format"" : ""date_time"",
                ""type"" : ""date""
              }
            }
          }
        },
        ""aliases"" : { }
      },
      "".transform-notifications-000002"" : {
        ""order"" : 0,
        ""version"" : 7130499,
        ""index_patterns"" : [
          "".transform-notifications-*""
        ],
        ""settings"" : {
          ""index"" : {
            ""hidden"" : ""true"",
            ""number_of_shards"" : ""1"",
            ""auto_expand_replicas"" : ""0-1""
          }
        },
        ""mappings"" : {
          ""_doc"" : {
            ""_meta"" : {
              ""version"" : ""7.13.4""
            },
            ""dynamic"" : ""false"",
            ""properties"" : {
              ""level"" : {
                ""type"" : ""keyword""
              },
              ""transform_id"" : {
                ""type"" : ""keyword""
              },
              ""node_name"" : {
                ""type"" : ""keyword""
              },
              ""message"" : {
                ""type"" : ""text"",
                ""fields"" : {
                  ""raw"" : {
                    ""ignore_above"" : 1024,
                    ""type"" : ""keyword""
                  }
                }
              },
              ""timestamp"" : {
                ""type"" : ""date""
              }
            }
          }
        },
        ""aliases"" : {
          "".transform-notifications-read"" : {
            ""is_hidden"" : true
          }
        }
      },
      "".monitoring-beats"" : {
        ""order"" : 0,
        ""version"" : 7120099,
        ""index_patterns"" : [
          "".monitoring-beats-7-*""
        ],
        ""settings"" : {
          ""index"" : {
            ""format"" : ""7"",
            ""codec"" : ""best_compression"",
            ""number_of_shards"" : ""1"",
            ""auto_expand_replicas"" : ""0-1"",
            ""number_of_replicas"" : ""0""
          }
        },
        ""mappings"" : {
          ""_doc"" : {
            ""dynamic"" : false,
            ""properties"" : {
              ""interval_ms"" : {
                ""type"" : ""long""
              },
              ""cluster_uuid"" : {
                ""type"" : ""keyword""
              },
              ""source_node"" : {
                ""properties"" : {
                  ""ip"" : {
                    ""type"" : ""keyword""
                  },
                  ""transport_address"" : {
                    ""type"" : ""keyword""
                  },
                  ""host"" : {
                    ""type"" : ""keyword""
                  },
                  ""name"" : {
                    ""type"" : ""keyword""
                  },
                  ""uuid"" : {
                    ""type"" : ""keyword""
                  }
                }
              },
              ""type"" : {
                ""type"" : ""keyword""
              },
              ""beats_stats"" : {
                ""properties"" : {
                  ""beat"" : {
                    ""properties"" : {
                      ""host"" : {
                        ""type"" : ""keyword""
                      },
                      ""name"" : {
                        ""type"" : ""keyword""
                      },
                      ""type"" : {
                        ""type"" : ""keyword""
                      },
                      ""uuid"" : {
                        ""type"" : ""keyword""
                      },
                      ""version"" : {
                        ""type"" : ""keyword""
                      }
                    }
                  },
                  ""metrics"" : {
                    ""properties"" : {
                      ""system"" : {
                        ""properties"" : {
                          ""load"" : {
                            ""properties"" : {
                              ""1"" : {
                                ""type"" : ""double""
                              },
                              ""15"" : {
                                ""type"" : ""double""
                              },
                              ""5"" : {
                                ""type"" : ""double""
                              },
                              ""norm"" : {
                                ""properties"" : {
                                  ""1"" : {
                                    ""type"" : ""double""
                                  },
                                  ""15"" : {
                                    ""type"" : ""double""
                                  },
                                  ""5"" : {
                                    ""type"" : ""double""
                                  }
                                }
                              }
                            }
                          }
                        }
                      },
                      ""beat"" : {
                        ""properties"" : {
                          ""handles"" : {
                            ""properties"" : {
                              ""limit"" : {
                                ""properties"" : {
                                  ""hard"" : {
                                    ""type"" : ""long""
                                  },
                                  ""soft"" : {
                                    ""type"" : ""long""
                                  }
                                }
                              },
                              ""open"" : {
                                ""type"" : ""long""
                              }
                            }
                          },
                          ""cpu"" : {
                            ""properties"" : {
                              ""total"" : {
                                ""properties"" : {
                                  ""ticks"" : {
                                    ""type"" : ""long""
                                  },
                                  ""time"" : {
                                    ""properties"" : {
                                      ""ms"" : {
                                        ""type"" : ""long""
                                      }
                                    }
                                  },
                                  ""value"" : {
                                    ""type"" : ""long""
                                  }
                                }
                              },
                              ""system"" : {
                                ""properties"" : {
                                  ""ticks"" : {
                                    ""type"" : ""long""
                                  },
                                  ""time"" : {
                                    ""properties"" : {
                                      ""ms"" : {
                                        ""type"" : ""long""
                                      }
                                    }
                                  }
                                }
                              },
                              ""user"" : {
                                ""properties"" : {
                                  ""ticks"" : {
                                    ""type"" : ""long""
                                  },
                                  ""time"" : {
                                    ""properties"" : {
                                      ""ms"" : {
                                        ""type"" : ""long""
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          },
                          ""memstats"" : {
                            ""properties"" : {
                              ""rss"" : {
                                ""type"" : ""long""
                              },
                              ""gc_next"" : {
                                ""type"" : ""long""
                              },
                              ""memory_alloc"" : {
                                ""type"" : ""long""
                              },
                              ""memory_total"" : {
                                ""type"" : ""long""
                              }
                            }
                          },
                          ""cgroup"" : {
                            ""properties"" : {
                              ""memory"" : {
                                ""properties"" : {
                                  ""mem"" : {
                                    ""properties"" : {
                                      ""usage"" : {
                                        ""properties"" : {
                                          ""bytes"" : {
                                            ""type"" : ""long""
                                          }
                                        }
                                      },
                                      ""limit"" : {
                                        ""properties"" : {
                                          ""bytes"" : {
                                            ""type"" : ""long""
                                          }
                                        }
                                      }
                                    }
                                  },
                                  ""id"" : {
                                    ""type"" : ""keyword""
                                  }
                                }
                              },
                              ""cpu"" : {
                                ""properties"" : {
                                  ""cfs"" : {
                                    ""properties"" : {
                                      ""period"" : {
                                        ""properties"" : {
                                          ""us"" : {
                                            ""type"" : ""long""
                                          }
                                        }
                                      },
                                      ""quota"" : {
                                        ""properties"" : {
                                          ""us"" : {
                                            ""type"" : ""long""
                                          }
                                        }
                                      }
                                    }
                                  },
                                  ""stats"" : {
                                    ""properties"" : {
                                      ""periods"" : {
                                        ""type"" : ""long""
                                      },
                                      ""throttled"" : {
                                        ""properties"" : {
                                          ""ns"" : {
                                            ""type"" : ""long""
                                          },
                                          ""periods"" : {
                                            ""type"" : ""long""
                                          }
                                        }
                                      }
                                    }
                                  },
                                  ""id"" : {
                                    ""type"" : ""keyword""
                                  }
                                }
                              },
                              ""cpuacct"" : {
                                ""properties"" : {
                                  ""total"" : {
                                    ""properties"" : {
                                      ""ns"" : {
                                        ""type"" : ""long""
                                      }
                                    }
                                  },
                                  ""id"" : {
                                    ""type"" : ""keyword""
                                  }
                                }
                              }
                            }
                          },
                          ""info"" : {
                            ""properties"" : {
                              ""ephemeral_id"" : {
                                ""type"" : ""keyword""
                              },
                              ""uptime"" : {
                                ""properties"" : {
                                  ""ms"" : {
                                    ""type"" : ""long""
                                  }
                                }
                              }
                            }
                          }
                        }
                      },
                      ""libbeat"" : {
                        ""properties"" : {
                          ""output"" : {
                            ""properties"" : {
                              ""read"" : {
                                ""properties"" : {
                                  ""bytes"" : {
                                    ""type"" : ""long""
                                  },
                                  ""errors"" : {
                                    ""type"" : ""long""
                                  }
                                }
                              },
                              ""type"" : {
                                ""type"" : ""keyword""
                              },
                              ""write"" : {
                                ""properties"" : {
                                  ""bytes"" : {
                                    ""type"" : ""long""
                                  },
                                  ""errors"" : {
                                    ""type"" : ""long""
                                  }
                                }
                              },
                              ""events"" : {
                                ""properties"" : {
                                  ""batches"" : {
                                    ""type"" : ""long""
                                  },
                                  ""duplicates"" : {
                                    ""type"" : ""long""
                                  },
                                  ""total"" : {
                                    ""type"" : ""long""
                                  },
                                  ""dropped"" : {
                                    ""type"" : ""long""
                                  },
                                  ""toomany"" : {
                                    ""type"" : ""long""
                                  },
                                  ""active"" : {
                                    ""type"" : ""long""
                                  },
                                  ""failed"" : {
                                    ""type"" : ""long""
                                  },
                                  ""acked"" : {
                                    ""type"" : ""long""
                                  }
                                }
                              }
                            }
                          },
                          ""pipeline"" : {
                            ""properties"" : {
                              ""clients"" : {
                                ""type"" : ""long""
                              },
                              ""events"" : {
                                ""properties"" : {
                                  ""total"" : {
                                    ""type"" : ""long""
                                  },
                                  ""filtered"" : {
                                    ""type"" : ""long""
                                  },
                                  ""dropped"" : {
                                    ""type"" : ""long""
                                  },
                                  ""active"" : {
                                    ""type"" : ""long""
                                  },
                                  ""failed"" : {
                                    ""type"" : ""long""
                                  },
                                  ""published"" : {
                                    ""type"" : ""long""
                                  },
                                  ""retry"" : {
                                    ""type"" : ""long""
                                  }
                                }
                              },
                              ""queue"" : {
                                ""properties"" : {
                                  ""acked"" : {
                                    ""type"" : ""long""
                                  }
                                }
                              }
                            }
                          },
                          ""config"" : {
                            ""properties"" : {
                              ""module"" : {
                                ""properties"" : {
                                  ""running"" : {
                                    ""type"" : ""long""
                                  },
                                  ""stops"" : {
                                    ""type"" : ""long""
                                  },
                                  ""starts"" : {
                                    ""type"" : ""long""
                                  }
                                }
                              },
                              ""reloads"" : {
                                ""type"" : ""long""
                              }
                            }
                          }
                        }
                      },
                      ""apm-server"" : {
                        ""properties"" : {
                          ""server"" : {
                            ""properties"" : {
                              ""request"" : {
                                ""properties"" : {
                                  ""count"" : {
                                    ""type"" : ""long""
                                  }
                                }
                              },
                              ""response"" : {
                                ""properties"" : {
                                  ""valid"" : {
                                    ""properties"" : {
                                      ""count"" : {
                                        ""type"" : ""long""
                                      },
                                      ""accepted"" : {
                                        ""type"" : ""long""
                                      },
                                      ""ok"" : {
                                        ""type"" : ""long""
                                      }
                                    }
                                  },
                                  ""count"" : {
                                    ""type"" : ""long""
                                  },
                                  ""errors"" : {
                                    ""properties"" : {
                                      ""ratelimit"" : {
                                        ""type"" : ""long""
                                      },
                                      ""toolarge"" : {
                                        ""type"" : ""long""
                                      },
                                      ""internal"" : {
                                        ""type"" : ""long""
                                      },
                                      ""method"" : {
                                        ""type"" : ""long""
                                      },
                                      ""unauthorized"" : {
                                        ""type"" : ""long""
                                      },
                                      ""forbidden"" : {
                                        ""type"" : ""long""
                                      },
                                      ""count"" : {
                                        ""type"" : ""long""
                                      },
                                      ""closed"" : {
                                        ""type"" : ""long""
                                      },
                                      ""decode"" : {
                                        ""type"" : ""long""
                                      },
                                      ""queue"" : {
                                        ""type"" : ""long""
                                      },
                                      ""validate"" : {
                                        ""type"" : ""long""
                                      },
                                      ""concurrency"" : {
                                        ""type"" : ""long""
                                      }
                                    }
                                  }
                                }
                              },
                              ""concurrent"" : {
                                ""properties"" : {
                                  ""wait"" : {
                                    ""properties"" : {
                                      ""ms"" : {
                                        ""type"" : ""long""
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          },
                          ""acm"" : {
                            ""properties"" : {
                              ""request"" : {
                                ""properties"" : {
                                  ""count"" : {
                                    ""type"" : ""long""
                                  }
                                }
                              },
                              ""response"" : {
                                ""properties"" : {
                                  ""valid"" : {
                                    ""properties"" : {
                                      ""notmodified"" : {
                                        ""type"" : ""long""
                                      },
                                      ""count"" : {
                                        ""type"" : ""long""
                                      },
                                      ""accepted"" : {
                                        ""type"" : ""long""
                                      },
                                      ""ok"" : {
                                        ""type"" : ""long""
                                      }
                                    }
                                  },
                                  ""request"" : {
                                    ""properties"" : {
                                      ""count"" : {
                                        ""type"" : ""long""
                                      }
                                    }
                                  },
                                  ""count"" : {
                                    ""type"" : ""long""
                                  },
                                  ""unset"" : {
                                    ""type"" : ""long""
                                  },
                                  ""errors"" : {
                                    ""properties"" : {
                                      ""ratelimit"" : {
                                        ""type"" : ""long""
                                      },
                                      ""internal"" : {
                                        ""type"" : ""long""
                                      },
                                      ""toolarge"" : {
                                        ""type"" : ""long""
                                      },
                                      ""method"" : {
                                        ""type"" : ""long""
                                      },
                                      ""unavailable"" : {
                                        ""type"" : ""long""
                                      },
                                      ""forbidden"" : {
                                        ""type"" : ""long""
                                      },
                                      ""count"" : {
                                        ""type"" : ""long""
                                      },
                                      ""decode"" : {
                                        ""type"" : ""long""
                                      },
                                      ""unauthorized"" : {
                                        ""type"" : ""long""
                                      },
                                      ""notfound"" : {
                                        ""type"" : ""long""
          ...
```",mark-vieira,closed,"['>test-failure', 'low-risk', 'Team:StorageEngine', ':StorageEngine/Mapping']",https://github.com/elastic/elasticsearch/issues/109455,2024-06-06T20:57:08Z,3,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/109455,"{
  ""application_resource"": ""yes""
}"
114,109438,AccessDeniedException when starting up after update,"### Elasticsearch Version

8.14.0

### Installed Plugins

_No response_

### Java Version

22.0.1

### OS Version

Linux stage 5.15.0-107-generic #117-Ubuntu SMP Fri Apr 26 12:26:49 UTC 2024 x86_64 x86_64 x86_64 GNU/Linux

### Problem Description

This morning I updated via `apt update && apt upgrade` elasticsearch from 8.13.4 to 8.14.0 
The update/upgrade didn't show any errors, but when I tried to access the node, I got an error.
When I tried to restart the elasticsearch-service, I got an error and found this in the log file:
```
org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:74) ~[elasticsearch-8.14.0.jar:?]
Caused by: java.io.UncheckedIOException: java.nio.file.AccessDeniedException: /usr/lib/mysql/plugin/auth_pam_tool_dir
	at java.nio.file.FileTreeIterator.fetchNextIfNeeded(FileTreeIterator.java:87) ~[?:?]
```


### Steps to Reproduce

Well, that seems not easy. I just updated/upgraded via `apt update && apt upgrade `


### Logs (if relevant)

```
[2024-06-06T06:10:17,181][WARN ][o.e.n.NativeAccess       ] [stage] Unable to load native provider. Native methods will be disabled.
java.lang.ExceptionInInitializerError: null
	at org.elasticsearch.nativeaccess.lib.NativeLibraryProvider.getLibrary(NativeLibraryProvider.java:58) ~[elasticsearch-native-8.14.0.jar:?]
	at org.elasticsearch.nativeaccess.LinuxNativeAccess.<init>(LinuxNativeAccess.java:20) ~[elasticsearch-native-8.14.0.jar:?]
	at org.elasticsearch.nativeaccess.NativeAccessHolder.<clinit>(NativeAccessHolder.java:28) ~[elasticsearch-native-8.14.0.jar:?]
	at org.elasticsearch.nativeaccess.NativeAccess.instance(NativeAccess.java:22) ~[elasticsearch-native-8.14.0.jar:?]
	at org.elasticsearch.bootstrap.Elasticsearch.initializeNatives(Elasticsearch.java:285) ~[elasticsearch-8.14.0.jar:?]
	at org.elasticsearch.bootstrap.Elasticsearch.initPhase2(Elasticsearch.java:169) ~[elasticsearch-8.14.0.jar:?]
	at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:74) ~[elasticsearch-8.14.0.jar:?]
Caused by: java.io.UncheckedIOException: java.nio.file.AccessDeniedException: /usr/lib/mysql/plugin/auth_pam_tool_dir
	at java.nio.file.FileTreeIterator.fetchNextIfNeeded(FileTreeIterator.java:87) ~[?:?]
	at java.nio.file.FileTreeIterator.hasNext(FileTreeIterator.java:103) ~[?:?]
	at java.util.Iterator.forEachRemaining(Iterator.java:132) ~[?:?]
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1939) ~[?:?]
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:556) ~[?:?]
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:546) ~[?:?]
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151) ~[?:?]
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174) ~[?:?]
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:265) ~[?:?]
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:611) ~[?:?]
	at java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:291) ~[?:?]
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:194) ~[?:?]
	at java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:212) ~[?:?]
	at java.util.Spliterators$ArraySpliterator.forEachRemaining(Spliterators.java:1024) ~[?:?]
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:556) ~[?:?]
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:546) ~[?:?]
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:622) ~[?:?]
	at java.util.stream.AbstractPipeline.evaluateToArrayNode(AbstractPipeline.java:291) ~[?:?]
	at java.util.stream.ReferencePipeline.toArray(ReferencePipeline.java:631) ~[?:?]
	at java.util.stream.ReferencePipeline.toArray(ReferencePipeline.java:637) ~[?:?]
	at java.util.stream.ReferencePipeline.toList(ReferencePipeline.java:642) ~[?:?]
	at org.elasticsearch.nativeaccess.jdk.JdkSystemdLibrary.findLibSystemd(JdkSystemdLibrary.java:74) ~[elasticsearch-native-8.14.0.jar:?]
	at org.elasticsearch.nativeaccess.jdk.JdkSystemdLibrary.<clinit>(JdkSystemdLibrary.java:36) ~[elasticsearch-native-8.14.0.jar:?]
	... 7 more
Caused by: java.nio.file.AccessDeniedException: /usr/lib/mysql/plugin/auth_pam_tool_dir
	at sun.nio.fs.UnixException.translateToIOException(UnixException.java:90) ~[?:?]
	at sun.nio.fs.UnixException.asIOException(UnixException.java:115) ~[?:?]
	at sun.nio.fs.UnixFileSystemProvider.newDirectoryStream(UnixFileSystemProvider.java:477) ~[?:?]
	at java.nio.file.Files.newDirectoryStream(Files.java:481) ~[?:?]
	at java.nio.file.FileTreeWalker.visit(FileTreeWalker.java:301) ~[?:?]
	at java.nio.file.FileTreeWalker.next(FileTreeWalker.java:374) ~[?:?]
	at java.nio.file.FileTreeIterator.fetchNextIfNeeded(FileTreeIterator.java:83) ~[?:?]
	at java.nio.file.FileTreeIterator.hasNext(FileTreeIterator.java:103) ~[?:?]
	at java.util.Iterator.forEachRemaining(Iterator.java:132) ~[?:?]
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1939) ~[?:?]
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:556) ~[?:?]
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:546) ~[?:?]
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151) ~[?:?]
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174) ~[?:?]
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:265) ~[?:?]
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:611) ~[?:?]
	at java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:291) ~[?:?]
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:194) ~[?:?]
	at java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:212) ~[?:?]
	at java.util.Spliterators$ArraySpliterator.forEachRemaining(Spliterators.java:1024) ~[?:?]
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:556) ~[?:?]
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:546) ~[?:?]
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:622) ~[?:?]
	at java.util.stream.AbstractPipeline.evaluateToArrayNode(AbstractPipeline.java:291) ~[?:?]
	at java.util.stream.ReferencePipeline.toArray(ReferencePipeline.java:631) ~[?:?]
	at java.util.stream.ReferencePipeline.toArray(ReferencePipeline.java:637) ~[?:?]
	at java.util.stream.ReferencePipeline.toList(ReferencePipeline.java:642) ~[?:?]
	at org.elasticsearch.nativeaccess.jdk.JdkSystemdLibrary.findLibSystemd(JdkSystemdLibrary.java:74) ~[elasticsearch-native-8.14.0.jar:?]
	at org.elasticsearch.nativeaccess.jdk.JdkSystemdLibrary.<clinit>(JdkSystemdLibrary.java:36) ~[elasticsearch-native-8.14.0.jar:?]
	... 7 more
[2024-06-06T06:10:17,200][WARN ][o.e.n.NativeAccess       ] [stage] Cannot check if running as root because native access is not available
[2024-06-06T06:10:17,436][INFO ][o.a.l.i.v.PanamaVectorizationProvider] [stage] Java vector incubator API enabled; uses preferredBitSize=256; FMA enabled
[2024-06-06T06:10:17,814][INFO ][o.e.n.Node               ] [stage] version[8.14.0], pid[5275], build[deb/8d96bbe3bf5fed931f3119733895458eab75dca9/2024-06-03T10:05:49.073003402Z], OS[Linux/5.15.0-107-generic/amd64], JVM[Oracle Corporation/OpenJDK 64-Bit Server VM/22.0.1/22.0.1+8-16]
[2024-06-06T06:10:17,815][INFO ][o.e.n.Node               ] [stage] JVM home [/usr/share/elasticsearch/jdk], using bundled JDK [true]
[2024-06-06T06:10:17,815][INFO ][o.e.n.Node               ] [stage] JVM arguments [-Des.networkaddress.cache.ttl=60, -Des.networkaddress.cache.negative.ttl=10, -Djava.security.manager=allow, -XX:+AlwaysPreTouch, -Xss1m, -Djava.awt.headless=true, -Dfile.encoding=UTF-8, -Djna.nosys=true, -XX:-OmitStackTraceInFastThrow, -Dio.netty.noUnsafe=true, -Dio.netty.noKeySetOptimization=true, -Dio.netty.recycler.maxCapacityPerThread=0, -Dlog4j.shutdownHookEnabled=false, -Dlog4j2.disable.jmx=true, -Dlog4j2.formatMsgNoLookups=true, -Djava.locale.providers=SPI,COMPAT, --add-opens=java.base/java.io=org.elasticsearch.preallocate, --add-opens=org.apache.lucene.core/org.apache.lucene.store=org.elasticsearch.vec, --enable-native-access=org.elasticsearch.nativeaccess, -XX:ReplayDataFile=/var/log/elasticsearch/replay_pid%p.log, -Djava.library.path=/usr/share/elasticsearch/lib/platform/linux-x64:/usr/java/packages/lib:/usr/lib64:/lib64:/lib:/usr/lib, -Djna.library.path=/usr/share/elasticsearch/lib/platform/linux-x64:/usr/java/packages/lib:/usr/lib64:/lib64:/lib:/usr/lib, -Des.distribution.type=deb, -XX:+UnlockDiagnosticVMOptions, -XX:G1NumCollectionsKeepPinned=10000000, -XX:+UseG1GC, -Djava.io.tmpdir=/tmp/elasticsearch-10079525150206968698, --add-modules=jdk.incubator.vector, -XX:+HeapDumpOnOutOfMemoryError, -XX:+ExitOnOutOfMemoryError, -XX:HeapDumpPath=/var/lib/elasticsearch, -XX:ErrorFile=/var/log/elasticsearch/hs_err_pid%p.log, -Xlog:gc*,gc+age=trace,safepoint:file=/var/log/elasticsearch/gc.log:utctime,level,pid,tags:filecount=32,filesize=64m, -Xms7805m, -Xmx7805m, -XX:MaxDirectMemorySize=4093640704, -XX:G1HeapRegionSize=4m, -XX:InitiatingHeapOccupancyPercent=30, -XX:G1ReservePercent=15, --module-path=/usr/share/elasticsearch/lib, --add-modules=jdk.net, --add-modules=ALL-MODULE-PATH, -Djdk.module.main=org.elasticsearch.server]
```",sneakyx,closed,"['>bug', 'Team:Core/Infra', ':Core/Infra/Node Lifecycle']",https://github.com/elastic/elasticsearch/issues/109438,2024-06-06T14:59:23Z,12,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/109438,"{
  ""application_resource"": ""yes""
}"
115,109259,[CI] SparseFileTrackerTests testCallsListenerWhenRangeIsAvailable failing,"**Build Scans:**
- https://gradle-enterprise.elastic.co/s/ok75y4sgzots2
- https://gradle-enterprise.elastic.co/s/olclvhnsmtrfg
- https://gradle-enterprise.elastic.co/s/gxwckhtdxce2i
- https://gradle-enterprise.elastic.co/s/xtaigepwosbws
- https://gradle-enterprise.elastic.co/s/d6nbtaarjukua
- https://gradle-enterprise.elastic.co/s/emad7ofoqc2co
- https://gradle-enterprise.elastic.co/s/a443ap6izsb4e
- https://gradle-enterprise.elastic.co/s/kgjxu5qed43ui
- https://gradle-enterprise.elastic.co/s/kocjv3akjdn3u

**Reproduction Line:**
```
./gradlew ':x-pack:plugin:blob-cache:test' --tests ""org.elasticsearch.blobcache.common.SparseFileTrackerTests.testCallsListenerWhenRangeIsAvailable"" -Dtests.seed=DC76719601377F39 -Dtests.locale=is -Dtests.timezone=America/Dominica -Druntime.java=22
```

**Applicable branches:**
main

**Reproduces locally?:**
N/A

**Failure History:**
[See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&_a=(controlGroupInput:(chainingSystem:HIERARCHICAL,controlStyle:twoLine,ignoreParentSettings:(ignoreFilters:!f,ignoreQuery:!f,ignoreTimerange:!f,ignoreValidations:!t),panels:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(explicitInput:(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,enhancements:(),fieldName:task.keyword,grow:!t,id:'0c0c9cb8-ccd2-45c6-9b13-96bac4abc542',searchTechnique:wildcard,selectedOptions:!(),singleSelect:!t,title:'Gradle%20Task',width:medium),grow:!t,order:0,type:optionsListControl,width:small),'144933da-5c1b-4257-a969-7f43455a7901':(explicitInput:(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,enhancements:(),fieldName:name.keyword,grow:!t,id:'144933da-5c1b-4257-a969-7f43455a7901',searchTechnique:wildcard,selectedOptions:!('testCallsListenerWhenRangeIsAvailable'),title:Test,width:medium),grow:!t,order:2,type:optionsListControl,width:medium),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(explicitInput:(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,enhancements:(),fieldName:className.keyword,grow:!t,id:'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850',searchTechnique:wildcard,selectedOptions:!('org.elasticsearch.blobcache.common.SparseFileTrackerTests'),title:Suite,width:medium),grow:!t,order:1,type:optionsListControl,width:medium)))))

**Failure Message:**
```
java.lang.AssertionError: Listener should not have been called before [77] is reached, but it was triggered after progress got updated to [77]
Expected: <true>
     but: was <false>
```

**Mute Reasons:**
- [main] 9 failures in test testCallsListenerWhenRangeIsAvailable (2.1% fail rate)
- [main] 2.1% failure rate in test testCallsListenerWhenRangeIsAvailable (2.1% fail rate)

**Note:**
This issue was created using new, in-development muting automation. Please mind any issues.",elasticsearchmachine,closed,"['>test-failure', ':Distributed Indexing/Distributed', 'Team:Distributed (Obsolete)', 'needs:risk']",https://github.com/elastic/elasticsearch/issues/109259,2024-05-31T17:33:01Z,2,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/109259,"{
  ""application_resource"": ""yes""
}"
116,109237,[CI] SparseFileTrackerTests testCallsListenerWhenRangeIsAvailable failing,"Originally failed on a PR but reproduces in main

**Build scan:**
https://gradle-enterprise.elastic.co/s/ok75y4sgzots2/tests/:x-pack:plugin:blob-cache:test/org.elasticsearch.blobcache.common.SparseFileTrackerTests/testCallsListenerWhenRangeIsAvailable


**Reproduction line:**
```
./gradlew ':x-pack:plugin:blob-cache:test' --tests ""org.elasticsearch.blobcache.common.SparseFileTrackerTests.testCallsListenerWhenRangeIsAvailable"" -Dtests.seed=1B7ED1A8E22C0C3B -Dtests.locale=nn-NO -Dtests.timezone=Iran -Druntime.java=22
```

**Applicable branches:**
main

**Reproduces locally?:**
Yes

**Failure history:**
[Failure dashboard for `org.elasticsearch.blobcache.common.SparseFileTrackerTests#testCallsListenerWhenRangeIsAvailable`](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&_a=(controlGroupInput:(chainingSystem:HIERARCHICAL,controlStyle:twoLine,ignoreParentSettings:(ignoreFilters:!f,ignoreQuery:!f,ignoreTimerange:!f,ignoreValidations:!t),panels:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(explicitInput:(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,enhancements:(),fieldName:task.keyword,grow:!t,id:'0c0c9cb8-ccd2-45c6-9b13-96bac4abc542',searchTechnique:wildcard,selectedOptions:!(),singleSelect:!t,title:'Gradle%20Task',width:medium),grow:!t,order:0,type:optionsListControl,width:small),'144933da-5c1b-4257-a969-7f43455a7901':(explicitInput:(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,enhancements:(),fieldName:name.keyword,grow:!t,id:'144933da-5c1b-4257-a969-7f43455a7901',searchTechnique:wildcard,selectedOptions:!('testCallsListenerWhenRangeIsAvailable'),title:Test,width:medium),grow:!t,order:2,type:optionsListControl,width:medium),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(explicitInput:(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,enhancements:(),fieldName:className.keyword,grow:!t,id:'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850',searchTechnique:wildcard,selectedOptions:!('org.elasticsearch.blobcache.common.SparseFileTrackerTests'),title:Suite,width:medium),grow:!t,order:1,type:optionsListControl,width:medium)))))


**Failure excerpt:**
```
java.lang.AssertionError: Listener should not have been called before [329] is reached, but it was triggered after progress got updated to [329]
Expected: <true>
     but: was <false>

  at __randomizedtesting.SeedInfo.seed([1B7ED1A8E22C0C3B:5AD9472F945C391B]:0)
  at org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:18)
  at org.elasticsearch.test.ESTestCase.assertThat(ESTestCase.java:2217)
  at org.elasticsearch.blobcache.common.SparseFileTrackerTests.testCallsListenerWhenRangeIsAvailable(SparseFileTrackerTests.java:299)
  at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
  at java.lang.reflect.Method.invoke(Method.java:580)
  at com.carrotsearch.randomizedtesting.RandomizedRunner.invoke(RandomizedRunner.java:1758)
  at com.carrotsearch.randomizedtesting.RandomizedRunner$8.evaluate(RandomizedRunner.java:946)
  at com.carrotsearch.randomizedtesting.RandomizedRunner$9.evaluate(RandomizedRunner.java:982)
  at com.carrotsearch.randomizedtesting.RandomizedRunner$10.evaluate(RandomizedRunner.java:996)
  at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)
  at org.junit.rules.RunRules.evaluate(RunRules.java:20)
  at org.apache.lucene.tests.util.TestRuleSetupTeardownChained$1.evaluate(TestRuleSetupTeardownChained.java:48)
  at org.apache.lucene.tests.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:43)
  at org.apache.lucene.tests.util.TestRuleThreadAndTestName$1.evaluate(TestRuleThreadAndTestName.java:45)
  at org.apache.lucene.tests.util.TestRuleIgnoreAfterMaxFailures$1.evaluate(TestRuleIgnoreAfterMaxFailures.java:60)
  at org.apache.lucene.tests.util.TestRuleMarkFailure$1.evaluate(TestRuleMarkFailure.java:44)
  at org.junit.rules.RunRules.evaluate(RunRules.java:20)
  at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)
  at com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:390)
  at com.carrotsearch.randomizedtesting.ThreadLeakControl.forkTimeoutingTask(ThreadLeakControl.java:843)
  at com.carrotsearch.randomizedtesting.ThreadLeakControl$3.evaluate(ThreadLeakControl.java:490)
  at com.carrotsearch.randomizedtesting.RandomizedRunner.runSingleTest(RandomizedRunner.java:955)
  at com.carrotsearch.randomizedtesting.RandomizedRunner$5.evaluate(RandomizedRunner.java:840)
  at com.carrotsearch.randomizedtesting.RandomizedRunner$6.evaluate(RandomizedRunner.java:891)
  at com.carrotsearch.randomizedtesting.RandomizedRunner$7.evaluate(RandomizedRunner.java:902)
  at org.apache.lucene.tests.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:43)
  at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)
  at org.apache.lucene.tests.util.TestRuleStoreClassName$1.evaluate(TestRuleStoreClassName.java:38)
  at com.carrotsearch.randomizedtesting.rules.NoShadowingOrOverridesOnMethodsRule$1.evaluate(NoShadowingOrOverridesOnMethodsRule.java:40)
  at com.carrotsearch.randomizedtesting.rules.NoShadowingOrOverridesOnMethodsRule$1.evaluate(NoShadowingOrOverridesOnMethodsRule.java:40)
  at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)
  at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)
  at org.apache.lucene.tests.util.TestRuleAssertionsRequired$1.evaluate(TestRuleAssertionsRequired.java:53)
  at org.apache.lucene.tests.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:43)
  at org.apache.lucene.tests.util.TestRuleMarkFailure$1.evaluate(TestRuleMarkFailure.java:44)
  at org.apache.lucene.tests.util.TestRuleIgnoreAfterMaxFailures$1.evaluate(TestRuleIgnoreAfterMaxFailures.java:60)
  at org.apache.lucene.tests.util.TestRuleIgnoreTestSuites$1.evaluate(TestRuleIgnoreTestSuites.java:47)
  at org.junit.rules.RunRules.evaluate(RunRules.java:20)
  at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)
  at com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:390)
  at com.carrotsearch.randomizedtesting.ThreadLeakControl.lambda$forkTimeoutingTask$0(ThreadLeakControl.java:850)
  at java.lang.Thread.run(Thread.java:1570)

```",henningandersen,closed,"['>test-failure', ':Distributed Indexing/Distributed', 'Team:Distributed (Obsolete)', 'low-risk']",https://github.com/elastic/elasticsearch/issues/109237,2024-05-31T09:44:13Z,1,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/109237,"{
  ""application_resource"": ""yes""
}"
117,109225,SearchableSnapshotsIntegTests.testCreateAndRestoreSearchableSnapshot failing,"### CI Link

https://gradle-enterprise.elastic.co/s/ivesuuq5fvjji

### Repro line

./gradlew ':x-pack:plugin:searchable-snapshots:internalClusterTest' --tests ""org.elasticsearch.xpack.searchablesnapshots.SearchableSnapshotsIntegTests.testCreateAndRestoreSearchableSnapshot"" -Dtests.seed=613FCFFF93F38F06 -Dtests.locale=es-MX -Dtests.timezone=Africa/Lagos -Druntime.java=22

### Does it reproduce?

Not reliably

### Applicable branches

lucene_snapshot_9_11

### Failure history

_No response_

### Failure excerpt

```
java.lang.AssertionError: cannot complete future on thread Thread[#199,elasticsearch[node_s2][generic][T#3],5,TGRP-SearchableSnapshotsIntegTests] with waiter on thread Thread[#316,elasticsearch[node_s2][generic][T#11],5,TGRP-SearchableSnapshotsIntegTests], could deadlock if pool was full
--
¬† | at java.base/java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:269)
¬† | at java.base/java.util.concurrent.locks.AbstractQueuedSynchronizer.acquire(AbstractQueuedSynchronizer.java:756)
¬† | at java.base/java.util.concurrent.locks.AbstractQueuedSynchronizer.tryAcquireSharedNanos(AbstractQueuedSynchronizer.java:1126)
¬† | at org.elasticsearch.action.support.PlainActionFuture$Sync.get(PlainActionFuture.java:262)
¬† | at org.elasticsearch.action.support.PlainActionFuture.get(PlainActionFuture.java:74)
¬† | at org.elasticsearch.common.util.concurrent.FutureUtils.get(FutureUtils.java:65)
¬† | at org.elasticsearch.action.support.PlainActionFuture.actionGet(PlainActionFuture.java:171)
¬† | at org.elasticsearch.xpack.searchablesnapshots.cache.blob.BlobStoreCacheService.get(BlobStoreCacheService.java:126)
¬† | at org.elasticsearch.xpack.searchablesnapshots.store.SearchableSnapshotDirectory.getCachedBlob(SearchableSnapshotDirectory.java:673)
¬† | at org.elasticsearch.xpack.searchablesnapshots.store.input.MetadataCachingIndexInput.readWithBlobCache(MetadataCachingIndexInput.java:280)
¬† | at org.elasticsearch.xpack.searchablesnapshots.store.input.MetadataCachingIndexInput.readInternal(MetadataCachingIndexInput.java:615)
¬† | at org.elasticsearch.blobcache.common.BlobCacheBufferedIndexInput.refill(BlobCacheBufferedIndexInput.java:304)
¬† | at org.elasticsearch.blobcache.common.BlobCacheBufferedIndexInput.readByte(BlobCacheBufferedIndexInput.java:57)
¬† | at org.apache.lucene.store.BufferedChecksumIndexInput.readByte(BufferedChecksumIndexInput.java:39)
¬† | at org.apache.lucene.codecs.CodecUtil.readBEInt(CodecUtil.java:668)
¬† | at org.apache.lucene.codecs.CodecUtil.checkHeader(CodecUtil.java:185)
¬† | at org.apache.lucene.codecs.CodecUtil.checkIndexHeader(CodecUtil.java:254)
¬† | at org.apache.lucene.codecs.lucene94.Lucene94FieldInfosFormat.read(Lucene94FieldInfosFormat.java:138)
¬† | at org.apache.lucene.index.IndexWriter.readFieldInfos(IndexWriter.java:1259)
¬† | at org.apache.lucene.index.IndexWriter.getFieldNumberMap(IndexWriter.java:1278)
¬† | at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:1125)
¬† | at org.elasticsearch.index.store.Store.newTemporaryAppendingIndexWriter(Store.java:1546)
¬† | at org.elasticsearch.index.store.Store.associateIndexWithNewTranslog(Store.java:1452)
¬† | at org.elasticsearch.index.shard.StoreRecovery.bootstrap(StoreRecovery.java:620)
¬† | at org.elasticsearch.index.shard.StoreRecovery.lambda$restore$17(StoreRecovery.java:586)
¬† | at org.elasticsearch.action.ActionListenerImplementations$ResponseWrappingActionListener.onResponse(ActionListenerImplementations.java:245)
¬† | at org.elasticsearch.action.support.SubscribableListener$SuccessResult.complete(SubscribableListener.java:382)
¬† | at org.elasticsearch.action.support.SubscribableListener.tryComplete(SubscribableListener.java:302)
¬† | at org.elasticsearch.action.support.SubscribableListener.addListener(SubscribableListener.java:205)
¬† | at org.elasticsearch.action.support.SubscribableListener.lambda$andThen$0(SubscribableListener.java:469)
¬† | at org.elasticsearch.action.ActionListener.run(ActionListener.java:433)
¬† | at org.elasticsearch.action.support.SubscribableListener.newForked(SubscribableListener.java:128)
¬† | at org.elasticsearch.action.support.SubscribableListener.andThen(SubscribableListener.java:469)
¬† | at org.elasticsearch.action.support.SubscribableListener.andThen(SubscribableListener.java:433)
¬† | at org.elasticsearch.index.shard.StoreRecovery.restore(StoreRecovery.java:583)
¬† | at org.elasticsearch.index.shard.StoreRecovery.recoverFromRepository(StoreRecovery.java:312)
¬† | at org.elasticsearch.index.shard.IndexShard.restoreFromRepository(IndexShard.java:2481)
¬† | at org.elasticsearch.index.shard.IndexShard.lambda$startRecovery$32(IndexShard.java:3268)
¬† | at org.elasticsearch.action.ActionRunnable$4.doRun(ActionRunnable.java:100)
¬† | at org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:984)
¬† | at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:26)
¬† | at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
¬† | at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
¬† | at java.base/java.lang.Thread.run(Thread.java:1570)
```",benwtrent,closed,"['>test-failure', ':Distributed Indexing/Distributed', 'Team:Distributed (Obsolete)', 'low-risk']",https://github.com/elastic/elasticsearch/issues/109225,2024-05-30T18:31:46Z,1,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/109225,"{
  ""application_resource"": ""yes""
}"
118,108996,[CI] ClusterSettingsIT testUserMetadata failing,"Assigning to Distributed team due to `""internal:cluster/coordination/commit_state""` pending task.

**Build scan:**
https://gradle-enterprise.elastic.co/s/4cpjhyiuzmbjm/tests/:server:internalClusterTest/org.elasticsearch.cluster.settings.ClusterSettingsIT/testUserMetadata


**Reproduction line:**
```
gradlew ':server:internalClusterTest' --tests ""org.elasticsearch.cluster.settings.ClusterSettingsIT.testUserMetadata"" -Dtests.seed=FC0849ED15EE831B -Dtests.locale=es-PE -Dtests.timezone=Africa/Juba -Druntime.java=22
```

**Applicable branches:**
main

**Reproduces locally?:**
Didn't try

**Failure history:**
[Failure dashboard for `org.elasticsearch.cluster.settings.ClusterSettingsIT#testUserMetadata`](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&_a=(controlGroupInput:(chainingSystem:HIERARCHICAL,controlStyle:twoLine,ignoreParentSettings:(ignoreFilters:!f,ignoreQuery:!f,ignoreTimerange:!f,ignoreValidations:!t),panels:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(explicitInput:(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,enhancements:(),fieldName:task.keyword,grow:!t,id:'0c0c9cb8-ccd2-45c6-9b13-96bac4abc542',searchTechnique:wildcard,selectedOptions:!(),singleSelect:!t,title:'Gradle%20Task',width:medium),grow:!t,order:0,type:optionsListControl,width:small),'144933da-5c1b-4257-a969-7f43455a7901':(explicitInput:(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,enhancements:(),fieldName:name.keyword,grow:!t,id:'144933da-5c1b-4257-a969-7f43455a7901',searchTechnique:wildcard,selectedOptions:!('testUserMetadata'),title:Test,width:medium),grow:!t,order:2,type:optionsListControl,width:medium),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(explicitInput:(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,enhancements:(),fieldName:className.keyword,grow:!t,id:'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850',searchTechnique:wildcard,selectedOptions:!('org.elasticsearch.cluster.settings.ClusterSettingsIT'),title:Suite,width:medium),grow:!t,order:1,type:optionsListControl,width:medium)))))


**Failure excerpt:**
```
java.lang.AssertionError: All incoming requests on node [node_s3] should have finished. Expected 0 bytes for requests in-flight but got 196 bytes; pending tasks [[{
  ""node"" : ""node_s3"",
  ""id"" : 81,
  ""type"" : ""transport"",
  ""action"" : ""internal:cluster/coordination/commit_state"",
  ""description"" : """",
  ""start_time"" : ""2024-05-23T20:41:05.376Z"",
  ""start_time_in_millis"" : 1716496865376,
  ""running_time"" : ""2.6m"",
  ""running_time_in_nanos"" : 161646439500,
  ""cancellable"" : false,
  ""headers"" : { }
}]]

  at __randomizedtesting.SeedInfo.seed([FC0849ED15EE831B:53FBF34C8110D0C8]:0)
  at org.elasticsearch.test.InternalTestCluster.lambda$assertRequestsFinished$36(InternalTestCluster.java:2550)
  at org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:1295)
  at org.elasticsearch.test.InternalTestCluster.assertRequestsFinished(InternalTestCluster.java:2541)
  at org.elasticsearch.test.InternalTestCluster.assertAfterTest(InternalTestCluster.java:2514)
  at org.elasticsearch.test.ESIntegTestCase.afterInternal(ESIntegTestCase.java:594)
  at org.elasticsearch.test.ESIntegTestCase.cleanUpCluster(ESIntegTestCase.java:2332)
  at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
  at java.lang.reflect.Method.invoke(Method.java:580)
  at com.carrotsearch.randomizedtesting.RandomizedRunner.invoke(RandomizedRunner.java:1758)
  at com.carrotsearch.randomizedtesting.RandomizedRunner$10.evaluate(RandomizedRunner.java:1004)
  at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)
  at org.junit.rules.RunRules.evaluate(RunRules.java:20)
  at org.apache.lucene.tests.util.TestRuleSetupTeardownChained$1.evaluate(TestRuleSetupTeardownChained.java:48)
  at org.apache.lucene.tests.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:43)
  at org.apache.lucene.tests.util.TestRuleThreadAndTestName$1.evaluate(TestRuleThreadAndTestName.java:45)
  at org.apache.lucene.tests.util.TestRuleIgnoreAfterMaxFailures$1.evaluate(TestRuleIgnoreAfterMaxFailures.java:60)
  at org.apache.lucene.tests.util.TestRuleMarkFailure$1.evaluate(TestRuleMarkFailure.java:44)
  at org.junit.rules.RunRules.evaluate(RunRules.java:20)
  at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)
  at com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:390)
  at com.carrotsearch.randomizedtesting.ThreadLeakControl.forkTimeoutingTask(ThreadLeakControl.java:843)
  at com.carrotsearch.randomizedtesting.ThreadLeakControl$3.evaluate(ThreadLeakControl.java:490)
  at com.carrotsearch.randomizedtesting.RandomizedRunner.runSingleTest(RandomizedRunner.java:955)
  at com.carrotsearch.randomizedtesting.RandomizedRunner$5.evaluate(RandomizedRunner.java:840)
  at com.carrotsearch.randomizedtesting.RandomizedRunner$6.evaluate(RandomizedRunner.java:891)
  at com.carrotsearch.randomizedtesting.RandomizedRunner$7.evaluate(RandomizedRunner.java:902)
  at org.apache.lucene.tests.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:43)
  at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)
  at org.apache.lucene.tests.util.TestRuleStoreClassName$1.evaluate(TestRuleStoreClassName.java:38)
  at com.carrotsearch.randomizedtesting.rules.NoShadowingOrOverridesOnMethodsRule$1.evaluate(NoShadowingOrOverridesOnMethodsRule.java:40)
  at com.carrotsearch.randomizedtesting.rules.NoShadowingOrOverridesOnMethodsRule$1.evaluate(NoShadowingOrOverridesOnMethodsRule.java:40)
  at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)
  at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)
  at org.apache.lucene.tests.util.TestRuleAssertionsRequired$1.evaluate(TestRuleAssertionsRequired.java:53)
  at org.apache.lucene.tests.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:43)
  at org.apache.lucene.tests.util.TestRuleMarkFailure$1.evaluate(TestRuleMarkFailure.java:44)
  at org.apache.lucene.tests.util.TestRuleIgnoreAfterMaxFailures$1.evaluate(TestRuleIgnoreAfterMaxFailures.java:60)
  at org.apache.lucene.tests.util.TestRuleIgnoreTestSuites$1.evaluate(TestRuleIgnoreTestSuites.java:47)
  at org.junit.rules.RunRules.evaluate(RunRules.java:20)
  at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)
  at com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:390)
  at com.carrotsearch.randomizedtesting.ThreadLeakControl.lambda$forkTimeoutingTask$0(ThreadLeakControl.java:850)
  at java.lang.Thread.run(Thread.java:1570)

```",nielsbauman,closed,"[':Core/Infra/Settings', '>test-failure', 'Team:Core/Infra', 'low-risk']",https://github.com/elastic/elasticsearch/issues/108996,2024-05-24T08:37:50Z,6,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/108996,"{
  ""application_resource"": ""yes""
}"
119,108674,[Transforms] Update transforms at scale doc to add date rounding,"Update Transform docs https://www.elastic.co/guide/en/elasticsearch/reference/current/transform-scale.html#limit-source-query

From 
```Use an absolute time value as a date range filter in your source query (for example, greater than 2020-01-01T00:00:00) to limit which historical indices are accessed. If you use a relative time value (for example, now-30d) then this date range is re-evaluated at the point of each checkpoint execution.```

To

```To limit which historical indices are accessed, exclude certain tiers (for example `""must_not"": { ""terms"": { ""_tier"": [ ""data_frozen"", ""data_cold"" ] } }` and/or use an absolute time value as a date range filter in your source query (for example, greater than 2024-01-01T00:00:00). If you use a relative time value (for example, gte now-30d/d) then ensure date rounding is applied to take advantage of query caching and ensure that the relative time is much larger than the largest of `frequency` or `time.sync.delay` or the date histogram bucket, otherwise data may be missed. Do not use date filters which are less than a date value as this conflicts with logic applied at each checkpoint execution and data may be missed.```",sophiec20,closed,"['>docs', ':ml', ':ml/Transform', 'Team:Docs', 'Team:ML']",https://github.com/elastic/elasticsearch/issues/108674,2024-05-15T11:01:58Z,4,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/108674,"{
  ""application_resource"": ""no""
}"
120,107878,Elasticsearch fails to start with both 32 bit and 64 bit libsystemd installed,"### Elasticsearch Version

8.15.0 snapshot

### Installed Plugins

_No response_

### Java Version

_bundled_

### OS Version

Ubuntu Linux

### Problem Description

Starting Elasticsearch immediately logs an error:
```
marshall@marshall-X570-AORUS-PRO-WIFI:~/dev/kibana$ yarn es snapshot -E xpack.security.authc.api_key.enabled=true --license trial
yarn run v1.22.19
$ node scripts/es snapshot -E xpack.security.authc.api_key.enabled=true --license trial
 info Installing from snapshot
 info version: 8.15.0
 info install path: /home/marshall/dev/kibana/.es/8.15.0
 info license: trial
 info Downloading snapshot manifest from https://storage.googleapis.com/kibana-ci-es-snapshots-daily/8.15.0/manifest-latest-verified.json
 info downloading artifact from https://storage.googleapis.com/kibana-ci-es-snapshots-daily/8.15.0/archives/20240422-131735_f9c414c5/elasticsearch-8.15.0-SNAPSHOT-linux-x86_64.tar.gz
 info downloading artifact checksum from https://storage.googleapis.com/kibana-ci-es-snapshots-daily/8.15.0/archives/20240422-131735_f9c414c5/elasticsearch-8.15.0-SNAPSHOT-linux-x86_64.tar.gz.sha512
 info checksum verified
 info extracting /home/marshall/dev/kibana/.es/cache/elasticsearch-8.15.0-SNAPSHOT-linux-x86_64.tar.gz
 info extracted to /home/marshall/dev/kibana/.es/8.15.0
 info created /home/marshall/dev/kibana/.es/8.15.0/ES_TMPDIR
 info setting secure setting bootstrap.password to changeme
 info Starting
   ‚îÇ info bin/elasticsearch -E action.destructive_requires_name=true -E cluster.routing.allocation.disk.threshold_enabled=false -E ingest.geoip.downloader.enabled=false -E search.check_ccs_compatibility=true -E xpack.security.authc.api_key.enabled=true
   ‚îÇ info ES_JAVA_OPTS: -Xms1536m -Xmx1536m
   ‚îÇERROR Apr 22, 2024 8:54:02 AM sun.util.locale.provider.LocaleProviderAdapter <clinit>
   ‚îÇERROR WARNING: COMPAT locale provider will be removed in a future release
   ‚îÇERROR OpenJDK 64-Bit Server VM warning: You have loaded library /usr/lib/i386-linux-gnu/libsystemd.so.0.26.0 which might have disabled stack guard. The VM will try to fix the stack guard now.
   ‚îÇ      It's highly recommended that you fix the library with 'execstack -c <libfile>', or link it with '-z noexecstack'.
   ‚îÇ info [o.e.n.NativeAccess] [marshall-X570-AORUS-PRO-WIFI] Unable to load native provider. Native methods will be disabled. java.lang.UnsatisfiedLinkError: /usr/lib/i386-linux-gnu/libsystemd.so.0.26.0: /usr/lib/i386-linux-gnu/libsystemd.so.0.26.0: wrong ELF class: ELFCLASS32 (Possible cause: can't load IA 32 .so on a AMD 64 platform)
   ‚îÇ      	at java.base/jdk.internal.loader.NativeLibraries.load(Native Method)
   ‚îÇ      	at java.base/jdk.internal.loader.NativeLibraries$NativeLibraryImpl.open(NativeLibraries.java:331)
   ‚îÇ      	at java.base/jdk.internal.loader.NativeLibraries.loadLibrary(NativeLibraries.java:197)
   ‚îÇ      	at java.base/jdk.internal.loader.NativeLibraries.loadLibrary(NativeLibraries.java:139)
   ‚îÇ      	at java.base/java.lang.ClassLoader.loadLibrary(ClassLoader.java:2418)
   ‚îÇ      	at java.base/java.lang.Runtime.load0(Runtime.java:852)
   ‚îÇ      	at java.base/java.lang.System.load(System.java:2025)
   ‚îÇ      	at org.elasticsearch.nativeaccess@8.15.0-SNAPSHOT/org.elasticsearch.nativeaccess.jdk.JdkSystemdLibrary.<clinit>(JdkSystemdLibrary.java:29)
   ‚îÇ      	at org.elasticsearch.nativeaccess@8.15.0-SNAPSHOT/org.elasticsearch.nativeaccess.lib.NativeLibraryProvider.getLibrary(NativeLibraryProvider.java:58)
   ‚îÇ      	at org.elasticsearch.nativeaccess@8.15.0-SNAPSHOT/org.elasticsearch.nativeaccess.LinuxNativeAccess.<init>(LinuxNativeAccess.java:20)
   ‚îÇ      	at org.elasticsearch.nativeaccess@8.15.0-SNAPSHOT/org.elasticsearch.nativeaccess.NativeAccessHolder.<clinit>(NativeAccessHolder.java:28)
   ‚îÇ      	at org.elasticsearch.nativeaccess@8.15.0-SNAPSHOT/org.elasticsearch.nativeaccess.NativeAccess.instance(NativeAccess.java:22)
   ‚îÇ      	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.bootstrap.Elasticsearch.initializeNatives(Elasticsearch.java:285)
   ‚îÇ      	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.bootstrap.Elasticsearch.initPhase2(Elasticsearch.java:169)
   ‚îÇ      	at org.elasticsearch.server@8.15.0-SNAPSHOT/org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:74)
   ‚îÇ info [o.e.n.NativeAccess] [marshall-X570-AORUS-PRO-WIFI] Cannot check if running as root because native access is not available
```

This leads to a number of messages about `zstd is null` and shard failures, e.g.
```
‚îÇ info [o.e.c.r.a.AllocationService] [marshall-X570-AORUS-PRO-WIFI] failing shard [FailedShard[routingEntry=[.security-7][0], node[taa-iE1pTke-lCYe7gWuzA], [P], recovery_source[existing store recovery; bootstrap_history_uuid=false], s[INITIALIZING], a[id=aG-UKf6nRzW5RA4cjICx2w], unassigned_info[[reason=ALLOCATION_FAILED], at[2024-04-22T15:54:15.434Z], failed_attempts[1], delayed=false, last_node[taa-iE1pTke-lCYe7gWuzA], details[failed shard on node [taa-iE1pTke-lCYe7gWuzA]: shard failure, reason [refresh failed source[schedule]], failure java.lang.NullPointerException: Cannot invoke ""org.elasticsearch.nativeaccess.Zstd.compressBound(int)"" because ""zstd"" is null
```

And Elasticsearch crashes before finishing startup.

### Steps to Reproduce

Attempt to start Elasticsearch on a system with both 32 bit and 64 bit libsystemd installations.

```
marshall@marshall-X570-AORUS-PRO-WIFI:~$ sudo apt list | grep libsystemd

libsystemd-dev/eoan-security 242-7ubuntu3.11 amd64
libsystemd-dev/eoan-security 242-7ubuntu3.11 i386
libsystemd0/eoan-security,now 242-7ubuntu3.11 amd64 [installed,automatic]
libsystemd0/eoan-security,now 242-7ubuntu3.11 i386 [installed,automatic]
```

### Logs (if relevant)

_No response_",marshallmain,closed,"['>bug', ':Core/Infra/Core', 'Team:Core/Infra']",https://github.com/elastic/elasticsearch/issues/107878,2024-04-24T21:41:43Z,1,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/107878,"{
  ""application_resource"": ""yes""
}"
121,107613,Unable to locate package openjdk-11-jre-headless 7.17 ubuntu-2004-aarch64,"### CI Link

https://gradle-enterprise.elastic.co/s/7nh4jhoqhib7m

### Repro line

./gradlew :test:fixtures:geoip-fixture:composeBuild

### Does it reproduce?

Didn't try

### Applicable branches

7.17

### Failure history

https://gradle-enterprise.elastic.co/scans?search.tags=7.17%2Caarch64%2Cci%2Clinux%2Cplatform-support-arm%2Cubuntu-2004-aarch64&search.timeZoneId=Europe%2FBucharest

### Failure excerpt

This only failed twice but at a 4h interval period, which makes me think it's not transitory.

```
Exit-code 17 when calling /usr/local/bin/docker-compose, stdout: #0 building with ""default"" instance using docker driver

#1 [geoip-fixture internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [geoip-fixture internal] load build definition from Dockerfile
#2 transferring dockerfile: 354B done
#2 DONE 0.0s

#3 [geoip-fixture internal] load metadata for docker.io/library/ubuntu:18.04
#3 DONE 0.6s

#4 [geoip-fixture 1/3] FROM docker.io/library/ubuntu:18.04@sha256:152dc042452c496007f07ca9127571cb9c29697f42acbfad72324b2bb2e43c98
#4 DONE 0.0s

#5 [geoip-fixture 2/3] RUN apt-get update -qqy
#5 CACHED

#6 [geoip-fixture 3/3] RUN apt-get install -qqy openjdk-11-jre-headless
#6 3.269 E: Unable to locate package openjdk-11-jre-headless
#6 ERROR: process ""/bin/sh -c apt-get install -qqy openjdk-11-jre-headless"" did not complete successfully: exit code: 100
------
 > [geoip-fixture 3/3] RUN apt-get install -qqy openjdk-11-jre-headless:
3.269 E: Unable to locate package openjdk-11-jre-headless
```",albertzaharovits,closed,"[':Delivery/Build', '>test-failure', 'Team:Delivery', 'low-risk']",https://github.com/elastic/elasticsearch/issues/107613,2024-04-18T12:17:30Z,3,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/107613,"{
  ""application_resource"": ""no""
}"
122,107264,"`knn` query hits cache, but actually doesn't cache knn search","### Elasticsearch Version

8.14

### Installed Plugins

_No response_

### Java Version

_bundled_

### OS Version

_any_

### Problem Description

When using knn as a query, it will hit cache, but it will not improve search response time.

NOTE: Cache isn't supported for DFS. Meaning cache isn't supported for top-level knn.

### Steps to Reproduce

```
DELETE my_vectors
PUT my_vectors
{
  ""mappings"": {
    ""properties"": {
      ""vectors"": {
        ""type"": ""dense_vector""
      }
    }
  }
}

POST my_vectors/_doc
{
  ""vectors"": [1,3,4]
}


POST my_vectors/_search?request_cache=true
{
  ""query"" {
  ""knn"": {
    ""query_vector"": [1,1,1],
    ""num_candidates"": 100,
    ""field"": ""vectors""
  }}
}
```

Then call `GET my_vectors/_stats` and note how the `request_cache` is has cache. But, the response time isn't improved.
### Logs (if relevant)

_No response_",benwtrent,closed,"['>bug', ':Search Relevance/Vectors', 'Team:Search Relevance']",https://github.com/elastic/elasticsearch/issues/107264,2024-04-09T12:03:03Z,5,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/107264,"{
  ""application_resource"": ""yes""
}"
123,106776,[CI] SecureHaHdfsFailoverTestSuiteIT and HaHdfsFailoverTestSuiteIT classMethod failing,"Looks related to https://github.com/elastic/elasticsearch/issues/106739, but this time it's complaining about jar hell.

CC @breskeby

**Build scan:**
https://gradle-enterprise.elastic.co/s/er263iwnzamim/tests/:plugins:repository-hdfs:javaRestTest/org.elasticsearch.repositories.hdfs.SecureHaHdfsFailoverTestSuiteIT


**Reproduction line:**
```
null
```

**Applicable branches:**
main

**Reproduces locally?:**
Didn't try

**Failure history:**
[Failure dashboard for `org.elasticsearch.repositories.hdfs.SecureHaHdfsFailoverTestSuiteIT#classMethod`](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&_a=(controlGroupInput:(chainingSystem:HIERARCHICAL,controlStyle:twoLine,ignoreParentSettings:(ignoreFilters:!f,ignoreQuery:!f,ignoreTimerange:!f,ignoreValidations:!t),panels:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(explicitInput:(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,enhancements:(),fieldName:task.keyword,grow:!t,id:'0c0c9cb8-ccd2-45c6-9b13-96bac4abc542',searchTechnique:wildcard,selectedOptions:!(),singleSelect:!t,title:'Gradle%20Task',width:medium),grow:!t,order:0,type:optionsListControl,width:small),'144933da-5c1b-4257-a969-7f43455a7901':(explicitInput:(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,enhancements:(),fieldName:name.keyword,grow:!t,id:'144933da-5c1b-4257-a969-7f43455a7901',searchTechnique:wildcard,selectedOptions:!('classMethod'),title:Test,width:medium),grow:!t,order:2,type:optionsListControl,width:medium),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(explicitInput:(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,enhancements:(),fieldName:className.keyword,grow:!t,id:'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850',searchTechnique:wildcard,selectedOptions:!('org.elasticsearch.repositories.hdfs.SecureHaHdfsFailoverTestSuiteIT'),title:Suite,width:medium),grow:!t,order:1,type:optionsListControl,width:medium)))))


**Failure excerpt:**
```
java.lang.RuntimeException: found jar hell in test classpath

  at org.elasticsearch.bootstrap.BootstrapForTesting.<clinit>(BootstrapForTesting.java:106)
  at org.elasticsearch.test.ESTestCase.<clinit>(ESTestCase.java:307)
  at java.lang.Class.forName0(Class.java:-2)
  at java.lang.Class.forName(Class.java:467)
  at com.carrotsearch.randomizedtesting.RandomizedRunner$2.run(RandomizedRunner.java:631)

  Caused by: java.lang.IllegalStateException: jar hell!
  class: org.bouncycastle.LICENSE
  jar1: /dev/shm/bk/bk-agent-prod-gcp-1711454666052002008/elastic/elasticsearch-periodic/test/fixtures/hdfs-fixture/build/distributions/hdfs-fixture-8.14.0-SNAPSHOT-hdfs3.jar
  jar2: /opt/buildkite-agent/.gradle/caches/modules-2/files-2.1/org.bouncycastle/bc-fips/1.0.2.4/9008d04fc13da6455e6a792935b93b629757335d/bc-fips-1.0.2.4.jar

    at org.elasticsearch.jdk.JarHell.checkClass(JarHell.java:315)
    at org.elasticsearch.jdk.JarHell.checkJarHell(JarHell.java:233)
    at org.elasticsearch.jdk.JarHell.checkJarHell(JarHell.java:84)
    at org.elasticsearch.bootstrap.BootstrapForTesting.<clinit>(BootstrapForTesting.java:104)
    at org.elasticsearch.test.ESTestCase.<clinit>(ESTestCase.java:307)
    at java.lang.Class.forName0(Class.java:-2)
    at java.lang.Class.forName(Class.java:467)
    at com.carrotsearch.randomizedtesting.RandomizedRunner$2.run(RandomizedRunner.java:631)

```",alex-spies,closed,"['blocker', '>test-failure', 'Team:Data Management', ':Data Management/HDFS']",https://github.com/elastic/elasticsearch/issues/106776,2024-03-26T15:41:50Z,2,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/106776,"{
  ""application_resource"": ""yes""
}"
124,106693,Unified highlighter with bool query containing nested query throws illegal argument exception,"### Elasticsearch Version

8.10+

### Installed Plugins

_No response_

### Java Version

_bundled_

### OS Version

_bundled_

### Problem Description

When running a bool query containing nested query with unified highlighting we sometimes get illegal argument exception.
Query:
```
{
  ""query"": {
    ""bool"": {
      ""must"": {
        ""match"": {
          ""subject"": {
            ""query"": ""bike""
          }
        }
      },
      ""must_not"": {
        ""nested"": {
          ""query"": {
            ""match"": {
              ""attachments.name"": {
                ""query"": ""invite""
              }
            }
          },
          ""path"": ""attachments""
        }
      }
    }
  },
  ""highlight"": {
    ""require_field_match"": true,
    ""fields"": {
      ""subject"": {
        ""type"": ""unified""
      }
    }
  }
}
``` 
Error:
```
""type"": ""illegal_argument_exception"",
""reason"": ""Reader FilterLeafReader(FilterLeafReader(FilterLeafReader(FieldUsageTrackingLeafReader(reader=FilterLeafReader(_gp(8.11.1):C3054/2:[diagnostics={java.runtime.version=11.0.10+9-LTS, mergeFactor=2, os.arch=x86_64, source=merge, java.vendor=Amazon.com Inc., os.version=10.16, mergeMaxNumSegments=-1, java.version=11.0.10, java.vm.version=11.0.10+9-LTS, lucene.version=8.11.1, timestamp=1697821346583, os=Mac OS X}]:[attributes={Lucene87StoredFieldsFormat.mode=BEST_SPEED}]:fieldInfosGen=1:dvGen=1 :softDel=2 :id=9mvdr58lxesb0l6jrs63zxpmt))))) does not support caching""
``` 

We have done some investigating and testing:

- We think the issue we are experiencing is related to this change #96068 introduced in 8.10. We have tested with 8.9. and indeed there was no error, we also tested with 8.11.3 and 8.12.2 where we got the error.
- When we change to ""plain"" highlighter or we set ""require_field_match"" to false (i.e. we turn off Weight#matches mode) there is no error.
- There was similar problem reported here #101667 and resolved here #101713 by disabling Weight#matches mode in that specific case. Two more issues related to this are #101141 and #101621 .

### Steps to Reproduce

We have tried creating minimal set of steps for reproducing this but we failed. Query posted above is indeed minimal one that produced an error. In the process we learned that query itself is not enough to reproduce it, indexed data set is also relevant. Both fields hit by the query ""subject"" and ""attachments.name"" are mapped as following:
```
""type"": ""text"",
""term_vector"": ""with_positions_offsets""
``` 
Also, if ""must_not"" part of the query contains a query which hits no documents we don't get the error, only if some documents are hit by that query error appears.

### Logs (if relevant)

_No response_",niktrk,closed,"['>bug', ':Search/Search', 'Team:Search']",https://github.com/elastic/elasticsearch/issues/106693,2024-03-22T18:01:42Z,4,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/106693,"{
  ""application_resource"": ""yes""
}"
125,106657,Random sampler aggregation results depend on segment count,"### Elasticsearch Version

`main`

### Installed Plugins

_No response_

### Java Version

_bundled_

### OS Version

OS-independent issue

### Problem Description

We'd like the random sampler aggregation to produce consistent results regardless of the number of segments in an index. However, the returned document count per bucket depends on the number of segments. 

### Steps to Reproduce

The following test case reproduces the issue. We explicitly flush after each document to provoke the issue. If we do a force merge at the end, the random sampler aggregation behaves as expected. Note that the test also eliminates all randomness by using the recently introduced shard seed.

```java
@ESIntegTestCase.ClusterScope(scope = ESIntegTestCase.Scope.TEST, numDataNodes = 1)
public class RandomSamplerAggregationIT extends ESIntegTestCase {

    public static final String TEST_INDEX = ""test-001"";

    @Override
    protected Collection<Class<? extends Plugin>> nodePlugins() {
        return List.of(getTestTransportPlugin());
    }

    @Override
    protected boolean addMockHttpTransport() {
        return false; // enable http
    }

    @Before
    public void setupData() throws Exception {
        prepareCreate(TEST_INDEX, indexSettings(1, 0)).setMapping(
            ""@timestamp"",
            ""type=date"",
            ""transaction.name"",
            ""type=keyword"",
            ""transaction.stacktrace"",
            ""type=keyword""
        ).get();

        ensureGreen(TEST_INDEX);

        index(
            TEST_INDEX,
            ""1"",
            ""{\""@timestamp\"": \""1698624000\"", \""transaction.name\"":  \""encodeSha1\"", \""transaction.stacktrace\"": [\""aaaaaa\""]}""
        );
        flush(TEST_INDEX);
        index(
            TEST_INDEX,
            ""2"",
            ""{\""@timestamp\"": \""1698624001\"", \""transaction.name\"":  \""encodeSha1\"", \""transaction.stacktrace\"": [\""aaaaaa\""]}""
        );
        flush(TEST_INDEX);
        index(
            TEST_INDEX,
            ""3"",
            ""{\""@timestamp\"": \""1698624002\"", \""transaction.name\"":  \""encodeSha1\"", \""transaction.stacktrace\"": [\""aaaaaa\""]}""
        );
        flush(TEST_INDEX);
        index(
            TEST_INDEX,
            ""4"",
            ""{\""@timestamp\"": \""1698624003\"", \""transaction.name\"":  \""encodeSha1\"", \""transaction.stacktrace\"": [\""aaaaaa\""]}""
        );
        flush(TEST_INDEX);
        refresh();
        // uncomment this - it produces the expected result
        // forceMerge();
    }

    @TestLogging(
        value = ""org.elasticsearch.search.aggregations.bucket.sampler.random.RandomSamplingQuery:TRACE,org.elasticsearch.search:TRACE"",
        reason = ""debugging""
    )
    public void testRandomSampler() {
        int seed = 947097719;
        TermQueryBuilder query = QueryBuilders.termQuery(""transaction.name"", ""encodeSha1"");
        RandomSamplerAggregationBuilder randomSampler = new RandomSamplerAggregationBuilder(""sample"").setSeed(seed)
            .setProbability(0.2d)
            .subAggregation(new TermsAggregationBuilder(""group_by"").field(""transaction.stacktrace""));
        randomSampler.setShardSeed(42);

        assertResponse(
            prepareSearch(TEST_INDEX).setTrackTotalHits(false)
                .setSize(0)
                // take advantage of request cache and keep a consistent order for the same request
                .setRequestCache(true)
                .setPreference(String.valueOf(seed))
                .setQuery(query)
                .addAggregation(new MinAggregationBuilder(""min_time"").field(""@timestamp""))
                .addAggregation(new MaxAggregationBuilder(""max_time"").field(""@timestamp""))
                .addAggregation(randomSampler),
            response -> {
                SingleBucketAggregation sample = response.getAggregations().get(""sample"");
                Terms stacktraces = sample.getAggregations().get(""group_by"");
                // as the sampling rate is 0.2, we see 5 times more samples (random sampler agg automatically adjusts sample count)
                assertEquals(5L, stacktraces.getBucketByKey(""aaaaaa"").getDocCount());
            }
        );
    }
}
```

If we add a couple of trace statements:

```patch
diff --git a/server/src/main/java/org/elasticsearch/search/aggregations/bucket/sampler/random/RandomSamplingQuery.java b/server/src/main/java/org/elasticsearch/search/aggregations/bucket/sampler/random/RandomSamplingQuery.java
index 1878f15824b..a2cd6480e4c 100644
--- a/server/src/main/java/org/elasticsearch/search/aggregations/bucket/sampler/random/RandomSamplingQuery.java
+++ b/server/src/main/java/org/elasticsearch/search/aggregations/bucket/sampler/random/RandomSamplingQuery.java
@@ -8,6 +8,8 @@
 
 package org.elasticsearch.search.aggregations.bucket.sampler.random;
 
+import org.apache.logging.log4j.LogManager;
+import org.apache.logging.log4j.Logger;
 import org.apache.lucene.index.LeafReaderContext;
 import org.apache.lucene.search.ConstantScoreScorer;
 import org.apache.lucene.search.DocIdSetIterator;
@@ -29,6 +31,7 @@ import java.util.function.IntSupplier;
  * A query that randomly matches documents with a user-provided probability within a geometric distribution
  */
 public final class RandomSamplingQuery extends Query {
+    private static final Logger logger = LogManager.getLogger(RandomSamplingQuery.class);
 
     private final double p;
     private final int seed;
@@ -41,6 +44,7 @@ public final class RandomSamplingQuery extends Query {
      *                  can be generated
      */
     public RandomSamplingQuery(double p, int seed, int hash) {
+        logger.trace(""Create RandomSamplingQuery with p=[{}], seed=[{}], hash=[{}]"", p, hash, seed);
         if (p <= 0.0 || p >= 1.0) {
             throw new IllegalArgumentException(""RandomSampling probability must be between 0.0 and 1.0, was ["" + p + ""]"");
         }
@@ -56,6 +60,7 @@ public final class RandomSamplingQuery extends Query {
 
     @Override
     public Weight createWeight(IndexSearcher searcher, ScoreMode scoreMode, float boost) throws IOException {
+        logger.trace(""createWeight(searcher=["" + searcher + ""], scoreMode=["" + scoreMode + ""], boost=["" + boost + ""])"");
         return new Weight(this) {
             @Override
             public boolean isCacheable(LeafReaderContext ctx) {
@@ -75,7 +80,9 @@ public final class RandomSamplingQuery extends Query {
 
             @Override
             public Scorer scorer(LeafReaderContext context) {
-                final SplittableRandom random = new SplittableRandom(BitMixer.mix(hash ^ seed));
+                int randomSeed = BitMixer.mix(hash ^ seed);
+                logger.trace(""random seed=["" + randomSeed + ""]"");
+                final SplittableRandom random = new SplittableRandom(randomSeed);
                 int maxDoc = context.reader().maxDoc();
                 return new ConstantScoreScorer(
                     this,
@@ -119,8 +126,10 @@ public final class RandomSamplingQuery extends Query {
 
         @Override
         public int advance(int target) {
+            logger.trace(""advance to [{}]"", target);
             while (doc < target && doc < maxDoc) {
                 doc += distribution.next();
+                logger.trace(""doc=[{}]"", doc);
             }
             doc = doc < maxDoc ? doc : NO_MORE_DOCS;
             return doc;
```

the test output indicates that the doc iterator is called for each segment (it is created four times):

```
  1> [2024-03-22T07:24:35,469][TRACE][o.e.s.a.b.s.r.RandomSamplingQuery] [node_t3] random seed=[-1436384276]
  1> [2024-03-22T07:24:35,469][TRACE][o.e.s.a.b.s.r.RandomSamplingQuery] [node_t3] random seed=[-1436384276]
  1> [2024-03-22T07:24:35,491][TRACE][o.e.s.a.b.s.r.RandomSamplingQuery] [node_t3] advance to [0]
  1> [2024-03-22T07:24:35,491][TRACE][o.e.s.a.b.s.r.RandomSamplingQuery] [node_t3] advance to [0]
  1> [2024-03-22T07:24:35,491][TRACE][o.e.s.a.b.s.r.RandomSamplingQuery] [node_t3] doc=[0]
  1> [2024-03-22T07:24:35,491][TRACE][o.e.s.a.b.s.r.RandomSamplingQuery] [node_t3] doc=[0]
  1> [2024-03-22T07:24:35,491][TRACE][o.e.s.a.b.s.r.RandomSamplingQuery] [node_t3] advance to [1]
  1> [2024-03-22T07:24:35,491][TRACE][o.e.s.a.b.s.r.RandomSamplingQuery] [node_t3] advance to [1]
  1> [2024-03-22T07:24:35,492][TRACE][o.e.s.a.b.s.r.RandomSamplingQuery] [node_t3] doc=[15]
  1> [2024-03-22T07:24:35,491][TRACE][o.e.s.a.b.s.r.RandomSamplingQuery] [node_t3] doc=[15]
  1> [2024-03-22T07:24:35,493][TRACE][o.e.s.a.b.s.r.RandomSamplingQuery] [node_t3] random seed=[-1436384276]
  1> [2024-03-22T07:24:35,493][TRACE][o.e.s.a.b.s.r.RandomSamplingQuery] [node_t3] random seed=[-1436384276]
  1> [2024-03-22T07:24:35,493][TRACE][o.e.s.a.b.s.r.RandomSamplingQuery] [node_t3] advance to [0]
  1> [2024-03-22T07:24:35,493][TRACE][o.e.s.a.b.s.r.RandomSamplingQuery] [node_t3] advance to [0]
  1> [2024-03-22T07:24:35,493][TRACE][o.e.s.a.b.s.r.RandomSamplingQuery] [node_t3] doc=[0]
  1> [2024-03-22T07:24:35,493][TRACE][o.e.s.a.b.s.r.RandomSamplingQuery] [node_t3] doc=[0]
  1> [2024-03-22T07:24:35,493][TRACE][o.e.s.a.b.s.r.RandomSamplingQuery] [node_t3] advance to [1]
  1> [2024-03-22T07:24:35,494][TRACE][o.e.s.a.b.s.r.RandomSamplingQuery] [node_t3] advance to [1]
  1> [2024-03-22T07:24:35,494][TRACE][o.e.s.a.b.s.r.RandomSamplingQuery] [node_t3] doc=[15]
  1> [2024-03-22T07:24:35,494][TRACE][o.e.s.a.b.s.r.RandomSamplingQuery] [node_t3] doc=[15]
````

### Logs (if relevant)

_No response_",danielmitterdorfer,closed,"['>bug', ':ml', 'Team:ML', 'v8.14.0']",https://github.com/elastic/elasticsearch/issues/106657,2024-03-22T10:36:47Z,10,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/106657,"{
  ""application_resource"": ""no""
}"
126,106651,[CI] CacheTests testDependentKeyDeadlock failing,"It happened in Windows, and it is a timeout, but the timeout on a concurrency primitive looks suspiciously like a deadlock.

Tried on Mac, does not repro. Wasn't able to try on Windows

**Build scan:**
https://gradle-enterprise.elastic.co/s/63bmf7um5lcjc/tests/:server:test/org.elasticsearch.common.cache.CacheTests/testDependentKeyDeadlock


**Reproduction line:**
```
gradlew ':server:test' --tests ""org.elasticsearch.common.cache.CacheTests.testDependentKeyDeadlock"" -Dtests.seed=FF978136D53D8B7D -Dtests.locale=de -Dtests.timezone=Europe/Andorra -Druntime.java=22
```

**Applicable branches:**
8.13

**Reproduces locally?:**
Didn't try

**Failure history:**
[Failure dashboard for `org.elasticsearch.common.cache.CacheTests#testDependentKeyDeadlock`](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&_a=(controlGroupInput:(chainingSystem:HIERARCHICAL,controlStyle:twoLine,ignoreParentSettings:(ignoreFilters:!f,ignoreQuery:!f,ignoreTimerange:!f,ignoreValidations:!t),panels:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(explicitInput:(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,enhancements:(),fieldName:task.keyword,grow:!t,id:'0c0c9cb8-ccd2-45c6-9b13-96bac4abc542',searchTechnique:wildcard,selectedOptions:!(),singleSelect:!t,title:'Gradle%20Task',width:medium),grow:!t,order:0,type:optionsListControl,width:small),'144933da-5c1b-4257-a969-7f43455a7901':(explicitInput:(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,enhancements:(),fieldName:name.keyword,grow:!t,id:'144933da-5c1b-4257-a969-7f43455a7901',searchTechnique:wildcard,selectedOptions:!('testDependentKeyDeadlock'),title:Test,width:medium),grow:!t,order:2,type:optionsListControl,width:medium),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(explicitInput:(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,enhancements:(),fieldName:className.keyword,grow:!t,id:'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850',searchTechnique:wildcard,selectedOptions:!('org.elasticsearch.common.cache.CacheTests'),title:Suite,width:medium),grow:!t,order:1,type:optionsListControl,width:medium)))))


**Failure excerpt:**
```
java.lang.AssertionError: safeAwait: CountDownLatch did not reach zero within the timeout

  at __randomizedtesting.SeedInfo.seed([FF978136D53D8B7D:DEF551B633C72A39]:0)
  at org.junit.Assert.fail(Assert.java:89)
  at org.junit.Assert.assertTrue(Assert.java:42)
  at org.elasticsearch.test.ESTestCase.safeAwait(ESTestCase.java:2078)
  at org.elasticsearch.common.cache.CacheTests.testDependentKeyDeadlock(CacheTests.java:738)
  at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
  at java.lang.reflect.Method.invoke(Method.java:580)
  at com.carrotsearch.randomizedtesting.RandomizedRunner.invoke(RandomizedRunner.java:1758)
  at com.carrotsearch.randomizedtesting.RandomizedRunner$8.evaluate(RandomizedRunner.java:946)
  at com.carrotsearch.randomizedtesting.RandomizedRunner$9.evaluate(RandomizedRunner.java:982)
  at com.carrotsearch.randomizedtesting.RandomizedRunner$10.evaluate(RandomizedRunner.java:996)
  at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)
  at org.junit.rules.RunRules.evaluate(RunRules.java:20)
  at org.apache.lucene.tests.util.TestRuleSetupTeardownChained$1.evaluate(TestRuleSetupTeardownChained.java:48)
  at org.apache.lucene.tests.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:43)
  at org.apache.lucene.tests.util.TestRuleThreadAndTestName$1.evaluate(TestRuleThreadAndTestName.java:45)
  at org.apache.lucene.tests.util.TestRuleIgnoreAfterMaxFailures$1.evaluate(TestRuleIgnoreAfterMaxFailures.java:60)
  at org.apache.lucene.tests.util.TestRuleMarkFailure$1.evaluate(TestRuleMarkFailure.java:44)
  at org.junit.rules.RunRules.evaluate(RunRules.java:20)
  at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)
  at com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:390)
  at com.carrotsearch.randomizedtesting.ThreadLeakControl.forkTimeoutingTask(ThreadLeakControl.java:843)
  at com.carrotsearch.randomizedtesting.ThreadLeakControl$3.evaluate(ThreadLeakControl.java:490)
  at com.carrotsearch.randomizedtesting.RandomizedRunner.runSingleTest(RandomizedRunner.java:955)
  at com.carrotsearch.randomizedtesting.RandomizedRunner$5.evaluate(RandomizedRunner.java:840)
  at com.carrotsearch.randomizedtesting.RandomizedRunner$6.evaluate(RandomizedRunner.java:891)
  at com.carrotsearch.randomizedtesting.RandomizedRunner$7.evaluate(RandomizedRunner.java:902)
  at org.apache.lucene.tests.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:43)
  at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)
  at org.apache.lucene.tests.util.TestRuleStoreClassName$1.evaluate(TestRuleStoreClassName.java:38)
  at com.carrotsearch.randomizedtesting.rules.NoShadowingOrOverridesOnMethodsRule$1.evaluate(NoShadowingOrOverridesOnMethodsRule.java:40)
  at com.carrotsearch.randomizedtesting.rules.NoShadowingOrOverridesOnMethodsRule$1.evaluate(NoShadowingOrOverridesOnMethodsRule.java:40)
  at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)
  at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)
  at org.apache.lucene.tests.util.TestRuleAssertionsRequired$1.evaluate(TestRuleAssertionsRequired.java:53)
  at org.apache.lucene.tests.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:43)
  at org.apache.lucene.tests.util.TestRuleMarkFailure$1.evaluate(TestRuleMarkFailure.java:44)
  at org.apache.lucene.tests.util.TestRuleIgnoreAfterMaxFailures$1.evaluate(TestRuleIgnoreAfterMaxFailures.java:60)
  at org.apache.lucene.tests.util.TestRuleIgnoreTestSuites$1.evaluate(TestRuleIgnoreTestSuites.java:47)
  at org.junit.rules.RunRules.evaluate(RunRules.java:20)
  at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)
  at com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:390)
  at com.carrotsearch.randomizedtesting.ThreadLeakControl.lambda$forkTimeoutingTask$0(ThreadLeakControl.java:850)
  at java.lang.Thread.run(Thread.java:1570)

```",ldematte,closed,"[':Core/Infra/Core', '>test-failure', 'Team:Core/Infra', 'medium-risk']",https://github.com/elastic/elasticsearch/issues/106651,2024-03-22T09:00:13Z,4,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/106651,"{
  ""application_resource"": ""yes""
}"
127,106081,Enrich Cache should be based on memory usage instead of a flat document count,"When enriching documents via an ingest processor, we cache recently retrieved documents in a global enrich cache. This cache is set at 1000 entries by default. The cache does not take memory consumption of documents into account when storing values and evicting them. This causes heap issues on smaller node sizes when large documents are returned by enrich indices. 

As far as I can tell, the practical size limit of a document based on various limitations is in the ballpark of 50-100mb. An enrich index filled with extremely large documents can quickly fill the heap of an Elasticsearch node since the cache retains 1000 entries by default. The only fix in this scenarios is to either cease using Enrich in this fashion or drop the cache size severely.

Marking as a bug since without any guards in place this can lead to system instability.",jbaiera,closed,"['>bug', ':Data Management/Ingest Node', 'Team:Data Management']",https://github.com/elastic/elasticsearch/issues/106081,2024-03-07T18:26:39Z,2,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/106081,"{
  ""application_resource"": ""yes""
}"
128,105836,[ML] `categorize_text` aggregation can suffer array index out of bounds exception,"The `categorize_text` aggregation can suffer from an array index out of bounds exception if it is nested beneath another aggregation and that other aggregation generates a large number of empty buckets at the end of its output range.

A concrete example is `categorize_text` nested under `date_histogram` over a time range that causes the `date_histogram` to have many buckets with `doc_count` zero at the end of the time range, for example when the time range of the search extends beyond the end of the data.

One way to reproduce the problem is as follows:

1. Use Kibana's file upload functionality to import [data.csv](https://github.com/elastic/elasticsearch/files/14433686/data.csv.txt) into an index called `data`.
2. Run the following search in Dev Tools:

```
GET data/_search?error_trace=true
{
  ""query"": {
    ""bool"": {
      ""must"": [
        {
          ""range"": {
            ""@timestamp"": {
              ""gte"": ""2024-02-25T22:45:31.453Z"",
              ""lte"": ""2024-02-26T23:00:31.453Z""
            }
          }
        }
      ]
    }
  },
  ""aggs"": {
    ""quarter_hour"": {
      ""date_histogram"": {
        ""field"": ""@timestamp"",
        ""fixed_interval"": ""15m""
      },
      ""aggs"": {
        ""categories"": {
          ""categorize_text"": {
            ""field"": ""message""
          }
        }
      }
    }
  },
  ""size"": 0
}
```

The output is as follows:

```
{
  ""error"": {
    ""root_cause"": [
      {
        ""type"": ""array_index_out_of_bounds_exception"",
        ""reason"": ""Index 1 out of bounds for length 1"",
        ""stack_trace"": """"""org.elasticsearch.ElasticsearchException$1: Index 1 out of bounds for length 1
	at org.elasticsearch.server@8.12.2/org.elasticsearch.ElasticsearchException.guessRootCauses(ElasticsearchException.java:699)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.action.search.SearchPhaseExecutionException.guessRootCauses(SearchPhaseExecutionException.java:160)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.ElasticsearchException.guessRootCauses(ElasticsearchException.java:681)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.ElasticsearchException.generateFailureXContent(ElasticsearchException.java:627)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.rest.RestResponse.build(RestResponse.java:180)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.rest.RestResponse.<init>(RestResponse.java:140)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.rest.RestResponse.<init>(RestResponse.java:111)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.rest.action.RestActionListener.onFailure(RestActionListener.java:55)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.rest.action.RestCancellableNodeClient$1.onFailure(RestCancellableNodeClient.java:96)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.tasks.TaskManager$1.onFailure(TaskManager.java:214)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.action.ActionListenerImplementations.safeAcceptException(ActionListenerImplementations.java:62)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.action.ActionListenerImplementations.safeOnFailure(ActionListenerImplementations.java:73)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.action.DelegatingActionListener.onFailure(DelegatingActionListener.java:27)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.action.support.ContextPreservingActionListener.onFailure(ContextPreservingActionListener.java:39)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.action.ActionListenerImplementations.safeAcceptException(ActionListenerImplementations.java:62)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.action.ActionListenerImplementations.safeOnFailure(ActionListenerImplementations.java:73)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.action.DelegatingActionListener.onFailure(DelegatingActionListener.java:27)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.action.ActionListenerImplementations.safeAcceptException(ActionListenerImplementations.java:62)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.action.ActionListenerImplementations.safeOnFailure(ActionListenerImplementations.java:73)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.action.DelegatingActionListener.onFailure(DelegatingActionListener.java:27)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.action.ActionListenerImplementations.safeAcceptException(ActionListenerImplementations.java:62)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.action.ActionListenerImplementations.safeOnFailure(ActionListenerImplementations.java:73)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.action.DelegatingActionListener.onFailure(DelegatingActionListener.java:27)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.action.ActionListenerImplementations$RunAfterActionListener.onFailure(ActionListenerImplementations.java:269)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.action.search.AbstractSearchAsyncAction.raisePhaseFailure(AbstractSearchAsyncAction.java:732)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.action.search.AbstractSearchAsyncAction.onPhaseFailure(AbstractSearchAsyncAction.java:709)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.action.search.AbstractSearchAsyncAction.executeNextPhase(AbstractSearchAsyncAction.java:401)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.action.search.AbstractSearchAsyncAction.onPhaseDone(AbstractSearchAsyncAction.java:741)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.action.search.AbstractSearchAsyncAction.onShardFailure(AbstractSearchAsyncAction.java:494)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.action.search.AbstractSearchAsyncAction$1.onFailure(AbstractSearchAsyncAction.java:332)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.action.ActionListenerImplementations.safeAcceptException(ActionListenerImplementations.java:62)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.action.ActionListenerImplementations.safeOnFailure(ActionListenerImplementations.java:73)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.action.DelegatingActionListener.onFailure(DelegatingActionListener.java:27)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.action.ActionListenerResponseHandler.handleException(ActionListenerResponseHandler.java:54)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.action.search.SearchTransportService$ConnectionCountingHandler.handleException(SearchTransportService.java:553)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.transport.TransportService$UnregisterChildTransportResponseHandler.handleException(TransportService.java:1718)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.transport.TransportService$ContextRestoreResponseHandler.handleException(TransportService.java:1435)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.transport.InboundHandler.doHandleException(InboundHandler.java:475)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.transport.InboundHandler.handleException(InboundHandler.java:462)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.transport.InboundHandler.handlerResponseError(InboundHandler.java:453)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.transport.InboundHandler.executeResponseHandler(InboundHandler.java:145)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.transport.InboundHandler.messageReceived(InboundHandler.java:122)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.transport.InboundHandler.inboundMessage(InboundHandler.java:96)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.transport.TcpTransport.inboundMessage(TcpTransport.java:825)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.transport.InboundPipeline.forwardFragments(InboundPipeline.java:124)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.transport.InboundPipeline.doHandleBytes(InboundPipeline.java:96)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.transport.InboundPipeline.handleBytes(InboundPipeline.java:61)
	at org.elasticsearch.transport.netty4@8.12.2/org.elasticsearch.transport.netty4.Netty4MessageInboundHandler.channelRead(Netty4MessageInboundHandler.java:48)
	at io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)
	at io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.codec@4.1.94.Final/io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:103)
	at io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)
	at io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.handler@4.1.94.Final/io.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:1383)
	at io.netty.handler@4.1.94.Final/io.netty.handler.ssl.SslHandler.decodeJdkCompatible(SslHandler.java:1246)
	at io.netty.handler@4.1.94.Final/io.netty.handler.ssl.SslHandler.decode(SslHandler.java:1295)
	at io.netty.codec@4.1.94.Final/io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:529)
	at io.netty.codec@4.1.94.Final/io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:468)
	at io.netty.codec@4.1.94.Final/io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:290)
	at io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)
	at io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.transport@4.1.94.Final/io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)
	at io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.transport@4.1.94.Final/io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.transport@4.1.94.Final/io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)
	at io.netty.transport@4.1.94.Final/io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)
	at io.netty.transport@4.1.94.Final/io.netty.channel.nio.NioEventLoop.processSelectedKeysPlain(NioEventLoop.java:689)
	at io.netty.transport@4.1.94.Final/io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:652)
	at io.netty.transport@4.1.94.Final/io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.common@4.1.94.Final/io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.common@4.1.94.Final/io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.lang.ArrayIndexOutOfBoundsException: Index 1 out of bounds for length 1
	at org.elasticsearch.common.util.BigArrays$ObjectArrayWrapper.get(BigArrays.java:401)
	at org.elasticsearch.xpack.ml.aggs.categorization.CategorizeTextAggregator.buildAggregations(CategorizeTextAggregator.java:116)
	at org.elasticsearch.search.aggregations.bucket.BucketsAggregator.buildSubAggsForBuckets(BucketsAggregator.java:179)
	at org.elasticsearch.search.aggregations.bucket.BucketsAggregator.buildAggregationsForFixedBucketCount(BucketsAggregator.java:257)
	at org.elasticsearch.search.aggregations.bucket.range.RangeAggregator.buildAggregations(RangeAggregator.java:534)
	at org.elasticsearch.search.aggregations.AdaptingAggregator.buildAggregations(AdaptingAggregator.java:101)
	at org.elasticsearch.search.aggregations.Aggregator.buildTopLevel(Aggregator.java:159)
	at org.elasticsearch.search.aggregations.AggregatorCollector.doPostCollection(AggregatorCollector.java:47)
	at org.elasticsearch.search.query.QueryPhaseCollector.doPostCollection(QueryPhaseCollector.java:379)
	at org.elasticsearch.search.internal.ContextIndexSearcher.doAggregationPostCollection(ContextIndexSearcher.java:386)
	at org.elasticsearch.search.internal.ContextIndexSearcher.search(ContextIndexSearcher.java:375)
	at org.elasticsearch.search.internal.ContextIndexSearcher.lambda$search$4(ContextIndexSearcher.java:345)
	at org.apache.lucene.search.TaskExecutor$TaskGroup.lambda$createTask$0(TaskExecutor.java:118)
	at java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at org.elasticsearch.common.util.concurrent.TimedRunnable.doRun(TimedRunnable.java:33)
	at org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:983)
	at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:26)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.lang.Thread.run(Thread.java:1583)
""""""
      }
    ],
    ""type"": ""search_phase_execution_exception"",
    ""reason"": ""all shards failed"",
    ""phase"": ""query"",
    ""grouped"": true,
    ""failed_shards"": [
      {
        ""shard"": 0,
        ""index"": ""data"",
        ""node"": ""hHGQzTWoQG-t7bNhQm40JQ"",
        ""reason"": {
          ""type"": ""array_index_out_of_bounds_exception"",
          ""reason"": ""Index 1 out of bounds for length 1"",
          ""stack_trace"": """"""java.lang.ArrayIndexOutOfBoundsException: Index 1 out of bounds for length 1
	at org.elasticsearch.common.util.BigArrays$ObjectArrayWrapper.get(BigArrays.java:401)
	at org.elasticsearch.xpack.ml.aggs.categorization.CategorizeTextAggregator.buildAggregations(CategorizeTextAggregator.java:116)
	at org.elasticsearch.search.aggregations.bucket.BucketsAggregator.buildSubAggsForBuckets(BucketsAggregator.java:179)
	at org.elasticsearch.search.aggregations.bucket.BucketsAggregator.buildAggregationsForFixedBucketCount(BucketsAggregator.java:257)
	at org.elasticsearch.search.aggregations.bucket.range.RangeAggregator.buildAggregations(RangeAggregator.java:534)
	at org.elasticsearch.search.aggregations.AdaptingAggregator.buildAggregations(AdaptingAggregator.java:101)
	at org.elasticsearch.search.aggregations.Aggregator.buildTopLevel(Aggregator.java:159)
	at org.elasticsearch.search.aggregations.AggregatorCollector.doPostCollection(AggregatorCollector.java:47)
	at org.elasticsearch.search.query.QueryPhaseCollector.doPostCollection(QueryPhaseCollector.java:379)
	at org.elasticsearch.search.internal.ContextIndexSearcher.doAggregationPostCollection(ContextIndexSearcher.java:386)
	at org.elasticsearch.search.internal.ContextIndexSearcher.search(ContextIndexSearcher.java:375)
	at org.elasticsearch.search.internal.ContextIndexSearcher.lambda$search$4(ContextIndexSearcher.java:345)
	at org.apache.lucene.search.TaskExecutor$TaskGroup.lambda$createTask$0(TaskExecutor.java:118)
	at java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at org.elasticsearch.common.util.concurrent.TimedRunnable.doRun(TimedRunnable.java:33)
	at org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:983)
	at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:26)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.lang.Thread.run(Thread.java:1583)
""""""
        }
      }
    ],
    ""caused_by"": {
      ""type"": ""array_index_out_of_bounds_exception"",
      ""reason"": ""Index 1 out of bounds for length 1"",
      ""caused_by"": {
        ""type"": ""array_index_out_of_bounds_exception"",
        ""reason"": ""Index 1 out of bounds for length 1"",
        ""stack_trace"": """"""java.lang.ArrayIndexOutOfBoundsException: Index 1 out of bounds for length 1
	at org.elasticsearch.common.util.BigArrays$ObjectArrayWrapper.get(BigArrays.java:401)
	at org.elasticsearch.xpack.ml.aggs.categorization.CategorizeTextAggregator.buildAggregations(CategorizeTextAggregator.java:116)
	at org.elasticsearch.search.aggregations.bucket.BucketsAggregator.buildSubAggsForBuckets(BucketsAggregator.java:179)
	at org.elasticsearch.search.aggregations.bucket.BucketsAggregator.buildAggregationsForFixedBucketCount(BucketsAggregator.java:257)
	at org.elasticsearch.search.aggregations.bucket.range.RangeAggregator.buildAggregations(RangeAggregator.java:534)
	at org.elasticsearch.search.aggregations.AdaptingAggregator.buildAggregations(AdaptingAggregator.java:101)
	at org.elasticsearch.search.aggregations.Aggregator.buildTopLevel(Aggregator.java:159)
	at org.elasticsearch.search.aggregations.AggregatorCollector.doPostCollection(AggregatorCollector.java:47)
	at org.elasticsearch.search.query.QueryPhaseCollector.doPostCollection(QueryPhaseCollector.java:379)
	at org.elasticsearch.search.internal.ContextIndexSearcher.doAggregationPostCollection(ContextIndexSearcher.java:386)
	at org.elasticsearch.search.internal.ContextIndexSearcher.search(ContextIndexSearcher.java:375)
	at org.elasticsearch.search.internal.ContextIndexSearcher.lambda$search$4(ContextIndexSearcher.java:345)
	at org.apache.lucene.search.TaskExecutor$TaskGroup.lambda$createTask$0(TaskExecutor.java:118)
	at java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at org.elasticsearch.common.util.concurrent.TimedRunnable.doRun(TimedRunnable.java:33)
	at org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:983)
	at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:26)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.lang.Thread.run(Thread.java:1583)
""""""
      },
      ""stack_trace"": """"""org.elasticsearch.ElasticsearchException$1: Index 1 out of bounds for length 1
	at org.elasticsearch.server@8.12.2/org.elasticsearch.ElasticsearchException.guessRootCauses(ElasticsearchException.java:699)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.action.search.AbstractSearchAsyncAction.executeNextPhase(AbstractSearchAsyncAction.java:399)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.action.search.AbstractSearchAsyncAction.onPhaseDone(AbstractSearchAsyncAction.java:741)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.action.search.AbstractSearchAsyncAction.onShardFailure(AbstractSearchAsyncAction.java:494)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.action.search.AbstractSearchAsyncAction$1.onFailure(AbstractSearchAsyncAction.java:332)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.action.ActionListenerImplementations.safeAcceptException(ActionListenerImplementations.java:62)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.action.ActionListenerImplementations.safeOnFailure(ActionListenerImplementations.java:73)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.action.DelegatingActionListener.onFailure(DelegatingActionListener.java:27)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.action.ActionListenerResponseHandler.handleException(ActionListenerResponseHandler.java:54)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.action.search.SearchTransportService$ConnectionCountingHandler.handleException(SearchTransportService.java:553)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.transport.TransportService$UnregisterChildTransportResponseHandler.handleException(TransportService.java:1718)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.transport.TransportService$ContextRestoreResponseHandler.handleException(TransportService.java:1435)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.transport.InboundHandler.doHandleException(InboundHandler.java:475)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.transport.InboundHandler.handleException(InboundHandler.java:462)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.transport.InboundHandler.handlerResponseError(InboundHandler.java:453)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.transport.InboundHandler.executeResponseHandler(InboundHandler.java:145)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.transport.InboundHandler.messageReceived(InboundHandler.java:122)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.transport.InboundHandler.inboundMessage(InboundHandler.java:96)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.transport.TcpTransport.inboundMessage(TcpTransport.java:825)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.transport.InboundPipeline.forwardFragments(InboundPipeline.java:124)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.transport.InboundPipeline.doHandleBytes(InboundPipeline.java:96)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.transport.InboundPipeline.handleBytes(InboundPipeline.java:61)
	at org.elasticsearch.transport.netty4@8.12.2/org.elasticsearch.transport.netty4.Netty4MessageInboundHandler.channelRead(Netty4MessageInboundHandler.java:48)
	at io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)
	at io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.codec@4.1.94.Final/io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:103)
	at io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)
	at io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.handler@4.1.94.Final/io.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:1383)
	at io.netty.handler@4.1.94.Final/io.netty.handler.ssl.SslHandler.decodeJdkCompatible(SslHandler.java:1246)
	at io.netty.handler@4.1.94.Final/io.netty.handler.ssl.SslHandler.decode(SslHandler.java:1295)
	at io.netty.codec@4.1.94.Final/io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:529)
	at io.netty.codec@4.1.94.Final/io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:468)
	at io.netty.codec@4.1.94.Final/io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:290)
	at io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)
	at io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.transport@4.1.94.Final/io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)
	at io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.transport@4.1.94.Final/io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.transport@4.1.94.Final/io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)
	at io.netty.transport@4.1.94.Final/io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)
	at io.netty.transport@4.1.94.Final/io.netty.channel.nio.NioEventLoop.processSelectedKeysPlain(NioEventLoop.java:689)
	at io.netty.transport@4.1.94.Final/io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:652)
	at io.netty.transport@4.1.94.Final/io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.common@4.1.94.Final/io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.common@4.1.94.Final/io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.lang.ArrayIndexOutOfBoundsException: Index 1 out of bounds for length 1
	at org.elasticsearch.common.util.BigArrays$ObjectArrayWrapper.get(BigArrays.java:401)
	at org.elasticsearch.xpack.ml.aggs.categorization.CategorizeTextAggregator.buildAggregations(CategorizeTextAggregator.java:116)
	at org.elasticsearch.search.aggregations.bucket.BucketsAggregator.buildSubAggsForBuckets(BucketsAggregator.java:179)
	at org.elasticsearch.search.aggregations.bucket.BucketsAggregator.buildAggregationsForFixedBucketCount(BucketsAggregator.java:257)
	at org.elasticsearch.search.aggregations.bucket.range.RangeAggregator.buildAggregations(RangeAggregator.java:534)
	at org.elasticsearch.search.aggregations.AdaptingAggregator.buildAggregations(AdaptingAggregator.java:101)
	at org.elasticsearch.search.aggregations.Aggregator.buildTopLevel(Aggregator.java:159)
	at org.elasticsearch.search.aggregations.AggregatorCollector.doPostCollection(AggregatorCollector.java:47)
	at org.elasticsearch.search.query.QueryPhaseCollector.doPostCollection(QueryPhaseCollector.java:379)
	at org.elasticsearch.search.internal.ContextIndexSearcher.doAggregationPostCollection(ContextIndexSearcher.java:386)
	at org.elasticsearch.search.internal.ContextIndexSearcher.search(ContextIndexSearcher.java:375)
	at org.elasticsearch.search.internal.ContextIndexSearcher.lambda$search$4(ContextIndexSearcher.java:345)
	at org.apache.lucene.search.TaskExecutor$TaskGroup.lambda$createTask$0(TaskExecutor.java:118)
	at java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at org.elasticsearch.common.util.concurrent.TimedRunnable.doRun(TimedRunnable.java:33)
	at org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:983)
	at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:26)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.lang.Thread.run(Thread.java:1583)
""""""
    },
    ""stack_trace"": """"""Failed to execute phase [query], all shards failed; shardFailures {[hHGQzTWoQG-t7bNhQm40JQ][data][0]: org.elasticsearch.transport.RemoteTransportException: [instance-0000000001][172.17.0.18:19563][indices:data/read/search[phase/query]]
Caused by: org.elasticsearch.search.query.QueryPhaseExecutionException: Query Failed [Failed to execute main query]
	at org.elasticsearch.search.query.QueryPhase.addCollectorsAndSearch(QueryPhase.java:229)
	at org.elasticsearch.search.query.QueryPhase.executeQuery(QueryPhase.java:135)
	at org.elasticsearch.search.query.QueryPhase.execute(QueryPhase.java:63)
	at org.elasticsearch.indices.IndicesService.lambda$loadIntoContext$31(IndicesService.java:1536)
	at org.elasticsearch.indices.IndicesService.lambda$cacheShardLevelResult$32(IndicesService.java:1602)
	at org.elasticsearch.indices.IndicesRequestCache$Loader.load(IndicesRequestCache.java:174)
	at org.elasticsearch.indices.IndicesRequestCache$Loader.load(IndicesRequestCache.java:157)
	at org.elasticsearch.common.cache.Cache.computeIfAbsent(Cache.java:418)
	at org.elasticsearch.indices.IndicesRequestCache.getOrCompute(IndicesRequestCache.java:120)
	at org.elasticsearch.indices.IndicesService.cacheShardLevelResult(IndicesService.java:1608)
	at org.elasticsearch.indices.IndicesService.loadIntoContext(IndicesService.java:1530)
	at org.elasticsearch.search.SearchService.loadOrExecuteQueryPhase(SearchService.java:516)
	at org.elasticsearch.search.SearchService.executeQueryPhase(SearchService.java:677)
	at org.elasticsearch.search.SearchService.lambda$executeQueryPhase$2(SearchService.java:545)
	at org.elasticsearch.action.ActionRunnable$3.accept(ActionRunnable.java:73)
	at org.elasticsearch.action.ActionRunnable$3.accept(ActionRunnable.java:70)
	at org.elasticsearch.action.ActionRunnable$4.doRun(ActionRunnable.java:95)
	at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:26)
	at org.elasticsearch.common.util.concurrent.TimedRunnable.doRun(TimedRunnable.java:33)
	at org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:983)
	at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:26)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.lang.Thread.run(Thread.java:1583)
Caused by: java.lang.ArrayIndexOutOfBoundsException: Index 1 out of bounds for length 1
	at org.elasticsearch.common.util.BigArrays$ObjectArrayWrapper.get(BigArrays.java:401)
	at org.elasticsearch.xpack.ml.aggs.categorization.CategorizeTextAggregator.buildAggregations(CategorizeTextAggregator.java:116)
	at org.elasticsearch.search.aggregations.bucket.BucketsAggregator.buildSubAggsForBuckets(BucketsAggregator.java:179)
	at org.elasticsearch.search.aggregations.bucket.BucketsAggregator.buildAggregationsForFixedBucketCount(BucketsAggregator.java:257)
	at org.elasticsearch.search.aggregations.bucket.range.RangeAggregator.buildAggregations(RangeAggregator.java:534)
	at org.elasticsearch.search.aggregations.AdaptingAggregator.buildAggregations(AdaptingAggregator.java:101)
	at org.elasticsearch.search.aggregations.Aggregator.buildTopLevel(Aggregator.java:159)
	at org.elasticsearch.search.aggregations.AggregatorCollector.doPostCollection(AggregatorCollector.java:47)
	at org.elasticsearch.search.query.QueryPhaseCollector.doPostCollection(QueryPhaseCollector.java:379)
	at org.elasticsearch.search.internal.ContextIndexSearcher.doAggregationPostCollection(ContextIndexSearcher.java:386)
	at org.elasticsearch.search.internal.ContextIndexSearcher.search(ContextIndexSearcher.java:375)
	at org.elasticsearch.search.internal.ContextIndexSearcher.lambda$search$4(ContextIndexSearcher.java:345)
	at org.apache.lucene.search.TaskExecutor$TaskGroup.lambda$createTask$0(TaskExecutor.java:118)
	at java.util.concurrent.FutureTask.run(FutureTask.java:317)
	... 6 more
}
	at org.elasticsearch.server@8.12.2/org.elasticsearch.action.search.AbstractSearchAsyncAction.onPhaseFailure(AbstractSearchAsyncAction.java:709)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.action.search.AbstractSearchAsyncAction.executeNextPhase(AbstractSearchAsyncAction.java:401)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.action.search.AbstractSearchAsyncAction.onPhaseDone(AbstractSearchAsyncAction.java:741)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.action.search.AbstractSearchAsyncAction.onShardFailure(AbstractSearchAsyncAction.java:494)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.action.search.AbstractSearchAsyncAction$1.onFailure(AbstractSearchAsyncAction.java:332)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.action.ActionListenerImplementations.safeAcceptException(ActionListenerImplementations.java:62)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.action.ActionListenerImplementations.safeOnFailure(ActionListenerImplementations.java:73)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.action.DelegatingActionListener.onFailure(DelegatingActionListener.java:27)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.action.ActionListenerResponseHandler.handleException(ActionListenerResponseHandler.java:54)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.action.search.SearchTransportService$ConnectionCountingHandler.handleException(SearchTransportService.java:553)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.transport.TransportService$UnregisterChildTransportResponseHandler.handleException(TransportService.java:1718)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.transport.TransportService$ContextRestoreResponseHandler.handleException(TransportService.java:1435)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.transport.InboundHandler.doHandleException(InboundHandler.java:475)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.transport.InboundHandler.handleException(InboundHandler.java:462)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.transport.InboundHandler.handlerResponseError(InboundHandler.java:453)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.transport.InboundHandler.executeResponseHandler(InboundHandler.java:145)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.transport.InboundHandler.messageReceived(InboundHandler.java:122)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.transport.InboundHandler.inboundMessage(InboundHandler.java:96)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.transport.TcpTransport.inboundMessage(TcpTransport.java:825)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.transport.InboundPipeline.forwardFragments(InboundPipeline.java:124)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.transport.InboundPipeline.doHandleBytes(InboundPipeline.java:96)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.transport.InboundPipeline.handleBytes(InboundPipeline.java:61)
	at org.elasticsearch.transport.netty4@8.12.2/org.elasticsearch.transport.netty4.Netty4MessageInboundHandler.channelRead(Netty4MessageInboundHandler.java:48)
	at io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)
	at io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.codec@4.1.94.Final/io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:103)
	at io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)
	at io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.handler@4.1.94.Final/io.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:1383)
	at io.netty.handler@4.1.94.Final/io.netty.handler.ssl.SslHandler.decodeJdkCompatible(SslHandler.java:1246)
	at io.netty.handler@4.1.94.Final/io.netty.handler.ssl.SslHandler.decode(SslHandler.java:1295)
	at io.netty.codec@4.1.94.Final/io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:529)
	at io.netty.codec@4.1.94.Final/io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:468)
	at io.netty.codec@4.1.94.Final/io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:290)
	at io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)
	at io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.transport@4.1.94.Final/io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)
	at io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.transport@4.1.94.Final/io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.transport@4.1.94.Final/io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)
	at io.netty.transport@4.1.94.Final/io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)
	at io.netty.transport@4.1.94.Final/io.netty.channel.nio.NioEventLoop.processSelectedKeysPlain(NioEventLoop.java:689)
	at io.netty.transport@4.1.94.Final/io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:652)
	at io.netty.transport@4.1.94.Final/io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.common@4.1.94.Final/io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.common@4.1.94.Final/io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.elasticsearch.ElasticsearchException$1: Index 1 out of bounds for length 1
	at org.elasticsearch.server@8.12.2/org.elasticsearch.ElasticsearchException.guessRootCauses(ElasticsearchException.java:699)
	at org.elasticsearch.server@8.12.2/org.elasticsearch.action.search.AbstractSearchAsyncAction.executeNextPhase(AbstractSearchAsyncAction.java:399)
	... 49 more
Caused by: java.lang.ArrayIndexOutOfBoundsException: Index 1 out of bounds for length 1
	at org.elasticsearch.common.util.BigArrays$ObjectArrayWrapper.get(BigArrays.java:401)
	at org.elasticsearch.xpack.ml.aggs.categorization.CategorizeTextAggregator.buildAggregations(CategorizeTextAggregator.java:116)
	at org.elasticsearch.search.aggregations.bucket.BucketsAggregator.buildSubAggsForBuckets(BucketsAggregator.java:179)
	at org.elasticsearch.search.aggregations.bucket.BucketsAggregator.buildAggregationsForFixedBucketCount(BucketsAggregator.java:257)
	at org.elasticsearch.search.aggregations.bucket.range.RangeAggregator.buildAggregations(RangeAggregator.java:534)
	at org.elasticsearch.search.aggregations.AdaptingAggregator.buildAggregations(AdaptingAggregator.java:101)
	at org.elasticsearch.search.aggregations.Aggregator.buildTopLevel(Aggregator.java:159)
	at org.elasticsearch.search.aggregations.AggregatorCollector.doPostCollection(AggregatorCollector.java:47)
	at org.elasticsearch.search.query.QueryPhaseCollector.doPostCollection(QueryPhaseCollector.java:379)
	at org.elasticsearch.search.internal.ContextIndexSearcher.doAggregationPostCollection(ContextIndexSearcher.java:386)
	at org.elasticsearch.search.internal.ContextIndexSearcher.search(ContextIndexSearcher.java:375)
	at org.elasticsearch.search.internal.ContextIndexSearcher.lambda$search$4(ContextIndexSearcher.java:345)
	at org.apache.lucene.search.TaskExecutor$TaskGroup.lambda$createTask$0(TaskExecutor.java:118)
	at java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at org.elasticsearch.common.util.concurrent.TimedRunnable.doRun(TimedRunnable.java:33)
	at org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:983)
	at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:26)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.lang.Thread.run(Thread.java:1583)
""""""
  },
  ""status"": 500
}
```

The buggy line is: https://github.com/elastic/elasticsearch/blob/f12070e9e98dfe27b4f57c8436f090ea6eb4c374/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/aggs/categorization/CategorizeTextAggregator.java#L116

It is possible that one of the ""ords to collect"" doesn't actually have a categorizer, because there are no documents within it. If the empty bucket still has an array element then that's fine, as we handle `null` on the next line, but if it's beyond the end of the array then it causes an exception.

This problem is not _always_ seen with every search extending into empty buckets, because when a `BigArray` is resized it may be resized to a bigger size than requested, and the extra capacity may result in the array being big enough to have an entry for each bucket even though we didn't explicitly ask for this: https://github.com/elastic/elasticsearch/blob/c9be8d98f170f65205de12349175e4639f466a7b/server/src/main/java/org/elasticsearch/common/util/BigArrays.java#L861-L869",droberts195,closed,"['>bug', ':ml', 'Team:ML']",https://github.com/elastic/elasticsearch/issues/105836,2024-02-28T12:15:07Z,1,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/105836,"{
  ""application_resource"": ""yes""
}"
129,104997,[CI] SharedBlobCacheServiceTests testGetMultiThreaded failing,"### CI Link

https://gradle-enterprise.elastic.co/s/y2wty2aknyshk/tests/task/:x-pack:plugin:blob-cache:test/details/org.elasticsearch.blobcache.shared.SharedBlobCacheServiceTests/testGetMultiThreaded?top-execution=1

### Repro line
```
./gradlew ':x-pack:plugin:blob-cache:test' --tests ""org.elasticsearch.blobcache.shared.SharedBlobCacheServiceTests.testGetMultiThreaded"" -Dtests.seed=CB78B9BD805285EB -Dtests.locale=es-CO -Dtests.timezone=America/Cancun -Druntime.java=21
```
### Does it reproduce?

Didn't try

### Applicable branches

main

### Failure history

_No response_

### Failure excerpt

```
java.lang.AssertionError: org.apache.lucene.store.AlreadyClosedException: no free region found
at __randomizedtesting.SeedInfo.seed([CB78B9BD805285EB]:0)
at org.elasticsearch.blobcache.shared.SharedBlobCacheServiceTests.lambda$testGetMultiThreaded$14(SharedBlobCacheServiceTests.java:466)
at java.lang.Thread.run(Thread.java:1583)


¬† | Caused by: org.apache.lucene.store.AlreadyClosedException: no free region found
  |   | at¬†org.elasticsearch.blobcache.shared.SharedBlobCacheService.throwAlreadyClosed(SharedBlobCacheService.java:580)  | 
¬† | ¬† | at¬†org.elasticsearch.blobcache.shared.SharedBlobCacheService$LFUCache.initChunk(SharedBlobCacheService.java:1291) | ¬†
¬† | ¬† | at¬†org.elasticsearch.blobcache.shared.SharedBlobCacheService$LFUCache.get(SharedBlobCacheService.java:1219) | ¬†
¬† | ¬† | at¬†org.elasticsearch.blobcache.shared.SharedBlobCacheService$LFUCache.get(SharedBlobCacheService.java:1154) | ¬†
¬† | ¬† | at¬†org.elasticsearch.blobcache.shared.SharedBlobCacheService.get(SharedBlobCacheService.java:458) | ¬†
¬† | ¬† | at¬†org.elasticsearch.blobcache.shared.SharedBlobCacheServiceTests.lambda$testGetMultiThreaded$14(SharedBlobCacheServiceTests.java:464) | ¬†
¬† | ¬† | at¬†java.lang.Thread.run(Thread.java:1583) | ¬†
```

```

[2024-01-31T16:37:10,449][INFO ][o.e.b.s.SharedBlobCacheServiceTests] [testGetMultiThreaded] before test | ¬†
-- | --
¬† | [2024-01-31T16:37:10,490][INFO ][o.e.e.NodeEnvironment    ] [testGetMultiThreaded] using [1] data paths, mounts [[/opt/local-ssd (/dev/nvme0n1)]], net usable_space [318.8gb], net total_space [368gb], types [ext4] | ¬†
¬† | [2024-01-31T16:37:10,497][INFO ][o.e.e.NodeEnvironment    ] [testGetMultiThreaded] heap size [512mb], compressed ordinary object pointers [true] | ¬†
¬† | [2024-01-31T16:37:10,520][INFO ][o.e.p.Preallocate        ] [testGetMultiThreaded] pre-allocating cache file [/opt/local-ssd/buildkite/builds/bk-agent-prod-gcp-1706734902520139651/elastic/elasticsearch-periodic-platform-support/x-pack/plugin/blob-cache/build/testrun/test/temp/org.elasticsearch.blobcache.shared.SharedBlobCacheServiceTests_CB78B9BD805285EB-001/tempDir-009/data/shared_snapshot_cache] (3686400 bytes) using native methods | ¬†
¬† | [2024-01-31T16:37:10,521][WARN ][o.e.p.Preallocate        ] [testGetMultiThreaded] failed to pre-allocate cache file [/opt/local-ssd/buildkite/builds/bk-agent-prod-gcp-1706734902520139651/elastic/elasticsearch-periodic-platform-support/x-pack/plugin/blob-cache/build/testrun/test/temp/org.elasticsearch.blobcache.shared.SharedBlobCacheServiceTests_CB78B9BD805285EB-001/tempDir-009/data/shared_snapshot_cache] using native methods | ¬†
¬† | java.lang.reflect.InaccessibleObjectException: Unable to make field private int java.io.FileDescriptor.fd accessible: module java.base does not ""opens java.io"" to unnamed module @515aebb0 | ¬†
¬† | at java.lang.reflect.AccessibleObject.throwInaccessibleObjectException(AccessibleObject.java:391) ~[?:?] | ¬†
¬† | at java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:367) ~[?:?] | ¬†
¬† | at java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:315) ~[?:?] | ¬†
¬† | at java.lang.reflect.Field.checkCanSetAccessible(Field.java:183) ~[?:?] | ¬†
¬† | at java.lang.reflect.Field.setAccessible(Field.java:177) ~[?:?] | ¬†
¬† | at org.elasticsearch.preallocate.Preallocate$FileDescriptorFieldAction.run(Preallocate.java:110) ~[elasticsearch-preallocate-8.13.0-SNAPSHOT.jar:8.13.0-SNAPSHOT] | ¬†
¬† | at org.elasticsearch.preallocate.Preallocate$FileDescriptorFieldAction.run(Preallocate.java:96) ~[elasticsearch-preallocate-8.13.0-SNAPSHOT.jar:8.13.0-SNAPSHOT] | ¬†
¬† | at java.security.AccessController.doPrivileged(AccessController.java:571) ~[?:?] | ¬†
¬† | at org.elasticsearch.preallocate.Preallocate.preallocate(Preallocate.java:54) ~[elasticsearch-preallocate-8.13.0-SNAPSHOT.jar:8.13.0-SNAPSHOT] | ¬†
¬† | at org.elasticsearch.preallocate.Preallocate.preallocate(Preallocate.java:37) ~[elasticsearch-preallocate-8.13.0-SNAPSHOT.jar:8.13.0-SNAPSHOT] | ¬†
¬† | at org.elasticsearch.blobcache.shared.SharedBytes.<init>(SharedBytes.java:80) ~[main/:?] | ¬†
¬† | at org.elasticsearch.blobcache.shared.SharedBlobCacheService.<init>(SharedBlobCacheService.java:371) ~[main/:?] | ¬†
¬† | at org.elasticsearch.blobcache.shared.SharedBlobCacheService.<init>(SharedBlobCacheService.java:333) ~[main/:?] | ¬†
¬† | at org.elasticsearch.blobcache.shared.SharedBlobCacheServiceTests.testGetMultiThreaded(SharedBlobCacheServiceTests.java:442) ~[test/:?] | ¬†
¬† | at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?] | ¬†
¬† | at java.lang.reflect.Method.invoke(Method.java:580) ~[?:?] | ¬†
¬† | at com.carrotsearch.randomizedtesting.RandomizedRunner.invoke(RandomizedRunner.java:1758) ~[randomizedtesting-runner-2.8.0.jar:?] | ¬†
¬† | at com.carrotsearch.randomizedtesting.RandomizedRunner$8.evaluate(RandomizedRunner.java:946) ~[randomizedtesting-runner-2.8.0.jar:?] | ¬†
¬† | at com.carrotsearch.randomizedtesting.RandomizedRunner$9.evaluate(RandomizedRunner.java:982) ~[randomizedtesting-runner-2.8.0.jar:?] | ¬†
¬† | at com.carrotsearch.randomizedtesting.RandomizedRunner$10.evaluate(RandomizedRunner.java:996) ~[randomizedtesting-runner-2.8.0.jar:?] | ¬†
¬† | at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36) ~[randomizedtesting-runner-2.8.0.jar:?] | ¬†
¬† | at org.junit.rules.RunRules.evaluate(RunRules.java:20) ~[junit-4.13.2.jar:4.13.2] | ¬†
¬† | at org.apache.lucene.tests.util.TestRuleSetupTeardownChained$1.evaluate(TestRuleSetupTeardownChained.java:48) ~[lucene-test-framework-9.9.2.jar:9.9.2 a2939784c4ca60bc28bf488b5479c02fc2e5e22c - 2024-01-25 09:51:09] | ¬†
¬† | at org.apache.lucene.tests.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:43) ~[lucene-test-framework-9.9.2.jar:9.9.2 a2939784c4ca60bc28bf488b5479c02fc2e5e22c - 2024-01-25 09:51:09] | ¬†
¬† | at org.apache.lucene.tests.util.TestRuleThreadAndTestName$1.evaluate(TestRuleThreadAndTestName.java:45) ~[lucene-test-framework-9.9.2.jar:9.9.2 a2939784c4ca60bc28bf488b5479c02fc2e5e22c - 2024-01-25 09:51:09] | ¬†
¬† | at org.apache.lucene.tests.util.TestRuleIgnoreAfterMaxFailures$1.evaluate(TestRuleIgnoreAfterMaxFailures.java:60) ~[lucene-test-framework-9.9.2.jar:9.9.2 a2939784c4ca60bc28bf488b5479c02fc2e5e22c - 2024-01-25 09:51:09] | ¬†
¬† | at org.apache.lucene.tests.util.TestRuleMarkFailure$1.evaluate(TestRuleMarkFailure.java:44) ~[lucene-test-framework-9.9.2.jar:9.9.2 a2939784c4ca60bc28bf488b5479c02fc2e5e22c - 2024-01-25 09:51:09] | ¬†
¬† | at org.junit.rules.RunRules.evaluate(RunRules.java:20) ~[junit-4.13.2.jar:4.13.2] | ¬†
¬† | at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36) ~[randomizedtesting-runner-2.8.0.jar:?] | ¬†
¬† | at com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:390) ~[randomizedtesting-runner-2.8.0.jar:?] | ¬†
¬† | at com.carrotsearch.randomizedtesting.ThreadLeakControl.forkTimeoutingTask(ThreadLeakControl.java:843) ~[randomizedtesting-runner-2.8.0.jar:?] | ¬†
¬† | at com.carrotsearch.randomizedtesting.ThreadLeakControl$3.evaluate(ThreadLeakControl.java:490) ~[randomizedtesting-runner-2.8.0.jar:?] | ¬†
¬† | at com.carrotsearch.randomizedtesting.RandomizedRunner.runSingleTest(RandomizedRunner.java:955) ~[randomizedtesting-runner-2.8.0.jar:?] | ¬†
¬† | at com.carrotsearch.randomizedtesting.RandomizedRunner$5.evaluate(RandomizedRunner.java:840) ~[randomizedtesting-runner-2.8.0.jar:?] | ¬†
¬† | at com.carrotsearch.randomizedtesting.RandomizedRunner$6.evaluate(RandomizedRunner.java:891) ~[randomizedtesting-runner-2.8.0.jar:?] | ¬†
¬† | at com.carrotsearch.randomizedtesting.RandomizedRunner$7.evaluate(RandomizedRunner.java:902) ~[randomizedtesting-runner-2.8.0.jar:?] | ¬†
¬† | at org.apache.lucene.tests.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:43) ~[lucene-test-framework-9.9.2.jar:9.9.2 a2939784c4ca60bc28bf488b5479c02fc2e5e22c - 2024-01-25 09:51:09] | ¬†
¬† | at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36) ~[randomizedtesting-runner-2.8.0.jar:?] | ¬†
¬† | at org.apache.lucene.tests.util.TestRuleStoreClassName$1.evaluate(TestRuleStoreClassName.java:38) ~[lucene-test-framework-9.9.2.jar:9.9.2 a2939784c4ca60bc28bf488b5479c02fc2e5e22c - 2024-01-25 09:51:09] | ¬†
¬† | at com.carrotsearch.randomizedtesting.rules.NoShadowingOrOverridesOnMethodsRule$1.evaluate(NoShadowingOrOverridesOnMethodsRule.java:40) ~[randomizedtesting-runner-2.8.0.jar:?] | ¬†
¬† | at com.carrotsearch.randomizedtesting.rules.NoShadowingOrOverridesOnMethodsRule$1.evaluate(NoShadowingOrOverridesOnMethodsRule.java:40) ~[randomizedtesting-runner-2.8.0.jar:?] | ¬†
¬† | at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36) ~[randomizedtesting-runner-2.8.0.jar:?] | ¬†
¬† | at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36) ~[randomizedtesting-runner-2.8.0.jar:?] | ¬†
¬† | at org.apache.lucene.tests.util.TestRuleAssertionsRequired$1.evaluate(TestRuleAssertionsRequired.java:53) ~[lucene-test-framework-9.9.2.jar:9.9.2 a2939784c4ca60bc28bf488b5479c02fc2e5e22c - 2024-01-25 09:51:09] | ¬†
¬† | at org.apache.lucene.tests.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:43) ~[lucene-test-framework-9.9.2.jar:9.9.2 a2939784c4ca60bc28bf488b5479c02fc2e5e22c - 2024-01-25 09:51:09] | ¬†
¬† | at org.apache.lucene.tests.util.TestRuleMarkFailure$1.evaluate(TestRuleMarkFailure.java:44) ~[lucene-test-framework-9.9.2.jar:9.9.2 a2939784c4ca60bc28bf488b5479c02fc2e5e22c - 2024-01-25 09:51:09] | ¬†
¬† | at org.apache.lucene.tests.util.TestRuleIgnoreAfterMaxFailures$1.evaluate(TestRuleIgnoreAfterMaxFailures.java:60) ~[lucene-test-framework-9.9.2.jar:9.9.2 a2939784c4ca60bc28bf488b5479c02fc2e5e22c - 2024-01-25 09:51:09] | ¬†
¬† | at org.apache.lucene.tests.util.TestRuleIgnoreTestSuites$1.evaluate(TestRuleIgnoreTestSuites.java:47) ~[lucene-test-framework-9.9.2.jar:9.9.2 a2939784c4ca60bc28bf488b5479c02fc2e5e22c - 2024-01-25 09:51:09] | ¬†
¬† | at org.junit.rules.RunRules.evaluate(RunRules.java:20) ~[junit-4.13.2.jar:4.13.2] | ¬†
¬† | at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36) ~[randomizedtesting-runner-2.8.0.jar:?] | ¬†
¬† | at com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:390) ~[randomizedtesting-runner-2.8.0.jar:?] | ¬†
¬† | at com.carrotsearch.randomizedtesting.ThreadLeakControl.lambda$forkTimeoutingTask$0(ThreadLeakControl.java:850) ~[randomizedtesting-runner-2.8.0.jar:?] | ¬†
¬† | at java.lang.Thread.run(Thread.java:1583) ~[?:?] | ¬†
¬† | [2024-01-31T16:37:10,533][INFO ][o.e.p.Preallocate        ] [testGetMultiThreaded] pre-allocating cache file [/opt/local-ssd/buildkite/builds/bk-agent-prod-gcp-1706734902520139651/elastic/elasticsearch-periodic-platform-support/x-pack/plugin/blob-cache/build/testrun/test/temp/org.elasticsearch.blobcache.shared.SharedBlobCacheServiceTests_CB78B9BD805285EB-001/tempDir-009/data/shared_snapshot_cache] (3686400 bytes) using setLength method | ¬†
¬† | ene 31, 2024 4:37:10 PM com.carrotsearch.randomizedtesting.RandomizedRunner$QueueUncaughtExceptionsHandler uncaughtException | ¬†
¬† | WARNING: Uncaught exception in thread: Thread[#82,Thread-16,5,TGRP-SharedBlobCacheServiceTests] | ¬†
¬† | java.lang.AssertionError: org.apache.lucene.store.AlreadyClosedException: no free region found | ¬†
¬† | at __randomizedtesting.SeedInfo.seed([CB78B9BD805285EB]:0) | ¬†
¬† | at org.elasticsearch.blobcache.shared.SharedBlobCacheServiceTests.lambda$testGetMultiThreaded$14(SharedBlobCacheServiceTests.java:466) | ¬†
¬† | at java.base/java.lang.Thread.run(Thread.java:1583) | ¬†
¬† | Caused by: org.apache.lucene.store.AlreadyClosedException: no free region found | ¬†
¬† | at org.elasticsearch.blobcache.shared.SharedBlobCacheService.throwAlreadyClosed(SharedBlobCacheService.java:580) | ¬†
¬† | at org.elasticsearch.blobcache.shared.SharedBlobCacheService$LFUCache.initChunk(SharedBlobCacheService.java:1291) | ¬†
¬† | at org.elasticsearch.blobcache.shared.SharedBlobCacheService$LFUCache.get(SharedBlobCacheService.java:1219) | ¬†
¬† | at org.elasticsearch.blobcache.shared.SharedBlobCacheService$LFUCache.get(SharedBlobCacheService.java:1154) | ¬†
¬† | at org.elasticsearch.blobcache.shared.SharedBlobCacheService.get(SharedBlobCacheService.java:458) | ¬†
¬† | at org.elasticsearch.blobcache.shared.SharedBlobCacheServiceTests.lambda$testGetMultiThreaded$14(SharedBlobCacheServiceTests.java:464) | ¬†
¬† | ... 1 more | ¬†
¬† | ¬† | ¬†
¬† | [2024-01-31T16:37:10,662][INFO ][o.e.b.s.SharedBlobCacheServiceTests] [testGetMultiThreaded] after test
```",DiannaHohensee,closed,"['blocker', ':Distributed Coordination/Snapshot/Restore', '>test-failure', 'Team:Distributed (Obsolete)']",https://github.com/elastic/elasticsearch/issues/104997,2024-02-01T01:38:52Z,2,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/104997,"{
  ""application_resource"": ""yes""
}"
130,104962,SAML's authentication should not block transport_worker threads,"### Description

SAML's metadata can be configured to be loaded from a file or an external HTTP URL. The fetching and refreshing of metadata is done periodically in a dedicated timer thread. But since the metadata can be changed asynchronously,¬†it can cause all authentications to fail until the periodic refresh kicks in. Hence, the SAML realm tries to leniently fetch and refresh metadata during failed authentication. This refreshing will be executed on the same thread that is executing the authentication. Which appears to be the `transport_worker` thread. Blocking [networking threads](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-network.html#modules-network-threading-model) can cause the cluster instability due to delay of message processing and eventually lead to a node [failing its health checks](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-fault-detection.html) and its removal from the cluster.

The loading metadata from a URL is particularly bad since it can fail/be slow due to many factors (DNS resolution, slow or unreachable metadata server, etc). 

We may want to evaluate the proposal in https://github.com/elastic/elasticsearch/issues/68004 to make the Security async. But in the mean time we should make sure that already identified blocking SAML code is executed async and not on a `transport_worker` threads. We can do this by making the SAML authentication calls asynchronous by forking a dedicated thread - like we do for [LDAP realm authentication](https://github.com/elastic/elasticsearch/blob/35cc9e115916731f64efb141b857167544858e3c/x-pack/plugin/security/src/main/java/org/elasticsearch/xpack/security/authc/ldap/LdapRealm.java#L149-L150).

<details>
<summary> Thread dump which shows two transport_worker threads being blocked on a lock obtained by timer thread</summary>

```
""Timer for org.elasticsearch.xpack.security.authc.saml.SamlRealm$PrivilegedHTTPMetadataResolver@43317844"" #58 [297] daemon prio=5 os_prio=0 cpu=5322.34ms elapsed=2312956.01s tid=0x00007eff643ddb80 nid=297 runnable  [0x00007f004c371000]
   java.lang.Thread.State: RUNNABLE
	at sun.nio.ch.SocketDispatcher.read0(java.base@20.0.2/Native Method)
	at sun.nio.ch.SocketDispatcher.read(java.base@20.0.2/SocketDispatcher.java:47)
	at sun.nio.ch.NioSocketImpl.tryRead(java.base@20.0.2/NioSocketImpl.java:256)
	at sun.nio.ch.NioSocketImpl.implRead(java.base@20.0.2/NioSocketImpl.java:307)
	at sun.nio.ch.NioSocketImpl.read(java.base@20.0.2/NioSocketImpl.java:345)
	at sun.nio.ch.NioSocketImpl$1.read(java.base@20.0.2/NioSocketImpl.java:794)
	at java.net.Socket$SocketInputStream.read(java.base@20.0.2/Socket.java:1025)
	at sun.security.ssl.SSLSocketInputRecord.read(java.base@20.0.2/SSLSocketInputRecord.java:483)
	at sun.security.ssl.SSLSocketInputRecord.readFully(java.base@20.0.2/SSLSocketInputRecord.java:466)
	at sun.security.ssl.SSLSocketInputRecord.decodeInputRecord(java.base@20.0.2/SSLSocketInputRecord.java:243)
	at sun.security.ssl.SSLSocketInputRecord.decode(java.base@20.0.2/SSLSocketInputRecord.java:181)
	at sun.security.ssl.SSLTransport.decode(java.base@20.0.2/SSLTransport.java:111)
	at sun.security.ssl.SSLSocketImpl.decode(java.base@20.0.2/SSLSocketImpl.java:1509)
	at sun.security.ssl.SSLSocketImpl.readApplicationRecord(java.base@20.0.2/SSLSocketImpl.java:1480)
	at sun.security.ssl.SSLSocketImpl$AppInputStream.read(java.base@20.0.2/SSLSocketImpl.java:1066)
	at org.apache.http.impl.io.SessionInputBufferImpl.streamRead(org.apache.httpcomponents.httpcore@4.4.13/SessionInputBufferImpl.java:137)
	at org.apache.http.impl.io.SessionInputBufferImpl.fillBuffer(org.apache.httpcomponents.httpcore@4.4.13/SessionInputBufferImpl.java:153)
	at org.apache.http.impl.io.SessionInputBufferImpl.readLine(org.apache.httpcomponents.httpcore@4.4.13/SessionInputBufferImpl.java:280)
	at org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(org.apache.httpcomponents.httpclient@4.5.13/DefaultHttpResponseParser.java:138)
	at org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(org.apache.httpcomponents.httpclient@4.5.13/DefaultHttpResponseParser.java:56)
	at org.apache.http.impl.io.AbstractMessageParser.parse(org.apache.httpcomponents.httpcore@4.4.13/AbstractMessageParser.java:259)
	at org.apache.http.impl.DefaultBHttpClientConnection.receiveResponseHeader(org.apache.httpcomponents.httpcore@4.4.13/DefaultBHttpClientConnection.java:163)
	at org.apache.http.impl.conn.CPoolProxy.receiveResponseHeader(org.apache.httpcomponents.httpclient@4.5.13/CPoolProxy.java:157)
	at org.apache.http.protocol.HttpRequestExecutor.doReceiveResponse(org.apache.httpcomponents.httpcore@4.4.13/HttpRequestExecutor.java:273)
	at org.apache.http.protocol.HttpRequestExecutor.execute(org.apache.httpcomponents.httpcore@4.4.13/HttpRequestExecutor.java:125)
	at org.apache.http.impl.execchain.MainClientExec.execute(org.apache.httpcomponents.httpclient@4.5.13/MainClientExec.java:272)
	at org.apache.http.impl.execchain.ProtocolExec.execute(org.apache.httpcomponents.httpclient@4.5.13/ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(org.apache.httpcomponents.httpclient@4.5.13/RetryExec.java:89)
	at org.apache.http.impl.execchain.RedirectExec.execute(org.apache.httpcomponents.httpclient@4.5.13/RedirectExec.java:110)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(org.apache.httpcomponents.httpclient@4.5.13/InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(org.apache.httpcomponents.httpclient@4.5.13/CloseableHttpClient.java:83)
	at org.apache.http.impl.client.CloseableHttpClient.execute(org.apache.httpcomponents.httpclient@4.5.13/CloseableHttpClient.java:56)
	at org.opensaml.saml.metadata.resolver.impl.HTTPMetadataResolver.fetchMetadata(org.opensaml.saml.impl@4.3.0/HTTPMetadataResolver.java:212)
	at org.elasticsearch.xpack.security.authc.saml.SamlRealm$PrivilegedHTTPMetadataResolver.access$001(org.elasticsearch.security@8.10.2/SamlRealm.java:741)
	at org.elasticsearch.xpack.security.authc.saml.SamlRealm$PrivilegedHTTPMetadataResolver.lambda$fetchMetadata$0(org.elasticsearch.security@8.10.2/SamlRealm.java:751)
	at org.elasticsearch.xpack.security.authc.saml.SamlRealm$PrivilegedHTTPMetadataResolver$$Lambda$4128/0x00007effe8ea32c0.run(org.elasticsearch.security@8.10.2/Unknown Source)
	at java.security.AccessController.executePrivileged(java.base@20.0.2/AccessController.java:809)
	at java.security.AccessController.doPrivileged(java.base@20.0.2/AccessController.java:571)
	at org.elasticsearch.xpack.security.authc.saml.SamlRealm$PrivilegedHTTPMetadataResolver.fetchMetadata(org.elasticsearch.security@8.10.2/SamlRealm.java:750)
	at org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver.refresh(org.opensaml.saml.impl@4.3.0/AbstractReloadingMetadataResolver.java:364)
	- locked <0x000000062f76c4b8> (a org.elasticsearch.xpack.security.authc.saml.SamlRealm$PrivilegedHTTPMetadataResolver)
	at org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver$RefreshMetadataTask.run(org.opensaml.saml.impl@4.3.0/AbstractReloadingMetadataResolver.java:685)
	at java.util.TimerThread.mainLoop(java.base@20.0.2/Timer.java:566)
	at java.util.TimerThread.run(java.base@20.0.2/Timer.java:516)


""elasticsearch[instance-0000000005][transport_worker][T#3]"" #78 [324] daemon prio=5 os_prio=0 cpu=9112936.99ms elapsed=2312947.50s tid=0x00007eff1c018bd0 nid=324 waiting for monitor entry  [0x00007effe29f6000]
   java.lang.Thread.State: BLOCKED (on object monitor)
	at net.shibboleth.utilities.java.support.component.AbstractInitializableComponent.isInitialized(net.shibboleth.utilities.java.support@8.4.0/AbstractInitializableComponent.java:43)
	- waiting to lock <0x000000062f76c4b8> (a org.elasticsearch.xpack.security.authc.saml.SamlRealm$PrivilegedHTTPMetadataResolver)
	at net.shibboleth.utilities.java.support.component.ComponentSupport.ifNotInitializedThrowUninitializedComponentException(net.shibboleth.utilities.java.support@8.4.0/ComponentSupport.java:104)
	at org.opensaml.saml.metadata.resolver.impl.AbstractMetadataResolver.resolveSingle(org.opensaml.saml.impl@4.3.0/AbstractMetadataResolver.java:262)
	at org.elasticsearch.xpack.security.authc.saml.SamlRealm.resolveEntityDescriptorWithPossibleRefresh(org.elasticsearch.security@8.10.2/SamlRealm.java:823)
	at org.elasticsearch.xpack.security.authc.saml.SamlRealm.resolveEntityDescriptor(org.elasticsearch.security@8.10.2/SamlRealm.java:801)
	at org.elasticsearch.xpack.security.authc.saml.SamlRealm.lambda$parseHttpMetadata$9(org.elasticsearch.security@8.10.2/SamlRealm.java:728)
	at org.elasticsearch.xpack.security.authc.saml.SamlRealm$$Lambda$4133/0x00007effe8f25920.run(org.elasticsearch.security@8.10.2/Unknown Source)
	at java.security.AccessController.executePrivileged(java.base@20.0.2/AccessController.java:809)
	at java.security.AccessController.doPrivileged(java.base@20.0.2/AccessController.java:571)
	at org.elasticsearch.xpack.security.authc.saml.SamlRealm.lambda$parseHttpMetadata$10(org.elasticsearch.security@8.10.2/SamlRealm.java:727)
	at org.elasticsearch.xpack.security.authc.saml.SamlRealm$$Lambda$4132/0x00007effe8f25708.get(org.elasticsearch.security@8.10.2/Unknown Source)
	at org.elasticsearch.xpack.security.authc.saml.SamlRealm.buildAuthenticationRequest(org.elasticsearch.security@8.10.2/SamlRealm.java:893)
	at org.elasticsearch.xpack.security.action.saml.TransportSamlPrepareAuthenticationAction.prepareAuthentication(org.elasticsearch.security@8.10.2/TransportSamlPrepareAuthenticationAction.java:61)
	at org.elasticsearch.xpack.security.action.saml.TransportSamlPrepareAuthenticationAction.doExecute(org.elasticsearch.security@8.10.2/TransportSamlPrepareAuthenticationAction.java:56)
	at org.elasticsearch.xpack.security.action.saml.TransportSamlPrepareAuthenticationAction.doExecute(org.elasticsearch.security@8.10.2/TransportSamlPrepareAuthenticationAction.java:32)
	at org.elasticsearch.action.support.TransportAction$RequestFilterChain.proceed(org.elasticsearch.server@8.10.2/TransportAction.java:86)
	at org.elasticsearch.action.support.ActionFilter$Simple.apply(org.elasticsearch.server@8.10.2/ActionFilter.java:53)
	at org.elasticsearch.action.support.TransportAction$RequestFilterChain.proceed(org.elasticsearch.server@8.10.2/TransportAction.java:84)
	at org.elasticsearch.xpack.security.action.filter.SecurityActionFilter.lambda$applyInternal$3(org.elasticsearch.security@8.10.2/SecurityActionFilter.java:163)
	at org.elasticsearch.xpack.security.action.filter.SecurityActionFilter$$Lambda$7545/0x00007effe96bf228.accept(org.elasticsearch.security@8.10.2/Unknown Source)
	at org.elasticsearch.action.ActionListenerImplementations$DelegatingFailureActionListener.onResponse(org.elasticsearch.server@8.10.2/ActionListenerImplementations.java:212)
	at org.elasticsearch.xpack.security.authz.AuthorizationService.lambda$authorizeAction$8(org.elasticsearch.security@8.10.2/AuthorizationService.java:455)
	at org.elasticsearch.xpack.security.authz.AuthorizationService$$Lambda$7664/0x00007effe96de770.accept(org.elasticsearch.security@8.10.2/Unknown Source)
	at org.elasticsearch.xpack.security.authz.AuthorizationService$AuthorizationResultListener.onResponse(org.elasticsearch.security@8.10.2/AuthorizationService.java:1015)
	at org.elasticsearch.xpack.security.authz.AuthorizationService$AuthorizationResultListener.onResponse(org.elasticsearch.security@8.10.2/AuthorizationService.java:981)
	at org.elasticsearch.action.support.ContextPreservingActionListener.onResponse(org.elasticsearch.server@8.10.2/ContextPreservingActionListener.java:32)
	at org.elasticsearch.xpack.security.authz.AuthorizationService.lambda$authorizeAction$9(org.elasticsearch.security@8.10.2/AuthorizationService.java:469)
	at org.elasticsearch.xpack.security.authz.AuthorizationService$$Lambda$7672/0x00007effe96debc0.accept(org.elasticsearch.security@8.10.2/Unknown Source)
	at org.elasticsearch.action.ActionListenerImplementations$ResponseWrappingActionListener.onResponse(org.elasticsearch.server@8.10.2/ActionListenerImplementations.java:236)
	at org.elasticsearch.xpack.security.authz.RBACEngine.authorizeClusterAction(org.elasticsearch.security@8.10.2/RBACEngine.java:185)
	at org.elasticsearch.xpack.security.authz.AuthorizationService.authorizeAction(org.elasticsearch.security@8.10.2/AuthorizationService.java:459)
	at org.elasticsearch.xpack.security.authz.AuthorizationService.maybeAuthorizeRunAs(org.elasticsearch.security@8.10.2/AuthorizationService.java:435)
	at org.elasticsearch.xpack.security.authz.AuthorizationService.lambda$authorize$3(org.elasticsearch.security@8.10.2/AuthorizationService.java:322)
	at org.elasticsearch.xpack.security.authz.AuthorizationService$$Lambda$7546/0x00007effe96bf450.accept(org.elasticsearch.security@8.10.2/Unknown Source)
	at org.elasticsearch.action.ActionListener$2.onResponse(org.elasticsearch.server@8.10.2/ActionListener.java:177)
	at org.elasticsearch.action.support.ContextPreservingActionListener.onResponse(org.elasticsearch.server@8.10.2/ContextPreservingActionListener.java:32)
	at org.elasticsearch.xpack.security.authz.RBACEngine.lambda$resolveAuthorizationInfo$0(org.elasticsearch.security@8.10.2/RBACEngine.java:150)
	at org.elasticsearch.xpack.security.authz.RBACEngine$$Lambda$7548/0x00007effe96bf890.accept(org.elasticsearch.security@8.10.2/Unknown Source)
	at org.elasticsearch.action.ActionListenerImplementations$ResponseWrappingActionListener.onResponse(org.elasticsearch.server@8.10.2/ActionListenerImplementations.java:236)
	at org.elasticsearch.xpack.security.authz.store.CompositeRolesStore.lambda$getRoles$4(org.elasticsearch.security@8.10.2/CompositeRolesStore.java:194)
	at org.elasticsearch.xpack.security.authz.store.CompositeRolesStore$$Lambda$7549/0x00007effe96bfaa0.accept(org.elasticsearch.security@8.10.2/Unknown Source)
	at org.elasticsearch.action.ActionListenerImplementations$ResponseWrappingActionListener.onResponse(org.elasticsearch.server@8.10.2/ActionListenerImplementations.java:236)
	at org.elasticsearch.xpack.security.authz.store.CompositeRolesStore.lambda$getRole$5(org.elasticsearch.security@8.10.2/CompositeRolesStore.java:212)
	at org.elasticsearch.xpack.security.authz.store.CompositeRolesStore$$Lambda$8014/0x00007effe9706c98.accept(org.elasticsearch.security@8.10.2/Unknown Source)
	at org.elasticsearch.action.ActionListenerImplementations$ResponseWrappingActionListener.onResponse(org.elasticsearch.server@8.10.2/ActionListenerImplementations.java:236)
	at org.elasticsearch.xpack.core.security.authz.store.RoleReferenceIntersection.lambda$buildRole$0(org.elasticsearch.xcore@8.10.2/RoleReferenceIntersection.java:49)
	at org.elasticsearch.xpack.core.security.authz.store.RoleReferenceIntersection$$Lambda$8015/0x00007effe9755c40.accept(org.elasticsearch.xcore@8.10.2/Unknown Source)
	at org.elasticsearch.action.ActionListenerImplementations$ResponseWrappingActionListener.onResponse(org.elasticsearch.server@8.10.2/ActionListenerImplementations.java:236)
	at org.elasticsearch.action.support.GroupedActionListener.onResponse(org.elasticsearch.server@8.10.2/GroupedActionListener.java:56)
	at org.elasticsearch.xpack.security.authz.store.CompositeRolesStore.buildRoleFromRoleReference(org.elasticsearch.security@8.10.2/CompositeRolesStore.java:292)
	at org.elasticsearch.xpack.security.authz.store.CompositeRolesStore$$Lambda$8013/0x00007effe9706a70.accept(org.elasticsearch.security@8.10.2/Unknown Source)
	at org.elasticsearch.xpack.core.security.authz.store.RoleReferenceIntersection.lambda$buildRole$1(org.elasticsearch.xcore@8.10.2/RoleReferenceIntersection.java:53)
	at org.elasticsearch.xpack.core.security.authz.store.RoleReferenceIntersection$$Lambda$8016/0x00007effe9754800.accept(org.elasticsearch.xcore@8.10.2/Unknown Source)
	at java.lang.Iterable.forEach(java.base@20.0.2/Iterable.java:75)
	at org.elasticsearch.xpack.core.security.authz.store.RoleReferenceIntersection.buildRole(org.elasticsearch.xcore@8.10.2/RoleReferenceIntersection.java:53)
	at org.elasticsearch.xpack.security.authz.store.CompositeRolesStore.getRole(org.elasticsearch.security@8.10.2/CompositeRolesStore.java:210)
	at org.elasticsearch.xpack.security.authz.store.CompositeRolesStore.getRoles(org.elasticsearch.security@8.10.2/CompositeRolesStore.java:187)
	at org.elasticsearch.xpack.security.authz.RBACEngine.resolveAuthorizationInfo(org.elasticsearch.security@8.10.2/RBACEngine.java:146)
	at org.elasticsearch.xpack.security.authz.AuthorizationService.authorize(org.elasticsearch.security@8.10.2/AuthorizationService.java:338)
	at org.elasticsearch.xpack.security.action.filter.SecurityActionFilter.lambda$applyInternal$4(org.elasticsearch.security@8.10.2/SecurityActionFilter.java:159)
	at org.elasticsearch.xpack.security.action.filter.SecurityActionFilter$$Lambda$7544/0x00007effe96bf010.accept(org.elasticsearch.security@8.10.2/Unknown Source)
	at org.elasticsearch.action.ActionListenerImplementations$ResponseWrappingActionListener.onResponse(org.elasticsearch.server@8.10.2/ActionListenerImplementations.java:236)
	at org.elasticsearch.action.ActionListenerImplementations$MappedActionListener.onResponse(org.elasticsearch.server@8.10.2/ActionListenerImplementations.java:95)
	at org.elasticsearch.xpack.security.authc.AuthenticatorChain.authenticateAsync(org.elasticsearch.security@8.10.2/AuthenticatorChain.java:94)
	at org.elasticsearch.xpack.security.authc.AuthenticationService.authenticate(org.elasticsearch.security@8.10.2/AuthenticationService.java:261)
	at org.elasticsearch.xpack.security.authc.AuthenticationService.authenticate(org.elasticsearch.security@8.10.2/AuthenticationService.java:171)
	at org.elasticsearch.xpack.security.action.filter.SecurityActionFilter.applyInternal(org.elasticsearch.security@8.10.2/SecurityActionFilter.java:155)
	at org.elasticsearch.xpack.security.action.filter.SecurityActionFilter.apply(org.elasticsearch.security@8.10.2/SecurityActionFilter.java:114)
	at org.elasticsearch.action.support.TransportAction$RequestFilterChain.proceed(org.elasticsearch.server@8.10.2/TransportAction.java:84)
	at org.elasticsearch.action.support.TransportAction.execute(org.elasticsearch.server@8.10.2/TransportAction.java:61)
	at org.elasticsearch.tasks.TaskManager.registerAndExecute(org.elasticsearch.server@8.10.2/TaskManager.java:199)
	at org.elasticsearch.client.internal.node.NodeClient.executeLocally(org.elasticsearch.server@8.10.2/NodeClient.java:113)
	at org.elasticsearch.client.internal.node.NodeClient.doExecute(org.elasticsearch.server@8.10.2/NodeClient.java:91)
	at org.elasticsearch.client.internal.support.AbstractClient.execute(org.elasticsearch.server@8.10.2/AbstractClient.java:379)
	at org.elasticsearch.xpack.security.rest.action.saml.RestSamlPrepareAuthenticationAction.lambda$innerPrepareRequest$0(org.elasticsearch.security@8.10.2/RestSamlPrepareAuthenticationAction.java:72)
	at org.elasticsearch.xpack.security.rest.action.saml.RestSamlPrepareAuthenticationAction$$Lambda$11408/0x00007effe9b4fc20.accept(org.elasticsearch.security@8.10.2/Unknown Source)
	at org.elasticsearch.rest.BaseRestHandler.handleRequest(org.elasticsearch.server@8.10.2/BaseRestHandler.java:103)
	at org.elasticsearch.xpack.security.rest.SecurityRestFilter.doHandleRequest(org.elasticsearch.security@8.10.2/SecurityRestFilter.java:96)
	at org.elasticsearch.xpack.security.rest.SecurityRestFilter.lambda$handleRequest$0(org.elasticsearch.security@8.10.2/SecurityRestFilter.java:87)
	at org.elasticsearch.xpack.security.rest.SecurityRestFilter$$Lambda$9277/0x00007effe9947160.accept(org.elasticsearch.security@8.10.2/Unknown Source)
	at org.elasticsearch.action.ActionListener$2.onResponse(org.elasticsearch.server@8.10.2/ActionListener.java:177)
	at org.elasticsearch.xpack.security.authc.support.SecondaryAuthenticator.lambda$authenticateAndAttachToContext$3(org.elasticsearch.security@8.10.2/SecondaryAuthenticator.java:99)
	at org.elasticsearch.xpack.security.authc.support.SecondaryAuthenticator$$Lambda$9299/0x00007effe994e498.accept(org.elasticsearch.security@8.10.2/Unknown Source)
	at org.elasticsearch.action.ActionListenerImplementations$ResponseWrappingActionListener.onResponse(org.elasticsearch.server@8.10.2/ActionListenerImplementations.java:236)
	at org.elasticsearch.xpack.security.authc.support.SecondaryAuthenticator.authenticate(org.elasticsearch.security@8.10.2/SecondaryAuthenticator.java:109)
	at org.elasticsearch.xpack.security.authc.support.SecondaryAuthenticator.authenticateAndAttachToContext(org.elasticsearch.security@8.10.2/SecondaryAuthenticator.java:90)
	at org.elasticsearch.xpack.security.rest.SecurityRestFilter.handleRequest(org.elasticsearch.security@8.10.2/SecurityRestFilter.java:82)
	at org.elasticsearch.rest.RestController.dispatchRequest(org.elasticsearch.server@8.10.2/RestController.java:415)
	at org.elasticsearch.rest.RestController.tryAllHandlers(org.elasticsearch.server@8.10.2/RestController.java:544)
	at org.elasticsearch.rest.RestController.dispatchRequest(org.elasticsearch.server@8.10.2/RestController.java:317)
	at org.elasticsearch.http.AbstractHttpServerTransport.dispatchRequest(org.elasticsearch.server@8.10.2/AbstractHttpServerTransport.java:453)
	at org.elasticsearch.http.AbstractHttpServerTransport.handleIncomingRequest(org.elasticsearch.server@8.10.2/AbstractHttpServerTransport.java:549)
	at org.elasticsearch.http.AbstractHttpServerTransport.incomingRequest(org.elasticsearch.server@8.10.2/AbstractHttpServerTransport.java:426)
	at org.elasticsearch.http.netty4.Netty4HttpPipeliningHandler.handlePipelinedRequest(org.elasticsearch.transport.netty4@8.10.2/Netty4HttpPipeliningHandler.java:128)
	at org.elasticsearch.http.netty4.Netty4HttpPipeliningHandler.channelRead(org.elasticsearch.transport.netty4@8.10.2/Netty4HttpPipeliningHandler.java:118)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(io.netty.transport@4.1.94.Final/AbstractChannelHandlerContext.java:442)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(io.netty.transport@4.1.94.Final/AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(io.netty.transport@4.1.94.Final/AbstractChannelHandlerContext.java:412)
	at io.netty.handler.codec.MessageToMessageDecoder.channelRead(io.netty.codec@4.1.94.Final/MessageToMessageDecoder.java:103)
	at io.netty.handler.codec.MessageToMessageCodec.channelRead(io.netty.codec@4.1.94.Final/MessageToMessageCodec.java:111)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(io.netty.transport@4.1.94.Final/AbstractChannelHandlerContext.java:442)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(io.netty.transport@4.1.94.Final/AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(io.netty.transport@4.1.94.Final/AbstractChannelHandlerContext.java:412)
	at io.netty.handler.codec.MessageToMessageDecoder.channelRead(io.netty.codec@4.1.94.Final/MessageToMessageDecoder.java:103)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(io.netty.transport@4.1.94.Final/AbstractChannelHandlerContext.java:444)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(io.netty.transport@4.1.94.Final/AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(io.netty.transport@4.1.94.Final/AbstractChannelHandlerContext.java:412)
	at io.netty.handler.codec.MessageToMessageDecoder.channelRead(io.netty.codec@4.1.94.Final/MessageToMessageDecoder.java:103)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(io.netty.transport@4.1.94.Final/AbstractChannelHandlerContext.java:444)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(io.netty.transport@4.1.94.Final/AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(io.netty.transport@4.1.94.Final/AbstractChannelHandlerContext.java:412)
	at org.elasticsearch.http.netty4.Netty4HttpHeaderValidator.forwardData(org.elasticsearch.transport.netty4@8.10.2/Netty4HttpHeaderValidator.java:194)
	at org.elasticsearch.http.netty4.Netty4HttpHeaderValidator.forwardFullRequest(org.elasticsearch.transport.netty4@8.10.2/Netty4HttpHeaderValidator.java:137)
	at org.elasticsearch.http.netty4.Netty4HttpHeaderValidator.lambda$requestStart$1(org.elasticsearch.transport.netty4@8.10.2/Netty4HttpHeaderValidator.java:120)
	at org.elasticsearch.http.netty4.Netty4HttpHeaderValidator$$Lambda$9237/0x00007effe99439a0.run(org.elasticsearch.transport.netty4@8.10.2/Unknown Source)
	at io.netty.util.concurrent.PromiseTask.runTask(io.netty.common@4.1.94.Final/PromiseTask.java:98)
	at io.netty.util.concurrent.PromiseTask.run(io.netty.common@4.1.94.Final/PromiseTask.java:106)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(io.netty.common@4.1.94.Final/AbstractEventExecutor.java:174)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(io.netty.common@4.1.94.Final/AbstractEventExecutor.java:167)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(io.netty.common@4.1.94.Final/SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(io.netty.transport@4.1.94.Final/NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(io.netty.common@4.1.94.Final/SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(io.netty.common@4.1.94.Final/ThreadExecutorMap.java:74)
	at java.lang.Thread.runWith(java.base@20.0.2/Thread.java:1636)
	at java.lang.Thread.run(java.base@20.0.2/Thread.java:1623)



""elasticsearch[instance-0000000005][transport_worker][T#7]"" #82 [330] daemon prio=5 os_prio=0 cpu=6962961.64ms elapsed=2312947.36s tid=0x00007eff8000ee70 nid=330 waiting for monitor entry  [0x00007effe20ec000]
   java.lang.Thread.State: BLOCKED (on object monitor)
	at net.shibboleth.utilities.java.support.component.AbstractInitializableComponent.isInitialized(net.shibboleth.utilities.java.support@8.4.0/AbstractInitializableComponent.java:43)
	- waiting to lock <0x000000062f76c4b8> (a org.elasticsearch.xpack.security.authc.saml.SamlRealm$PrivilegedHTTPMetadataResolver)
	at net.shibboleth.utilities.java.support.component.ComponentSupport.ifNotInitializedThrowUninitializedComponentException(net.shibboleth.utilities.java.support@8.4.0/ComponentSupport.java:104)
	at org.opensaml.saml.metadata.resolver.impl.AbstractMetadataResolver.resolveSingle(org.opensaml.saml.impl@4.3.0/AbstractMetadataResolver.java:262)
	at org.elasticsearch.xpack.security.authc.saml.SamlRealm.resolveEntityDescriptorWithPossibleRefresh(org.elasticsearch.security@8.10.2/SamlRealm.java:823)
	at org.elasticsearch.xpack.security.authc.saml.SamlRealm.resolveEntityDescriptor(org.elasticsearch.security@8.10.2/SamlRealm.java:801)
	at org.elasticsearch.xpack.security.authc.saml.SamlRealm.lambda$parseHttpMetadata$9(org.elasticsearch.security@8.10.2/SamlRealm.java:728)
	at org.elasticsearch.xpack.security.authc.saml.SamlRealm$$Lambda$4133/0x00007effe8f25920.run(org.elasticsearch.security@8.10.2/Unknown Source)
	at java.security.AccessController.executePrivileged(java.base@20.0.2/AccessController.java:809)
	at java.security.AccessController.doPrivileged(java.base@20.0.2/AccessController.java:571)
	at org.elasticsearch.xpack.security.authc.saml.SamlRealm.lambda$parseHttpMetadata$10(org.elasticsearch.security@8.10.2/SamlRealm.java:727)
	at org.elasticsearch.xpack.security.authc.saml.SamlRealm$$Lambda$4132/0x00007effe8f25708.get(org.elasticsearch.security@8.10.2/Unknown Source)
	at org.elasticsearch.xpack.security.authc.saml.SamlRealm.authenticate(org.elasticsearch.security@8.10.2/SamlRealm.java:541)
	at org.elasticsearch.xpack.security.authc.RealmsAuthenticator.lambda$consumeToken$4(org.elasticsearch.security@8.10.2/RealmsAuthenticator.java:147)
	at org.elasticsearch.xpack.security.authc.RealmsAuthenticator$$Lambda$9146/0x00007effe992f0d8.accept(org.elasticsearch.security@8.10.2/Unknown Source)
	at org.elasticsearch.xpack.core.common.IteratingActionListener.onResponse(org.elasticsearch.xcore@8.10.2/IteratingActionListener.java:135)
	at org.elasticsearch.xpack.security.authc.RealmsAuthenticator.lambda$consumeToken$4(org.elasticsearch.security@8.10.2/RealmsAuthenticator.java:208)
	at org.elasticsearch.xpack.security.authc.RealmsAuthenticator$$Lambda$9146/0x00007effe992f0d8.accept(org.elasticsearch.security@8.10.2/Unknown Source)
	at org.elasticsearch.xpack.core.common.IteratingActionListener.onResponse(org.elasticsearch.xcore@8.10.2/IteratingActionListener.java:135)
	at org.elasticsearch.xpack.security.authc.RealmsAuthenticator.lambda$consumeToken$4(org.elasticsearch.security@8.10.2/RealmsAuthenticator.java:208)
	at org.elasticsearch.xpack.security.authc.RealmsAuthenticator$$Lambda$9146/0x00007effe992f0d8.accept(org.elasticsearch.security@8.10.2/Unknown Source)
	at org.elasticsearch.xpack.core.common.IteratingActionListener.onResponse(org.elasticsearch.xcore@8.10.2/IteratingActionListener.java:135)
	at org.elasticsearch.xpack.security.authc.RealmsAuthenticator.lambda$consumeToken$4(org.elasticsearch.security@8.10.2/RealmsAuthenticator.java:208)
	at org.elasticsearch.xpack.security.authc.RealmsAuthenticator$$Lambda$9146/0x00007effe992f0d8.accept(org.elasticsearch.security@8.10.2/Unknown Source)
	at org.elasticsearch.xpack.core.common.IteratingActionListener.run(org.elasticsearch.xcore@8.10.2/IteratingActionListener.java:117)
	at org.elasticsearch.xpack.security.authc.RealmsAuthenticator.consumeToken(org.elasticsearch.security@8.10.2/RealmsAuthenticator.java:237)
	at org.elasticsearch.xpack.security.authc.RealmsAuthenticator.authenticate(org.elasticsearch.security@8.10.2/RealmsAuthenticator.java:83)
	at org.elasticsearch.xpack.security.authc.AuthenticatorChain.lambda$getAuthenticatorConsumer$5(org.elasticsearch.security@8.10.2/AuthenticatorChain.java:181)
	at org.elasticsearch.xpack.security.authc.AuthenticatorChain$$Lambda$9114/0x00007effe9928860.accept(org.elasticsearch.security@8.10.2/Unknown Source)
	at org.elasticsearch.xpack.core.common.IteratingActionListener.onResponse(org.elasticsearch.xcore@8.10.2/IteratingActionListener.java:135)
	at org.elasticsearch.xpack.security.authc.AuthenticatorChain.lambda$getAuthenticatorConsumer$4(org.elasticsearch.security@8.10.2/AuthenticatorChain.java:189)
	at org.elasticsearch.xpack.security.authc.AuthenticatorChain$$Lambda$9141/0x00007effe992bce0.accept(org.elasticsearch.security@8.10.2/Unknown Source)
	at org.elasticsearch.action.ActionListener$2.onResponse(org.elasticsearch.server@8.10.2/ActionListener.java:177)
	at org.elasticsearch.xpack.security.authc.ApiKeyAuthenticator.authenticate(org.elasticsearch.security@8.10.2/ApiKeyAuthenticator.java:50)
	at org.elasticsearch.xpack.security.authc.AuthenticatorChain.lambda$getAuthenticatorConsumer$5(org.elasticsearch.security@8.10.2/AuthenticatorChain.java:181)
	at org.elasticsearch.xpack.security.authc.AuthenticatorChain$$Lambda$9114/0x00007effe9928860.accept(org.elasticsearch.security@8.10.2/Unknown Source)
	at org.elasticsearch.xpack.core.common.IteratingActionListener.onResponse(org.elasticsearch.xcore@8.10.2/IteratingActionListener.java:135)
	at org.elasticsearch.xpack.security.authc.AuthenticatorChain.lambda$getAuthenticatorConsumer$4(org.elasticsearch.security@8.10.2/AuthenticatorChain.java:189)
	at org.elasticsearch.xpack.security.authc.AuthenticatorChain$$Lambda$9141/0x00007effe992bce0.accept(org.elasticsearch.security@8.10.2/Unknown Source)
	at org.elasticsearch.action.ActionListener$2.onResponse(org.elasticsearch.server@8.10.2/ActionListener.java:177)
	at org.elasticsearch.xpack.security.authc.OAuth2TokenAuthenticator.authenticate(org.elasticsearch.security@8.10.2/OAuth2TokenAuthenticator.java:44)
	at org.elasticsearch.xpack.security.authc.AuthenticatorChain.lambda$getAuthenticatorConsumer$5(org.elasticsearch.security@8.10.2/AuthenticatorChain.java:181)
	at org.elasticsearch.xpack.security.authc.AuthenticatorChain$$Lambda$9114/0x00007effe9928860.accept(org.elasticsearch.security@8.10.2/Unknown Source)
	at org.elasticsearch.xpack.core.common.IteratingActionListener.onResponse(org.elasticsearch.xcore@8.10.2/IteratingActionListener.java:135)
	at org.elasticsearch.xpack.security.authc.AuthenticatorChain.lambda$getAuthenticatorConsumer$4(org.elasticsearch.security@8.10.2/AuthenticatorChain.java:189)
	at org.elasticsearch.xpack.security.authc.AuthenticatorChain$$Lambda$9141/0x00007effe992bce0.accept(org.elasticsearch.security@8.10.2/Unknown Source)
	at org.elasticsearch.action.ActionListener$2.onResponse(org.elasticsearch.server@8.10.2/ActionListener.java:177)
	at org.elasticsearch.xpack.security.authc.ServiceAccountAuthenticator.authenticate(org.elasticsearch.security@8.10.2/ServiceAccountAuthenticator.java:49)
	at org.elasticsearch.xpack.security.authc.AuthenticatorChain.lambda$getAuthenticatorConsumer$5(org.elasticsearch.security@8.10.2/AuthenticatorChain.java:181)
	at org.elasticsearch.xpack.security.authc.AuthenticatorChain$$Lambda$9114/0x00007effe9928860.accept(org.elasticsearch.security@8.10.2/Unknown Source)
	at org.elasticsearch.xpack.core.common.IteratingActionListener.run(org.elasticsearch.xcore@8.10.2/IteratingActionListener.java:117)
	at org.elasticsearch.xpack.security.authc.AuthenticatorChain.doAuthenticate(org.elasticsearch.security@8.10.2/AuthenticatorChain.java:137)
	at org.elasticsearch.xpack.security.authc.AuthenticatorChain.authenticateAsyncWithExistingAuthenticationToken(org.elasticsearch.security@8.10.2/AuthenticatorChain.java:109)
	at org.elasticsearch.xpack.security.authc.AuthenticatorChain.authenticateAsync(org.elasticsearch.security@8.10.2/AuthenticatorChain.java:82)
	at org.elasticsearch.xpack.security.authc.AuthenticationService.authenticate(org.elasticsearch.security@8.10.2/AuthenticationService.java:223)
	at org.elasticsearch.xpack.security.action.saml.TransportSamlAuthenticateAction.doExecute(org.elasticsearch.security@8.10.2/TransportSamlAuthenticateAction.java:65)
	at org.elasticsearch.xpack.security.action.saml.TransportSamlAuthenticateAction.doExecute(org.elasticsearch.security@8.10.2/TransportSamlAuthenticateAction.java:35)
	at org.elasticsearch.action.support.TransportAction$RequestFilterChain.proceed(org.elasticsearch.server@8.10.2/TransportAction.java:86)
	at org.elasticsearch.action.support.ActionFilter$Simple.apply(org.elasticsearch.server@8.10.2/ActionFilter.java:53)
	at org.elasticsearch.action.support.TransportAction$RequestFilterChain.proceed(org.elasticsearch.server@8.10.2/TransportAction.java:84)
	at org.elasticsearch.xpack.security.action.filter.SecurityActionFilter.lambda$applyInternal$3(org.elasticsearch.security@8.10.2/SecurityActionFilter.java:163)
	at org.elasticsearch.xpack.security.action.filter.SecurityActionFilter$$Lambda$7545/0x00007effe96bf228.accept(org.elasticsearch.security@8.10.2/Unknown Source)
	at org.elasticsearch.action.ActionListenerImplementations$DelegatingFailureActionListener.onResponse(org.elasticsearch.server@8.10.2/ActionListenerImplementations.java:212)
	at org.elasticsearch.xpack.security.authz.AuthorizationService.lambda$authorizeAction$8(org.elasticsearch.security@8.10.2/AuthorizationService.java:455)
	at org.elasticsearch.xpack.security.authz.AuthorizationService$$Lambda$7664/0x00007effe96de770.accept(org.elasticsearch.security@8.10.2/Unknown Source)
	at org.elasticsearch.xpack.security.authz.AuthorizationService$AuthorizationResultListener.onResponse(org.elasticsearch.security@8.10.2/AuthorizationService.java:1015)
	at org.elasticsearch.xpack.security.authz.AuthorizationService$AuthorizationResultListener.onResponse(org.elasticsearch.security@8.10.2/AuthorizationService.java:981)
	at org.elasticsearch.action.support.ContextPreservingActionListener.onResponse(org.elasticsearch.server@8.10.2/ContextPreservingActionListener.java:32)
	at org.elasticsearch.xpack.security.authz.AuthorizationService.lambda$authorizeAction$9(org.elasticsearch.security@8.10.2/AuthorizationService.java:469)
	at org.elasticsearch.xpack.security.authz.AuthorizationService$$Lambda$7672/0x00007effe96debc0.accept(org.elasticsearch.security@8.10.2/Unknown Source)
	at org.elasticsearch.action.ActionListenerImplementations$ResponseWrappingActionListener.onResponse(org.elasticsearch.server@8.10.2/ActionListenerImplementations.java:236)
	at org.elasticsearch.xpack.security.authz.RBACEngine.authorizeClusterAction(org.elasticsearch.security@8.10.2/RBACEngine.java:185)
	at org.elasticsearch.xpack.security.authz.AuthorizationService.authorizeAction(org.elasticsearch.security@8.10.2/AuthorizationService.java:459)
	at org.elasticsearch.xpack.security.authz.AuthorizationService.maybeAuthorizeRunAs(org.elasticsearch.security@8.10.2/AuthorizationService.java:435)
	at org.elasticsearch.xpack.security.authz.AuthorizationService.lambda$authorize$3(org.elasticsearch.security@8.10.2/AuthorizationService.java:322)
	at org.elasticsearch.xpack.security.authz.AuthorizationService$$Lambda$7546/0x00007effe96bf450.accept(org.elasticsearch.security@8.10.2/Unknown Source)
	at org.elasticsearch.action.ActionListener$2.onResponse(org.elasticsearch.server@8.10.2/ActionListener.java:177)
	at org.elasticsearch.action.support.ContextPreservingActionListener.onResponse(org.elasticsearch.server@8.10.2/ContextPreservingActionListener.java:32)
	at org.elasticsearch.xpack.security.authz.RBACEngine.lambda$resolveAuthorizationInfo$0(org.elasticsearch.security@8.10.2/RBACEngine.java:150)
	at org.elasticsearch.xpack.security.authz.RBACEngine$$Lambda$7548/0x00007effe96bf890.accept(org.elasticsearch.security@8.10.2/Unknown Source)
	at org.elasticsearch.action.ActionListenerImplementations$ResponseWrappingActionListener.onResponse(org.elasticsearch.server@8.10.2/ActionListenerImplementations.java:236)
	at org.elasticsearch.xpack.security.authz.store.CompositeRolesStore.lambda$getRoles$4(org.elasticsearch.security@8.10.2/CompositeRolesStore.java:194)
	at org.elasticsearch.xpack.security.authz.store.CompositeRolesStore$$Lambda$7549/0x00007effe96bfaa0.accept(org.elasticsearch.security@8.10.2/Unknown Source)
	at org.elasticsearch.action.ActionListenerImplementations$ResponseWrappingActionListener.onResponse(org.elasticsearch.server@8.10.2/ActionListenerImplementations.java:236)
	at org.elasticsearch.xpack.security.authz.store.CompositeRolesStore.lambda$getRole$5(org.elasticsearch.security@8.10.2/CompositeRolesStore.java:212)
	at org.elasticsearch.xpack.security.authz.store.CompositeRolesStore$$Lambda$8014/0x00007effe9706c98.accept(org.elasticsearch.security@8.10.2/Unknown Source)
	at org.elasticsearch.action.ActionListenerImplementations$ResponseWrappingActionListener.onResponse(org.elasticsearch.server@8.10.2/ActionListenerImplementations.java:236)
	at org.elasticsearch.xpack.core.security.authz.store.RoleReferenceIntersection.lambda$buildRole$0(org.elasticsearch.xcore@8.10.2/RoleReferenceIntersection.java:49)
	at org.elasticsearch.xpack.core.security.authz.store.RoleReferenceIntersection$$Lambda$8015/0x00007effe9755c40.accept(org.elasticsearch.xcore@8.10.2/Unknown Source)
	at org.elasticsearch.action.ActionListenerImplementations$ResponseWrappingActionListener.onResponse(org.elasticsearch.server@8.10.2/ActionListenerImplementations.java:236)
	at org.elasticsearch.action.support.GroupedActionListener.onResponse(org.elasticsearch.server@8.10.2/GroupedActionListener.java:56)
	at org.elasticsearch.xpack.security.authz.store.CompositeRolesStore.buildRoleFromRoleReference(org.elasticsearch.security@8.10.2/CompositeRolesStore.java:292)
	at org.elasticsearch.xpack.security.authz.store.CompositeRolesStore$$Lambda$8013/0x00007effe9706a70.accept(org.elasticsearch.security@8.10.2/Unknown Source)
	at org.elasticsearch.xpack.core.security.authz.store.RoleReferenceIntersection.lambda$buildRole$1(org.elasticsearch.xcore@8.10.2/RoleReferenceIntersection.java:53)
	at org.elasticsearch.xpack.core.security.authz.store.RoleReferenceIntersection$$Lambda$8016/0x00007effe9754800.accept(org.elasticsearch.xcore@8.10.2/Unknown Source)
	at java.lang.Iterable.forEach(java.base@20.0.2/Iterable.java:75)
	at org.elasticsearch.xpack.core.security.authz.store.RoleReferenceIntersection.buildRole(org.elasticsearch.xcore@8.10.2/RoleReferenceIntersection.java:53)
	at org.elasticsearch.xpack.security.authz.store.CompositeRolesStore.getRole(org.elasticsearch.security@8.10.2/CompositeRolesStore.java:210)
	at org.elasticsearch.xpack.security.authz.store.CompositeRolesStore.getRoles(org.elasticsearch.security@8.10.2/CompositeRolesStore.java:187)
	at org.elasticsearch.xpack.security.authz.RBACEngine.resolveAuthorizationInfo(org.elasticsearch.security@8.10.2/RBACEngine.java:146)
	at org.elasticsearch.xpack.security.authz.AuthorizationService.authorize(org.elasticsearch.security@8.10.2/AuthorizationService.java:338)
	at org.elasticsearch.xpack.security.action.filter.SecurityActionFilter.lambda$applyInternal$4(org.elasticsearch.security@8.10.2/SecurityActionFilter.java:159)
	at org.elasticsearch.xpack.security.action.filter.SecurityActionFilter$$Lambda$7544/0x00007effe96bf010.accept(org.elasticsearch.security@8.10.2/Unknown Source)
	at org.elasticsearch.action.ActionListenerImplementations$ResponseWrappingActionListener.onResponse(org.elasticsearch.server@8.10.2/ActionListenerImplementations.java:236)
	at org.elasticsearch.action.ActionListenerImplementations$MappedActionListener.onResponse(org.elasticsearch.server@8.10.2/ActionListenerImplementations.java:95)
	at org.elasticsearch.xpack.security.authc.AuthenticatorChain.authenticateAsync(org.elasticsearch.security@8.10.2/AuthenticatorChain.java:94)
	at org.elasticsearch.xpack.security.authc.AuthenticationService.authenticate(org.elasticsearch.security@8.10.2/AuthenticationService.java:261)
	at org.elasticsearch.xpack.security.authc.AuthenticationService.authenticate(org.elasticsearch.security@8.10.2/AuthenticationService.java:171)
	at org.elasticsearch.xpack.security.action.filter.SecurityActionFilter.applyInternal(org.elasticsearch.security@8.10.2/SecurityActionFilter.java:155)
	at org.elasticsearch.xpack.security.action.filter.SecurityActionFilter.apply(org.elasticsearch.security@8.10.2/SecurityActionFilter.java:114)
	at org.elasticsearch.action.support.TransportAction$RequestFilterChain.proceed(org.elasticsearch.server@8.10.2/TransportAction.java:84)
	at org.elasticsearch.action.support.TransportAction.execute(org.elasticsearch.server@8.10.2/TransportAction.java:61)
	at org.elasticsearch.tasks.TaskManager.registerAndExecute(org.elasticsearch.server@8.10.2/TaskManager.java:199)
	at org.elasticsearch.client.internal.node.NodeClient.executeLocally(org.elasticsearch.server@8.10.2/NodeClient.java:113)
	at org.elasticsearch.client.internal.node.NodeClient.doExecute(org.elasticsearch.server@8.10.2/NodeClient.java:91)
	at org.elasticsearch.client.internal.support.AbstractClient.execute(org.elasticsearch.server@8.10.2/AbstractClient.java:379)
	at org.elasticsearch.action.ActionRequestBuilder.execute(org.elasticsearch.server@8.10.2/ActionRequestBuilder.java:59)
	at org.elasticsearch.xpack.security.rest.action.saml.RestSamlAuthenticateAction.lambda$innerPrepareRequest$0(org.elasticsearch.security@8.10.2/RestSamlAuthenticateAction.java:98)
	at org.elasticsearch.xpack.security.rest.action.saml.RestSamlAuthenticateAction$$Lambda$11473/0x00007effe9313cd0.accept(org.elasticsearch.security@8.10.2/Unknown Source)
	at org.elasticsearch.rest.BaseRestHandler.handleRequest(org.elasticsearch.server@8.10.2/BaseRestHandler.java:103)
	at org.elasticsearch.xpack.security.rest.SecurityRestFilter.doHandleRequest(org.elasticsearch.security@8.10.2/SecurityRestFilter.java:96)
	at org.elasticsearch.xpack.security.rest.SecurityRestFilter.lambda$handleRequest$0(org.elasticsearch.security@8.10.2/SecurityRestFilter.java:87)
	at org.elasticsearch.xpack.security.rest.SecurityRestFilter$$Lambda$9277/0x00007effe9947160.accept(org.elasticsearch.security@8.10.2/Unknown Source)
	at org.elasticsearch.action.ActionListener$2.onResponse(org.elasticsearch.server@8.10.2/ActionListener.java:177)
	at org.elasticsearch.xpack.security.authc.support.SecondaryAuthenticator.lambda$authenticateAndAttachToContext$3(org.elasticsearch.security@8.10.2/SecondaryAuthenticator.java:99)
	at org.elasticsearch.xpack.security.authc.support.SecondaryAuthenticator$$Lambda$9299/0x00007effe994e498.accept(org.elasticsearch.security@8.10.2/Unknown Source)
	at org.elasticsearch.action.ActionListenerImplementations$ResponseWrappingActionListener.onResponse(org.elasticsearch.server@8.10.2/ActionListenerImplementations.java:236)
	at org.elasticsearch.xpack.security.authc.support.SecondaryAuthenticator.authenticate(org.elasticsearch.security@8.10.2/SecondaryAuthenticator.java:109)
	at org.elasticsearch.xpack.security.authc.support.SecondaryAuthenticator.authenticateAndAttachToContext(org.elasticsearch.security@8.10.2/SecondaryAuthenticator.java:90)
	at org.elasticsearch.xpack.security.rest.SecurityRestFilter.handleRequest(org.elasticsearch.security@8.10.2/SecurityRestFilter.java:82)
	at org.elasticsearch.rest.RestController.dispatchRequest(org.elasticsearch.server@8.10.2/RestController.java:415)
	at org.elasticsearch.rest.RestController.tryAllHandlers(org.elasticsearch.server@8.10.2/RestController.java:544)
	at org.elasticsearch.rest.RestController.dispatchRequest(org.elasticsearch.server@8.10.2/RestController.java:317)
	at org.elasticsearch.http.AbstractHttpServerTransport.dispatchRequest(org.elasticsearch.server@8.10.2/AbstractHttpServerTransport.java:453)
	at org.elasticsearch.http.AbstractHttpServerTransport.handleIncomingRequest(org.elasticsearch.server@8.10.2/AbstractHttpServerTransport.java:549)
	at org.elasticsearch.http.AbstractHttpServerTransport.incomingRequest(org.elasticsearch.server@8.10.2/AbstractHttpServerTransport.java:426)
	at org.elasticsearch.http.netty4.Netty4HttpPipeliningHandler.handlePipelinedRequest(org.elasticsearch.transport.netty4@8.10.2/Netty4HttpPipeliningHandler.java:128)
	at org.elasticsearch.http.netty4.Netty4HttpPipeliningHandler.channelRead(org.elasticsearch.transport.netty4@8.10.2/Netty4HttpPipeliningHandler.java:118)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(io.netty.transport@4.1.94.Final/AbstractChannelHandlerContext.java:442)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(io.netty.transport@4.1.94.Final/AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(io.netty.transport@4.1.94.Final/AbstractChannelHandlerContext.java:412)
	at io.netty.handler.codec.MessageToMessageDecoder.channelRead(io.netty.codec@4.1.94.Final/MessageToMessageDecoder.java:103)
	at io.netty.handler.codec.MessageToMessageCodec.channelRead(io.netty.codec@4.1.94.Final/MessageToMessageCodec.java:111)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(io.netty.transport@4.1.94.Final/AbstractChannelHandlerContext.java:442)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(io.netty.transport@4.1.94.Final/AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(io.netty.transport@4.1.94.Final/AbstractChannelHandlerContext.java:412)
	at io.netty.handler.codec.MessageToMessageDecoder.channelRead(io.netty.codec@4.1.94.Final/MessageToMessageDecoder.java:103)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(io.netty.transport@4.1.94.Final/AbstractChannelHandlerContext.java:444)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(io.netty.transport@4.1.94.Final/AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(io.netty.transport@4.1.94.Final/AbstractChannelHandlerContext.java:412)
	at io.netty.handler.codec.MessageToMessageDecoder.channelRead(io.netty.codec@4.1.94.Final/MessageToMessageDecoder.java:103)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(io.netty.transport@4.1.94.Final/AbstractChannelHandlerContext.java:444)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(io.netty.transport@4.1.94.Final/AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(io.netty.transport@4.1.94.Final/AbstractChannelHandlerContext.java:412)
	at org.elasticsearch.http.netty4.Netty4HttpHeaderValidator.channelRead(org.elasticsearch.transport.netty4@8.10.2/Netty4HttpHeaderValidator.java:72)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(io.netty.transport@4.1.94.Final/AbstractChannelHandlerContext.java:444)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(io.netty.transport@4.1.94.Final/AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(io.netty.transport@4.1.94.Final/AbstractChannelHandlerContext.java:412)
	at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(io.netty.codec@4.1.94.Final/ByteToMessageDecoder.java:346)
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(io.netty.codec@4.1.94.Final/ByteToMessageDecoder.java:318)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(io.netty.transport@4.1.94.Final/AbstractChannelHandlerContext.java:444)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(io.netty.transport@4.1.94.Final/AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(io.netty.transport@4.1.94.Final/AbstractChannelHandlerContext.java:412)
	at io.netty.handler.codec.MessageToMessageDecoder.channelRead(io.netty.codec@4.1.94.Final/MessageToMessageDecoder.java:103)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(io.netty.transport@4.1.94.Final/AbstractChannelHandlerContext.java:444)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(io.netty.transport@4.1.94.Final/AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(io.netty.transport@4.1.94.Final/AbstractChannelHandlerContext.java:412)
	at io.netty.handler.ssl.SslHandler.unwrap(io.netty.handler@4.1.94.Final/SslHandler.java:1383)
	at io.netty.handler.ssl.SslHandler.decodeJdkCompatible(io.netty.handler@4.1.94.Final/SslHandler.java:1246)
	at io.netty.handler.ssl.SslHandler.decode(io.netty.handler@4.1.94.Final/SslHandler.java:1295)
	at io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(io.netty.codec@4.1.94.Final/ByteToMessageDecoder.java:529)
	at io.netty.handler.codec.ByteToMessageDecoder.callDecode(io.netty.codec@4.1.94.Final/ByteToMessageDecoder.java:468)
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(io.netty.codec@4.1.94.Final/ByteToMessageDecoder.java:290)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(io.netty.transport@4.1.94.Final/AbstractChannelHandlerContext.java:444)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(io.netty.transport@4.1.94.Final/AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(io.netty.transport@4.1.94.Final/AbstractChannelHandlerContext.java:412)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(io.netty.transport@4.1.94.Final/DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(io.netty.transport@4.1.94.Final/AbstractChannelHandlerContext.java:440)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(io.netty.transport@4.1.94.Final/AbstractChannelHandlerContext.java:420)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(io.netty.transport@4.1.94.Final/DefaultChannelPipeline.java:919)
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(io.netty.transport@4.1.94.Final/AbstractNioByteChannel.java:166)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(io.netty.transport@4.1.94.Final/NioEventLoop.java:788)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysPlain(io.netty.transport@4.1.94.Final/NioEventLoop.java:689)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(io.netty.transport@4.1.94.Final/NioEventLoop.java:652)
	at io.netty.channel.nio.NioEventLoop.run(io.netty.transport@4.1.94.Final/NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(io.netty.common@4.1.94.Final/SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(io.netty.common@4.1.94.Final/ThreadExecutorMap.java:74)
	at java.lang.Thread.runWith(java.base@20.0.2/Thread.java:1636)
	at java.lang.Thread.run(java.base@20.0.2/Thread.java:1623)

```

</details>


Relates to https://github.com/elastic/elasticsearch/issues/68004",slobodanadamovic,closed,"['>bug', ':Security/Authentication', 'Team:Security']",https://github.com/elastic/elasticsearch/issues/104962,2024-01-31T09:36:49Z,6,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/104962,"{
  ""application_resource"": ""yes""
}"
131,104484,"GEOIP Database Update Issue: Documentation Followed, Databases Not Updating on Ingest Nodes","### Elasticsearch Version

8.11.1

### Installed Plugins

_No response_

### Java Version

_bundled_

### OS Version

4.18.0-513.5.1.el8_9.x86_64

### Problem Description

I encountered some unexpected behavior when trying to use geoip database from our MAXMIND subscription (not the built-in Geoip DB). The GEOIP databases are not updating on Elasticsearch ingest nodes. I'm not certain if I made a mistake or if there's an issue with the documentation or GEOIP itself.

#### Expected Behavior
According to the documentation, I expected the GEOIP databases to update successfully on ingest nodes.

#### Actual Behavior
However, when checking the status with ""GET _ingest/geoip/stats,"" I see that the updates have not occurred:

```json
{
  ""stats"": {
    ""successful_downloads"": 0,
    ""failed_downloads"": 1,
    ""total_download_time"": 0,
    ""databases_count"": 0,
    ""skipped_updates"": 0,
    ""expired_databases"": 0
  },
  ""nodes"": {}
}
```

I'm currently stuck and uncertain about the next steps to resolve this issue. I've followed the documentation and conducted troubleshooting steps as outlined, but the problem persists. Any assistance or guidance from the community would be greatly appreciated.

### Steps to Reproduce

I followed the steps outlined in the section [""Use a custom endpoint""](https://www.elastic.co/guide/en/elasticsearch/reference/current/geoip-processor.html#manage-geoip-database-updates) of the documentation.

### Node Configuration

I have a total of 14 Elasticsearch nodes (ELK STACK version: 8.11.1):

- 8 data nodes
- 3 ingest nodes
- 3 master nodes

### Troubleshooting Steps

I have taken several steps to troubleshoot the issue:

1. Executed ""elasticsearch-geoip"" for updating databases, which appeared to complete successfully.
   
   ```
   elasticsearch@elasticsearch-5c64694f74-26mxt:~/bin$ ./elasticsearch-geoip -s /geoip/ -t /geoip/
   Found GeoIP2-City.mmdb, will compress it to GeoIP2-City.tgz
   Adding GeoIP2-City.tgz to overview.json
   overview.json created
   ```

2. Checked file permissions on the target folder and confirmed they are appropriate.

   ```
   elasticsearch@elasticsearch-5c64694f74-26mxt:/geoip$ ls -ls
   total 207891
   135949 -rw-r--r--. 1 root          root          139210785 Jan 17 16:44 GeoIP2-City.mmdb
   71942  -rw-rw-rw-. 1 elasticsearch elasticsearch  73668587  Jan 17 16:48 GeoIP2-City.tgz
   1 -rw-rw-rw-. 1 elasticsearch elasticsearch       122 Jan 17 16:48 overview.json
   ```

3. Made configurations and settings adjustments as described in the documentation, including updating endpoint URLs, restarting Elasticsearch, and confirming settings.

   - All nodes have the settings ""ingest.geoip.downloader.endpoint: https://mydomain.com/overview.json"" in elasticsearch.yml. 
   - Elasticsearch service on all nodes were restarted after adding the endpoint settings.

   ```
   GET _cluster/settings?include_defaults
   
   ""geoip"": {
         ""cache_size"": ""1000"",
         ""downloader"": {
           ""eager"": {
             ""download"": ""false""
           },
           ""enabled"": ""true"",
           ""endpoint"": ""https://mydomain.com/overview.json""
         }
       }
   
   ```

   - I changed the pull interval from 3 days to 1 day. The cluster settings confirm.

   ```
   ...
   ""ingest"": {
       ""geoip"": {
         ""downloader"": {
           ""poll"": {
             ""interval"": ""1d""
           }
         }
       }
     }  
   ```

4. Tested the connection to the endpoint from all nodes, and all of them can retrieve data from the endpoint.

   - Command executed and result from all nodes:

   ```
   $ curl -XGET https://mydomain.com/overview.json
   [{
       ""name"": ""GeoIP2-City.tgz"",
       ""md5_hash"": ""3fe7b4df652ad2b6679da1f043255fb1"",
       ""url"": ""GeoIP2-City.tgz"",
       ""updated"": 1705510085337
   }]
   ```

5. Attempted changing the URL part of overview.json to the full URL endpoint, but it did not resolve the issue.

   ```
   [{
       ""name"": ""GeoIP2-City.tgz"",
       ""md5_hash"": ""3fe7b4df652ad2b6679da1f043255fb1"",
       ""url"": ""https://mydomain.com/GeoIP2-City.tgz"",
       ""updated"": 1705510085337
   }]
   ```

6. Set the log level to trace following the instructions in this [article](https://support.elastic.co/knowledge/e93a5752). Observed many log lines, including:
   
   ```
   [2024-01-17T12:47:50,093][TRACE][o.e.i.g.DatabaseNodeService] [ingest_1] Not checking databases because geoip databases index does not exist
   ```

7. Followed instructions to delete the .geoip_databases index from this [article](https://support.elastic.co/knowledge/b48427cc), but I cannot see this index in my cluster. I attempted to output all indices with the API call:

   ```
   GET _cat/indices?format=JSON&bytes=b&expand_wildcards=all
   ```

   However, there is no .geoip_databases index in the output.
   
   #### References:
- Documentation: [""Manage GEOIP Database Updates""](https://www.elastic.co/guide/en/elasticsearch/reference/current/geoip-processor.html#manage-geoip-database-updates)
- Troubleshooting Article: [Support - Elastic Knowledge Base](https://support.elastic.co/knowledge/e93a5752)
- Deleting the .geoip_databases Index: [Support - Elastic Knowledge Base](https://support.elastic.co/knowledge/b48427cc)

### Logs (if relevant)

_No response_",DomDaigle,closed,"['>bug', ':Data Management/Ingest Node', 'Team:Data Management']",https://github.com/elastic/elasticsearch/issues/104484,2024-01-17T19:23:29Z,4,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/104484,"{
  ""application_resource"": ""yes""
}"
132,104193,[CI] MLModelDeploymentsUpgradeIT testTrainedModelDeployment failing,"**Build scan:**
https://gradle-enterprise.elastic.co/s/pcdaqhet232e6/tests/:x-pack:qa:rolling-upgrade:v8.13.0%23oldClusterTest/org.elasticsearch.upgrades.MLModelDeploymentsUpgradeIT/testTrainedModelDeployment


**Reproduction line:**
```
./gradlew ':x-pack:qa:rolling-upgrade:v8.13.0#oldClusterTest' -Dtests.class=""org.elasticsearch.upgrades.MLModelDeploymentsUpgradeIT"" -Dtests.method=""testTrainedModelDeployment"" -Dtests.seed=ACACC12D680436E -Dtests.bwc=true -Dtests.locale=es-PA -Dtests.timezone=Cuba -Druntime.java=21
```

**Applicable branches:**
main

**Reproduces locally?:**
Didn't try

**Failure history:**
[Failure dashboard for `org.elasticsearch.upgrades.MLModelDeploymentsUpgradeIT#testTrainedModelDeployment`](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&_a=(controlGroupInput:(chainingSystem:HIERARCHICAL,controlStyle:twoLine,ignoreParentSettings:(ignoreFilters:!f,ignoreQuery:!f,ignoreTimerange:!f,ignoreValidations:!t),panels:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(explicitInput:(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,enhancements:(),fieldName:task.keyword,grow:!t,id:'0c0c9cb8-ccd2-45c6-9b13-96bac4abc542',searchTechnique:wildcard,selectedOptions:!(),singleSelect:!t,title:'Gradle%20Task',width:medium),grow:!t,order:0,type:optionsListControl,width:small),'144933da-5c1b-4257-a969-7f43455a7901':(explicitInput:(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,enhancements:(),fieldName:name.keyword,grow:!t,id:'144933da-5c1b-4257-a969-7f43455a7901',searchTechnique:wildcard,selectedOptions:!('testTrainedModelDeployment'),title:Test,width:medium),grow:!t,order:2,type:optionsListControl,width:medium),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(explicitInput:(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,enhancements:(),fieldName:className.keyword,grow:!t,id:'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850',searchTechnique:wildcard,selectedOptions:!('org.elasticsearch.upgrades.MLModelDeploymentsUpgradeIT'),title:Suite,width:medium),grow:!t,order:1,type:optionsListControl,width:medium)))))


**Failure excerpt:**
```
org.elasticsearch.client.ResponseException: method [POST], host [http://127.0.0.1:44549], URI [/_ml/trained_models/upgrade-deployment-test/deployment/_infer], status line [HTTP/1.1 409 Conflict]
Warnings: [[POST /_ml/trained_models/{model_id}/deployment/_infer] is deprecated! Use [POST /_ml/trained_models/{model_id}/_infer] instead.]
{""error"":{""root_cause"":[{""type"":""status_exception"",""reason"":""[upgrade-deployment-test] process context missing""}],""type"":""status_exception"",""reason"":""[upgrade-deployment-test] process context missing""},""status"":409}

  at __randomizedtesting.SeedInfo.seed([ACACC12D680436E:F1128A4DF740F9F9]:0)
  at org.elasticsearch.client.RestClient.convertResponse(RestClient.java:351)
  at org.elasticsearch.client.RestClient.performRequest(RestClient.java:317)
  at org.elasticsearch.client.RestClient.performRequest(RestClient.java:292)
  at org.elasticsearch.upgrades.MLModelDeploymentsUpgradeIT.infer(MLModelDeploymentsUpgradeIT.java:298)
  at org.elasticsearch.upgrades.MLModelDeploymentsUpgradeIT.assertInfer(MLModelDeploymentsUpgradeIT.java:191)
  at org.elasticsearch.upgrades.MLModelDeploymentsUpgradeIT.testTrainedModelDeployment(MLModelDeploymentsUpgradeIT.java:112)
  at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
  at java.lang.reflect.Method.invoke(Method.java:580)
  at com.carrotsearch.randomizedtesting.RandomizedRunner.invoke(RandomizedRunner.java:1758)
  at com.carrotsearch.randomizedtesting.RandomizedRunner$8.evaluate(RandomizedRunner.java:946)
  at com.carrotsearch.randomizedtesting.RandomizedRunner$9.evaluate(RandomizedRunner.java:982)
  at com.carrotsearch.randomizedtesting.RandomizedRunner$10.evaluate(RandomizedRunner.java:996)
  at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)
  at org.junit.rules.RunRules.evaluate(RunRules.java:20)
  at org.apache.lucene.tests.util.TestRuleSetupTeardownChained$1.evaluate(TestRuleSetupTeardownChained.java:48)
  at org.apache.lucene.tests.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:43)
  at org.apache.lucene.tests.util.TestRuleThreadAndTestName$1.evaluate(TestRuleThreadAndTestName.java:45)
  at org.apache.lucene.tests.util.TestRuleIgnoreAfterMaxFailures$1.evaluate(TestRuleIgnoreAfterMaxFailures.java:60)
  at org.apache.lucene.tests.util.TestRuleMarkFailure$1.evaluate(TestRuleMarkFailure.java:44)
  at org.junit.rules.RunRules.evaluate(RunRules.java:20)
  at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)
  at com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:390)
  at com.carrotsearch.randomizedtesting.ThreadLeakControl.forkTimeoutingTask(ThreadLeakControl.java:843)
  at com.carrotsearch.randomizedtesting.ThreadLeakControl$3.evaluate(ThreadLeakControl.java:490)
  at com.carrotsearch.randomizedtesting.RandomizedRunner.runSingleTest(RandomizedRunner.java:955)
  at com.carrotsearch.randomizedtesting.RandomizedRunner$5.evaluate(RandomizedRunner.java:840)
  at com.carrotsearch.randomizedtesting.RandomizedRunner$6.evaluate(RandomizedRunner.java:891)
  at com.carrotsearch.randomizedtesting.RandomizedRunner$7.evaluate(RandomizedRunner.java:902)
  at org.apache.lucene.tests.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:43)
  at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)
  at org.apache.lucene.tests.util.TestRuleStoreClassName$1.evaluate(TestRuleStoreClassName.java:38)
  at com.carrotsearch.randomizedtesting.rules.NoShadowingOrOverridesOnMethodsRule$1.evaluate(NoShadowingOrOverridesOnMethodsRule.java:40)
  at com.carrotsearch.randomizedtesting.rules.NoShadowingOrOverridesOnMethodsRule$1.evaluate(NoShadowingOrOverridesOnMethodsRule.java:40)
  at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)
  at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)
  at org.apache.lucene.tests.util.TestRuleAssertionsRequired$1.evaluate(TestRuleAssertionsRequired.java:53)
  at org.apache.lucene.tests.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:43)
  at org.apache.lucene.tests.util.TestRuleMarkFailure$1.evaluate(TestRuleMarkFailure.java:44)
  at org.apache.lucene.tests.util.TestRuleIgnoreAfterMaxFailures$1.evaluate(TestRuleIgnoreAfterMaxFailures.java:60)
  at org.apache.lucene.tests.util.TestRuleIgnoreTestSuites$1.evaluate(TestRuleIgnoreTestSuites.java:47)
  at org.junit.rules.RunRules.evaluate(RunRules.java:20)
  at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)
  at com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:390)
  at com.carrotsearch.randomizedtesting.ThreadLeakControl.lambda$forkTimeoutingTask$0(ThreadLeakControl.java:850)
  at java.lang.Thread.run(Thread.java:1583)

```",DaveCTurner,closed,"['blocker', '>test-failure', ':ml', 'Team:ML']",https://github.com/elastic/elasticsearch/issues/104193,2024-01-10T10:58:54Z,9,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/104193,"{
  ""application_resource"": ""yes""
}"
133,104184,[CI] SearchTransportTelemetryTests testSearchTransportMetricsQueryThenFetch failing,"### CI Link

Only failed locally, sorry no build scan

### Repro line

`':server:test' --tests ""org.elasticsearch.search.TelemetryMetrics.SearchTransportTelemetryTests.testSearchTransportMetricsQueryThenFetch"" -Dtests.seed=A7DDD2883CF9F74D:5932D02B45F0F45A -Dtests.locale=is-IS -Dtests.timezone=Asia/Dacca -Druntime.java=21`

### Does it reproduce?

No

### Applicable branches

main

### Failure history

https://es-delivery-stats.elastic.dev/app/r/s/9tCmJ

### Failure excerpt

No failures in CI it seems, but failed on a local run:

```
org.elasticsearch.search.TelemetryMetrics.SearchTransportTelemetryTests > testSearchTransportMetricsQueryThenFetch FAILED
    java.lang.AssertionError: Values should be different. Actual: 0
        at __randomizedtesting.SeedInfo.seed([A7DDD2883CF9F74D:5932D02B45F0F45A]:0)
        at org.junit.Assert.fail(Assert.java:89)
        at org.junit.Assert.failEquals(Assert.java:187)
        at org.junit.Assert.assertNotEquals(Assert.java:201)
        at org.junit.Assert.assertNotEquals(Assert.java:213)
        at org.elasticsearch.search.TelemetryMetrics.SearchTransportTelemetryTests.testSearchTransportMetricsQueryThenFetch(SearchTransportTelemetryTests.java:81)
  1> [2024-01-10T07:14:05,007][INFO ][o.e.s.T.SearchTransportTelemetryTests] [testSearchTransportMetricsQueryThenFetch] before test
  1> [2024-01-10T07:14:05,013][INFO ][o.e.s.T.SearchTransportTelemetryTests] [testSearchTransportMetricsQueryThenFetch] [SearchTransportTelemetryTests#testSearchTransportMetricsQueryThenFetch]: setting up test
  1> [2024-01-10T07:14:05,028][INFO ][o.e.t.InternalTestCluster] [testSearchTransportMetricsQueryThenFetch] Setup InternalTestCluster [TEST-TEST_WORKER_VM=[1142]-CLUSTER_SEED=[-2142127958903691377]-HASH=[B8C2190D1CAC]-cluster] with seed [E245A1F88A1CE78F] using [0] dedicated masters, [1] (data) nodes and [0] coord only nodes (master nodes are [auto-managed])
  1> [2024-01-10T07:14:05,035][INFO ][o.e.n.Node               ] [testSearchTransportMetricsQueryThenFetch] version[8.13.0-SNAPSHOT], pid[1723656], build[unknown/unknown/unknown], OS[Linux/6.2.0-1020-gcp/amd64], JVM[Oracle Corporation/OpenJDK 64-Bit Server VM/21.0.1/21.0.1+12-29]
  1> [2024-01-10T07:14:05,035][INFO ][o.e.n.Node               ] [testSearchTransportMetricsQueryThenFetch] JVM home [/home/davidturner/.gradle/jdks/oracle_corporation-21-amd64-linux/jdk-21.0.1], using bundled JDK [false]
  1> [2024-01-10T07:14:05,035][INFO ][o.e.n.Node               ] [testSearchTransportMetricsQueryThenFetch] JVM arguments [-Des.insecure_network_trace_enabled=true, -Des.scripting.update.ctx_in_params=false, -Des.search.rewrite_sort=true, -Des.transport.cname_in_publish_address=true, -Dgradle.dist.lib=/home/davidturner/.gradle/wrapper/dists/gradle-8.5-all/3zlzzgtsutfj0pbojr50n2l7z/gradle-8.5/lib, -Dgradle.user.home=/home/davidturner/.gradle, -Dgradle.worker.jar=/home/davidturner/.gradle/caches/8.5/workerMain/gradle-worker.jar, -Dio.netty.noKeySetOptimization=true, -Dio.netty.noUnsafe=true, -Dio.netty.recycler.maxCapacityPerThread=0, -Djava.awt.headless=true, -Djava.locale.providers=SPI,COMPAT, -Djava.security.manager=allow, -Djna.nosys=true, -Dorg.gradle.internal.worker.tmpdir=/home/davidturner/src/elasticsearch/server/build/tmp/test/work, -Dorg.gradle.native=false, -Dtests.artifact=server, -Dtests.gradle=true, -Dtests.gradle-loop-iteration=19, -Dtests.logger.level=WARN, -Dtests.security.manager=true, -Dtests.seed=A7DDD2883CF9F74D, -Dtests.task=:server:test, --add-opens=java.base/java.security.cert=ALL-UNNAMED, --add-opens=java.base/java.nio.channels=ALL-UNNAMED, --add-opens=java.base/java.net=ALL-UNNAMED, --add-opens=java.base/javax.net.ssl=ALL-UNNAMED, --add-opens=java.base/java.nio.file=ALL-UNNAMED, --add-opens=java.base/java.time=ALL-UNNAMED, --add-opens=java.management/java.lang.management=ALL-UNNAMED, -XX:+HeapDumpOnOutOfMemoryError, -esa, -XX:HeapDumpPath=/home/davidturner/src/elasticsearch/server/build/heapdump, -Xms512m, -Xmx512m, -Dfile.encoding=UTF-8, -Djava.io.tmpdir=/home/davidturner/src/elasticsearch/server/build/testrun/test/temp, -Duser.country, -Duser.language=en, -Duser.variant, -ea]
  1> [2024-01-10T07:14:05,035][INFO ][o.e.n.Node               ] [testSearchTransportMetricsQueryThenFetch] Default Locale [is_IS]
  1> [2024-01-10T07:14:05,036][WARN ][o.e.n.Node               ] [testSearchTransportMetricsQueryThenFetch] version [8.13.0-SNAPSHOT] is a pre-release version of Elasticsearch and is not suitable for production
  1> [2024-01-10T07:14:05,036][WARN ][o.e.d.n.Node             ] [testSearchTransportMetricsQueryThenFetch] data_stream.dataset=""deprecation.elasticsearch"" data_stream.namespace=""default"" data_stream.type=""logs"" elasticsearch.event.category=""settings"" event.code=""shared-data-path"" message=""setting [path.shared_data] is deprecated and will be removed in a future release""
  1> [2024-01-10T07:14:05,232][INFO ][o.e.e.NodeEnvironment    ] [testSearchTransportMetricsQueryThenFetch] using [1] data paths, mounts [[/ (/dev/root)]], net usable_space [224.8gb], net total_space [242.2gb], types [ext4]
  1> [2024-01-10T07:14:05,233][INFO ][o.e.e.NodeEnvironment    ] [testSearchTransportMetricsQueryThenFetch] heap size [512mb], compressed ordinary object pointers [true]
  1> [2024-01-10T07:14:05,236][INFO ][o.e.n.Node               ] [testSearchTransportMetricsQueryThenFetch] node name [node_t0], node ID [9pmAQkDpT2-BAiFU_LPorA], cluster name [TEST-TEST_WORKER_VM=[1142]-CLUSTER_SEED=[-2142127958903691377]-HASH=[B8C2190D1CAC]-cluster], roles [master, data_warm, data_content, transform, data_hot, ml, data_frozen, ingest, data_cold, data, remote_cluster_client]
  1> [2024-01-10T07:14:05,328][INFO ][o.e.f.FeatureService     ] [testSearchTransportMetricsQueryThenFetch] Registered local node features [features_supported]
  1> [2024-01-10T07:14:05,350][INFO ][o.e.i.r.RecoverySettings ] [testSearchTransportMetricsQueryThenFetch] using rate limit [40mb] with [default=40mb, read=0b, write=0b, max=0b]
  1> [2024-01-10T07:14:05,352][INFO ][o.e.d.DiscoveryModule    ] [testSearchTransportMetricsQueryThenFetch] using discovery type [multi-node] and seed hosts providers [settings, file]
  1> [2024-01-10T07:14:05,569][INFO ][o.e.n.Node               ] [testSearchTransportMetricsQueryThenFetch] initialized
  1> [2024-01-10T07:14:05,596][INFO ][o.e.n.Node               ] [[test_TEST-TEST_WORKER_VM=[1142]-CLUSTER_SEED=[-2142127958903691377]-HASH=[B8C2190D1CAC]-cluster[T#1]]] starting ...
  1> [2024-01-10T07:14:05,676][INFO ][o.e.t.TransportService   ] [[test_TEST-TEST_WORKER_VM=[1142]-CLUSTER_SEED=[-2142127958903691377]-HASH=[B8C2190D1CAC]-cluster[T#1]]] publish_address {127.0.0.1:28181}, bound_addresses {[::1]:28181}, {127.0.0.1:28181}
  1> [2024-01-10T07:14:05,724][INFO ][o.e.c.c.ClusterBootstrapService] [[test_TEST-TEST_WORKER_VM=[1142]-CLUSTER_SEED=[-2142127958903691377]-HASH=[B8C2190D1CAC]-cluster[T#1]]] this node has not joined a bootstrapped cluster yet; [cluster.initial_master_nodes] is set to [node_t0]
  1> [2024-01-10T07:14:05,747][INFO ][o.e.c.c.Coordinator      ] [[test_TEST-TEST_WORKER_VM=[1142]-CLUSTER_SEED=[-2142127958903691377]-HASH=[B8C2190D1CAC]-cluster[T#1]]] setting initial configuration to VotingConfiguration{9pmAQkDpT2-BAiFU_LPorA}
  1> [2024-01-10T07:14:05,845][INFO ][o.e.c.s.MasterService    ] [node_t0] elected-as-master ([1] nodes joined in term 1)[_FINISH_ELECTION_, {node_t0}{9pmAQkDpT2-BAiFU_LPorA}{a2O6zoWDQFiQrNroIsfMsQ}{node_t0}{127.0.0.1}{127.0.0.1:28181}{cdfhilmrstw}{8.13.0}{7000099-8501000} completing election], term: 1, version: 1, delta: master node changed {previous [], current [{node_t0}{9pmAQkDpT2-BAiFU_LPorA}{a2O6zoWDQFiQrNroIsfMsQ}{node_t0}{127.0.0.1}{127.0.0.1:28181}{cdfhilmrstw}{8.13.0}{7000099-8501000}]}
  1> [2024-01-10T07:14:05,880][INFO ][o.e.c.c.CoordinationState] [node_t0] cluster UUID set to [I8Rrx0LzSuqGvOAS0lB8Jg]
  1> [2024-01-10T07:14:05,900][INFO ][o.e.c.s.ClusterApplierService] [node_t0] master node changed {previous [], current [{node_t0}{9pmAQkDpT2-BAiFU_LPorA}{a2O6zoWDQFiQrNroIsfMsQ}{node_t0}{127.0.0.1}{127.0.0.1:28181}{cdfhilmrstw}{8.13.0}{7000099-8501000}]}, term: 1, version: 1, reason: Publication{term=1, version=1}
  1> [2024-01-10T07:14:05,930][INFO ][o.e.c.f.AbstractFileWatchingService] [node_t0] starting file watcher ...
  1> [2024-01-10T07:14:05,970][INFO ][o.e.c.c.NodeJoinExecutor ] [node_t0] node-join: [{node_t0}{9pmAQkDpT2-BAiFU_LPorA}{a2O6zoWDQFiQrNroIsfMsQ}{node_t0}{127.0.0.1}{127.0.0.1:28181}{cdfhilmrstw}{8.13.0}{7000099-8501000}] with reason [completing election]
  1> [2024-01-10T07:14:05,972][INFO ][o.e.c.f.AbstractFileWatchingService] [[elasticsearch[file-watcher[/home/davidturner/src/elasticsearch/server/build/testrun/test/temp/org.elasticsearch.search.TelemetryMetrics.SearchTransportTelemetryTests_A7DDD2883CF9F74D-001/tempDir-002/config/operator/settings.json]]]] file settings service up and running [tid=1396]
  1> [2024-01-10T07:14:05,998][INFO ][o.e.n.Node               ] [[test_TEST-TEST_WORKER_VM=[1142]-CLUSTER_SEED=[-2142127958903691377]-HASH=[B8C2190D1CAC]-cluster[T#1]]] started {node_t0}{9pmAQkDpT2-BAiFU_LPorA}{a2O6zoWDQFiQrNroIsfMsQ}{node_t0}{127.0.0.1}{127.0.0.1:28181}{cdfhilmrstw}{8.13.0}{7000099-8501000}
  1> [2024-01-10T07:14:06,024][INFO ][o.e.g.GatewayService     ] [node_t0] recovered [0] indices into cluster_state
  1> [2024-01-10T07:14:06,040][INFO ][o.e.h.n.s.HealthNodeTaskExecutor] [node_t0] Node [{node_t0}{9pmAQkDpT2-BAiFU_LPorA}] is selected as the current health node.
  1> [2024-01-10T07:14:06,159][INFO ][o.e.c.m.MetadataIndexTemplateService] [node_t0] adding template [random_index_template] for index patterns [*]
  1> [2024-01-10T07:14:06,181][INFO ][o.e.s.T.SearchTransportTelemetryTests] [testSearchTransportMetricsQueryThenFetch] [SearchTransportTelemetryTests#testSearchTransportMetricsQueryThenFetch]: all set up test
  1> [2024-01-10T07:14:06,188][INFO ][o.e.c.m.MetadataCreateIndexService] [node_t0] [test2] creating index, cause [api], templates [random_index_template], shards [3]/[0]
  1> [2024-01-10T07:14:06,478][INFO ][o.e.c.r.a.AllocationService] [node_t0] current.health=""GREEN"" message=""Cluster health status changed from [YELLOW] to [GREEN] (reason: [shards started [[test2][0]]])."" previous.health=""YELLOW"" reason=""shards started [[test2][0]]""
  1> [2024-01-10T07:14:06,502][INFO ][o.e.s.T.SearchTransportTelemetryTests] [testSearchTransportMetricsQueryThenFetch] Index [1] docs async: [true] bulk: [false]
  1> [2024-01-10T07:14:06,613][INFO ][o.e.c.m.MetadataMappingService] [node_t0] [test2/LloPpu4jSU6HaBIMKMpbyA] create_mapping
  1> [2024-01-10T07:14:06,994][INFO ][o.e.s.T.SearchTransportTelemetryTests] [testSearchTransportMetricsQueryThenFetch] [SearchTransportTelemetryTests#testSearchTransportMetricsQueryThenFetch]: cleaning up after test
  1> [2024-01-10T07:14:07,173][INFO ][o.e.c.m.MetadataDeleteIndexService] [node_t0] [test2/LloPpu4jSU6HaBIMKMpbyA] deleting index
  1> [2024-01-10T07:14:07,203][INFO ][o.e.t.s.M.Listener       ] [node_t0] [test2][1] start check index
  1> [2024-01-10T07:14:07,214][INFO ][o.e.t.s.M.Listener       ] [node_t0] [test2][1] end check index
  1> [2024-01-10T07:14:07,221][INFO ][o.e.t.s.M.Listener       ] [node_t0] [test2][0] start check index
  1> [2024-01-10T07:14:07,223][INFO ][o.e.t.s.M.Listener       ] [node_t0] [test2][0] end check index
  1> [2024-01-10T07:14:07,227][INFO ][o.e.t.s.M.Listener       ] [node_t0] [test2][2] start check index
  1> [2024-01-10T07:14:07,230][INFO ][o.e.t.s.M.Listener       ] [node_t0] [test2][2] end check index
  1> [2024-01-10T07:14:07,246][INFO ][o.e.c.m.MetadataIndexTemplateService] [node_t0] removing template [random_index_template]
  1> [2024-01-10T07:14:07,261][INFO ][o.e.n.Node               ] [testSearchTransportMetricsQueryThenFetch] stopping ...
  1> [2024-01-10T07:14:07,264][INFO ][o.e.c.f.AbstractFileWatchingService] [[elasticsearch[file-watcher[/home/davidturner/src/elasticsearch/server/build/testrun/test/temp/org.elasticsearch.search.TelemetryMetrics.SearchTransportTelemetryTests_A7DDD2883CF9F74D-001/tempDir-002/config/operator/settings.json]]]] shutting down watcher thread
  1> [2024-01-10T07:14:07,270][INFO ][o.e.c.f.AbstractFileWatchingService] [testSearchTransportMetricsQueryThenFetch] watcher service stopped
  1> [2024-01-10T07:14:07,282][INFO ][o.e.n.Node               ] [testSearchTransportMetricsQueryThenFetch] stopped
  1> [2024-01-10T07:14:07,282][INFO ][o.e.n.Node               ] [testSearchTransportMetricsQueryThenFetch] closing ...
  1> [2024-01-10T07:14:07,286][INFO ][o.e.n.Node               ] [testSearchTransportMetricsQueryThenFetch] closed
  1> [2024-01-10T07:14:07,291][INFO ][o.e.s.T.SearchTransportTelemetryTests] [testSearchTransportMetricsQueryThenFetch] [SearchTransportTelemetryTests#testSearchTransportMetricsQueryThenFetch]: cleaned up after test
  1> [2024-01-10T07:14:07,292][INFO ][o.e.s.T.SearchTransportTelemetryTests] [testSearchTransportMetricsQueryThenFetch] after test
```",DaveCTurner,closed,"['>test-failure', 'low-risk', 'Team:Search Foundations', ':Search Foundations/Search']",https://github.com/elastic/elasticsearch/issues/104184,2024-01-10T08:07:13Z,10,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/104184,"{
  ""application_resource"": ""unsure""
}"
134,104071,[CI] org.elasticsearch.xpack.ml.integration.MlDistributedFailureIT > testCloseUnassignedJobAndDatafeed FAILED,"Not sure if this is related to how the test finished, seems like it wasn't able to commit some cluster state.

### CI Link

https://gradle-enterprise.elastic.co/s/koy66u5rtoz6m/console-log?page=16

### Repro line

`./gradlew ':x-pack:plugin:ml:internalClusterTest' --tests ""org.elasticsearch.xpack.ml.integration.MlDistributedFailureIT.testCloseUnassignedJobAndDatafeed"" -Dtests.seed=9F7C125D3F23ADBF -Dtests.locale=es-PR -Dtests.timezone=Indian/Kerguelen -Druntime.java=21`

### Does it reproduce?

No

### Applicable branches

main

### Failure history

_No response_

### Failure excerpt

```

org.elasticsearch.xpack.ml.integration.MlDistributedFailureIT > testCloseUnassignedJobAndDatafeed FAILED | ¬†
-- | --
¬† | java.lang.AssertionError: | ¬†
¬† | Expected: an empty collection | ¬†
¬† | but: <[LEAK: resource was not cleaned up before it was garbage-collected. | ¬†
¬† | Recent access records: | ¬†
¬† | Created at: | ¬†
¬† | org.elasticsearch.action.search.ArraySearchPhaseResults.<init>(ArraySearchPhaseResults.java:25) | ¬†
¬† | org.elasticsearch.action.search.QueryPhaseResultConsumer.<init>(QueryPhaseResultConsumer.java:85) | ¬†
¬† | org.elasticsearch.action.search.SearchPhaseController.newSearchPhaseResults(SearchPhaseController.java:807) | ¬†
¬† | org.elasticsearch.action.search.TransportSearchAction$AsyncSearchActionProvider.newSearchPhase(TransportSearchAction.java:1298) | ¬†
¬† | org.elasticsearch.action.search.TransportSearchAction.executeSearch(TransportSearchAction.java:1127) | ¬†
¬† | org.elasticsearch.action.search.TransportSearchAction.executeLocalSearch(TransportSearchAction.java:909) | ¬†
¬† | org.elasticsearch.action.search.TransportSearchAction.lambda$executeRequest$10(TransportSearchAction.java:336) | ¬†
¬† | org.elasticsearch.action.ActionListenerImplementations$ResponseWrappingActionListener.onResponse(ActionListenerImplementations.java:236) | ¬†
¬† | org.elasticsearch.index.query.Rewriteable.rewriteAndFetch(Rewriteable.java:109) | ¬†
¬† | org.elasticsearch.index.query.Rewriteable.rewriteAndFetch(Rewriteable.java:77) | ¬†
¬† | org.elasticsearch.action.search.TransportSearchAction.executeRequest(TransportSearchAction.java:448) | ¬†
¬† | org.elasticsearch.action.search.TransportSearchAction.doExecute(TransportSearchAction.java:303) | ¬†
¬† | org.elasticsearch.action.search.TransportSearchAction.doExecute(TransportSearchAction.java:112) | ¬†
¬† | org.elasticsearch.action.support.TransportAction$RequestFilterChain.proceed(TransportAction.java:87) | ¬†
¬† | org.elasticsearch.action.support.ActionFilter$Simple.apply(ActionFilter.java:53) | ¬†
¬† | org.elasticsearch.action.support.TransportAction$RequestFilterChain.proceed(TransportAction.java:85) | ¬†
¬† | org.elasticsearch.action.support.TransportAction.execute(TransportAction.java:62) | ¬†
¬† | org.elasticsearch.tasks.TaskManager.registerAndExecute(TaskManager.java:196) | ¬†
¬† | org.elasticsearch.client.internal.node.NodeClient.executeLocally(NodeClient.java:108) | ¬†
¬† | org.elasticsearch.client.internal.node.NodeClient.doExecute(NodeClient.java:86) | ¬†
¬† | org.elasticsearch.client.internal.support.AbstractClient.execute(AbstractClient.java:361) | ¬†
¬† | org.elasticsearch.client.internal.support.AbstractClient.search(AbstractClient.java:496) | ¬†
¬† | org.elasticsearch.xpack.core.ClientHelper.executeAsyncWithOrigin(ClientHelper.java:222) | ¬†
¬† | org.elasticsearch.xpack.ml.job.persistence.JobConfigProvider.expandJobs(JobConfigProvider.java:585) | ¬†
¬† | org.elasticsearch.xpack.ml.job.JobManager.expandJobBuilders(JobManager.java:170) | ¬†
¬† | org.elasticsearch.xpack.ml.action.TransportGetJobsAction.masterOperation(TransportGetJobsAction.java:75) | ¬†
¬† | org.elasticsearch.xpack.ml.action.TransportGetJobsAction.masterOperation(TransportGetJobsAction.java:34) | ¬†
¬† | org.elasticsearch.action.support.master.TransportMasterNodeAction.executeMasterOperation(TransportMasterNodeAction.java:125) | ¬†
¬† | org.elasticsearch.action.support.master.TransportMasterNodeAction$AsyncSingleAction.lambda$doStart$3(TransportMasterNodeAction.java:236) | ¬†
¬† | org.elasticsearch.action.ActionRunnable$4.doRun(ActionRunnable.java:95) | ¬†
¬† | org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:26) | ¬†
¬† | org.elasticsearch.common.util.concurrent.EsExecutors$DirectExecutorService.execute(EsExecutors.java:238) | ¬†
¬† | org.elasticsearch.action.support.master.TransportMasterNodeAction$AsyncSingleAction.doStart(TransportMasterNodeAction.java:236) | ¬†
¬† | org.elasticsearch.action.support.master.TransportMasterNodeAction.doExecute(TransportMasterNodeAction.java:173) | ¬†
¬† | org.elasticsearch.action.support.master.TransportMasterNodeAction.doExecute(TransportMasterNodeAction.java:55) | ¬†
¬† | org.elasticsearch.action.support.TransportAction$RequestFilterChain.proceed(TransportAction.java:87) | ¬†
¬† | org.elasticsearch.action.support.ActionFilter$Simple.apply(ActionFilter.java:53) | ¬†
¬† | org.elasticsearch.action.support.TransportAction$RequestFilterChain.proceed(TransportAction.java:85) | ¬†
¬† | org.elasticsearch.action.support.TransportAction.execute(TransportAction.java:62) | ¬†
¬† | org.elasticsearch.tasks.TaskManager.registerAndExecute(TaskManager.java:196) | ¬†
¬† | org.elasticsearch.client.internal.node.NodeClient.executeLocally(NodeClient.java:108) | ¬†
¬† | org.elasticsearch.client.internal.node.NodeClient.doExecute(NodeClient.java:86) | ¬†
¬† | org.elasticsearch.client.internal.support.AbstractClient.execute(AbstractClient.java:361) | ¬†
¬† | org.elasticsearch.xpack.core.ClientHelper.executeAsyncWithOrigin(ClientHelper.java:243) | ¬†
¬† | org.elasticsearch.xpack.ml.job.task.OpenJobPersistentTasksExecutor$RevertToCurrentSnapshotAction.tryAction(OpenJobPersistentTasksExecutor.java:543) | ¬†
¬† | org.elasticsearch.action.support.RetryableAction$1.doRun(RetryableAction.java:111) | ¬†
¬† | org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:984) | ¬†
¬† | org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:26) | ¬†
¬† | java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) | ¬†
¬† | java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) | ¬†
¬† | java.base/java.lang.Thread.run(Thread.java:1583)]> | ¬†
¬† | at __randomizedtesting.SeedInfo.seed([9F7C125D3F23ADBF:DC56C80530F35C6C]:0) | ¬†
¬† | at org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:18) | ¬†
¬† | at org.junit.Assert.assertThat(Assert.java:964) | ¬†
¬† | at org.junit.Assert.assertThat(Assert.java:930) | ¬†
¬† | at org.elasticsearch.test.ESTestCase.checkStaticState(ESTestCase.java:729) | ¬†
¬† | at org.elasticsearch.test.ESTestCase.after(ESTestCase.java:520) | ¬†
¬† | at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) | ¬†
¬† | at java.base/java.lang.reflect.Method.invoke(Method.java:580) | ¬†
¬† | at com.carrotsearch.randomizedtesting.RandomizedRunner.invoke(RandomizedRunner.java:1758) | ¬†
¬† | at com.carrotsearch.randomizedtesting.RandomizedRunner$10.evaluate(RandomizedRunner.java:1004) | ¬†
¬† | at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36) | ¬†
¬† | at org.junit.rules.RunRules.evaluate(RunRules.java:20) | ¬†
¬† | at org.apache.lucene.tests.util.TestRuleSetupTeardownChained$1.evaluate(TestRuleSetupTeardownChained.java:48) | ¬†
¬† | at org.apache.lucene.tests.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:43) | ¬†
¬† | at org.apache.lucene.tests.util.TestRuleThreadAndTestName$1.evaluate(TestRuleThreadAndTestName.java:45) | ¬†
¬† | at org.apache.lucene.tests.util.TestRuleIgnoreAfterMaxFailures$1.evaluate(TestRuleIgnoreAfterMaxFailures.java:60) | ¬†
¬† | at org.apache.lucene.tests.util.TestRuleMarkFailure$1.evaluate(TestRuleMarkFailure.java:44) | ¬†
¬† | at org.junit.rules.RunRules.evaluate(RunRules.java:20) | ¬†
¬† | at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36) | ¬†
¬† | at com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:390) | ¬†
¬† | at com.carrotsearch.randomizedtesting.ThreadLeakControl.forkTimeoutingTask(ThreadLeakControl.java:843) | ¬†
¬† | at com.carrotsearch.randomizedtesting.ThreadLeakControl$3.evaluate(ThreadLeakControl.java:490) | ¬†
¬† | at com.carrotsearch.randomizedtesting.RandomizedRunner.runSingleTest(RandomizedRunner.java:955) | ¬†
¬† | at com.carrotsearch.randomizedtesting.RandomizedRunner$5.evaluate(RandomizedRunner.java:840) | ¬†
¬† | at com.carrotsearch.randomizedtesting.RandomizedRunner$6.evaluate(RandomizedRunner.java:891) | ¬†
¬† | at com.carrotsearch.randomizedtesting.RandomizedRunner$7.evaluate(RandomizedRunner.java:902) | ¬†
¬† | at org.apache.lucene.tests.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:43) | ¬†
¬† | at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36) | ¬†
¬† | at org.apache.lucene.tests.util.TestRuleStoreClassName$1.evaluate(TestRuleStoreClassName.java:38) | ¬†
¬† | at com.carrotsearch.randomizedtesting.rules.NoShadowingOrOverridesOnMethodsRule$1.evaluate(NoShadowingOrOverridesOnMethodsRule.java:40) | ¬†
¬† | at com.carrotsearch.randomizedtesting.rules.NoShadowingOrOverridesOnMethodsRule$1.evaluate(NoShadowingOrOverridesOnMethodsRule.java:40) | ¬†
¬† | at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36) | ¬†
¬† | at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36) | ¬†
¬† | at org.apache.lucene.tests.util.TestRuleAssertionsRequired$1.evaluate(TestRuleAssertionsRequired.java:53) | ¬†
¬† | at org.apache.lucene.tests.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:43) | ¬†
¬† | at org.apache.lucene.tests.util.TestRuleMarkFailure$1.evaluate(TestRuleMarkFailure.java:44) | ¬†
¬† | at org.apache.lucene.tests.util.TestRuleIgnoreAfterMaxFailures$1.evaluate(TestRuleIgnoreAfterMaxFailures.java:60) | ¬†
¬† | at org.apache.lucene.tests.util.TestRuleIgnoreTestSuites$1.evaluate(TestRuleIgnoreTestSuites.java:47) | ¬†
¬† | at org.junit.rules.RunRules.evaluate(RunRules.java:20) | ¬†
¬† | at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36) | ¬†
¬† | at com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:390) | ¬†
¬† | at com.carrotsearch.randomizedtesting.ThreadLeakControl.lambda$forkTimeoutingTask$0(ThreadLeakControl.java:850) | ¬†
¬† | at java.base/java.lang.Thread.run(Thread.java:1583)


```


<details><summary>More console output</summary>

```

1> [2024-01-08T18:48:34,322][INFO ][o.e.x.m.i.MlDistributedFailureIT] [testClusterWithTwoMlNodes_StopsDatafeed_GivenJobFailsOnReassign] before test | ¬†
-- | --
¬† | 1> [2024-01-08T18:48:34,327][INFO ][o.e.x.m.i.MlDistributedFailureIT] [testClusterWithTwoMlNodes_StopsDatafeed_GivenJobFailsOnReassign] [MlDistributedFailureIT#testClusterWithTwoMlNodes_StopsDatafeed_GivenJobFailsOnReassign]: setting up test | ¬†
¬† | 1> [2024-01-08T18:48:34,330][INFO ][o.e.t.InternalTestCluster] [testClusterWithTwoMlNodes_StopsDatafeed_GivenJobFailsOnReassign] Setup InternalTestCluster [TEST-TEST_WORKER_VM=[926]-CLUSTER_SEED=[5997584836398292222]-HASH=[26AF09C4CEA]-cluster] with seed [533BB3A1D3CA1CFE] using [0] dedicated masters, [0] (data) nodes and [0] coord only nodes (master nodes are [auto-managed]) | ¬†
¬† | 1> [2024-01-08T18:48:34,331][INFO ][o.e.x.m.i.MlDistributedFailureIT] [testClusterWithTwoMlNodes_StopsDatafeed_GivenJobFailsOnReassign] [MlDistributedFailureIT#testClusterWithTwoMlNodes_StopsDatafeed_GivenJobFailsOnReassign]: all set up test | ¬†
¬† | 1> [2024-01-08T18:48:34,339][INFO ][o.e.n.Node               ] [testClusterWithTwoMlNodes_StopsDatafeed_GivenJobFailsOnReassign] version[8.13.0-SNAPSHOT], pid[378403], build[unknown/012655d68ed7149bd287a8bf37c653dbd96bf098/2024-01-08T13:05:36.188992486Z], OS[Linux/4.19.0-25-cloud-amd64/amd64], JVM[Oracle Corporation/OpenJDK 64-Bit Server VM/21.0.1/21.0.1+12-29] | ¬†
¬† | 1> [2024-01-08T18:48:34,339][INFO ][o.e.n.Node               ] [testClusterWithTwoMlNodes_StopsDatafeed_GivenJobFailsOnReassign] JVM home [/opt/buildkite-agent/.gradle/jdks/oracle_corporation-21-amd64-linux/jdk-21.0.1], using bundled JDK [false] | ¬†
¬† | 1> [2024-01-08T18:48:34,339][INFO ][o.e.n.Node               ] [testClusterWithTwoMlNodes_StopsDatafeed_GivenJobFailsOnReassign] JVM arguments [-Des.scripting.update.ctx_in_params=false, -Des.search.rewrite_sort=true, -Des.transport.cname_in_publish_address=true, -Dgradle.dist.lib=/opt/buildkite-agent/.gradle/wrapper/dists/gradle-8.5-all/3zlzzgtsutfj0pbojr50n2l7z/gradle-8.5/lib, -Dgradle.user.home=/opt/buildkite-agent/.gradle, -Dgradle.worker.jar=/opt/buildkite-agent/.gradle/caches/8.5/workerMain/gradle-worker.jar, -Dio.netty.noKeySetOptimization=true, -Dio.netty.noUnsafe=true, -Dio.netty.recycler.maxCapacityPerThread=0, -Djava.awt.headless=true, -Djava.locale.providers=SPI,COMPAT, -Djava.security.manager=allow, -Djna.nosys=true, -Dorg.gradle.internal.worker.tmpdir=/opt/local-ssd/buildkite/builds/bk-agent-prod-gcp-1704718960660249490/elastic/elasticsearch-periodic-platform-support/x-pack/plugin/ml/build/tmp/internalClusterTest/work, -Dorg.gradle.native=false, -Dtests.artifact=ml, -Dtests.gradle=true, -Dtests.logger.level=WARN, -Dtests.security.manager=true, -Dtests.seed=9F7C125D3F23ADBF, -Dtests.task=:x-pack:plugin:ml:internalClusterTest, --add-opens=java.base/java.security.cert=ALL-UNNAMED, --add-opens=java.base/java.nio.channels=ALL-UNNAMED, --add-opens=java.base/java.net=ALL-UNNAMED, --add-opens=java.base/javax.net.ssl=ALL-UNNAMED, --add-opens=java.base/java.nio.file=ALL-UNNAMED, --add-opens=java.base/java.time=ALL-UNNAMED, --add-opens=java.management/java.lang.management=ALL-UNNAMED, -XX:+HeapDumpOnOutOfMemoryError, -esa, -XX:+UseG1GC, -XX:HeapDumpPath=/opt/local-ssd/buildkite/builds/bk-agent-prod-gcp-1704718960660249490/elastic/elasticsearch-periodic-platform-support/x-pack/plugin/ml/build/heapdump, -Xms512m, -Xmx512m, -Dfile.encoding=UTF-8, -Djava.io.tmpdir=/opt/local-ssd/buildkite/builds/bk-agent-prod-gcp-1704718960660249490/elastic/elasticsearch-periodic-platform-support/x-pack/plugin/ml/build/testrun/internalClusterTest/temp, -Duser.country, -Duser.language=en, -Duser.variant, -ea] | ¬†
¬† | 1> [2024-01-08T18:48:34,340][INFO ][o.e.n.Node               ] [testClusterWithTwoMlNodes_StopsDatafeed_GivenJobFailsOnReassign] Default Locale [es_PR] | ¬†
¬† | 1> [2024-01-08T18:48:34,340][WARN ][o.e.n.Node               ] [testClusterWithTwoMlNodes_StopsDatafeed_GivenJobFailsOnReassign] version [8.13.0-SNAPSHOT] is a pre-release version of Elasticsearch and is not suitable for production | ¬†
¬† | 1> [2024-01-08T18:48:34,340][WARN ][o.e.d.n.Node             ] [testClusterWithTwoMlNodes_StopsDatafeed_GivenJobFailsOnReassign] data_stream.dataset=""deprecation.elasticsearch"" data_stream.namespace=""default"" data_stream.type=""logs"" elasticsearch.event.category=""settings"" event.code=""shared-data-path"" message=""setting [path.shared_data] is deprecated and will be removed in a future release"" | ¬†
¬† | 1> [2024-01-08T18:48:34,457][WARN ][o.e.d.c.s.Settings       ] [testClusterWithTwoMlNodes_StopsDatafeed_GivenJobFailsOnReassign] data_stream.dataset=""deprecation.elasticsearch"" data_stream.namespace=""default"" data_stream.type=""logs"" elasticsearch.event.category=""settings"" event.code=""xpack.monitoring.elasticsearch.collection.enabled"" message=""[xpack.monitoring.elasticsearch.collection.enabled] setting was deprecated in Elasticsearch and will be removed in a future release."" | ¬†
¬† | 1> [2024-01-08T18:48:34,459][WARN ][o.e.d.c.s.Settings       ] [testClusterWithTwoMlNodes_StopsDatafeed_GivenJobFailsOnReassign] data_stream.dataset=""deprecation.elasticsearch"" data_stream.namespace=""default"" data_stream.type=""logs"" elasticsearch.event.category=""settings"" event.code=""xpack.monitoring.collection.enabled"" message=""[xpack.monitoring.collection.enabled] setting was deprecated in Elasticsearch and will be removed in a future release."" | ¬†
¬† | 1> [2024-01-08T18:48:34,464][INFO ][o.e.e.NodeEnvironment    ] [testClusterWithTwoMlNodes_StopsDatafeed_GivenJobFailsOnReassign] using [1] data paths, mounts [[/opt/local-ssd (/dev/nvme0n1)]], net usable_space [316.9gb], net total_space [368gb], types [ext4] | ¬†
¬† | 1> [2024-01-08T18:48:34,465][INFO ][o.e.e.NodeEnvironment    ] [testClusterWithTwoMlNodes_StopsDatafeed_GivenJobFailsOnReassign] heap size [512mb], compressed ordinary object pointers [true] | ¬†
¬† | 1> [2024-01-08T18:48:34,468][INFO ][o.e.n.Node               ] [testClusterWithTwoMlNodes_StopsDatafeed_GivenJobFailsOnReassign] node name [node_t0], node ID [ETYvSbF0THWFZZ064l8TkQ], cluster name [TEST-TEST_WORKER_VM=[926]-CLUSTER_SEED=[5997584836398292222]-HASH=[26AF09C4CEA]-cluster], roles [data_cold, data, remote_cluster_client, master, data_warm, data_content, transform, data_hot, ml, data_frozen, ingest] | ¬†
¬† | 1> [2024-01-08T18:48:34,656][INFO ][o.e.f.FeatureService     ] [testClusterWithTwoMlNodes_StopsDatafeed_GivenJobFailsOnReassign] Registered local node features [features_supported, health.dsl.info, usage.data_tiers.precalculate_stats] | ¬†
¬† | 1> [2024-01-08T18:48:34,680][WARN ][o.e.d.c.s.Settings       ] [testClusterWithTwoMlNodes_StopsDatafeed_GivenJobFailsOnReassign] data_stream.dataset=""deprecation.elasticsearch"" data_stream.namespace=""default"" data_stream.type=""logs"" elasticsearch.event.category=""settings"" event.code=""xpack.monitoring.elasticsearch.collection.enabled"" message=""[xpack.monitoring.elasticsearch.collection.enabled] setting was deprecated in Elasticsearch and will be removed in a future release."" | ¬†
¬† | 1> [2024-01-08T18:48:34,680][WARN ][o.e.d.c.s.Settings       ] [testClusterWithTwoMlNodes_StopsDatafeed_GivenJobFailsOnReassign] data_stream.dataset=""deprecation.elasticsearch"" data_stream.namespace=""default"" data_stream.type=""logs"" elasticsearch.event.category=""settings"" event.code=""xpack.monitoring.collection.enabled"" message=""[xpack.monitoring.collection.enabled] setting was deprecated in Elasticsearch and will be removed in a future release."" | ¬†
¬† | 1> [2024-01-08T18:48:34,681][INFO ][o.e.x.s.Security         ] [testClusterWithTwoMlNodes_StopsDatafeed_GivenJobFailsOnReassign] Security is disabled | ¬†
¬† | 1> [2024-01-08T18:48:34,685][INFO ][o.e.i.r.RecoverySettings ] [testClusterWithTwoMlNodes_StopsDatafeed_GivenJobFailsOnReassign] using rate limit [174mb] with [default=174mb, read=0b, write=0b, max=0b] | ¬†
¬† | 1> [2024-01-08T18:48:34,686][INFO ][o.e.d.DiscoveryModule    ] [testClusterWithTwoMlNodes_StopsDatafeed_GivenJobFailsOnReassign] using discovery type [multi-node] and seed hosts providers [settings, file] | ¬†
¬† | 1> [2024-01-08T18:48:34,740][INFO ][o.e.n.Node               ] [testClusterWithTwoMlNodes_StopsDatafeed_GivenJobFailsOnReassign] initialized | ¬†
¬† | 1> [2024-01-08T18:48:34,740][INFO ][o.e.n.Node               ] [testClusterWithTwoMlNodes_StopsDatafeed_GivenJobFailsOnReassign] starting ... | ¬†
¬† | 1> [2024-01-08T18:48:34,756][INFO ][o.e.t.TransportService   ] [testClusterWithTwoMlNodes_StopsDatafeed_GivenJobFailsOnReassign] publish_address {127.0.0.1:21701}, bound_addresses {[::1]:21701}, {127.0.0.1:21701} | ¬†
¬† | 1> [2024-01-08T18:48:34,779][INFO ][o.e.c.c.ClusterBootstrapService] [testClusterWithTwoMlNodes_StopsDatafeed_GivenJobFailsOnReassign] this node has not joined a bootstrapped cluster yet; [cluster.initial_master_nodes] is set to [node_t0] | ¬†
¬† | 1> [2024-01-08T18:48:34,793][INFO ][o.e.c.c.Coordinator      ] [testClusterWithTwoMlNodes_StopsDatafeed_GivenJobFailsOnReassign] setting initial configuration to VotingConfiguration{ETYvSbF0THWFZZ064l8TkQ} | ¬†
¬† | 1> [2024-01-08T18:48:34,793][WARN ][o.e.d.FileBasedSeedHostsProvider] [node_t0] expected, but did not find, a dynamic hosts list at [/opt/local-ssd/buildkite/builds/bk-agent-prod-gcp-1704718960660249490/elastic/elasticsearch-periodic-platform-support/x-pack/plugin/ml/build/testrun/internalClusterTest/temp/org.elasticsearch.xpack.ml.integration.MlDistributedFailureIT_9F7C125D3F23ADBF-001/tempDir-002/config/unicast_hosts.txt] | ¬†
¬† | 1> [2024-01-08T18:48:34,812][INFO ][o.e.n.Node               ] [testClusterWithTwoMlNodes_StopsDatafeed_GivenJobFailsOnReassign] started {node_t0}{ETYvSbF0THWFZZ064l8TkQ}{uRRvBlDNTQ-OBcomBGMbNg}{node_t0}{127.0.0.1}{127.0.0.1:21701}{cdfhilmrstw}{8.13.0}{7000099-8501000}{ml.machine_memory=101372280832, ml.allocated_processors_double=1.0, ml.config_version=12.0.0, ml.allocated_processors=1, ml.max_jvm_size=536870912, xpack.installed=true} | ¬†
¬† | 1> [2024-01-08T18:48:34,870][INFO ][o.e.c.s.MasterService    ] [node_t0] elected-as-master ([1] nodes joined in term 1)[_FINISH_ELECTION_, {node_t0}{ETYvSbF0THWFZZ064l8TkQ}{uRRvBlDNTQ-OBcomBGMbNg}{node_t0}{127.0.0.1}{127.0.0.1:21701}{cdfhilmrstw}{8.13.0}{7000099-8501000} completing election], term: 1, version: 1, delta: master node changed {previous [], current [{node_t0}{ETYvSbF0THWFZZ064l8TkQ}{uRRvBlDNTQ-OBcomBGMbNg}{node_t0}{127.0.0.1}{127.0.0.1:21701}{cdfhilmrstw}{8.13.0}{7000099-8501000}]} | ¬†
¬† | 1> [2024-01-08T18:48:34,878][INFO ][o.e.c.c.CoordinationState] [node_t0] cluster UUID set to [GBPvAPrnSaWEW_GcRSld4w] | ¬†
¬† | 1> [2024-01-08T18:48:34,885][INFO ][o.e.c.s.ClusterApplierService] [node_t0] master node changed {previous [], current [{node_t0}{ETYvSbF0THWFZZ064l8TkQ}{uRRvBlDNTQ-OBcomBGMbNg}{node_t0}{127.0.0.1}{127.0.0.1:21701}{cdfhilmrstw}{8.13.0}{7000099-8501000}]}, term: 1, version: 1, reason: Publication{term=1, version=1} | ¬†
¬† | 1> [2024-01-08T18:48:34,894][INFO ][o.e.c.c.NodeJoinExecutor ] [node_t0] node-join: [{node_t0}{ETYvSbF0THWFZZ064l8TkQ}{uRRvBlDNTQ-OBcomBGMbNg}{node_t0}{127.0.0.1}{127.0.0.1:21701}{cdfhilmrstw}{8.13.0}{7000099-8501000}] with reason [completing election] | ¬†
¬† | 1> [2024-01-08T18:48:34,905][INFO ][o.e.g.GatewayService     ] [node_t0] recovered [0] indices into cluster_state | ¬†
¬† | 1> [2024-01-08T18:48:34,913][INFO ][o.e.c.m.MetadataIndexTemplateService] [node_t0] adding index template [.ml-notifications-000002] for index patterns [.ml-notifications-000002] | ¬†
¬† | 1> [2024-01-08T18:48:34,918][INFO ][o.e.c.m.MetadataIndexTemplateService] [node_t0] adding index template [.ml-stats] for index patterns [.ml-stats-*] | ¬†
¬† | 1> [2024-01-08T18:48:34,922][INFO ][o.e.c.m.MetadataIndexTemplateService] [node_t0] adding index template [.ml-state] for index patterns [.ml-state*] | ¬†
¬† | 1> [2024-01-08T18:48:34,934][INFO ][o.e.c.m.MetadataIndexTemplateService] [node_t0] adding index template [.ml-anomalies-] for index patterns [.ml-anomalies-*] | ¬†
¬† | 1> [2024-01-08T18:48:34,964][INFO ][o.e.c.m.MetadataIndexTemplateService] [node_t0] adding index template [.monitoring-ent-search-mb] for index patterns [.monitoring-ent-search-8-*] | ¬†
¬† | 1> [2024-01-08T18:48:34,988][INFO ][o.e.c.m.MetadataIndexTemplateService] [node_t0] adding index template [.monitoring-logstash-mb] for index patterns [.monitoring-logstash-8-*] | ¬†
¬† | 1> [2024-01-08T18:48:34,992][INFO ][o.e.c.m.MetadataIndexTemplateService] [node_t0] adding template [.monitoring-alerts-7] for index patterns [.monitoring-alerts-7] | ¬†
¬† | 1> [2024-01-08T18:48:35,010][INFO ][o.e.c.m.MetadataIndexTemplateService] [node_t0] adding template [.monitoring-kibana] for index patterns [.monitoring-kibana-7-*] | ¬†
¬† | 1> [2024-01-08T18:48:35,018][INFO ][o.e.c.m.MetadataIndexTemplateService] [node_t0] adding template [.monitoring-logstash] for index patterns [.monitoring-logstash-7-*] | ¬†
¬† | 1> [2024-01-08T18:48:35,030][INFO ][o.e.c.m.MetadataIndexTemplateService] [node_t0] adding template [.monitoring-beats] for index patterns [.monitoring-beats-7-*] | ¬†
¬† | 1> [2024-01-08T18:48:35,043][INFO ][o.e.c.m.MetadataIndexTemplateService] [node_t0] adding template [.monitoring-es] for index patterns [.monitoring-es-7-*] | ¬†
¬† | 1> [2024-01-08T18:48:35,053][INFO ][o.e.c.m.MetadataIndexTemplateService] [node_t0] adding index template [.monitoring-kibana-mb] for index patterns [.monitoring-kibana-8-*] | ¬†
¬† | 1> [2024-01-08T18:48:35,076][INFO ][o.e.c.m.MetadataIndexTemplateService] [node_t0] adding index template [.monitoring-beats-mb] for index patterns [.monitoring-beats-8-*] | ¬†
¬† | 1> [2024-01-08T18:48:35,111][INFO ][o.e.c.m.MetadataIndexTemplateService] [node_t0] adding index template [.monitoring-es-mb] for index patterns [.monitoring-es-8-*] | ¬†
¬† | 1> [2024-01-08T18:48:35,127][INFO ][o.e.x.i.a.TransportPutLifecycleAction] [node_t0] adding index lifecycle policy [ml-size-based-ilm-policy] | ¬†
¬† | 1> [2024-01-08T18:48:35,147][WARN ][o.e.d.c.s.Settings       ] [node_t0] data_stream.dataset=""deprecation.elasticsearch"" data_stream.namespace=""default"" data_stream.type=""logs"" elasticsearch.event.category=""settings"" event.code=""xpack.monitoring.elasticsearch.collection.enabled"" message=""[xpack.monitoring.elasticsearch.collection.enabled] setting was deprecated in Elasticsearch and will be removed in a future release."" | ¬†
¬† | 1> [2024-01-08T18:48:35,148][WARN ][o.e.d.c.s.Settings       ] [node_t0] data_stream.dataset=""deprecation.elasticsearch"" data_stream.namespace=""default"" data_stream.type=""logs"" elasticsearch.event.category=""settings"" event.code=""xpack.monitoring.elasticsearch.collection.enabled"" message=""[xpack.monitoring.elasticsearch.collection.enabled] setting was deprecated in Elasticsearch and will be removed in a future release."" | ¬†
¬† | 1> [2024-01-08T18:48:35,148][WARN ][o.e.d.c.s.Settings       ] [node_t0] data_stream.dataset=""deprecation.elasticsearch"" data_stream.namespace=""default"" data_stream.type=""logs"" elasticsearch.event.category=""settings"" event.code=""xpack.monitoring.elasticsearch.collection.enabled"" message=""[xpack.monitoring.elasticsearch.collection.enabled] setting was deprecated in Elasticsearch and will be removed in a future release."" | ¬†
¬† | 1> [2024-01-08T18:48:35,150][WARN ][o.e.d.c.s.Settings       ] [node_t0] data_stream.dataset=""deprecation.elasticsearch"" data_stream.namespace=""default"" data_stream.type=""logs"" elasticsearch.event.category=""settings"" event.code=""xpack.monitoring.collection.enabled"" message=""[xpack.monitoring.collection.enabled] setting was deprecated in Elasticsearch and will be removed in a future release."" | ¬†
¬† | 1> [2024-01-08T18:48:35,150][WARN ][o.e.d.c.s.Settings       ] [node_t0] data_stream.dataset=""deprecation.elasticsearch"" data_stream.namespace=""default"" data_stream.type=""logs"" elasticsearch.event.category=""settings"" event.code=""xpack.monitoring.collection.enabled"" message=""[xpack.monitoring.collection.enabled] setting was deprecated in Elasticsearch and will be removed in a future release."" | ¬†
¬† | 1> [2024-01-08T18:48:35,150][WARN ][o.e.d.c.s.Settings       ] [node_t0] data_stream.dataset=""deprecation.elasticsearch"" data_stream.namespace=""default"" data_stream.type=""logs"" elasticsearch.event.category=""settings"" event.code=""xpack.monitoring.collection.enabled"" message=""[xpack.monitoring.collection.enabled] setting was deprecated in Elasticsearch and will be removed in a future release."" | ¬†
¬† | 1> [2024-01-08T18:48:35,168][WARN ][o.e.d.c.s.Settings       ] [node_t0] data_stream.dataset=""deprecation.elasticsearch"" data_stream.namespace=""default"" data_stream.type=""logs"" elasticsearch.event.category=""settings"" event.code=""xpack.monitoring.elasticsearch.collection.enabled"" message=""[xpack.monitoring.elasticsearch.collection.enabled] setting was deprecated in Elasticsearch and will be removed in a future release."" | ¬†
¬† | 1> [2024-01-08T18:48:35,168][WARN ][o.e.d.c.s.Settings       ] [node_t0] data_stream.dataset=""deprecation.elasticsearch"" data_stream.namespace=""default"" data_stream.type=""logs"" elasticsearch.event.category=""settings"" event.code=""xpack.monitoring.elasticsearch.collection.enabled"" message=""[xpack.monitoring.elasticsearch.collection.enabled] setting was deprecated in Elasticsearch and will be removed in a future release."" | ¬†
¬† | 1> [2024-01-08T18:48:35,168][WARN ][o.e.d.c.s.Settings       ] [node_t0] data_stream.dataset=""deprecation.elasticsearch"" data_stream.namespace=""default"" data_stream.type=""logs"" elasticsearch.event.category=""settings"" event.code=""xpack.monitoring.collection.enabled"" message=""[xpack.monitoring.collection.enabled] setting was deprecated in Elasticsearch and will be removed in a future release."" | ¬†
¬† | 1> [2024-01-08T18:48:35,169][WARN ][o.e.d.c.s.Settings       ] [node_t0] data_stream.dataset=""deprecation.elasticsearch"" data_stream.namespace=""default"" data_stream.type=""logs"" elasticsearch.event.category=""settings"" event.code=""xpack.monitoring.collection.enabled"" message=""[xpack.monitoring.collection.enabled] setting was deprecated in Elasticsearch and will be removed in a future release."" | ¬†
¬† | 1> [2024-01-08T18:48:35,194][INFO ][o.e.h.n.s.HealthNodeTaskExecutor] [node_t0] Node [{node_t0}{ETYvSbF0THWFZZ064l8TkQ}] is selected as the current health node. | ¬†
¬† | 1> [2024-01-08T18:48:35,197][INFO ][o.e.t.InternalTestCluster] [testClusterWithTwoMlNodes_StopsDatafeed_GivenJobFailsOnReassign] changing cluster size from 1 data nodes to 0 | ¬†
¬† | 1> [2024-01-08T18:48:35,197][INFO ][o.e.n.Node               ] [testClusterWithTwoMlNodes_StopsDatafeed_GivenJobFailsOnReassign] stopping ... | ¬†
¬† | 1> [2024-01-08T18:48:35,200][ERROR][o.e.l.StartupSelfGeneratedLicenseTask] [node_t0] unexpected failure during [maybe generate license for cluster] | ¬†
¬† | 1> org.elasticsearch.cluster.coordination.FailedToCommitClusterStateException: node closed | ¬†
¬† | 1> 	at org.elasticsearch.cluster.service.MasterService.forkQueueProcessor(MasterService.java:1292) ~[elasticsearch-8.13.0-SNAPSHOT.jar:8.13.0-SNAPSHOT] | ¬†
¬† | 1> 	at org.elasticsearch.cluster.service.MasterService$5.onCompletion(MasterService.java:1256) ~[elasticsearch-8.13.0-SNAPSHOT.jar:8.13.0-SNAPSHOT] | ¬†
¬† | 1> 	at org.elasticsearch.cluster.service.MasterService$5$1.onResponse(MasterService.java:1219) ~[elasticsearch-8.13.0-SNAPSHOT.jar:8.13.0-SNAPSHOT] | ¬†
¬† | 1> 	at org.elasticsearch.cluster.service.MasterService$5$1.onResponse(MasterService.java:1216) ~[elasticsearch-8.13.0-SNAPSHOT.jar:8.13.0-SNAPSHOT] | ¬†
¬† | 1> 	at org.elasticsearch.action.ActionListenerImplementations$RunBeforeActionListener.onResponse(ActionListenerImplementations.java:298) ~[elasticsearch-8.13.0-SNAPSHOT.jar:8.13.0-SNAPSHOT] | ¬†
¬† | 1> 	at org.elasticsearch.action.ActionListener$3.onResponse(ActionListener.java:312) ~[elasticsearch-8.13.0-SNAPSHOT.jar:8.13.0-SNAPSHOT] | ¬†
¬† | 1> 	at org.elasticsearch.action.ActionListenerImplementations$RunAfterActionListener.onResponse(ActionListenerImplementations.java:260) ~[elasticsearch-8.13.0-SNAPSHOT.jar:8.13.0-SNAPSHOT] | ¬†
¬† | 1> 	at org.elasticsearch.action.ActionListener$3.onResponse(ActionListener.java:312) ~[elasticsearch-8.13.0-SNAPSHOT.jar:8.13.0-SNAPSHOT] | ¬†
¬† | 1> 	at org.elasticsearch.action.ActionListenerImplementations$DelegatingResponseActionListener.onResponse(ActionListenerImplementations.java:182) ~[elasticsearch-8.13.0-SNAPSHOT.jar:8.13.0-SNAPSHOT] | ¬†
¬† | 1> 	at org.elasticsearch.cluster.service.MasterService$2.onResponse(MasterService.java:284) ~[elasticsearch-8.13.0-SNAPSHOT.jar:8.13.0-SNAPSHOT] | ¬†
¬† | 1> 	at org.elasticsearch.cluster.service.MasterService$2.onResponse(MasterService.java:281) ~[elasticsearch-8.13.0-SNAPSHOT.jar:8.13.0-SNAPSHOT] | ¬†
¬† | 1> 	at org.elasticsearch.cluster.service.MasterService$3.run(MasterService.java:451) ~[elasticsearch-8.13.0-SNAPSHOT.jar:8.13.0-SNAPSHOT] | ¬†
¬† | 1> 	at org.elasticsearch.action.ActionListenerImplementations$RunAfterActionListener.onFailure(ActionListenerImplementations.java:271) ~[elasticsearch-8.13.0-SNAPSHOT.jar:8.13.0-SNAPSHOT] | ¬†
¬† | 1> 	at org.elasticsearch.action.ActionListenerImplementations.safeAcceptException(ActionListenerImplementations.java:62) ~[elasticsearch-8.13.0-SNAPSHOT.jar:8.13.0-SNAPSHOT] | ¬†
¬† | 1> 	at org.elasticsearch.action.ActionListenerImplementations.safeOnFailure(ActionListenerImplementations.java:73) ~[elasticsearch-8.13.0-SNAPSHOT.jar:8.13.0-SNAPSHOT] | ¬†
¬† | 1> 	at org.elasticsearch.action.ActionListener$3.onFailure(ActionListener.java:322) ~[elasticsearch-8.13.0-SNAPSHOT.jar:8.13.0-SNAPSHOT] | ¬†
¬† | 1> 	at org.elasticsearch.action.ActionListenerImplementations.safeAcceptException(ActionListenerImplementations.java:62) ~[elasticsearch-8.13.0-SNAPSHOT.jar:8.13.0-SNAPSHOT] | ¬†
¬† | 1> 	at org.elasticsearch.action.ActionListenerImplementations.safeOnFailure(ActionListenerImplementations.java:73) ~[elasticsearch-8.13.0-SNAPSHOT.jar:8.13.0-SNAPSHOT] | ¬†
¬† | 1> 	at org.elasticsearch.action.DelegatingActionListener.onFailure(DelegatingActionListener.java:27) ~[elasticsearch-8.13.0-SNAPSHOT.jar:8.13.0-SNAPSHOT] | ¬†
¬† | 1> 	at org.elasticsearch.action.support.ContextPreservingActionListener.onFailure(ContextPreservingActionListener.java:39) ~[elasticsearch-8.13.0-SNAPSHOT.jar:8.13.0-SNAPSHOT] | ¬†
¬† | 1> 	at org.elasticsearch.action.ActionRunnable.onFailure(ActionRunnable.java:146) ~[elasticsearch-8.13.0-SNAPSHOT.jar:8.13.0-SNAPSHOT] | ¬†
¬† | 1> 	at org.elasticsearch.common.util.concurrent.AbstractRunnable.onRejection(AbstractRunnable.java:52) ~[elasticsearch-8.13.0-SNAPSHOT.jar:8.13.0-SNAPSHOT] | ¬†
¬† | 1> 	at org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.onRejection(ThreadContext.java:972) ~[elasticsearch-8.13.0-SNAPSHOT.jar:8.13.0-SNAPSHOT] | ¬†
¬† | 1> 	at org.elasticsearch.common.util.concurrent.EsThreadPoolExecutor.execute(EsThreadPoolExecutor.java:82) ~[elasticsearch-8.13.0-SNAPSHOT.jar:8.13.0-SNAPSHOT] | ¬†
¬† | 1> 	at org.elasticsearch.action.support.ThreadedActionListener.onResponse(ThreadedActionListener.java:31) ~[elasticsearch-8.13.0-SNAPSHOT.jar:8.13.0-SNAPSHOT] | ¬†
¬† | 1> 	at org.elasticsearch.cluster.coordination.Coordinator$CoordinatorPublication$4$1.onResponse(Coordinator.java:2024) ~[elasticsearch-8.13.0-SNAPSHOT.jar:8.13.0-SNAPSHOT] | ¬†
¬† | 1> 	at org.elasticsearch.cluster.coordination.Coordinator$CoordinatorPublication$4$1.onResponse(Coordinator.java:1956) ~[elasticsearch-8.13.0-SNAPSHOT.jar:8.13.0-SNAPSHOT] | ¬†
¬† | 1> 	at org.elasticsearch.cluster.service.ClusterApplierService$ClusterApplyActionListener.onResponse(ClusterApplierService.java:598) ~[elasticsearch-8.13.0-SNAPSHOT.jar:8.13.0-SNAPSHOT] | ¬†
¬† | 1> 	at org.elasticsearch.cluster.service.ClusterApplierService$ClusterApplyActionListener.onResponse(ClusterApplierService.java:569) ~[elasticsearch-8.13.0-SNAPSHOT.jar:8.13.0-SNAPSHOT] | ¬†
¬† | 1> 	at org.elasticsearch.cluster.service.ClusterApplierService.runTask(ClusterApplierService.java:439) ~[elasticsearch-8.13.0-SNAPSHOT.jar:8.13.0-SNAPSHOT] | ¬†
¬† | 1> 	at org.elasticsearch.cluster.service.ClusterApplierService$UpdateTask.run(ClusterApplierService.java:154) ~[elasticsearch-8.13.0-SNAPSHOT.jar:8.13.0-SNAPSHOT] | ¬†
¬† | 1> 	at org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingRunnable.run(ThreadContext.java:917) ~[elasticsearch-8.13.0-SNAPSHOT.jar:8.13.0-SNAPSHOT] | ¬†
¬† | 1> 	at org.elasticsearch.common.util.concurrent.PrioritizedEsThreadPoolExecutor$TieBreakingPrioritizedRunnable.runAndClean(PrioritizedEsThreadPoolExecutor.java:217) ~[elasticsearch-8.13.0-SNAPSHOT.jar:8.13.0-SNAPSHOT] | ¬†
¬† | 1> 	at org.elasticsearch.common.util.concurrent.PrioritizedEsThreadPoolExecutor$TieBreakingPrioritizedRunnable.run(PrioritizedEsThreadPoolExecutor.java:183) ~[elasticsearch-8.13.0-SNAPSHOT.jar:8.13.0-SNAPSHOT] | ¬†
¬† | 1> 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[?:?] | ¬†
¬† | 1> 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[?:?] | ¬†
¬† | 1> 	at java.lang.Thread.run(Thread.java:1583) ~[?:?] | ¬†
¬† | 1> Caused by: org.elasticsearch.common.util.concurrent.EsRejectedExecutionException: master service is in state [STOPPED] | ¬†
¬† | 1> 	at org.elasticsearch.cluster.service.MasterService.getRejectionException(MasterService.java:1306) ~[elasticsearch-8.13.0-SNAPSHOT.jar:8.13.0-SNAPSHOT] | ¬†
¬† | 1> 	... 37 more


```

</details>",jonathan-buttner,closed,"['>test-failure', ':ml', 'Team:ML', 'needs:risk']",https://github.com/elastic/elasticsearch/issues/104071,2024-01-08T16:57:42Z,4,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/104071,"{
  ""application_resource"": ""yes""
}"
135,103952,SecurityActionFilter performs async actions without retaining refs to requests,"An `ActionRequest` may hold nontrivial resources, implementing the `RefCounted` interface to ensure its resources are retained until no longer necessary at which point they are released promptly. Our internal APIs are generally refcount-neutral, acquiring refs as needed to keep resources alive beyond the scope of the executing method and releasing the acquired ref when no longer needed. In particular, async code must acquire a ref before going async and then release the ref once the async execution no longer needs it.

Today `SecurityActionFilter` does not respect this refcounting discipline: along some pathways it performs async actions without first acquiring a ref to the request. By the time the async action comes to being executed the request may already be closed.

This is not technically a bug today because in practice no `ActionRequest` instances hold nontrivial resources, but we need to change this (see e.g. https://github.com/elastic/elasticsearch/pull/103356, https://github.com/elastic/elasticsearch/pull/103161, https://github.com/elastic/elasticsearch/pull/102778) and cannot do so correctly without pushing the right refcounting discipline through the security module. It would have been a bug if we hadn't noticed before 8.13 was released tho, see https://github.com/elastic/elasticsearch/pull/103953.",DaveCTurner,closed,"['>bug', ':Security/Security', 'Team:Security']",https://github.com/elastic/elasticsearch/issues/103952,2024-01-05T07:59:45Z,10,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/103952,"{
  ""application_resource"": ""yes""
}"
136,103808,[CI] MLModelDeploymentFullClusterRestartIT bwc tests failing,"**Build scan:**
https://gradle-enterprise.elastic.co/s/d66ig3jihd6pq/tests/:x-pack:qa:full-cluster-restart:v8.11.4%23bwcTest/org.elasticsearch.xpack.restart.MLModelDeploymentFullClusterRestartIT/testDeploymentSurvivesRestart%20%7Bcluster=UPGRADED%7D


**Reproduction line:**
```
./gradlew ':x-pack:qa:full-cluster-restart:v8.11.4#bwcTest' -Dtests.class=""org.elasticsearch.xpack.restart.MLModelDeploymentFullClusterRestartIT"" -Dtests.method=""testDeploymentSurvivesRestart {cluster=UPGRADED}"" -Dtests.seed=339D93ECF7B44080 -Dtests.bwc=true -Dtests.locale=ga -Dtests.timezone=Africa/Algiers -Druntime.java=21
```

**Applicable branches:**
main

**Reproduces locally?:**
Didn't try

**Failure history:**
[Failure dashboard for `org.elasticsearch.xpack.restart.MLModelDeploymentFullClusterRestartIT#testDeploymentSurvivesRestart {cluster=UPGRADED}`](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&_a=(controlGroupInput:(chainingSystem:HIERARCHICAL,controlStyle:twoLine,ignoreParentSettings:(ignoreFilters:!f,ignoreQuery:!f,ignoreTimerange:!f,ignoreValidations:!t),panels:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(explicitInput:(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,enhancements:(),fieldName:task.keyword,grow:!t,id:'0c0c9cb8-ccd2-45c6-9b13-96bac4abc542',searchTechnique:wildcard,selectedOptions:!(),singleSelect:!t,title:'Gradle%20Task',width:medium),grow:!t,order:0,type:optionsListControl,width:small),'144933da-5c1b-4257-a969-7f43455a7901':(explicitInput:(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,enhancements:(),fieldName:name.keyword,grow:!t,id:'144933da-5c1b-4257-a969-7f43455a7901',searchTechnique:wildcard,selectedOptions:!('testDeploymentSurvivesRestart%20%7Bcluster%3DUPGRADED%7D'),title:Test,width:medium),grow:!t,order:2,type:optionsListControl,width:medium),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(explicitInput:(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,enhancements:(),fieldName:className.keyword,grow:!t,id:'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850',searchTechnique:wildcard,selectedOptions:!('org.elasticsearch.xpack.restart.MLModelDeploymentFullClusterRestartIT'),title:Suite,width:medium),grow:!t,order:1,type:optionsListControl,width:medium)))))


**Failure excerpt:**
```
java.lang.AssertionError: Inference failed

  at __randomizedtesting.SeedInfo.seed([339D93ECF7B44080:DAC69A8C811AA6A0]:0)
  at org.elasticsearch.xpack.restart.MLModelDeploymentFullClusterRestartIT.lambda$testDeploymentSurvivesRestart$2(MLModelDeploymentFullClusterRestartIT.java:120)
  at org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:1278)
  at org.elasticsearch.xpack.restart.MLModelDeploymentFullClusterRestartIT.testDeploymentSurvivesRestart(MLModelDeploymentFullClusterRestartIT.java:113)
  at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
  at java.lang.reflect.Method.invoke(Method.java:580)
  at com.carrotsearch.randomizedtesting.RandomizedRunner.invoke(RandomizedRunner.java:1758)
  at com.carrotsearch.randomizedtesting.RandomizedRunner$8.evaluate(RandomizedRunner.java:946)
  at com.carrotsearch.randomizedtesting.RandomizedRunner$9.evaluate(RandomizedRunner.java:982)
  at com.carrotsearch.randomizedtesting.RandomizedRunner$10.evaluate(RandomizedRunner.java:996)
  at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)
  at org.apache.lucene.tests.util.TestRuleSetupTeardownChained$1.evaluate(TestRuleSetupTeardownChained.java:48)
  at org.apache.lucene.tests.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:43)
  at org.apache.lucene.tests.util.TestRuleThreadAndTestName$1.evaluate(TestRuleThreadAndTestName.java:45)
  at org.apache.lucene.tests.util.TestRuleIgnoreAfterMaxFailures$1.evaluate(TestRuleIgnoreAfterMaxFailures.java:60)
  at org.apache.lucene.tests.util.TestRuleMarkFailure$1.evaluate(TestRuleMarkFailure.java:44)
  at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)
  at com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:390)
  at com.carrotsearch.randomizedtesting.ThreadLeakControl.forkTimeoutingTask(ThreadLeakControl.java:843)
  at com.carrotsearch.randomizedtesting.ThreadLeakControl$3.evaluate(ThreadLeakControl.java:490)
  at com.carrotsearch.randomizedtesting.RandomizedRunner.runSingleTest(RandomizedRunner.java:955)
  at com.carrotsearch.randomizedtesting.RandomizedRunner$5.evaluate(RandomizedRunner.java:840)
  at com.carrotsearch.randomizedtesting.RandomizedRunner$6.evaluate(RandomizedRunner.java:891)
  at com.carrotsearch.randomizedtesting.RandomizedRunner$7.evaluate(RandomizedRunner.java:902)
  at org.elasticsearch.test.cluster.local.DefaultLocalElasticsearchCluster$1.evaluate(DefaultLocalElasticsearchCluster.java:47)
  at org.apache.lucene.tests.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:43)
  at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)
  at org.apache.lucene.tests.util.TestRuleStoreClassName$1.evaluate(TestRuleStoreClassName.java:38)
  at com.carrotsearch.randomizedtesting.rules.NoShadowingOrOverridesOnMethodsRule$1.evaluate(NoShadowingOrOverridesOnMethodsRule.java:40)
  at com.carrotsearch.randomizedtesting.rules.NoShadowingOrOverridesOnMethodsRule$1.evaluate(NoShadowingOrOverridesOnMethodsRule.java:40)
  at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)
  at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)
  at org.apache.lucene.tests.util.TestRuleAssertionsRequired$1.evaluate(TestRuleAssertionsRequired.java:53)
  at org.apache.lucene.tests.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:43)
  at org.apache.lucene.tests.util.TestRuleMarkFailure$1.evaluate(TestRuleMarkFailure.java:44)
  at org.apache.lucene.tests.util.TestRuleIgnoreAfterMaxFailures$1.evaluate(TestRuleIgnoreAfterMaxFailures.java:60)
  at org.apache.lucene.tests.util.TestRuleIgnoreTestSuites$1.evaluate(TestRuleIgnoreTestSuites.java:47)
  at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)
  at com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:390)
  at com.carrotsearch.randomizedtesting.ThreadLeakControl.lambda$forkTimeoutingTask$0(ThreadLeakControl.java:850)
  at java.lang.Thread.run(Thread.java:1583)

  Caused by: org.elasticsearch.client.ResponseException: method [POST], host [http://[::1]:37373], URI [/_ml/trained_models/trained-model-full-cluster-restart/deployment/_infer], status line [HTTP/1.1 408 Request Timeout]
  Warnings: [[POST /_ml/trained_models/{model_id}/deployment/_infer] is deprecated! Use [POST /_ml/trained_models/{model_id}/_infer] instead.]
  {""error"":{""root_cause"":[{""type"":""status_exception"",""reason"":""timeout [10s] waiting for inference result""}],""type"":""status_exception"",""reason"":""timeout [10s] waiting for inference result""},""status"":408}

    at org.elasticsearch.client.RestClient.convertResponse(RestClient.java:351)
    at org.elasticsearch.client.RestClient.performRequest(RestClient.java:317)
    at org.elasticsearch.client.RestClient.performRequest(RestClient.java:292)
    at org.elasticsearch.xpack.restart.MLModelDeploymentFullClusterRestartIT.infer(MLModelDeploymentFullClusterRestartIT.java:233)
    at org.elasticsearch.xpack.restart.MLModelDeploymentFullClusterRestartIT.assertInfer(MLModelDeploymentFullClusterRestartIT.java:145)
    at org.elasticsearch.xpack.restart.MLModelDeploymentFullClusterRestartIT.lambda$testDeploymentSurvivesRestart$2(MLModelDeploymentFullClusterRestartIT.java:115)
    at org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:1278)
    at org.elasticsearch.xpack.restart.MLModelDeploymentFullClusterRestartIT.testDeploymentSurvivesRestart(MLModelDeploymentFullClusterRestartIT.java:113)
    at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
    at java.lang.reflect.Method.invoke(Method.java:580)
    at com.carrotsearch.randomizedtesting.RandomizedRunner.invoke(RandomizedRunner.java:1758)
    at com.carrotsearch.randomizedtesting.RandomizedRunner$8.evaluate(RandomizedRunner.java:946)
    at com.carrotsearch.randomizedtesting.RandomizedRunner$9.evaluate(RandomizedRunner.java:982)
    at com.carrotsearch.randomizedtesting.RandomizedRunner$10.evaluate(RandomizedRunner.java:996)
    at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)
    at org.apache.lucene.tests.util.TestRuleSetupTeardownChained$1.evaluate(TestRuleSetupTeardownChained.java:48)
    at org.apache.lucene.tests.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:43)
    at org.apache.lucene.tests.util.TestRuleThreadAndTestName$1.evaluate(TestRuleThreadAndTestName.java:45)
    at org.apache.lucene.tests.util.TestRuleIgnoreAfterMaxFailures$1.evaluate(TestRuleIgnoreAfterMaxFailures.java:60)
    at org.apache.lucene.tests.util.TestRuleMarkFailure$1.evaluate(TestRuleMarkFailure.java:44)
    at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)
    at com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:390)
    at com.carrotsearch.randomizedtesting.ThreadLeakControl.forkTimeoutingTask(ThreadLeakControl.java:843)
    at com.carrotsearch.randomizedtesting.ThreadLeakControl$3.evaluate(ThreadLeakControl.java:490)
    at com.carrotsearch.randomizedtesting.RandomizedRunner.runSingleTest(RandomizedRunner.java:955)
    at com.carrotsearch.randomizedtesting.RandomizedRunner$5.evaluate(RandomizedRunner.java:840)
    at com.carrotsearch.randomizedtesting.RandomizedRunner$6.evaluate(RandomizedRunner.java:891)
    at com.carrotsearch.randomizedtesting.RandomizedRunner$7.evaluate(RandomizedRunner.java:902)
    at org.elasticsearch.test.cluster.local.DefaultLocalElasticsearchCluster$1.evaluate(DefaultLocalElasticsearchCluster.java:47)
    at org.apache.lucene.tests.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:43)
    at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)
    at org.apache.lucene.tests.util.TestRuleStoreClassName$1.evaluate(TestRuleStoreClassName.java:38)
    at com.carrotsearch.randomizedtesting.rules.NoShadowingOrOverridesOnMethodsRule$1.evaluate(NoShadowingOrOverridesOnMethodsRule.java:40)
    at com.carrotsearch.randomizedtesting.rules.NoShadowingOrOverridesOnMethodsRule$1.evaluate(NoShadowingOrOverridesOnMethodsRule.java:40)
    at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)
    at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)
    at org.apache.lucene.tests.util.TestRuleAssertionsRequired$1.evaluate(TestRuleAssertionsRequired.java:53)
    at org.apache.lucene.tests.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:43)
    at org.apache.lucene.tests.util.TestRuleMarkFailure$1.evaluate(TestRuleMarkFailure.java:44)
    at org.apache.lucene.tests.util.TestRuleIgnoreAfterMaxFailures$1.evaluate(TestRuleIgnoreAfterMaxFailures.java:60)
    at org.apache.lucene.tests.util.TestRuleIgnoreTestSuites$1.evaluate(TestRuleIgnoreTestSuites.java:47)
    at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)
    at com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:390)
    at com.carrotsearch.randomizedtesting.ThreadLeakControl.lambda$forkTimeoutingTask$0(ThreadLeakControl.java:850)
    at java.lang.Thread.run(Thread.java:1583)

```",DaveCTurner,closed,"['>test-failure', ':ml', 'Team:ML', 'needs:risk']",https://github.com/elastic/elasticsearch/issues/103808,2024-01-02T16:49:57Z,8,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/103808,"{
  ""application_resource"": ""yes""
}"
137,102907,Build requires network access to check it's using the right Gradle version,"Discovered this while on a plane journey without said network access:

https://github.com/elastic/elasticsearch/blob/759280c75856de312ec7b2a99c219cec4cc61b1b/build-tools-internal/build.gradle#L361-L363

Is there a way we can make this do something reasonable without network access?",DaveCTurner,closed,"['>bug', ':Delivery/Build', 'Team:Delivery']",https://github.com/elastic/elasticsearch/issues/102907,2023-12-04T08:00:50Z,7,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/102907,"{
  ""application_resource"": ""no""
}"
138,102700,[CI] NodesCachesStatsIntegTests testNodesCachesStats failing,"The same test is failing in https://github.com/elastic/elasticsearch/issues/99766 but the root cause is different (Array out of bounds there, Invalid vInt here).

Failed on a PR build

**Build scan:**
https://gradle-enterprise.elastic.co/s/frjia46cpouj4/tests/:x-pack:plugin:searchable-snapshots:internalClusterTest/org.elasticsearch.xpack.searchablesnapshots.cache.shared.NodesCachesStatsIntegTests/testNodesCachesStats


**Reproduction line:**
```
./gradlew ':x-pack:plugin:searchable-snapshots:internalClusterTest' --tests ""org.elasticsearch.xpack.searchablesnapshots.cache.shared.NodesCachesStatsIntegTests.testNodesCachesStats"" -Dtests.seed=A24ABA12358C499C -Dtests.locale=es-BO -Dtests.timezone=America/Coral_Harbour -Druntime.java=21
```

**Applicable branches:**
main

**Reproduces locally?:**
Didn't try

**Failure history:**
https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&_a=(controlGroupInput:(chainingSystem:HIERARCHICAL,controlStyle:twoLine,ignoreParentSettings:(ignoreFilters:!f,ignoreQuery:!f,ignoreTimerange:!f,ignoreValidations:!t),panels:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(explicitInput:(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,enhancements:(),fieldName:task.keyword,grow:!t,id:'0c0c9cb8-ccd2-45c6-9b13-96bac4abc542',searchTechnique:wildcard,selectedOptions:!(),singleSelect:!t,title:'Gradle%20Task',width:medium),grow:!t,order:0,type:optionsListControl,width:small),'144933da-5c1b-4257-a969-7f43455a7901':(explicitInput:(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,enhancements:(),fieldName:name.keyword,grow:!t,id:'144933da-5c1b-4257-a969-7f43455a7901',searchTechnique:wildcard,selectedOptions:!('testNodesCachesStats'),title:Test,width:medium),grow:!t,order:2,type:optionsListControl,width:medium),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(explicitInput:(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,enhancements:(),fieldName:className.keyword,grow:!t,id:'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850',searchTechnique:wildcard,selectedOptions:!('org.elasticsearch.xpack.searchablesnapshots.cache.shared.NodesCachesStatsIntegTests'),title:Suite,width:medium),grow:!t,order:1,type:optionsListControl,width:medium))))


**Failure excerpt:**
```
org.elasticsearch.action.search.SearchPhaseExecutionException: all shards failed

  at __randomizedtesting.SeedInfo.seed([A24ABA12358C499C:715F1E297047992E]:0)
  at org.elasticsearch.action.search.AbstractSearchAsyncAction.onPhaseFailure(AbstractSearchAsyncAction.java:709)
  at org.elasticsearch.action.search.AbstractSearchAsyncAction.executeNextPhase(AbstractSearchAsyncAction.java:401)
  at org.elasticsearch.action.search.AbstractSearchAsyncAction.onPhaseDone(AbstractSearchAsyncAction.java:741)
  at org.elasticsearch.action.search.AbstractSearchAsyncAction.onShardFailure(AbstractSearchAsyncAction.java:494)
  at org.elasticsearch.action.search.AbstractSearchAsyncAction$1.onFailure(AbstractSearchAsyncAction.java:332)
  at org.elasticsearch.action.ActionListenerImplementations.safeAcceptException(ActionListenerImplementations.java:62)
  at org.elasticsearch.action.ActionListenerImplementations.safeOnFailure(ActionListenerImplementations.java:73)
  at org.elasticsearch.action.DelegatingActionListener.onFailure(DelegatingActionListener.java:27)
  at org.elasticsearch.action.ActionListenerResponseHandler.handleException(ActionListenerResponseHandler.java:54)
  at org.elasticsearch.action.search.SearchTransportService$ConnectionCountingHandler.handleException(SearchTransportService.java:553)
  at org.elasticsearch.transport.TransportService$UnregisterChildTransportResponseHandler.handleException(TransportService.java:1703)
  at org.elasticsearch.transport.TransportService$ContextRestoreResponseHandler.handleException(TransportService.java:1420)
  at org.elasticsearch.transport.InboundHandler.doHandleException(InboundHandler.java:475)
  at org.elasticsearch.transport.InboundHandler.handleException(InboundHandler.java:462)
  at org.elasticsearch.transport.InboundHandler.handlerResponseError(InboundHandler.java:453)
  at org.elasticsearch.transport.InboundHandler.executeResponseHandler(InboundHandler.java:145)
  at org.elasticsearch.transport.InboundHandler.messageReceived(InboundHandler.java:122)
  at org.elasticsearch.transport.InboundHandler.inboundMessage(InboundHandler.java:96)
  at org.elasticsearch.transport.TcpTransport.inboundMessage(TcpTransport.java:825)
  at org.elasticsearch.transport.InboundPipeline.forwardFragments(InboundPipeline.java:124)
  at org.elasticsearch.transport.InboundPipeline.doHandleBytes(InboundPipeline.java:96)
  at org.elasticsearch.transport.InboundPipeline.handleBytes(InboundPipeline.java:61)
  at org.elasticsearch.transport.netty4.Netty4MessageInboundHandler.channelRead(Netty4MessageInboundHandler.java:48)
  at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)
  at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
  at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
  at io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:103)
  at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)
  at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
  at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
  at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
  at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)
  at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
  at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
  at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)
  at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)
  at io.netty.channel.nio.NioEventLoop.processSelectedKeysPlain(NioEventLoop.java:689)
  at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:652)
  at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
  at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
  at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
  at java.lang.Thread.run(Thread.java:1583)

  Caused by: org.elasticsearch.ElasticsearchException$1: Invalid vInt detected (too many bits)

    at org.elasticsearch.ElasticsearchException.guessRootCauses(ElasticsearchException.java:672)
    at org.elasticsearch.action.search.AbstractSearchAsyncAction.executeNextPhase(AbstractSearchAsyncAction.java:399)
    at org.elasticsearch.action.search.AbstractSearchAsyncAction.onPhaseDone(AbstractSearchAsyncAction.java:741)
    at org.elasticsearch.action.search.AbstractSearchAsyncAction.onShardFailure(AbstractSearchAsyncAction.java:494)
    at org.elasticsearch.action.search.AbstractSearchAsyncAction$1.onFailure(AbstractSearchAsyncAction.java:332)
    at org.elasticsearch.action.ActionListenerImplementations.safeAcceptException(ActionListenerImplementations.java:62)
    at org.elasticsearch.action.ActionListenerImplementations.safeOnFailure(ActionListenerImplementations.java:73)
    at org.elasticsearch.action.DelegatingActionListener.onFailure(DelegatingActionListener.java:27)
    at org.elasticsearch.action.ActionListenerResponseHandler.handleException(ActionListenerResponseHandler.java:54)
    at org.elasticsearch.action.search.SearchTransportService$ConnectionCountingHandler.handleException(SearchTransportService.java:553)
    at org.elasticsearch.transport.TransportService$UnregisterChildTransportResponseHandler.handleException(TransportService.java:1703)
    at org.elasticsearch.transport.TransportService$ContextRestoreResponseHandler.handleException(TransportService.java:1420)
    at org.elasticsearch.transport.InboundHandler.doHandleException(InboundHandler.java:475)
    at org.elasticsearch.transport.InboundHandler.handleException(InboundHandler.java:462)
    at org.elasticsearch.transport.InboundHandler.handlerResponseError(InboundHandler.java:453)
    at org.elasticsearch.transport.InboundHandler.executeResponseHandler(InboundHandler.java:145)
    at org.elasticsearch.transport.InboundHandler.messageReceived(InboundHandler.java:122)
    at org.elasticsearch.transport.InboundHandler.inboundMessage(InboundHandler.java:96)
    at org.elasticsearch.transport.TcpTransport.inboundMessage(TcpTransport.java:825)
    at org.elasticsearch.transport.InboundPipeline.forwardFragments(InboundPipeline.java:124)
    at org.elasticsearch.transport.InboundPipeline.doHandleBytes(InboundPipeline.java:96)
    at org.elasticsearch.transport.InboundPipeline.handleBytes(InboundPipeline.java:61)
    at org.elasticsearch.transport.netty4.Netty4MessageInboundHandler.channelRead(Netty4MessageInboundHandler.java:48)
    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)
    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
    at io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:103)
    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)
    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
    at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)
    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
    at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
    at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)
    at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)
    at io.netty.channel.nio.NioEventLoop.processSelectedKeysPlain(NioEventLoop.java:689)
    at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:652)
    at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
    at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
    at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
    at java.lang.Thread.run(Thread.java:1583)

    Caused by: java.io.IOException: Invalid vInt detected (too many bits)

      at org.apache.lucene.store.DataInput.readVInt(DataInput.java:137)
      at org.elasticsearch.blobcache.common.BlobCacheBufferedIndexInput.readVInt(BlobCacheBufferedIndexInput.java:160)
      at org.apache.lucene.codecs.lucene90.compressing.Lucene90CompressingStoredFieldsReader$BlockState.doReset(Lucene90CompressingStoredFieldsReader.java:441)
      at org.apache.lucene.codecs.lucene90.compressing.Lucene90CompressingStoredFieldsReader$BlockState.reset(Lucene90CompressingStoredFieldsReader.java:426)
      at org.apache.lucene.codecs.lucene90.compressing.Lucene90CompressingStoredFieldsReader.serializedDocument(Lucene90CompressingStoredFieldsReader.java:609)
      at org.apache.lucene.codecs.lucene90.compressing.Lucene90CompressingStoredFieldsReader.document(Lucene90CompressingStoredFieldsReader.java:630)
      at org.apache.lucene.index.CodecReader$1.document(CodecReader.java:109)
      at org.elasticsearch.search.internal.FieldUsageTrackingDirectoryReader$FieldUsageTrackingLeafReader$2.document(FieldUsageTrackingDirectoryReader.java:150)
      at org.elasticsearch.index.fieldvisitor.StoredFieldLoader$ReaderStoredFieldLoader.advanceTo(StoredFieldLoader.java:182)
      at org.elasticsearch.search.fetch.FetchPhase.prepareNonNestedHitContext(FetchPhase.java:246)
      at org.elasticsearch.search.fetch.FetchPhase.prepareHitContext(FetchPhase.java:206)
      at org.elasticsearch.search.fetch.FetchPhase$1.nextDoc(FetchPhase.java:149)
      at org.elasticsearch.search.fetch.FetchPhaseDocsIterator.iterate(FetchPhaseDocsIterator.java:70)
      at org.elasticsearch.search.fetch.FetchPhase.buildSearchHits(FetchPhase.java:169)
      at org.elasticsearch.search.fetch.FetchPhase.execute(FetchPhase.java:78)
      at org.elasticsearch.search.SearchService.executeFetchPhase(SearchService.java:731)
      at org.elasticsearch.search.SearchService.executeQueryPhase(SearchService.java:702)
      at org.elasticsearch.search.SearchService.lambda$executeQueryPhase$2(SearchService.java:544)
      at org.elasticsearch.search.SearchService$2.accept(SearchService.java:660)
      at org.elasticsearch.search.SearchService$2.accept(SearchService.java:657)
      at org.elasticsearch.action.ActionRunnable$3.doRun(ActionRunnable.java:73)
      at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:26)
      at org.elasticsearch.common.util.concurrent.TimedRunnable.doRun(TimedRunnable.java:33)
      at org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:983)
      at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:26)
      at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
      at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
      at java.lang.Thread.run(Thread.java:1583)

```",davidkyle,closed,"['blocker', ':Search/Search', '>test-failure', 'Team:Search']",https://github.com/elastic/elasticsearch/issues/102700,2023-11-28T11:31:33Z,6,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/102700,"{
  ""application_resource"": ""yes""
}"
139,102437,[CI] Error evaluating vault in packaging tests,"We hit a ton of these errors: https://buildkite.com/elastic/elasticsearch-periodic-packaging/builds/505#018bf3b4-5c16-4fb4-8148-05ca84c0fda9

It's not obvious why this only happens some of the time but perhaps there are some environment variables not being passed properly in the case of packaging tests?

Additionally I noticed this message in these builds which indicates that we seem to be configuring the cache inconsistently?

![image](https://github.com/elastic/elasticsearch/assets/4106672/655a4fc6-9c97-48ab-a4cd-3e369cd40dbd)
",mark-vieira,closed,"[':Delivery/Build', 'Team:Delivery']",https://github.com/elastic/elasticsearch/issues/102437,2023-11-21T21:47:08Z,4,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/102437,"{
  ""application_resource"": ""unsure""
}"
140,102103,Elasticsearch 8.11.1 RPM restarts process during update,"### Elasticsearch Version

8.11.1

### Installed Plugins

_No response_

### Java Version

_bundled_

### OS Version

Rocky 9.2 5.14.0-70.26.1.el9_0.x86_64

### Problem Description

While updating several nodes from ES 8.11.0 to 8.11.1 I noticed that the nodes tried to restart the elasticsearch process. In previous versions this was not the case and required a manual step. Additionally the restart process failed on all nodes I updated. A manual `systemctl restart elasticsearch` worked however and the nodes are back up. 

### Steps to Reproduce

Install the elasticsearch-8.11.1 RPM from `https://artifacts.elastic.co/packages/8.x/yum/`

### Logs (if relevant)

```Nov 13 21:21:09 hostname systemd-entrypoint[2118575]: ERROR: Elasticsearch exited unexpectedly, with exit code 1
Nov 13 21:21:09 hostname systemd[1]: elasticsearch.service: Main process exited, code=exited, status=1/FAILURE
Nov 13 21:21:09 hostname systemd[1]: elasticsearch.service: Failed with result 'exit-code'.
Nov 13 21:21:09 hostname systemd[1]: elasticsearch.service: Consumed 21min 32.788s CPU time.",holgr,closed,"['>bug', ':Delivery/Packaging', 'team-discuss', 'Team:Delivery']",https://github.com/elastic/elasticsearch/issues/102103,2023-11-13T20:44:12Z,25,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/102103,"{
  ""application_resource"": ""unsure""
}"
141,102015,[CI] OldMappingsIT testSearchFieldsOnPlaceholderField failing,"**Build scan:**
https://gradle-enterprise.elastic.co/s/57qtf7byqdzb6/tests/:x-pack:qa:repository-old-versions:javaRestTestAfterRestart%235_0_0/org.elasticsearch.oldrepos.OldMappingsIT/testSearchFieldsOnPlaceholderField
**Reproduction line:**
```
./gradlew ':x-pack:qa:repository-old-versions:javaRestTestAfterRestart#5_0_0' --tests ""org.elasticsearch.oldrepos.OldMappingsIT.testSearchFieldsOnPlaceholderField"" -Dtests.seed=2458E0756602C685 -Dtests.locale=pl -Dtests.timezone=America/Curacao -Druntime.java=21
```

**Applicable branches:**
main

**Reproduces locally?:**
Didn't try

**Failure history:**
https://gradle-enterprise.elastic.co/scans/tests?tests.container=org.elasticsearch.oldrepos.OldMappingsIT&tests.test=testSearchFieldsOnPlaceholderField


**Failure excerpt:**
```
org.elasticsearch.client.ResponseException: method [POST], host [http://[::1]:42911], URI [/custom/_search], status line [HTTP/1.1 404 Not Found]
{""error"":{""root_cause"":[{""type"":""index_not_found_exception"",""reason"":""no such index [custom]"",""resource.type"":""index_or_alias"",""resource.id"":""custom"",""index_uuid"":""_na_"",""index"":""custom""}],""type"":""index_not_found_exception"",""reason"":""no such index [custom]"",""resource.type"":""index_or_alias"",""resource.id"":""custom"",""index_uuid"":""_na_"",""index"":""custom""},""status"":404}

  at __randomizedtesting.SeedInfo.seed([2458E0756602C685:968AAE4EFC2536E4]:0)
  at org.elasticsearch.client.RestClient.convertResponse(RestClient.java:347)
  at org.elasticsearch.client.RestClient.performRequest(RestClient.java:313)
  at org.elasticsearch.client.RestClient.performRequest(RestClient.java:288)
  at org.elasticsearch.oldrepos.OldMappingsIT.testSearchFieldsOnPlaceholderField(OldMappingsIT.java:310)
  at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
  at java.lang.reflect.Method.invoke(Method.java:580)
  at com.carrotsearch.randomizedtesting.RandomizedRunner.invoke(RandomizedRunner.java:1758)
  at com.carrotsearch.randomizedtesting.RandomizedRunner$8.evaluate(RandomizedRunner.java:946)
  at com.carrotsearch.randomizedtesting.RandomizedRunner$9.evaluate(RandomizedRunner.java:982)
  at com.carrotsearch.randomizedtesting.RandomizedRunner$10.evaluate(RandomizedRunner.java:996)
  at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)
  at org.apache.lucene.tests.util.TestRuleSetupTeardownChained$1.evaluate(TestRuleSetupTeardownChained.java:48)
  at org.apache.lucene.tests.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:43)
  at org.apache.lucene.tests.util.TestRuleThreadAndTestName$1.evaluate(TestRuleThreadAndTestName.java:45)
  at org.apache.lucene.tests.util.TestRuleIgnoreAfterMaxFailures$1.evaluate(TestRuleIgnoreAfterMaxFailures.java:60)
  at org.apache.lucene.tests.util.TestRuleMarkFailure$1.evaluate(TestRuleMarkFailure.java:44)
  at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)
  at com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:390)
  at com.carrotsearch.randomizedtesting.ThreadLeakControl.forkTimeoutingTask(ThreadLeakControl.java:843)
  at com.carrotsearch.randomizedtesting.ThreadLeakControl$3.evaluate(ThreadLeakControl.java:490)
  at com.carrotsearch.randomizedtesting.RandomizedRunner.runSingleTest(RandomizedRunner.java:955)
  at com.carrotsearch.randomizedtesting.RandomizedRunner$5.evaluate(RandomizedRunner.java:840)
  at com.carrotsearch.randomizedtesting.RandomizedRunner$6.evaluate(RandomizedRunner.java:891)
  at com.carrotsearch.randomizedtesting.RandomizedRunner$7.evaluate(RandomizedRunner.java:902)
  at org.apache.lucene.tests.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:43)
  at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)
  at org.apache.lucene.tests.util.TestRuleStoreClassName$1.evaluate(TestRuleStoreClassName.java:38)
  at com.carrotsearch.randomizedtesting.rules.NoShadowingOrOverridesOnMethodsRule$1.evaluate(NoShadowingOrOverridesOnMethodsRule.java:40)
  at com.carrotsearch.randomizedtesting.rules.NoShadowingOrOverridesOnMethodsRule$1.evaluate(NoShadowingOrOverridesOnMethodsRule.java:40)
  at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)
  at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)
  at org.apache.lucene.tests.util.TestRuleAssertionsRequired$1.evaluate(TestRuleAssertionsRequired.java:53)
  at org.apache.lucene.tests.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:43)
  at org.apache.lucene.tests.util.TestRuleMarkFailure$1.evaluate(TestRuleMarkFailure.java:44)
  at org.apache.lucene.tests.util.TestRuleIgnoreAfterMaxFailures$1.evaluate(TestRuleIgnoreAfterMaxFailures.java:60)
  at org.apache.lucene.tests.util.TestRuleIgnoreTestSuites$1.evaluate(TestRuleIgnoreTestSuites.java:47)
  at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)
  at com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:390)
  at com.carrotsearch.randomizedtesting.ThreadLeakControl.lambda$forkTimeoutingTask$0(ThreadLeakControl.java:850)
  at java.lang.Thread.run(Thread.java:1583)

```",original-brownbear,closed,"['blocker', ':Search Foundations/Mapping', '>test-failure', 'Team:Search Foundations']",https://github.com/elastic/elasticsearch/issues/102015,2023-11-10T13:53:16Z,5,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/102015,"{
  ""application_resource"": ""yes""
}"
142,101752,Potential Memory Leak in JwtRealm,"The logic for the cache in `JwtRealm` produces a broken `Cache` instance to some degree. 
We create a `BytesArray` from the user credential hash:

```java
            final BytesArray jwtCacheKey = isCacheEnabled() ? new BytesArray(jwtAuthenticationToken.getUserCredentialsHash()) : null;
            if (jwtCacheKey != null) {
                final User cachedUser = tryAuthenticateWithCache(tokenPrincipal, jwtCacheKey);
```

and use it as as a cache key in a `Cache` instance down the line.
But then we also clear the bytes in that `BytesArray` to `0` in org.elasticsearch.xpack.security.authc.jwt.JwtAuthenticationToken#clearCredentials. 

This leads to the hash map in the `Cache` getting filled with loads of `BytesArray` that all have the same 0-filled content but that were not equal to each other when first inserted into the map, causing the map to put them all in the same bucket.

<img width=""1233"" alt=""image"" src=""https://github.com/elastic/elasticsearch/assets/6490959/86a914d7-a2d4-4b01-ad99-e0d14e71a58b"">

ref path to the broken map:

<img width=""1436"" alt=""image"" src=""https://github.com/elastic/elasticsearch/assets/6490959/87ac6f78-bc09-41c4-9a79-28fbbd14f6e6"">
",original-brownbear,closed,"['>bug', ':Security/Security', 'Team:Security']",https://github.com/elastic/elasticsearch/issues/101752,2023-11-02T21:59:27Z,1,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/101752,"{
  ""application_resource"": ""yes""
}"
143,101667,Universal highlighter with weight_matches_mode  throws cryptic error,"### Elasticsearch Version

v8.10+

### Installed Plugins

_No response_

### Java Version

_bundled_

### OS Version

any

### Problem Description

When running a kql query that searches over nested docs, universal highlighter gave a weird error:

```
Caused by: java.lang.IllegalArgumentException: Reader FilterLeafReader(FilterLeafReader(FilterLeafReader(FieldUsageTrackingLeafReader(reader=FilterLeafReader(_1vv(9.7.0):c1303:[diagnostics={java.vendor=Oracle Corporation, os.arch=amd64, os.version=5.10.176+, lucene.version=9.7.0, source=flush, timestamp=1698736883411, java.runtime.version=21+35-2513, os=Linux}]:[attributes={Lucene90StoredFieldsFormat.mode=BEST_SPEED}] :id=5w3udydef33hjzq9jddg14koi))))) does not support caching
```

### Steps to Reproduce

This seems to be caused when we attempt to read from some query cache when utilizing the filter reader provided by the `weight_matches_mode` option in the highlighter. 

That reader is specifically constructed like this:

```
    LeafReader leafReader =
        new FilterLeafReader(_leafReader) {
          @Override
          public Terms terms(String field) throws IOException {
            if (components.getFieldMatcher().test(field)) {
              return super.terms(components.getField());
            } else {
              return super.terms(field);
            }
          }

          //  So many subclasses do this!
          // these ought to be a default or added via some intermediary like
          // ""FilterTransientLeafReader"" (exception on close).
          @Override
          public CacheHelper getCoreCacheHelper() {
            return null;
          }

          @Override
          public CacheHelper getReaderCacheHelper() {
            return null;
          }
        };
```

### Logs (if relevant)

```
        ""reason"": ""Reader FilterLeafReader(FilterLeafReader(FilterLeafReader(FieldUsageTrackingLeafReader(reader=FilterLeafReader(_1vv(9.7.0):c1303:[diagnostics={java.vendor=Oracle Corporation, os.arch=amd64, os.version=5.10.176+, lucene.version=9.7.0, source=flush, timestamp=1698736883411, java.runtime.version=21+35-2513, os=Linux}]:[attributes={Lucene90StoredFieldsFormat.mode=BEST_SPEED}] :id=5w3udydef33hjzq9jddg14koi))))) does not support caching"",
        ""stack_trace"": """"""org.elasticsearch.ElasticsearchException$1: Reader FilterLeafReader(FilterLeafReader(FilterLeafReader(FieldUsageTrackingLeafReader(reader=FilterLeafReader(_1vv(9.7.0):c1303:[diagnostics={java.vendor=Oracle Corporation, os.arch=amd64, os.version=5.10.176+, lucene.version=9.7.0, source=flush, timestamp=1698736883411, java.runtime.version=21+35-2513, os=Linux}]:[attributes={Lucene90StoredFieldsFormat.mode=BEST_SPEED}] :id=5w3udydef33hjzq9jddg14koi))))) does not support caching
	at org.elasticsearch.server@8.10.4/org.elasticsearch.ElasticsearchException.guessRootCauses(ElasticsearchException.java:667)
	at org.elasticsearch.server@8.10.4/org.elasticsearch.action.search.SearchPhaseExecutionException.guessRootCauses(SearchPhaseExecutionException.java:150)
	at org.elasticsearch.server@8.10.4/org.elasticsearch.ElasticsearchException.guessRootCauses(ElasticsearchException.java:649)
	at org.elasticsearch.server@8.10.4/org.elasticsearch.ElasticsearchException.generateFailureXContent(ElasticsearchException.java:595)
	at org.elasticsearch.server@8.10.4/org.elasticsearch.rest.RestResponse.build(RestResponse.java:176)
	at org.elasticsearch.server@8.10.4/org.elasticsearch.rest.RestResponse.<init>(RestResponse.java:124)
	at org.elasticsearch.server@8.10.4/org.elasticsearch.rest.RestResponse.<init>(RestResponse.java:103)
	at org.elasticsearch.server@8.10.4/org.elasticsearch.rest.action.RestActionListener.onFailure(RestActionListener.java:55)
	at org.elasticsearch.server@8.10.4/org.elasticsearch.rest.action.RestCancellableNodeClient$1.onFailure(RestCancellableNodeClient.java:96)
	at org.elasticsearch.server@8.10.4/org.elasticsearch.client.internal.node.NodeClient$SafelyWrappedActionListener.onFailure(NodeClient.java:171)
	at org.elasticsearch.server@8.10.4/org.elasticsearch.tasks.TaskManager$1.onFailure(TaskManager.java:217)
	at org.elasticsearch.server@8.10.4/org.elasticsearch.action.ActionListenerImplementations.safeAcceptException(ActionListenerImplementations.java:62)
	at org.elasticsearch.server@8.10.4/org.elasticsearch.action.ActionListenerImplementations.safeOnFailure(ActionListenerImplementations.java:73)
	at org.elasticsearch.server@8.10.4/org.elasticsearch.action.DelegatingActionListener.onFailure(DelegatingActionListener.java:27)
	at org.elasticsearch.server@8.10.4/org.elasticsearch.action.support.ContextPreservingActionListener.onFailure(ContextPreservingActionListener.java:39)
	at org.elasticsearch.server@8.10.4/org.elasticsearch.action.ActionListenerImplementations.safeAcceptException(ActionListenerImplementations.java:62)
	at org.elasticsearch.server@8.10.4/org.elasticsearch.action.ActionListenerImplementations.safeOnFailure(ActionListenerImplementations.java:73)
	at org.elasticsearch.server@8.10.4/org.elasticsearch.action.DelegatingActionListener.onFailure(DelegatingActionListener.java:27)
	at org.elasticsearch.server@8.10.4/org.elasticsearch.action.ActionListenerImplementations.safeAcceptException(ActionListenerImplementations.java:62)
	at org.elasticsearch.server@8.10.4/org.elasticsearch.action.ActionListenerImplementations.safeOnFailure(ActionListenerImplementations.java:73)
	at org.elasticsearch.server@8.10.4/org.elasticsearch.action.DelegatingActionListener.onFailure(DelegatingActionListener.java:27)
	at org.elasticsearch.server@8.10.4/org.elasticsearch.action.ActionListenerImplementations$RunAfterActionListener.onFailure(ActionListenerImplementations.java:269)
	at org.elasticsearch.server@8.10.4/org.elasticsearch.action.search.AbstractSearchAsyncAction.raisePhaseFailure(AbstractSearchAsyncAction.java:752)
	at org.elasticsearch.server@8.10.4/org.elasticsearch.action.search.AbstractSearchAsyncAction.onPhaseFailure(AbstractSearchAsyncAction.java:729)
	at org.elasticsearch.server@8.10.4/org.elasticsearch.action.search.AbstractSearchAsyncAction.executeNextPhase(AbstractSearchAsyncAction.java:419)
	at org.elasticsearch.server@8.10.4/org.elasticsearch.action.search.AbstractSearchAsyncAction.onPhaseDone(AbstractSearchAsyncAction.java:761)
	at org.elasticsearch.server@8.10.4/org.elasticsearch.action.search.AbstractSearchAsyncAction.onShardFailure(AbstractSearchAsyncAction.java:513)
	at org.elasticsearch.server@8.10.4/org.elasticsearch.action.search.AbstractSearchAsyncAction$1.onFailure(AbstractSearchAsyncAction.java:350)
	at org.elasticsearch.server@8.10.4/org.elasticsearch.action.ActionListenerImplementations.safeAcceptException(ActionListenerImplementations.java:62)
	at org.elasticsearch.server@8.10.4/org.elasticsearch.action.ActionListenerImplementations.safeOnFailure(ActionListenerImplementations.java:73)
	at org.elasticsearch.server@8.10.4/org.elasticsearch.action.DelegatingActionListener.onFailure(DelegatingActionListener.java:27)
	at org.elasticsearch.server@8.10.4/org.elasticsearch.action.ActionListenerResponseHandler.handleException(ActionListenerResponseHandler.java:54)
	at org.elasticsearch.server@8.10.4/org.elasticsearch.action.search.SearchTransportService$ConnectionCountingHandler.handleException(SearchTransportService.java:630)
	at org.elasticsearch.server@8.10.4/org.elasticsearch.transport.TransportService$UnregisterChildTransportResponseHandler.handleException(TransportService.java:1707)
	at org.elasticsearch.server@8.10.4/org.elasticsearch.transport.TransportService$ContextRestoreResponseHandler.handleException(TransportService.java:1424)
	at org.elasticsearch.server@8.10.4/org.elasticsearch.transport.TransportService$DirectResponseChannel.processException(TransportService.java:1560)
	at org.elasticsearch.server@8.10.4/org.elasticsearch.transport.TransportService$DirectResponseChannel.sendResponse(TransportService.java:1535)
	at org.elasticsearch.server@8.10.4/org.elasticsearch.transport.TaskTransportChannel.sendResponse(TaskTransportChannel.java:51)
	at org.elasticsearch.server@8.10.4/org.elasticsearch.action.support.ChannelActionListener.onFailure(ChannelActionListener.java:37)
	at org.elasticsearch.server@8.10.4/org.elasticsearch.action.ActionRunnable.onFailure(ActionRunnable.java:124)
	at org.elasticsearch.server@8.10.4/org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:28)
	at org.elasticsearch.server@8.10.4/org.elasticsearch.common.util.concurrent.TimedRunnable.doRun(TimedRunnable.java:33)
	at org.elasticsearch.server@8.10.4/org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:983)
	at org.elasticsearch.server@8.10.4/org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:26)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.lang.IllegalArgumentException: Reader FilterLeafReader(FilterLeafReader(FilterLeafReader(FieldUsageTrackingLeafReader(reader=FilterLeafReader(_1vv(9.7.0):c1303:[diagnostics={java.vendor=Oracle Corporation, os.arch=amd64, os.version=5.10.176+, lucene.version=9.7.0, source=flush, timestamp=1698736883411, java.runtime.version=21+35-2513, os=Linux}]:[attributes={Lucene90StoredFieldsFormat.mode=BEST_SPEED}] :id=5w3udydef33hjzq9jddg14koi))))) does not support caching
	at org.elasticsearch.server@8.10.4/org.elasticsearch.index.cache.bitset.BitsetFilterCache.getAndLoadIfNotPresent(BitsetFilterCache.java:144)
	at org.elasticsearch.server@8.10.4/org.elasticsearch.index.cache.bitset.BitsetFilterCache$QueryWrapperBitSetProducer.getBitSet(BitsetFilterCache.java:224)
	at org.apache.lucene.join@9.7.0/org.apache.lucene.search.join.ToParentBlockJoinQuery$BlockJoinWeight.scorerSupplier(ToParentBlockJoinQuery.java:150)
	at org.apache.lucene.join@9.7.0/org.apache.lucene.search.join.ToParentBlockJoinQuery$BlockJoinWeight.scorer(ToParentBlockJoinQuery.java:132)
	at org.apache.lucene.join@9.7.0/org.apache.lucene.search.join.ToParentBlockJoinQuery$BlockJoinWeight.matches(ToParentBlockJoinQuery.java:184)
	at org.apache.lucene.core@9.7.0/org.apache.lucene.search.BooleanWeight.matches(BooleanWeight.java:134)
	at org.apache.lucene.core@9.7.0/org.apache.lucene.search.BooleanWeight.matches(BooleanWeight.java:134)
	at org.apache.lucene.core@9.7.0/org.apache.lucene.search.BooleanWeight.matches(BooleanWeight.java:134)
	at org.apache.lucene.core@9.7.0/org.apache.lucene.search.BooleanWeight.matches(BooleanWeight.java:134)
	at org.apache.lucene.highlighter@9.7.0/org.apache.lucene.search.uhighlight.FieldOffsetStrategy.createOffsetsEnumsWeightMatcher(FieldOffsetStrategy.java:147)
	at org.apache.lucene.highlighter@9.7.0/org.apache.lucene.search.uhighlight.FieldOffsetStrategy.createOffsetsEnumFromReader(FieldOffsetStrategy.java:74)
	at org.apache.lucene.highlighter@9.7.0/org.apache.lucene.search.uhighlight.MemoryIndexOffsetStrategy.getOffsetsEnum(MemoryIndexOffsetStrategy.java:119)
	at org.apache.lucene.highlighter@9.7.0/org.apache.lucene.search.uhighlight.FieldHighlighter.highlightFieldForDoc(FieldHighlighter.java:80)
	at org.elasticsearch.server@8.10.4/org.elasticsearch.lucene.search.uhighlight.CustomFieldHighlighter.highlightFieldForDoc(CustomFieldHighlighter.java:63)
	at org.elasticsearch.server@8.10.4/org.elasticsearch.lucene.search.uhighlight.CustomUnifiedHighlighter.highlightField(CustomUnifiedHighlighter.java:147)
	at org.elasticsearch.server@8.10.4/org.elasticsearch.search.fetch.subphase.highlight.DefaultHighlighter.highlight(DefaultHighlighter.java:81)
	at org.elasticsearch.server@8.10.4/org.elasticsearch.search.fetch.subphase.highlight.HighlightPhase$1.process(HighlightPhase.java:69)
	at org.elasticsearch.server@8.10.4/org.elasticsearch.search.fetch.FetchPhase$1.nextDoc(FetchPhase.java:158)
	at org.elasticsearch.server@8.10.4/org.elasticsearch.search.fetch.FetchPhaseDocsIterator.iterate(FetchPhaseDocsIterator.java:70)
	at org.elasticsearch.server@8.10.4/org.elasticsearch.search.fetch.FetchPhase.buildSearchHits(FetchPhase.java:164)
	at org.elasticsearch.server@8.10.4/org.elasticsearch.search.fetch.FetchPhase.execute(FetchPhase.java:77)
	at org.elasticsearch.server@8.10.4/org.elasticsearch.search.SearchService.executeFetchPhase(SearchService.java:708)
	at org.elasticsearch.server@8.10.4/org.elasticsearch.search.SearchService.executeQueryPhase(SearchService.java:679)
	at org.elasticsearch.server@8.10.4/org.elasticsearch.search.SearchService.lambda$executeQueryPhase$2(SearchService.java:541)
	at org.elasticsearch.server@8.10.4/org.elasticsearch.action.ActionRunnable$2.accept(ActionRunnable.java:51)
	at org.elasticsearch.server@8.10.4/org.elasticsearch.action.ActionRunnable$2.accept(ActionRunnable.java:48)
	at org.elasticsearch.server@8.10.4/org.elasticsearch.action.ActionRunnable$3.doRun(ActionRunnable.java:73)
	at org.elasticsearch.server@8.10.4/org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:26)
```",benwtrent,closed,"['>bug', ':Search Relevance/Highlighting', 'Team:Search Relevance']",https://github.com/elastic/elasticsearch/issues/101667,2023-11-01T11:28:24Z,3,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/101667,"{
  ""application_resource"": ""yes""
}"
144,101598,[CI] ClassificationHousePricingIT testFeatureImportanceValues failing,"**Build scan:**
https://gradle-enterprise.elastic.co/s/uwwlkdiu6izvg/tests/:x-pack:plugin:ml:qa:native-multi-node-tests:javaRestTest/org.elasticsearch.xpack.ml.integration.ClassificationHousePricingIT/testFeatureImportanceValues
**Reproduction line:**
```
./gradlew ':x-pack:plugin:ml:qa:native-multi-node-tests:javaRestTest' --tests ""org.elasticsearch.xpack.ml.integration.ClassificationHousePricingIT.testFeatureImportanceValues"" -Dtests.seed=8C442F444C8DA895 -Dtests.locale=ca-ES -Dtests.timezone=Africa/Gaborone -Druntime.java=21
```

**Applicable branches:**
main

**Reproduces locally?:**
No

**Failure history:**
https://gradle-enterprise.elastic.co/scans/tests?tests.container=org.elasticsearch.xpack.ml.integration.ClassificationHousePricingIT&tests.test=testFeatureImportanceValues


**Failure excerpt:**
```
java.lang.AssertionError: Stats were: {""id"":""classification_house_pricing_test_feature_importance_values"",""state"":""started"",""progress"":[{""phase"":""reindexing"",""progress_percent"":100},{""phase"":""loading_data"",""progress_percent"":100},{""phase"":""feature_selection"",""progress_percent"":100},{""phase"":""coarse_parameter_search"",""progress_percent"":100},{""phase"":""fine_tuning_parameters"",""progress_percent"":100},{""phase"":""final_training"",""progress_percent"":100},{""phase"":""writing_results"",""progress_percent"":100},{""phase"":""inference"",""progress_percent"":98}],""data_counts"":{""training_docs_count"":510,""test_docs_count"":950,""skipped_docs_count"":0},""memory_usage"":{""timestamp"":1698748402711,""peak_usage_bytes"":232102,""status"":""ok""},""analysis_stats"":{""classification_stats"":{""timestamp"":1698748402711,""iteration"":0,""hyperparameters"":{""class_assignment_objective"":""maximize_minimum_recall"",""alpha"":6.0709755979659175,""downsample_factor"":0.23874177497042998,""eta"":0.6217679005474379,""eta_growth_rate_per_tree"":1.3108839502737188,""feature_bag_fraction"":0.13333333333333341,""gamma"":0.3794904870054506,""lambda"":0.02703658022998078,""max_attempts_to_add_tree"":0,""max_optimization_rounds_per_hyperparameter"":2,""max_trees"":16,""num_folds"":0,""num_splits_per_feature"":0,""soft_tree_depth_limit"":4.289165585614386,""soft_tree_depth_tolerance"":0.15},""timing_stats"":{""elapsed_time"":0,""iteration_time"":0},""validation_loss"":{""loss_type"":""binomial_logistic""}}},""node"":{""id"":""Cc575Xj0T9aRR8t9oavYYw"",""name"":""javaRestTest-1"",""ephemeral_id"":""KLmNX-teT2iKh5FeSZZu-Q"",""transport_address"":""127.0.0.1:37293"",""attributes"":{""testattr"":""test"",""transform.config_version"":""10.0.0"",""xpack.installed"":""true"",""ml.allocated_processors"":""32"",""ml.max_jvm_size"":""536870912"",""ml.config_version"":""11.0.0"",""ml.machine_memory"":""101258194944"",""ml.allocated_processors_double"":""32.0""}},""assignment_explanation"":""""}
Expected: <stopped>
     but: was <started>

  at __randomizedtesting.SeedInfo.seed([8C442F444C8DA895:719549882B1AF1C0]:0)
  at org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:18)
  at org.junit.Assert.assertThat(Assert.java:956)
  at org.elasticsearch.xpack.ml.integration.MlNativeDataFrameAnalyticsIntegTestCase.assertIsStopped(MlNativeDataFrameAnalyticsIntegTestCase.java:204)
  at org.elasticsearch.xpack.ml.integration.MlNativeDataFrameAnalyticsIntegTestCase.lambda$waitUntilAnalyticsIsStopped$0(MlNativeDataFrameAnalyticsIntegTestCase.java:129)
  at org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:1202)
  at org.elasticsearch.xpack.ml.integration.MlNativeDataFrameAnalyticsIntegTestCase.waitUntilAnalyticsIsStopped(MlNativeDataFrameAnalyticsIntegTestCase.java:129)
  at org.elasticsearch.xpack.ml.integration.MlNativeDataFrameAnalyticsIntegTestCase.waitUntilAnalyticsIsStopped(MlNativeDataFrameAnalyticsIntegTestCase.java:125)
  at org.elasticsearch.xpack.ml.integration.ClassificationHousePricingIT.testFeatureImportanceValues(ClassificationHousePricingIT.java:1566)
  at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
  at java.lang.reflect.Method.invoke(Method.java:580)
  at com.carrotsearch.randomizedtesting.RandomizedRunner.invoke(RandomizedRunner.java:1758)
  at com.carrotsearch.randomizedtesting.RandomizedRunner$8.evaluate(RandomizedRunner.java:946)
  at com.carrotsearch.randomizedtesting.RandomizedRunner$9.evaluate(RandomizedRunner.java:982)
  at com.carrotsearch.randomizedtesting.RandomizedRunner$10.evaluate(RandomizedRunner.java:996)
  at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)
  at org.apache.lucene.tests.util.TestRuleSetupTeardownChained$1.evaluate(TestRuleSetupTeardownChained.java:48)
  at org.apache.lucene.tests.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:43)
  at org.apache.lucene.tests.util.TestRuleThreadAndTestName$1.evaluate(TestRuleThreadAndTestName.java:45)
  at org.apache.lucene.tests.util.TestRuleIgnoreAfterMaxFailures$1.evaluate(TestRuleIgnoreAfterMaxFailures.java:60)
  at org.apache.lucene.tests.util.TestRuleMarkFailure$1.evaluate(TestRuleMarkFailure.java:44)
  at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)
  at com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:390)
  at com.carrotsearch.randomizedtesting.ThreadLeakControl.forkTimeoutingTask(ThreadLeakControl.java:843)
  at com.carrotsearch.randomizedtesting.ThreadLeakControl$3.evaluate(ThreadLeakControl.java:490)
  at com.carrotsearch.randomizedtesting.RandomizedRunner.runSingleTest(RandomizedRunner.java:955)
  at com.carrotsearch.randomizedtesting.RandomizedRunner$5.evaluate(RandomizedRunner.java:840)
  at com.carrotsearch.randomizedtesting.RandomizedRunner$6.evaluate(RandomizedRunner.java:891)
  at com.carrotsearch.randomizedtesting.RandomizedRunner$7.evaluate(RandomizedRunner.java:902)
  at org.apache.lucene.tests.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:43)
  at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)
  at org.apache.lucene.tests.util.TestRuleStoreClassName$1.evaluate(TestRuleStoreClassName.java:38)
  at com.carrotsearch.randomizedtesting.rules.NoShadowingOrOverridesOnMethodsRule$1.evaluate(NoShadowingOrOverridesOnMethodsRule.java:40)
  at com.carrotsearch.randomizedtesting.rules.NoShadowingOrOverridesOnMethodsRule$1.evaluate(NoShadowingOrOverridesOnMethodsRule.java:40)
  at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)
  at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)
  at org.apache.lucene.tests.util.TestRuleAssertionsRequired$1.evaluate(TestRuleAssertionsRequired.java:53)
  at org.apache.lucene.tests.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:43)
  at org.apache.lucene.tests.util.TestRuleMarkFailure$1.evaluate(TestRuleMarkFailure.java:44)
  at org.apache.lucene.tests.util.TestRuleIgnoreAfterMaxFailures$1.evaluate(TestRuleIgnoreAfterMaxFailures.java:60)
  at org.apache.lucene.tests.util.TestRuleIgnoreTestSuites$1.evaluate(TestRuleIgnoreTestSuites.java:47)
  at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)
  at com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:390)
  at com.carrotsearch.randomizedtesting.ThreadLeakControl.lambda$forkTimeoutingTask$0(ThreadLeakControl.java:850)
  at java.lang.Thread.run(Thread.java:1583)

```",cbuescher,closed,"['>test-failure', ':ml', 'Team:ML', 'low-risk', 'v9.0.0']",https://github.com/elastic/elasticsearch/issues/101598,2023-10-31T11:16:35Z,5,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/101598,"{
  ""application_resource"": ""yes""
}"
145,101307,Elasticsearch V8.10.4 dies with a ‚ÄúnoClassDefFoundError‚Äù,"### Elasticsearch Version

V8.10.4

### Installed Plugins

none

### Java Version

_bundled_

### OS Version

CentOS 7

### Problem Description

While indexing our Nextcloud user data, the Nextcloud indexer sends an (encrypted) PDF to ES which bring ES to death. :cold_face:

I could isolate the user's documents, which I let index against our ES V7.17.13 node, which continues to work - as I would expect from V8 too.

Seems there are some bouncy castle dependencies broken?

Please fix that dependencies since we cannot migrate to ES V8.10 as long as this issue 

### Steps to Reproduce

start the OCC indexer with the encyrpted PDF

php occ fulltextsearch:index:document -u UserId files docId


index is ""nextcloud"":

---- settings.json ----
{
  ""settings"": {
    ""index"": {
      ""routing"": {
        ""allocation"": {
          ""include"": {
            ""_tier_preference"": ""data_content""
          }
        }
      },
      ""mapping"": {
        ""total_fields"": {
          ""limit"": ""10000""
        }
      },
      ""number_of_shards"": ""1"",
      ""provided_name"": ""nextcloud"",
      ""creation_date"": ""1697437432798"",
      ""number_of_replicas"": ""1"",
      ""uuid"": ""9e3_sqY_QEyycgg21BNQHA"",
      ""version"": {
        ""created"": ""8100399""
      }
    }
  },
  ""defaults"": {
    ""index"": {
      ""flush_after_merge"": ""512mb"",
      ""time_series"": {
        ""end_time"": ""9999-12-31T23:59:59.999Z"",
        ""start_time"": ""-9999-01-01T00:00:00Z"",
        ""es87tsdb_codec"": {
          ""enabled"": ""true""
        }
      },
      ""final_pipeline"": ""_none"",
      ""max_inner_result_window"": ""100"",
      ""unassigned"": {
        ""node_left"": {
          ""delayed_timeout"": ""1m""
        }
      },
      ""max_terms_count"": ""65536"",
      ""rollup"": {
        ""source"": {
          ""name"": """",
          ""uuid"": """"
        }
      },
      ""lifecycle"": {
        ""prefer_ilm"": ""true"",
        ""rollover_alias"": """",
        ""origination_date"": ""-1"",
        ""name"": """",
        ""parse_origination_date"": ""false"",
        ""step"": {
          ""wait_time_threshold"": ""12h""
        },
        ""indexing_complete"": ""false""
      },
      ""mode"": ""standard"",
      ""routing_partition_size"": ""1"",
      ""force_memory_term_dictionary"": ""false"",
      ""max_docvalue_fields_search"": ""100"",
      ""merge"": {
        ""scheduler"": {
          ""max_thread_count"": ""4"",
          ""auto_throttle"": ""true"",
          ""max_merge_count"": ""9""
        },
        ""policy"": {
          ""merge_factor"": ""32"",
          ""floor_segment"": ""2mb"",
          ""max_merge_at_once_explicit"": ""30"",
          ""max_merge_at_once"": ""10"",
          ""max_merged_segment"": ""0b"",
          ""expunge_deletes_allowed"": ""10.0"",
          ""segments_per_tier"": ""10.0"",
          ""type"": ""UNSET"",
          ""deletes_pct_allowed"": ""20.0""
        }
      },
      ""max_refresh_listeners"": ""1000"",
      ""max_regex_length"": ""1000"",
      ""load_fixed_bitset_filters_eagerly"": ""true"",
      ""number_of_routing_shards"": ""1"",
      ""write"": {
        ""wait_for_active_shards"": ""1""
      },
      ""verified_before_close"": ""false"",
      ""mapping"": {
        ""coerce"": ""false"",
        ""nested_fields"": {
          ""limit"": ""50""
        },
        ""depth"": {
          ""limit"": ""20""
        },
        ""field_name_length"": {
          ""limit"": ""9223372036854775807""
        },
        ""nested_objects"": {
          ""limit"": ""10000""
        },
        ""ignore_malformed"": ""false"",
        ""dimension_fields"": {
          ""limit"": ""21""
        }
      },
      ""source_only"": ""false"",
      ""soft_deletes"": {
        ""enabled"": ""true"",
        ""retention"": {
          ""operations"": ""0""
        },
        ""retention_lease"": {
          ""period"": ""12h""
        }
      },
      ""max_script_fields"": ""32"",
      ""query"": {
        ""default_field"": [
          ""*""
        ],
        ""parse"": {
          ""allow_unmapped_fields"": ""true""
        }
      },
      ""format"": ""0"",
      ""frozen"": ""false"",
      ""sort"": {
        ""missing"": [],
        ""mode"": [],
        ""field"": [],
        ""order"": []
      },
      ""priority"": ""1"",
      ""routing_path"": [],
      ""version"": {
        ""compatibility"": ""8100399""
      },
      ""codec"": ""default"",
      ""max_rescore_window"": ""10000"",
      ""bloom_filter_for_id_field"": {
        ""enabled"": ""true""
      },
      ""max_adjacency_matrix_filters"": ""100"",
      ""analyze"": {
        ""max_token_count"": ""10000""
      },
      ""gc_deletes"": ""60s"",
      ""top_metrics_max_size"": ""10"",
      ""optimize_auto_generated_id"": ""true"",
      ""max_ngram_diff"": ""1"",
      ""hidden"": ""false"",
      ""translog"": {
        ""flush_threshold_age"": ""1m"",
        ""generation_threshold_size"": ""64mb"",
        ""flush_threshold_size"": ""10gb"",
        ""sync_interval"": ""5s"",
        ""retention"": {
          ""size"": ""-1"",
          ""age"": ""-1""
        },
        ""durability"": ""REQUEST""
      },
      ""auto_expand_replicas"": ""false"",
      ""fast_refresh"": ""false"",
      ""recovery"": {
        ""type"": """"
      },
      ""requests"": {
        ""cache"": {
          ""enable"": ""true""
        }
      },
      ""data_path"": """",
      ""highlight"": {
        ""max_analyzed_offset"": ""1000000"",
        ""weight_matches_mode"": {
          ""enabled"": ""true""
        }
      },
      ""routing"": {
        ""rebalance"": {
          ""enable"": ""all""
        },
        ""allocation"": {
          ""disk"": {
            ""watermark"": {
              ""ignore"": ""false""
            }
          },
          ""enable"": ""all"",
          ""total_shards_per_node"": ""-1""
        }
      },
      ""search"": {
        ""slowlog"": {
          ""level"": ""TRACE"",
          ""threshold"": {
            ""fetch"": {
              ""warn"": ""-1"",
              ""trace"": ""-1"",
              ""debug"": ""-1"",
              ""info"": ""-1""
            },
            ""query"": {
              ""warn"": ""-1"",
              ""trace"": ""-1"",
              ""debug"": ""-1"",
              ""info"": ""-1""
            }
          }
        },
        ""idle"": {
          ""after"": ""30s""
        },
        ""throttled"": ""false""
      },
      ""fielddata"": {
        ""cache"": ""node""
      },
      ""look_ahead_time"": ""2h"",
      ""default_pipeline"": ""_none"",
      ""max_slices_per_scroll"": ""1024"",
      ""shard"": {
        ""check_on_startup"": ""false""
      },
      ""xpack"": {
        ""watcher"": {
          ""template"": {
            ""version"": """"
          }
        },
        ""version"": """",
        ""ccr"": {
          ""following_index"": ""false""
        }
      },
      ""percolator"": {
        ""map_unmapped_fields_as_text"": ""false""
      },
      ""allocation"": {
        ""max_retries"": ""5"",
        ""existing_shards_allocator"": ""gateway_allocator""
      },
      ""refresh_interval"": ""1s"",
      ""indexing"": {
        ""slowlog"": {
          ""reformat"": ""true"",
          ""threshold"": {
            ""index"": {
              ""warn"": ""-1"",
              ""trace"": ""-1"",
              ""debug"": ""-1"",
              ""info"": ""-1""
            }
          },
          ""source"": ""1000"",
          ""level"": ""TRACE""
        }
      },
      ""compound_format"": ""1gb"",
      ""blocks"": {
        ""metadata"": ""false"",
        ""read"": ""false"",
        ""read_only_allow_delete"": ""false"",
        ""read_only"": ""false"",
        ""write"": ""false""
      },
      ""max_result_window"": ""10000"",
      ""store"": {
        ""stats_refresh_interval"": ""10s"",
        ""type"": """",
        ""fs"": {
          ""fs_lock"": ""native""
        },
        ""preload"": [],
        ""snapshot"": {
          ""snapshot_name"": """",
          ""index_uuid"": """",
          ""cache"": {
            ""prewarm"": {
              ""enabled"": ""true""
            },
            ""enabled"": ""true"",
            ""excluded_file_types"": []
          },
          ""repository_uuid"": """",
          ""uncached_chunk_size"": ""-1b"",
          ""delete_searchable_snapshot"": ""false"",
          ""index_name"": """",
          ""partial"": ""false"",
          ""blob_cache"": {
            ""metadata_files"": {
              ""max_length"": ""64kb""
            }
          },
          ""repository_name"": """",
          ""snapshot_uuid"": """"
        }
      },
      ""queries"": {
        ""cache"": {
          ""enabled"": ""true""
        }
      },
      ""shard_limit"": {
        ""group"": ""normal""
      },
      ""warmer"": {
        ""enabled"": ""true""
      },
      ""downsample"": {
        ""origin"": {
          ""name"": """",
          ""uuid"": """"
        },
        ""source"": {
          ""name"": """",
          ""uuid"": """"
        },
        ""status"": ""unknown""
      },
      ""override_write_load_forecast"": ""0.0"",
      ""max_shingle_diff"": ""3"",
      ""query_string"": {
        ""lenient"": ""false""
      }
    }
  }
}

----  stats.json. ----

{
  ""_shards"": {
    ""total"": 2,
    ""successful"": 1,
    ""failed"": 0
  },
  ""stats"": {
    ""uuid"": ""9e3_sqY_QEyycgg21BNQHA"",
    ""health"": ""yellow"",
    ""status"": ""open"",
    ""primaries"": {
      ""docs"": {
        ""count"": 3019416,
        ""deleted"": 2246
      },
      ""shard_stats"": {
        ""total_count"": 1
      },
      ""store"": {
        ""size_in_bytes"": 59698292351,
        ""total_data_set_size_in_bytes"": 59698292351,
        ""reserved_in_bytes"": 0
      },
      ""indexing"": {
        ""index_total"": 0,
        ""index_time_in_millis"": 0,
        ""index_current"": 0,
        ""index_failed"": 0,
        ""delete_total"": 0,
        ""delete_time_in_millis"": 0,
        ""delete_current"": 0,
        ""noop_update_total"": 0,
        ""is_throttled"": false,
        ""throttle_time_in_millis"": 0,
        ""write_load"": 0
      },
      ""get"": {
        ""total"": 0,
        ""time_in_millis"": 0,
        ""exists_total"": 0,
        ""exists_time_in_millis"": 0,
        ""missing_total"": 0,
        ""missing_time_in_millis"": 0,
        ""current"": 0
      },
      ""search"": {
        ""open_contexts"": 0,
        ""query_total"": 1,
        ""query_time_in_millis"": 1,
        ""query_current"": 0,
        ""fetch_total"": 1,
        ""fetch_time_in_millis"": 0,
        ""fetch_current"": 0,
        ""scroll_total"": 0,
        ""scroll_time_in_millis"": 0,
        ""scroll_current"": 0,
        ""suggest_total"": 0,
        ""suggest_time_in_millis"": 0,
        ""suggest_current"": 0
      },
      ""merges"": {
        ""current"": 0,
        ""current_docs"": 0,
        ""current_size_in_bytes"": 0,
        ""total"": 0,
        ""total_time_in_millis"": 0,
        ""total_docs"": 0,
        ""total_size_in_bytes"": 0,
        ""total_stopped_time_in_millis"": 0,
        ""total_throttled_time_in_millis"": 0,
        ""total_auto_throttle_in_bytes"": 20971520
      },
      ""refresh"": {
        ""total"": 2,
        ""total_time_in_millis"": 0,
        ""external_total"": 2,
        ""external_total_time_in_millis"": 1,
        ""listeners"": 0
      },
      ""flush"": {
        ""total"": 0,
        ""periodic"": 0,
        ""total_time_in_millis"": 0
      },
      ""warmer"": {
        ""current"": 0,
        ""total"": 1,
        ""total_time_in_millis"": 1
      },
      ""query_cache"": {
        ""memory_size_in_bytes"": 0,
        ""total_count"": 0,
        ""hit_count"": 0,
        ""miss_count"": 0,
        ""cache_size"": 0,
        ""cache_count"": 0,
        ""evictions"": 0
      },
      ""fielddata"": {
        ""memory_size_in_bytes"": 0,
        ""evictions"": 0,
        ""global_ordinals"": {
          ""build_time_in_millis"": 0
        }
      },
      ""completion"": {
        ""size_in_bytes"": 0
      },
      ""segments"": {
        ""count"": 40,
        ""memory_in_bytes"": 0,
        ""terms_memory_in_bytes"": 0,
        ""stored_fields_memory_in_bytes"": 0,
        ""term_vectors_memory_in_bytes"": 0,
        ""norms_memory_in_bytes"": 0,
        ""points_memory_in_bytes"": 0,
        ""doc_values_memory_in_bytes"": 0,
        ""index_writer_memory_in_bytes"": 0,
        ""version_map_memory_in_bytes"": 0,
        ""fixed_bit_set_memory_in_bytes"": 0,
        ""max_unsafe_auto_id_timestamp"": -1,
        ""file_sizes"": {}
      },
      ""translog"": {
        ""operations"": 0,
        ""size_in_bytes"": 55,
        ""uncommitted_operations"": 0,
        ""uncommitted_size_in_bytes"": 55,
        ""earliest_last_modified_age"": 192143
      },
      ""request_cache"": {
        ""memory_size_in_bytes"": 616,
        ""evictions"": 0,
        ""hit_count"": 0,
        ""miss_count"": 1
      },
      ""recovery"": {
        ""current_as_source"": 0,
        ""current_as_target"": 0,
        ""throttle_time_in_millis"": 0
      },
      ""bulk"": {
        ""total_operations"": 0,
        ""total_time_in_millis"": 0,
        ""total_size_in_bytes"": 0,
        ""avg_time_in_millis"": 0,
        ""avg_size_in_bytes"": 0
      },
      ""dense_vector"": {
        ""value_count"": 0
      }
    },
    ""total"": {
      ""docs"": {
        ""count"": 3019416,
        ""deleted"": 2246
      },
      ""shard_stats"": {
        ""total_count"": 1
      },
      ""store"": {
        ""size_in_bytes"": 59698292351,
        ""total_data_set_size_in_bytes"": 59698292351,
        ""reserved_in_bytes"": 0
      },
      ""indexing"": {
        ""index_total"": 0,
        ""index_time_in_millis"": 0,
        ""index_current"": 0,
        ""index_failed"": 0,
        ""delete_total"": 0,
        ""delete_time_in_millis"": 0,
        ""delete_current"": 0,
        ""noop_update_total"": 0,
        ""is_throttled"": false,
        ""throttle_time_in_millis"": 0,
        ""write_load"": 0
      },
      ""get"": {
        ""total"": 0,
        ""time_in_millis"": 0,
        ""exists_total"": 0,
        ""exists_time_in_millis"": 0,
        ""missing_total"": 0,
        ""missing_time_in_millis"": 0,
        ""current"": 0
      },
      ""search"": {
        ""open_contexts"": 0,
        ""query_total"": 1,
        ""query_time_in_millis"": 1,
        ""query_current"": 0,
        ""fetch_total"": 1,
        ""fetch_time_in_millis"": 0,
        ""fetch_current"": 0,
        ""scroll_total"": 0,
        ""scroll_time_in_millis"": 0,
        ""scroll_current"": 0,
        ""suggest_total"": 0,
        ""suggest_time_in_millis"": 0,
        ""suggest_current"": 0
      },
      ""merges"": {
        ""current"": 0,
        ""current_docs"": 0,
        ""current_size_in_bytes"": 0,
        ""total"": 0,
        ""total_time_in_millis"": 0,
        ""total_docs"": 0,
        ""total_size_in_bytes"": 0,
        ""total_stopped_time_in_millis"": 0,
        ""total_throttled_time_in_millis"": 0,
        ""total_auto_throttle_in_bytes"": 20971520
      },
      ""refresh"": {
        ""total"": 2,
        ""total_time_in_millis"": 0,
        ""external_total"": 2,
        ""external_total_time_in_millis"": 1,
        ""listeners"": 0
      },
      ""flush"": {
        ""total"": 0,
        ""periodic"": 0,
        ""total_time_in_millis"": 0
      },
      ""warmer"": {
        ""current"": 0,
        ""total"": 1,
        ""total_time_in_millis"": 1
      },
      ""query_cache"": {
        ""memory_size_in_bytes"": 0,
        ""total_count"": 0,
        ""hit_count"": 0,
        ""miss_count"": 0,
        ""cache_size"": 0,
        ""cache_count"": 0,
        ""evictions"": 0
      },
      ""fielddata"": {
        ""memory_size_in_bytes"": 0,
        ""evictions"": 0,
        ""global_ordinals"": {
          ""build_time_in_millis"": 0
        }
      },
      ""completion"": {
        ""size_in_bytes"": 0
      },
      ""segments"": {
        ""count"": 40,
        ""memory_in_bytes"": 0,
        ""terms_memory_in_bytes"": 0,
        ""stored_fields_memory_in_bytes"": 0,
        ""term_vectors_memory_in_bytes"": 0,
        ""norms_memory_in_bytes"": 0,
        ""points_memory_in_bytes"": 0,
        ""doc_values_memory_in_bytes"": 0,
        ""index_writer_memory_in_bytes"": 0,
        ""version_map_memory_in_bytes"": 0,
        ""fixed_bit_set_memory_in_bytes"": 0,
        ""max_unsafe_auto_id_timestamp"": -1,
        ""file_sizes"": {}
      },
      ""translog"": {
        ""operations"": 0,
        ""size_in_bytes"": 55,
        ""uncommitted_operations"": 0,
        ""uncommitted_size_in_bytes"": 55,
        ""earliest_last_modified_age"": 192143
      },
      ""request_cache"": {
        ""memory_size_in_bytes"": 616,
        ""evictions"": 0,
        ""hit_count"": 0,
        ""miss_count"": 1
      },
      ""recovery"": {
        ""current_as_source"": 0,
        ""current_as_target"": 0,
        ""throttle_time_in_millis"": 0
      },
      ""bulk"": {
        ""total_operations"": 0,
        ""total_time_in_millis"": 0,
        ""total_size_in_bytes"": 0,
        ""avg_time_in_millis"": 0,
        ""avg_size_in_bytes"": 0
      },
      ""dense_vector"": {
        ""value_count"": 0
      }
    }
  }
}


### Logs (if relevant)

java.lang.NoClassDefFoundError: org/bouncycastle/cms/CMSException
	at java.lang.Class.getDeclaredConstructors0(Native Method) ~[?:?]
	at java.lang.Class.privateGetDeclaredConstructors(Class.java:3549) ~[?:?]
	at java.lang.Class.getConstructor0(Class.java:3754) ~[?:?]
	at java.lang.Class.getDeclaredConstructor(Class.java:2930) ~[?:?]
	at org.apache.pdfbox.pdmodel.encryption.SecurityHandlerFactory.newSecurityHandler(SecurityHandlerFactory.java:132) ~[?:?]
	at org.apache.pdfbox.pdmodel.encryption.SecurityHandlerFactory.newSecurityHandlerForFilter(SecurityHandlerFactory.java:116) ~[?:?]
	at org.apache.pdfbox.pdmodel.encryption.PDEncryption.<init>(PDEncryption.java:97) ~[?:?]
	at org.apache.pdfbox.pdfparser.COSParser.prepareDecryption(COSParser.java:2974) ~[?:?]
	at org.apache.pdfbox.pdfparser.COSParser.retrieveTrailer(COSParser.java:285) ~[?:?]
	at org.apache.pdfbox.pdfparser.PDFParser.initialParse(PDFParser.java:173) ~[?:?]
	at org.apache.pdfbox.pdfparser.PDFParser.parse(PDFParser.java:226) ~[?:?]
	at org.apache.pdfbox.pdmodel.PDDocument.load(PDDocument.java:1232) ~[?:?]
	at org.apache.pdfbox.pdmodel.PDDocument.load(PDDocument.java:1206) ~[?:?]
	at org.apache.tika.parser.pdf.PDFParser.getPDDocument(PDFParser.java:317) ~[?:?]
	at org.apache.tika.parser.pdf.PDFParser.parse(PDFParser.java:172) ~[?:?]
	at org.apache.tika.parser.CompositeParser.parse(CompositeParser.java:298) ~[?:?]
	at org.apache.tika.parser.AutoDetectParser.parse(AutoDetectParser.java:195) ~[?:?]
	at org.apache.tika.Tika.parseToString(Tika.java:525) ~[?:?]
	at org.elasticsearch.ingest.attachment.TikaImpl.lambda$parse$0(TikaImpl.java:97) ~[?:?]
	at java.security.AccessController.doPrivileged(AccessController.java:714) ~[?:?]
	at org.elasticsearch.ingest.attachment.TikaImpl.parse(TikaImpl.java:96) ~[?:?]
	at org.elasticsearch.ingest.attachment.AttachmentProcessor.execute(AttachmentProcessor.java:121) ~[?:?]
	at org.elasticsearch.ingest.CompoundProcessor.innerExecute(CompoundProcessor.java:163) ~[elasticsearch-8.10.4.jar:?]
	at org.elasticsearch.ingest.CompoundProcessor.execute(CompoundProcessor.java:139) ~[elasticsearch-8.10.4.jar:?]
	at org.elasticsearch.ingest.Pipeline.execute(Pipeline.java:112) ~[elasticsearch-8.10.4.jar:?]
	at org.elasticsearch.ingest.IngestDocument.executePipeline(IngestDocument.java:853) ~[elasticsearch-8.10.4.jar:?]
	at org.elasticsearch.ingest.IngestService.executePipeline(IngestService.java:951) ~[elasticsearch-8.10.4.jar:?]
	at org.elasticsearch.ingest.IngestService.executePipelines(IngestService.java:827) ~[elasticsearch-8.10.4.jar:?]
	at org.elasticsearch.ingest.IngestService$1.doRun(IngestService.java:721) ~[elasticsearch-8.10.4.jar:?]
	at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:26) ~[elasticsearch-8.10.4.jar:?]
	at org.elasticsearch.common.util.concurrent.TimedRunnable.doRun(TimedRunnable.java:33) ~[elasticsearch-8.10.4.jar:?]
	at org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:983) ~[elasticsearch-8.10.4.jar:?]
	at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:26) ~[elasticsearch-8.10.4.jar:?]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[?:?]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[?:?]
	at java.lang.Thread.run(Thread.java:1583) ~[?:?]",Franco901,closed,"['>bug', ':Data Management/Ingest Node', 'Team:Data Management']",https://github.com/elastic/elasticsearch/issues/101307,2023-10-25T11:16:13Z,6,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/101307,"{
  ""application_resource"": ""unsure""
}"
146,101271,Too long instrument names trigger opentelemetry validation,"### Elasticsearch Version

8.12

### Installed Plugins

_No response_

### Java Version

_bundled_

### OS Version

Any

### Problem Description

OTel validation checks instrument names upon creation, and if they do not pass validation, it (seemingly - if you trust the error message) return a noop instrument.

Problem is, the character limit for the names is very low (63 chars) and we already have at least one in the codebase that triggers validation.

Example stack trace:
```
Instrument name ""elasticsearch.blob_cache.miss_that_triggered_read_from_blob_store"" is invalid, returning noop instrument. Instrument names must consist of 63 or fewer characters including alphanumeric, _, ., -, and start with a letter. java.lang.AssertionError
  1>    at io.opentelemetry.api@1.17.0/io.opentelemetry.api.internal.ValidationUtil.log(ValidationUtil.java:55)
  1>    at io.opentelemetry.api@1.17.0/io.opentelemetry.api.internal.ValidationUtil.checkValidInstrumentName(ValidationUtil.java:72)
  1>    at io.opentelemetry.api@1.17.0/io.opentelemetry.api.internal.ValidationUtil.checkValidInstrumentName(ValidationUtil.java:61)
  1>    at io.opentelemetry.api@1.17.0/io.opentelemetry.api.metrics.DefaultMeter.counterBuilder(DefaultMeter.java:42)
  1>    at org.elasticsearch.telemetry.apm@8.12.0-SNAPSHOT/org.elasticsearch.telemetry.apm.internal.metrics.LongCounterAdapter.buildInstrument(LongCounterAdapter.java:30)
  1>    at org.elasticsearch.telemetry.apm@8.12.0-SNAPSHOT/org.elasticsearch.telemetry.apm.internal.metrics.LongCounterAdapter.buildInstrument(LongCounterAdapter.java:22)
  1>    at org.elasticsearch.telemetry.apm@8.12.0-SNAPSHOT/org.elasticsearch.telemetry.apm.AbstractInstrument.lambda$doBuildInstrument$0(AbstractInstrument.java:41)
  1>    at java.base/java.security.AccessController.doPrivileged(AccessController.java:318)
  1>    at org.elasticsearch.telemetry.apm@8.12.0-SNAPSHOT/org.elasticsearch.telemetry.apm.AbstractInstrument.doBuildInstrument(AbstractInstrument.java:41)
  1>    at org.elasticsearch.telemetry.apm@8.12.0-SNAPSHOT/org.elasticsearch.telemetry.apm.AbstractInstrument.<init>(AbstractInstrument.java:37)
  1>    at org.elasticsearch.telemetry.apm@8.12.0-SNAPSHOT/org.elasticsearch.telemetry.apm.internal.metrics.LongCounterAdapter.<init>(LongCounterAdapter.java:25)
  1>    at org.elasticsearch.telemetry.apm@8.12.0-SNAPSHOT/org.elasticsearch.telemetry.apm.APMMeterRegistry.registerLongCounter(APMMeterRegistry.java:114)
  1>    at org.elasticsearch.stateless@8.12.0-SNAPSHOT/co.elastic.elasticsearch.stateless.Stateless.createComponents(Stateless.java:488)
  1>    at org.elasticsearch.server@8.12.0-SNAPSHOT/org.elasticsearch.node.NodeConstruction.lambda$construct$16(NodeConstruction.java:743)
```

### Steps to Reproduce

Run `:libs:serverless-build-info:yamlRestTest`, suite: `co.elastic.elasticsearch.serverless.buildinfo.ServerlessBuildInfoIT` and examine logs

### Logs (if relevant)

_No response_",ldematte,closed,"['>bug', 'needs:triage']",https://github.com/elastic/elasticsearch/issues/101271,2023-10-24T14:36:37Z,1,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/101271,"{
  ""application_resource"": ""no""
}"
147,101191,:libs:elasticsearch-x-content:generateProviderImpl failed: path too long,"I don't seem to get a build scan out of this, but after running various builds a few times I got this error:

```
:libs:elasticsearch-x-content:generateProviderImpl (Thread[Execution worker,5,main]) started.
Detected overflow for /Users/davidturner/src/elasticsearch-main/libs/x-content/build/generated-resources/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content
Overflow detected (type: OPERATING_SYSTEM) for watched path '/Users/davidturner/src/elasticsearch-main/libs/x-content/build/generated-resources/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content', invalidating

> Task :libs:elasticsearch-x-content:generateProviderImpl FAILED
Caching disabled for task ':libs:elasticsearch-x-content:generateProviderImpl' because:
  Build cache is disabled
  Not worth caching
Task ':libs:elasticsearch-x-content:generateProviderImpl' is not up-to-date because:
  Task has failed previously.

FAILURE: Build failed with an exception.

* What went wrong:
Execution failed for task ':libs:elasticsearch-x-content:generateProviderImpl'.
> Could not copy file '/Users/davidturner/src/elasticsearch-main/libs/x-content/build/generated-resources/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/jackson-dataformat-smile-2.15.0.jar/META-INF' to '/Users/davidturner/src/elasticsearch-main/libs/x-content/build/generated-resources/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/jackson-dataformat-smile-2.15.0.jar/META-INF'.
   > Failed to create directory '/Users/davidturner/src/elasticsearch-main/libs/x-content/build/generated-resources/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/impl/IMPL-JARS/x-content/jackson-dataformat-smile-2.15.0.jar/META-INF'

* Try:
> Run with --stacktrace option to get the stack trace.
> Run with --debug option to get more log output.
> Get more help at https://help.gradle.org.

BUILD FAILED in 4s
26 actionable tasks: 1 executed, 25 up-to-date
```

A `./gradlew clean` fixed it for me. I'm on a small PR branch based on a recent main (9794c6e205e6070f1930725f7833e3e8fa18fc6a), with no build-system changes in the PR.",DaveCTurner,closed,"['>bug', ':Delivery/Build', 'Team:Delivery']",https://github.com/elastic/elasticsearch/issues/101191,2023-10-21T11:16:36Z,1,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/101191,"{
  ""application_resource"": ""no""
}"
148,100975,Elasticsearch returning less than k results for a knn search and returns negative document scores,"### Elasticsearch Version

8.10.3

### Installed Plugins

_No response_

### Java Version

_bundled_

### OS Version

Linux ubuntu 5.15.0-48-generic

### Problem Description

Here's the case:

I have an index where the textEmbedding field has the following mapping:
```
""textEmbedding"": {
  ""type"": ""dense_vector"",
   ""dims"": 1536,
   ""index"": true,
   ""similarity"": ""cosine""
 }
```
The index contains two documents.

Document 1:
```
{
  ""_index"": ""test_index_c64dcf58"",
  ""_id"": ""author1"",
  ""_source"": {
    ""id"": ""author1"",
    // .....
    ""textEmbedding"": [
      -0.888888,
      -0.888888,
      // and so on... (they all are the same NEGATIVE number: -0.888888)
    ]
  }
}
```
Document 2:
```
{
  ""_index"": ""test_index_c64dcf58"",
  ""_id"": ""author2"",
  ""_source"": {
    ""id"": ""author2"",
    // .....
    ""textEmbedding"": [
      0.888888,
      0.888888,
      // and so on... (they all are the same POSITIVE number: 0.888888)
    ]
  }
}
```

When doing the following search:
```
GET /test_index_c64dcf58/_search
{
  ""size"": 10,
  ""from"": 0,
  ""knn"": {
    ""field"": ""textEmbedding"",
    ""k"": 10,
    ""num_candidates"": 100,
    ""query_vector"": [
      -0.777777,
      -0.777777,
      ...and so on...
    ],
    ""filter"": {
      ""bool"": {
        ""must"": [],
        ""must_not"": []
      }
    }
  },
  ""aggs"": {}
}
```
**I am getting the following actual behaviour:**
I only get one of the two documents, namely the document with the negative vector values. It turns out that if I remove the filter section then both results are returned again. However after removing the empty filter clause the second document is returned but gets a score of: -1.7881393e-7.

**The expected behaviour is:**
- Regardless of the empty filter clause both documents should be returned
- No negative scores should be returned.

**versions**
I know this problem has been introduced somewhere between version 8.8.3 and 8.10.3.



### Steps to Reproduce

The problem description contains the steps to reproduce. Basically:

- Create an index with a mapping for a textEmbedding field as shown in the problem description
- Add a document with a textEmbedding field where each vector value is -0.888888 (negative)
- Add another document with a textEmbedding field where each vector values is 0.888888 (postive)
- Run the query as shown in the problem description.

### Logs (if relevant)

_No response_",sbruinsje,closed,"['>bug', ':Search Relevance/Vectors', 'Team:Search Relevance']",https://github.com/elastic/elasticsearch/issues/100975,2023-10-17T14:00:01Z,14,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/100975,"{
  ""application_resource"": ""unsure""
}"
149,100755,Critical lucene LRUQueryCache bug may cause  query cache evict all cached item,"### Elasticsearch Version

8.9.0

### Installed Plugins

_No response_

### Java Version

_bundled_

### OS Version

Linux 3.10.0-514.21.1.el7.x86_64 #1 SMP Thu May 25 17:04:51 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux

### BUG Affected versions
from Elasticsearch 8.0.0
from Lucene 9.0.0

### Problem Description

Refer to Lucene 9.7.0 [bug#12614 ](https://github.com/apache/lucene/pull/12614).

Recently we upgrade our es cluster from 7.1.1 to 8.9.0, but we got lots of slow query logs after running for a few days.
We obtained some slow query requests from the log and analyzed them by the profile api. We found that we could not reproduce the problem by profile api which search cost is smaller than 10ms. But when we search dsl normal without profile, search cost will be 200ms above.

Therefore, we checked some monitoring indicators on grafana and found that there was an abnormality in the query cache.
(to reproduce problem, we set the `indices.queries.cache.size` to 350mb):
ramBytesUsed:
<img width=""708"" alt=""image"" src=""https://github.com/elastic/elasticsearch/assets/7888889/2d0e9552-2435-410f-821a-7cda4594e640"">
<img width=""711"" alt=""image"" src=""https://github.com/elastic/elasticsearch/assets/7888889/340b7dc8-277e-4039-bf7f-6bde64216323"">
<img width=""722"" alt=""image"" src=""https://github.com/elastic/elasticsearch/assets/7888889/cddae1d9-6cbb-4883-b7f6-b0fa039b92fe"">

Search time cost: 
<img width=""1470"" alt=""image"" src=""https://github.com/elastic/elasticsearch/assets/7888889/0ee2fc8f-4b6a-4e7f-ab7d-4f34d793990a"">


We have identified the cause and fixed the issue in our cluster. The root of the problem lies in the above-mentioned Lucene [bug#12614 ](https://github.com/apache/lucene/pull/12614).

Lucene Bug Explain:
The class `ElasticsearchLRUQueryCache` inherits from Lucene's `LRUQueryCache`.  `LRUQueryCache` has two conditions that trigger cache eviction:
* `indices.queries.cache.size`, default 10% of jvm heap size.
*  `indices.queries.cache.count`, default 10_000
If any condition is met, cache eviction will be triggered. But lucene failed to calculate `ramBytesUsed` correctly. 

When putting a `query` and `cached` into LRUQueryCache. The `query` which is Accountable will be `((Accountable) query).ramBytesUsed()`, or it will be a constant `QUERY_DEFAULT_RAM_BYTES_USED` size.
```
  private void putIfAbsent(Query query, CacheAndCount cached, IndexReader.CacheHelper cacheHelper) {
    assert query instanceof BoostQuery == false;
    assert query instanceof ConstantScoreQuery == false;
    // under a lock to make sure that mostRecentlyUsedQueries and cache remain sync'ed
    lock.lock();
    try {
      Query singleton = uniqueQueries.putIfAbsent(query, query);
      if (singleton == null) {
        if (query instanceof Accountable) {
          onQueryCache(
              query, LINKED_HASHTABLE_RAM_BYTES_PER_ENTRY + ((Accountable) query).ramBytesUsed());
        } else {
          onQueryCache(query, LINKED_HASHTABLE_RAM_BYTES_PER_ENTRY + QUERY_DEFAULT_RAM_BYTES_USED);
        }
      } else {
        query = singleton;
      }
      final IndexReader.CacheKey key = cacheHelper.getKey();
      LeafCache leafCache = cache.get(key);
      if (leafCache == null) {
        leafCache = new LeafCache(key);
        final LeafCache previous = cache.put(key, leafCache);
        ramBytesUsed += HASHTABLE_RAM_BYTES_PER_ENTRY;
        assert previous == null;
        // we just created a new leaf cache, need to register a close listener
        cacheHelper.addClosedListener(this::clearCoreCacheKey);
      }
      leafCache.putIfAbsent(query, cached);
      evictIfNecessary();
    } finally {
      lock.unlock();
    }
  }
```

But on cache eviction it only counts constant `QUERY_DEFAULT_RAM_BYTES_USED` which is smaller than `ramBytesUsed`.

The result of long-running cache eviction is that the cache is actually empty, but `ramBytesUsed` is still larger than `indices.queries.cache.size`. Even if the cache is cleared, the cache eviction conditions are still met. That means no any item will be cached anymore.

slow logs dsl example:
```
{""from"":0,""size"":8,""query"":{""bool"":{""filter"":[{""terms"":{""status"":[""active"",""blocked"",""soft_blocked""],""boost"":1}},{""term"":{""visitor"":{""value"":0}}},{""term"":{""account_off"":{""value"":0}}},{""terms"":{""user_role"":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20],""boost"":1}}],""should"":[{""constant_score"":{""filter"":{""term"":{""nickname.keyword"":{""value"":""yin‚ÄÜy""}}},""boost"":5}},{""constant_score"":{""filter"":{""match_phrase_prefix"":{""nickname.single"":{""query"":""yin‚ÄÜy""}}},""boost"":5}},{""constant_score"":{""filter"":{""match"":{""nickname.single"":{""query"":""yin‚ÄÜy"",""minimum_should_match"":""100%""}}},""boost"":1}},{""constant_score"":{""filter"":{""match_phrase"":{""nickname.pinyin"":{""query"":""yin‚ÄÜy""}}},""boost"":1}},{""constant_score"":{""filter"":{""term"":{""role"":{""value"":""AUTHOR""}}},""boost"":0.5}}],""minimum_should_match"":""1"",""boost"":1}},""_source"":{""includes"":[""id"",""nickname"",""is_official"",""user_role""],""excludes"":[]},""sort"":[{""_score"":{""order"":""desc""}},{""follower_count"":{""order"":""desc""}}]}
```

### Steps to Reproduce

1. Set `indices.queries.cache.size` to 350mb.
2. Set `indices.queries.cache.count` to default value.
3. Construct a query with terms in filters dsl, or any dsl will be cached by elasticsearch.
4. Full fill the query cache.
5. Trigger cache eviction for some hours to reproduce the bug.

### Logs (if relevant)

_No response_",psc0606,closed,"['>bug', ':Search/Search', 'Team:Search']",https://github.com/elastic/elasticsearch/issues/100755,2023-10-12T09:27:22Z,10,https://api.github.com/repos/elastic/elasticsearch,https://github.com/elastic/elasticsearch/issues/100755,"{
  ""application_resource"": ""yes""
}"
